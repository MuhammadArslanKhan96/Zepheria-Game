{"version":3,"file":"index-e8f261ec.js","sources":["../../src/lib/log.ts","../../../../../../../../../@vite-plugin-pwa/virtual:pwa-register","../../src/lib/pwa.ts","../../src/utils/detect.ts","../../../common/network/opcodes.ts","../../../common/network/modules.ts","../../../common/network/packets.ts","../../src/utils/storage.ts","../../src/utils/press.ts","../../src/entity/animation.ts","../../src/entity/sprite.ts","../../src/utils/util.ts","../../src/app.ts","../../src/controllers/audio.ts","../../src/utils/timer.ts","../../../../node_modules/jquery/dist/jquery.js","../../src/renderer/bubbles/blob.ts","../../src/controllers/bubble.ts","../../src/entity/character/handler.ts","../../src/utils/transition.ts","../../src/entity/entity.ts","../../src/entity/character/character.ts","../../src/entity/character/mob/mob.ts","../../src/entity/npc/npc.ts","../../src/entity/character/player/task.ts","../../src/entity/character/player/skill.ts","../../src/entity/character/player/ability.ts","../../src/entity/character/player/friend.ts","../../src/entity/character/player/equipment/equipment.ts","../../src/entity/character/player/equipment/armour.ts","../../src/entity/character/player/equipment/armourskin.ts","../../src/entity/character/player/equipment/boots.ts","../../src/entity/character/player/equipment/pendant.ts","../../src/entity/character/player/equipment/ring.ts","../../src/entity/character/player/equipment/weapon.ts","../../src/entity/character/player/equipment/weaponskin.ts","../../src/entity/character/player/equipment/arrows.ts","../../src/entity/character/player/player.ts","../../src/entity/objects/chest.ts","../../src/entity/objects/item.ts","../../src/entity/objects/projectile.ts","../../src/renderer/grids.ts","../../src/controllers/entities.ts","../../src/renderer/infos/splat.ts","../../src/controllers/info.ts","../../src/controllers/chat.ts","../../src/controllers/hud.ts","../../src/controllers/input.ts","../../src/menu/menu.ts","../../src/menu/actions.ts","../../src/menu/inventory.ts","../../src/menu/bank.ts","../../src/menu/store.ts","../../src/menu/header.ts","../../src/utils/tooltip.ts","../../src/menu/profile/impl/state.ts","../../src/menu/profile/impl/abilities.ts","../../src/menu/profile/impl/skills.ts","../../src/menu/profile/profile.ts","../../src/menu/enchant.ts","../../src/menu/warp.ts","../../src/menu/notification.ts","../../src/menu/settings.ts","../../src/menu/equipments.ts","../../src/menu/achievements.ts","../../src/menu/quests.ts","../../src/menu/friends.ts","../../src/menu/trade.ts","../../src/menu/interact.ts","../../src/menu/leaderboards.ts","../../src/menu/guilds.ts","../../src/menu/leaderboards-footer.ts","../../src/menu/crafting.ts","../../src/controllers/menu.ts","../../src/renderer/pointers/arrow.ts","../../src/controllers/pointer.ts","../../src/controllers/sprites.ts","../../src/controllers/zoning.ts","../../src/entity/character/player/handler.ts","../../src/map/map.ts","../../../../node_modules/pako/dist/pako.esm.mjs","../../src/network/connection.ts","../../src/network/messages.ts","../../src/network/socket.ts","../../src/renderer/camera.ts","../../src/renderer/minigame.ts","../../src/renderer/overlays.ts","../../src/renderer/webgl/shader.ts","../../src/renderer/webgl/tileset.ts","../../src/renderer/webgl/layer.ts","../../src/renderer/tile.ts","../../../../node_modules/illuminated/dist/illuminated.mjs","../../src/renderer/renderer.ts","../../src/renderer/webgl/webgl.ts","../../src/renderer/canvas.ts","../../src/renderer/updater.ts","../../src/lib/astar.ts","../../src/utils/pathfinder.ts","../../src/game.ts","../../../../node_modules/@sentry/utils/esm/is.js","../../../../node_modules/@sentry/utils/esm/worldwide.js","../../../../node_modules/@sentry/utils/esm/logger.js","../../../../node_modules/@sentry/utils/esm/object.js","../../../../node_modules/@sentry/utils/esm/stacktrace.js","../../../../node_modules/@sentry/utils/esm/supports.js","../../../../node_modules/@sentry/utils/esm/instrument.js","../../../../node_modules/@sentry/utils/esm/misc.js","../../../../node_modules/@sentry/utils/esm/env.js","../../../../node_modules/@sentry/utils/esm/node.js","../../../../node_modules/@sentry/utils/esm/syncpromise.js","../../../../node_modules/@sentry/utils/esm/url.js","../../../../node_modules/@sentry/utils/esm/requestdata.js","../../../../node_modules/@sentry/utils/esm/time.js","../../../../node_modules/@sentry/core/esm/constants.js","../../../../node_modules/@sentry/core/esm/session.js","../../../../node_modules/@sentry/core/esm/scope.js","../../../../node_modules/@sentry/core/esm/hub.js","../../../../node_modules/@sentry/core/esm/utils/hasTracingEnabled.js","../../../../node_modules/@sentry/core/esm/tracing/utils.js","../../../../node_modules/@sentry/core/esm/tracing/errors.js","../../../../node_modules/@sentry/core/esm/tracing/span.js","../../../../node_modules/@sentry/core/esm/tracing/transaction.js","../../../../node_modules/@sentry/core/esm/tracing/idletransaction.js","../../../../node_modules/@sentry/core/esm/tracing/hubextensions.js","../../../../node_modules/@sentry/utils/esm/buildPolyfills/_optionalChain.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/utils/node-utils.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/express.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/postgres.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/mysql.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/mongo.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/prisma.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/graphql.js","../../../../node_modules/@sentry-internal/tracing/esm/node/integrations/apollo.js","../../../../node_modules/@sentry-internal/tracing/esm/browser/types.js","../../../../node_modules/@sentry-internal/tracing/esm/browser/request.js","../../../../node_modules/@sentry-internal/tracing/esm/browser/router.js","../../../../node_modules/@sentry-internal/tracing/esm/browser/browsertracing.js","../../../../node_modules/@sentry-internal/tracing/esm/extensions.js","../../../../node_modules/@sentry/tracing/esm/index.js","../../src/main.ts"],"sourcesContent":["/**\n * A class that handles logging.\n *\n * @param level The level of logging to perform.\n */\nclass Logger {\n    public constructor(public level: 'debug' | 'info') {}\n\n    public info(...data: unknown[]): void {\n        if (this.level === 'debug' || this.level === 'info') console.info(...data);\n    }\n\n    public debug(...data: unknown[]): void {\n        if (this.level === 'debug') console.debug(...data);\n    }\n\n    public error(...data: unknown[]): void {\n        console.error(...data);\n    }\n}\n\nexport default new Logger(import.meta.env.DEV ? 'debug' : 'info');\n","// src/client/build/register.ts\nvar autoUpdateMode = \"true\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      await (sendSkipWaitingMessage == null ? void 0 : sendSkipWaitingMessage());\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      const { Workbox } = await import(\"workbox-window\");\n      wb = new Workbox(\"/sw.js\", { scope: \"/\", type: \"classic\" });\n      sendSkipWaitingMessage = async () => {\n        await (wb == null ? void 0 : wb.messageSkipWaiting());\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady == null ? void 0 : onOfflineReady();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh == null ? void 0 : onNeedRefresh();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && (onOfflineReady == null ? void 0 : onOfflineReady());\n              } else {\n                if (event.isExternal)\n                  window.location.reload();\n                else\n                  !onNeedRefreshCalled && (onOfflineReady == null ? void 0 : onOfflineReady());\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady == null ? void 0 : onOfflineReady();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n          wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/sw.js\", r);\n        else\n          onRegistered == null ? void 0 : onRegistered(r);\n      }).catch((e) => {\n        onRegisterError == null ? void 0 : onRegisterError(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\nexport {\n  registerSW\n};\n","import log from './log';\n\nimport { registerSW } from 'virtual:pwa-register';\n\n/**\n * The `BeforeInstallPromptEvent` is fired at the `Window.onbeforeinstallprompt` handler\n * before a user is prompted to \"install\" a web site to a home screen on mobile.\n */\ninterface BeforeInstallPromptEvent extends Event {\n    /**\n     * Returns an array of `DOMString` items containing the platforms on which the event was\n     * dispatched. This is provided for user agents that want to present a choice of versions\n     * to the user such as, for example, \"web\" or \"play\" which would allow the user to chose\n     * between a web version or an Android version.\n     */\n    readonly platforms: string[];\n\n    /**\n     * Returns a `Promise` that resolves to a `DOMString`\n     * containing either \"accepted\" or \"dismissed\".\n     */\n    readonly userChoice: Promise<{\n        outcome: 'accepted' | 'dismissed';\n        platform: string;\n    }>;\n\n    /**\n     * Allows a developer to show the install prompt at a time of their own choosing.\n     * This method returns a Promise.\n     */\n    prompt(): Promise<void>;\n}\ndeclare global {\n    interface WindowEventMap {\n        beforeinstallprompt: BeforeInstallPromptEvent;\n    }\n}\n\nlet deferredPrompt: BeforeInstallPromptEvent | null;\n\nexport default async function install(): Promise<void> {\n    if (!deferredPrompt) return;\n\n    if (localStorage.getItem('prompted') !== 'true')\n        await deferredPrompt.prompt().catch((error: Error) => log.error('[SW ERROR]', error));\n\n    let { outcome } = await deferredPrompt.userChoice;\n\n    localStorage.setItem('prompted', 'true');\n    if (outcome === 'accepted') {\n        // PWA has been installed\n    }\n    // User chose not to install PWA\n    else;\n\n    deferredPrompt = null;\n}\n\nfunction init(): void {\n    window.addEventListener('beforeinstallprompt', (event) => {\n        // Prevent Chrome 67 and earlier from automatically showing the prompt.\n        event.preventDefault();\n\n        deferredPrompt = event;\n    });\n\n    registerSW({ immediate: true });\n}\n\n// Check compatibility for the browser and environment we're running this in.\nif (import.meta.env.PROD && 'serviceWorker' in navigator) init();\n","export let agent = navigator.userAgent.toLowerCase();\n\nexport let isLargeScreen = (): boolean => window.innerWidth >= 1500;\n\nexport let isIPad = (): boolean => agent.includes('ipad');\n\nexport let isSafari = (): boolean => agent.includes('safari') && !agent.includes('chrome');\n\nexport let isEdge = (): boolean => agent.includes('edge/');\n\nexport function isTablet(): boolean {\n    let isAppleTablet = agent.includes('ipad'),\n        isAndroidTablet = agent.includes('android');\n\n    return (isAppleTablet || isAndroidTablet) && window.innerWidth >= 640;\n}\n\nexport let isMobile = (): boolean => window.innerWidth < 1000;\n\nexport function iOSVersion(): number | undefined {\n    let match = /os (\\d+)_(\\d+)_?(\\d+?)/.exec(agent);\n\n    if (match) {\n        let version = [\n            parseInt(match[1], 10),\n            parseInt(match[2], 10),\n            parseInt(match[3] || '0', 10)\n        ];\n\n        return parseFloat(version.join('.'));\n    }\n}\n\nexport function androidVersion(): number | undefined {\n    let split = agent.split('android');\n\n    if (split.length > 1) return parseFloat(split[1].split(';')[0]);\n}\n\nexport let isAppleDevice = (): boolean => agent.startsWith('ip');\n\n// Older mobile devices will default to non-centred camera mode\nexport function isOldAndroid(): boolean {\n    let version = androidVersion();\n\n    return !!version && version < 6;\n}\n\nexport function isOldApple(): boolean {\n    let version = iOSVersion();\n\n    return !!version && version < 9;\n}\n\nexport let useCenteredCamera = (): boolean => isOldAndroid() || isOldApple() || isIPad();\n","export enum Login {\n    Login,\n    Register,\n    Guest\n}\n\nexport enum List {\n    Spawns,\n    Positions\n}\n\nexport enum Equipment {\n    Batch,\n    Equip,\n    Unequip,\n    Style\n}\n\nexport enum Movement {\n    Request,\n    Started,\n    Step,\n    Stop,\n    Move,\n    Follow,\n    Entity,\n    Speed\n}\n\nexport enum Target {\n    Talk,\n    Attack,\n    None,\n    Object\n}\n\nexport enum Combat {\n    Initiate,\n    Hit,\n    Finish,\n    Sync\n}\n\nexport enum Projectile {\n    Static,\n    Dynamic,\n    Create,\n    Update,\n    Impact\n}\n\nexport enum Network {\n    Ping,\n    Pong\n}\n\nexport enum Container {\n    Batch,\n    Add,\n    Remove,\n    Select,\n    Swap\n}\n\nexport enum Ability {\n    Batch,\n    Add,\n    Update,\n    Use,\n    QuickSlot,\n    Toggle\n}\n\nexport enum Quest {\n    Batch,\n    Progress,\n    Finish\n}\n\nexport enum Achievement {\n    Batch,\n    Progress\n}\n\nexport enum Notification {\n    Ok,\n    YesNo,\n    Text,\n    Popup\n}\n\nexport enum Experience {\n    Sync,\n    Skill\n}\n\nexport enum NPC {\n    Talk,\n    Store,\n    Bank,\n    Enchant,\n    Countdown\n}\n\nexport enum Trade {\n    Request,\n    Add,\n    Remove,\n    Accept,\n    Close,\n    Open\n}\n\nexport enum Enchant {\n    Select,\n    Confirm\n}\n\nexport enum Guild {\n    Create,\n    Login,\n    Logout,\n    Join,\n    Leave,\n    Rank,\n    Update,\n    Experience,\n    Banner,\n    List,\n    Error,\n    Chat\n}\n\nexport enum Pointer {\n    Location, // Pointer on the map\n    Relative, // Pointer relative to the screen\n    Entity, // Pointer following an entity\n    Remove,\n    Button // Pointer for a button\n}\n\nexport enum Store {\n    Open,\n    Close,\n    Buy,\n    Sell,\n    Update,\n    Select\n}\n\nexport enum TeamWar {\n    Score,\n    End,\n    Lobby,\n    Exit\n}\n\nexport enum Overlay {\n    Set,\n    Remove,\n    Lamp,\n    RemoveLamps,\n    Darkness\n}\n\nexport enum Camera {\n    LockX,\n    LockY,\n    FreeFlow,\n    Player\n}\n\nexport enum Command {\n    CtrlClick\n}\n\nexport enum Skill {\n    Batch,\n    Update\n}\n\nexport enum Minigame {\n    TeamWar\n}\n\nexport enum Bubble {\n    Entity,\n    Position\n}\n\nexport enum Effect {\n    Add,\n    Remove\n}\n\nexport enum Friends {\n    List,\n    Add,\n    Remove,\n    Status,\n    Sync\n}\n\nexport enum Player {\n    Login,\n    Logout\n}\n\nexport enum Crafting {\n    Open,\n    Select,\n    Craft\n}\n","/* eslint-disable @typescript-eslint/no-duplicate-enum-values */\n\nimport { Pointer } from './opcodes';\n\nexport let EmptyPointer = {\n    type: Pointer.Remove\n};\n\nexport enum PacketType {\n    Broadcast,\n    Player,\n    Players,\n    Region,\n    Regions,\n    RegionList\n}\n\nexport enum ContainerType {\n    Bank,\n    Inventory,\n    Trade\n}\n\nexport enum Orientation {\n    Up,\n    Down,\n    Left,\n    Right\n}\n\nexport enum EntityType {\n    Player,\n    NPC,\n    Item,\n    Mob,\n    Chest,\n    Projectile,\n    Object,\n    Pet\n}\n\nexport enum AbilityType {\n    Active,\n    Passive\n}\n\nexport type HealTypes = 'passive' | 'hitpoints' | 'mana';\n\n/**\n * Enumeration of special states that an entity could be. For example,\n * an entity could be a quest-based entity and it has special name colour.\n */\n\nexport enum SpecialEntityTypes {\n    Achievement,\n    Quest,\n    Area,\n    Boss,\n    Miniboss\n}\n\nexport enum Actions {\n    Idle,\n    Attack,\n    Walk,\n    Orientate\n}\n\nexport enum MenuActions {\n    DropOne = 'drop-one',\n    DropMany = 'drop-many',\n    Wield = 'wield',\n    Equip = 'equip',\n    Attack = 'attack',\n    Eat = 'eat',\n    Eat2 = 'eat2',\n    Move = 'move',\n    Trade = 'trade',\n    Potion = 'potion',\n    Follow = 'follow',\n    Examine = 'examine',\n    AddFriend = 'addfriend'\n}\n\nexport enum InteractActions {}\n\nexport enum Hits {\n    Normal,\n    Poison,\n    Heal,\n    Mana,\n    Experience,\n    LevelUp,\n    Critical,\n    Stun,\n    Profession,\n    Freezing,\n    Burning,\n    Terror\n}\n\nexport enum Equipment {\n    Armour,\n    Boots,\n    Pendant,\n    Ring,\n    Weapon,\n    Arrows,\n    WeaponSkin,\n    ArmourSkin\n}\n\nexport enum AttackStyle {\n    None,\n\n    // Melee\n    Stab, // Accuracy experience and boosts accuracy\n    Slash, // Strength experience and boosts maximum damage\n    Defensive, // Defense experience and boosts damage absorbed\n    Crush, // Accuracy + Strength experience and boosts accuracy/damage\n    Shared, // Accuracy + Strength + Defense experience and boosts all\n    Hack, // Strength + Defense experience boosts damage and absorbs damage\n    Chop, // Accuracy + Defense experience boosts accuracy and absorbs damage\n\n    // Archery\n    Accurate, // Higher accuracy but slower\n    Fast, // Faster but lower accuracy\n\n    // Magic\n    Focused, // Slower but higher damage/accuracy\n\n    // Archery and Magic\n    LongRange // Increased attack range and less accurate\n}\n\nexport enum Hovering {\n    Colliding,\n    Mob,\n    Player,\n    Item,\n    NPC,\n    Chest,\n    Object\n}\n\nexport enum AudioTypes {\n    Music,\n    SFX\n}\n\nexport enum PoisonTypes {\n    Venom, // When a mob hits you\n    Plague, // When entering a poisoned area.\n    Persistent // Poison that doesn't wear off until it's cured.\n}\n\nexport enum Warps {\n    Mudwich,\n    Aynor,\n    Lakesworld,\n    Patsow,\n    Crullfield,\n    Undersea\n}\n\nexport enum Skills {\n    Lumberjacking,\n    Accuracy,\n    Archery,\n    Health,\n    Magic,\n    Mining,\n    Strength,\n    Defense,\n    Fishing,\n    Cooking,\n    Smithing,\n    Crafting,\n    Fletching,\n    Smelting, // Not a skill, but used to differntiate smithing from smelting in the crafting.\n    Foraging,\n    Eating,\n    Loitering\n}\n\n// It's easier to define and swap order around here.\nexport let SkillsOrder = [\n    Skills.Health,\n    Skills.Accuracy,\n    Skills.Strength,\n    Skills.Defense,\n    Skills.Archery,\n    Skills.Magic,\n    Skills.Lumberjacking,\n    Skills.Mining,\n    Skills.Fishing,\n    Skills.Foraging,\n    Skills.Crafting,\n    Skills.Cooking,\n    Skills.Fletching,\n    Skills.Smithing,\n    Skills.Eating,\n    Skills.Loitering\n];\n\nexport enum Enchantment {\n    Bloodsucking,\n    Critical,\n    Evasion,\n    Thorns,\n    Explosive,\n    Stun,\n    AntiStun,\n    Splash,\n    DoubleEdged\n}\n\nexport enum AoEType {\n    Character,\n    Player,\n    Mob\n}\n\n// Client sided special effects.\nexport enum Effects {\n    None,\n    Critical,\n    Terror, // Initial terror effect.\n    TerrorStatus, // The terror effect that persists\n    Stun,\n    Healing,\n    Fireball,\n    Iceball,\n    Poisonball,\n    Boulder,\n    Running,\n    HotSauce,\n    DualistsMark,\n    ThickSkin,\n    SnowPotion,\n    FirePotion,\n    Burning,\n    Freezing,\n    Invincible\n}\n\nexport enum DamageStyle {\n    None,\n    Crush,\n    Slash,\n    Stab,\n    Magic,\n    Archery\n}\n\nexport enum Medals {\n    None,\n    Silver,\n    Gold,\n    Artist,\n    Tier1,\n    Tier2,\n    Tier3,\n    Tier4,\n    Tier5,\n    Tier6,\n    Tier7\n}\n\nexport enum Ranks {\n    None,\n    Moderator,\n    Admin,\n    Veteran,\n    Patron,\n    Artist,\n    Cheater,\n    TierOne, // Patron tiers\n    TierTwo,\n    TierThree,\n    TierFour,\n    TierFive,\n    TierSix,\n    TierSeven,\n    HollowAdmin\n}\n\nexport let RankColours = {\n    [Ranks.None]: '',\n    [Ranks.Moderator]: '#02f070',\n    [Ranks.Admin]: '#3bbaff',\n    [Ranks.Veteran]: '#d84343',\n    [Ranks.Patron]: '#db753c',\n    [Ranks.Artist]: '#b552f7',\n    [Ranks.Cheater]: '#ffffff',\n    [Ranks.TierOne]: '#db963c',\n    [Ranks.TierTwo]: '#e6c843',\n    [Ranks.TierThree]: '#d6e34b',\n    [Ranks.TierFour]: '#a9e03a',\n    [Ranks.TierFive]: '#7beb65',\n    [Ranks.TierSix]: '#77e691',\n    [Ranks.TierSeven]: '#77e691',\n    [Ranks.HollowAdmin]: '#3bbaff'\n};\n\nexport let RankTitles = {\n    [Ranks.None]: '',\n    [Ranks.Moderator]: 'Mod',\n    [Ranks.Admin]: 'Admin',\n    [Ranks.Veteran]: 'Veteran',\n    [Ranks.Patron]: 'Patron',\n    [Ranks.Artist]: 'Artist',\n    [Ranks.Cheater]: 'Cheater',\n    [Ranks.TierOne]: 'T1 Patron',\n    [Ranks.TierTwo]: 'T2 Patron',\n    [Ranks.TierThree]: 'T3 Patron',\n    [Ranks.TierFour]: 'T4 Patron',\n    [Ranks.TierFive]: 'T5 Patron',\n    [Ranks.TierSix]: 'T6 Patron',\n    [Ranks.TierSeven]: 'T7 Patron',\n    [Ranks.HollowAdmin]: 'Admin'\n};\n\nexport interface Colours {\n    fill: string;\n    stroke: string;\n}\n\nexport let DamageColours = {\n    // Received damage\n    [Hits.Normal]: {\n        fill: 'rgb(255, 50, 50)',\n        stroke: 'rgb(255, 180, 180)',\n        inflicted: {\n            fill: 'white',\n            stroke: '#373737'\n        }\n    },\n\n    [Hits.Critical]: {\n        fill: 'rgb(204, 0, 204)',\n        stroke: 'rgb(255, 180, 180)',\n        inflicted: {\n            fill: 'rgb(255, 153, 204)',\n            stroke: '#373737'\n        }\n    },\n\n    [Hits.Poison]: {\n        fill: 'rgb(66, 183, 77)',\n        stroke: 'rgb(50, 120 , 50)'\n    },\n\n    [Hits.Heal]: {\n        fill: 'rgb(80, 255, 80)',\n        stroke: 'rgb(50, 120, 50)'\n    },\n\n    [Hits.Mana]: {\n        fill: 'rgb(73, 94, 228)',\n        stroke: 'rgb(56, 63, 133)'\n    },\n\n    [Hits.Experience]: {\n        fill: 'rgb(80, 180, 255)',\n        stroke: 'rgb(15, 85, 138)'\n    },\n\n    [Hits.LevelUp]: {\n        fill: 'rgb(80, 180, 255)',\n        stroke: 'rgb(15, 85, 138)'\n    },\n\n    [Hits.Profession]: {\n        fill: 'rgb(204, 0, 153)',\n        stroke: 'rgb(112, 17, 112)'\n    },\n\n    [Hits.Freezing]: {\n        fill: 'rgb(52, 195, 235)',\n        stroke: 'rgb(14, 138, 227)'\n    },\n\n    [Hits.Burning]: {\n        fill: 'rgb(227, 170, 14)',\n        stroke: 'rgb(235, 135, 52)'\n    }\n};\n\nexport let SkillExpColours = {\n    [Skills.Lumberjacking]: {\n        fill: 'rgb(132, 57, 45)',\n        stroke: 'rgb(101, 48, 35)'\n    },\n\n    [Skills.Accuracy]: {\n        fill: 'rgb(6, 191, 188)',\n        stroke: 'rgb(2, 94, 93)'\n    },\n\n    [Skills.Archery]: {\n        fill: 'rgb(34, 214, 130)',\n        stroke: 'rgb(7, 184, 101)'\n    },\n\n    [Skills.Health]: {\n        fill: 'rgb(239, 90, 90)',\n        stroke: 'rgb(255, 0, 0)'\n    },\n\n    [Skills.Magic]: {\n        fill: 'rgb(37, 124, 210)',\n        stroke: 'rgb(12, 55, 208)'\n    },\n\n    [Skills.Mining]: {\n        fill: 'rgb(105, 106, 107)',\n        stroke: 'rgb(45, 45, 46)'\n    },\n\n    [Skills.Strength]: {\n        fill: 'rgb(232, 211, 185)',\n        stroke: 'rgb(189, 172, 151)'\n    },\n\n    [Skills.Defense]: {\n        fill: 'rgb(110, 158, 255)',\n        stroke: 'rgb(7, 63, 176)'\n    },\n\n    [Skills.Fishing]: {\n        fill: 'rgb(0, 255, 255)',\n        stroke: 'rgb(0, 255, 255)'\n    },\n\n    [Skills.Cooking]: {\n        fill: 'rgb(255, 0, 0)',\n        stroke: 'rgb(255, 0, 0)'\n    },\n\n    [Skills.Smithing]: {\n        fill: 'rgb(132, 57, 45)',\n        stroke: 'rgb(101, 48, 35)'\n    },\n\n    [Skills.Crafting]: {\n        fill: 'rgb(255, 255, 0)',\n        stroke: 'rgb(255, 255, 0)'\n    },\n\n    [Skills.Fletching]: {\n        fill: 'rgb(255, 255, 0)',\n        stroke: 'rgb(255, 255, 0)'\n    },\n\n    [Skills.Smelting]: {\n        fill: 'rgb(255, 255, 0)',\n        stroke: 'rgb(255, 255, 0)'\n    },\n\n    [Skills.Eating]: {\n        fill: 'rgb(255, 0, 0)',\n        stroke: 'rgb(255, 0, 0)'\n    },\n\n    [Skills.Loitering]: {\n        fill: 'rgb(255, 0, 0)',\n        stroke: 'rgb(255, 0, 0)'\n    },\n\n    [Skills.Foraging]: {\n        fill: 'rgb(255, 0, 0)',\n        stroke: 'rgb(255, 0, 0)'\n    }\n};\n\nexport let NameColours = {\n    [SpecialEntityTypes.Achievement]: 'rgb(60, 179, 113)',\n    [SpecialEntityTypes.Quest]: 'rgb(106, 90, 205)',\n    [SpecialEntityTypes.Area]: 'rgb(255, 165, 0)',\n    [SpecialEntityTypes.Boss]: 'rgb(150, 0, 51)',\n    [SpecialEntityTypes.Miniboss]: 'rgb(204, 51, 0)'\n};\n\nexport let EntityScale = {\n    [SpecialEntityTypes.Miniboss]: 1.2\n};\n\nexport let PoisonInfo = {\n    [PoisonTypes.Venom]: {\n        name: 'Venom',\n        damage: 5,\n        duration: 30,\n        rate: 2 // every 2 seconds\n    },\n    [PoisonTypes.Plague]: {\n        name: 'Plague',\n        damage: 5,\n        duration: 60,\n        rate: 1\n    },\n    [PoisonTypes.Persistent]: {\n        name: 'Persistent',\n        damage: 2,\n        duration: -1,\n        rate: 1\n    }\n};\n\nexport enum NPCRole {\n    Banker,\n    Enchanter,\n    Clerk\n}\n\nexport enum GuildRank {\n    Fledgling,\n    Emergent,\n    Established,\n    Adept,\n    Veteran,\n    Elite,\n    Master,\n    Landlord\n}\n\nexport enum BannerColour {\n    Green = 'green',\n    Blue = 'blue',\n    Red = 'red',\n    Grey = 'grey',\n    Black = 'black',\n    Tangerine = 'tangerine',\n    Yellow = 'yellow',\n    Purple = 'purple',\n    Pink = 'pink'\n}\n\nexport enum BannerOutline {\n    Green = 'green',\n    Blue = 'blue',\n    Orange = 'orange',\n    White = 'white',\n    Grey = 'grey',\n    Tangerine = 'tangerine',\n    Yellow = 'yellow',\n    Purple = 'purple',\n    Pink = 'pink'\n}\n\nexport enum BannerCrests {\n    None = 'none',\n    Star = 'star',\n    Hawk = 'hawk',\n    Phoenix = 'phoenix'\n}\n\nexport const Constants = {\n    MAX_STACK: 2_147_483_647, // Maximum default stack size for a stackable item.\n    MAX_LEVEL: 135, // Maximum attainable level.\n    INVENTORY_SIZE: 25, // Maximum inventory size\n    BANK_SIZE: 420, // Maximum bank size\n    DROP_PROBABILITY: 10_000, // 1 in 10000\n    MAX_PROFESSION_LEVEL: 99, // Totally not influenced by another game lol\n    HEAL_RATE: 7000, // healing every 7 seconds\n    EFFECT_RATE: 10_000, // effects every 10 seconds\n    STORE_UPDATE_FREQUENCY: 20_000, // update store every 20 seconds\n    MAP_DIVISION_SIZE: 48, // The size of a region the map is split into.\n    SPAWN_POINT: '405,27', // Default starting point outside the tutorial\n    TUTORIAL_QUEST_KEY: 'tutorial', // key of the tutorial quest\n    TUTORIAL_SPAWN_POINT: '579,7', // 'x,y' values\n    RESOURCE_RESPAWN: 30_000,\n    TREE_RESPAWN: 25_000,\n    CHEST_RESPAWN: 50_000, // 50 seconds\n    SKILL_LOOP: 1000, // How often we check the loop of a skill\n    MAX_ACCURACY: 0.45, // Maximum attainable accuracy for a character.\n    EDIBLE_COOLDOWN: 1500, // 1.5 seconds between eating foods to prevent spam.\n    CRAFT_COOLDOWN: 1500, // 1.5 seconds between crafting items to prevent spam.\n    INVALID_MOVEMENT_THRESHOLD: 3, // Amount of invalid movements before ignoring packets.\n    ARCHER_ATTACK_RANGE: 8, // Default attack range for bows if no other range is specified.\n    MAX_CONNECTIONS: 16, // Maximum number of connections per IP address.\n    EXPERIENCE_PER_HIT: 4, // Amount of experinece received per 1 damage dealt.\n    SNOW_POTION_DURATION: 60_000, // 60 seconds\n    FIRE_POTION_DURATION: 60_000, // 60 seconds\n    FREEZING_DURATION: 60_000, // 60 seconds\n    BURNING_DURATION: 60_000, // 60 seconds\n    TERROR_DURATION: 60_000, // 60 seconds\n    LOITERING_THRESHOLD: 90_000, // 90 seconds until loitering activates\n    STUN_DURATION: 10_000, // 10 seconds\n    COLD_EFFECT_DAMAGE: 10,\n    BURNING_EFFECT_DAMAGE: 20,\n    ATTACKER_TIMEOUT: 20_000, // 20 seconds\n    MAX_GUILD_MEMBERS: 40, // Maximum number of members in a guild\n    EVENTS_CHECK_INTERVAL: 3_600_000 // Every 1 hour\n};\n\nexport enum MinigameConstants {\n    TEAM_WAR_COUNTDOWN = 240, // 240 seconds (4 minutes) in the lobby\n    TEAM_WAR_MIN_PLAYERS = 2 // Minimum number of players to start a team war\n}\n\nexport enum APIConstants {\n    UNHANDLED_HTTP_METHOD,\n    NOT_FOUND_ERROR,\n    MALFORMED_PARAMETERS,\n    PLAYER_NOT_ONLINE\n}\n\n// Defaults that apply to all types of entities\nexport enum Defaults {\n    MOVEMENT_SPEED = 250, // 250 milliseconds to traverse one tile\n    ATTACK_RATE = 1000, // every 1 second\n    POISON_CHANCE = 15 // 15 in (235 - level) chance to poison\n}\n\nexport enum ItemDefaults {\n    RESPAWN_DELAY = 30_000, // 30 seconds\n    DESPAWN_DURATION = 34_000, // 34 seconds of blinking before despawning\n    BLINK_DELAY = 30_000 // 40 seconds until item starts blinking.\n}\n\n// Defaults that apply specifically to mobs\nexport enum MobDefaults {\n    AGGRO_RANGE = 2, // Default aggro range of 2 tiles\n    RESPAWN_DELAY = 60_000, // 60 seconds to respawn\n    ROAM_DISTANCE = 7, // 7 tiles away from spawn point\n    ROAM_FREQUENCY = 17_000, // Roam interval every 35 seconds\n    DEFENSE_LEVEL = 1,\n    ATTACK_LEVEL = 1\n}\n\n// Flags used by Tiled to determine tile rotation.\nexport enum MapFlags {\n    DIAGONAL_FLAG = 0x20_00_00_00,\n    VERTICAL_FLAG = 0x40_00_00_00,\n    HORIZONTAL_FLAG = 0x80_00_00_00\n}\n\n// Handles the two states of a resource, default or depleted.\nexport enum ResourceState {\n    Default,\n    Depleted\n}\n","enum Packets {\n    Handshake,\n    Login,\n    Welcome,\n    Map,\n    Spawn,\n    List,\n    Who,\n    Equipment,\n    Ready,\n    Sync,\n    Movement,\n    Teleport,\n    Despawn,\n    Target,\n    Combat,\n    Animation,\n    Points,\n    Network,\n    Chat,\n    Command,\n    Container,\n    Ability,\n    Quest,\n    Achievement,\n    Notification,\n    Blink,\n    Heal,\n    Experience,\n    Death,\n    Music,\n    NPC,\n    Respawn,\n    Trade,\n    Enchant,\n    Guild,\n    Pointer,\n    PVP,\n    Poison,\n    Warp,\n    Store,\n    Overlay,\n    Camera,\n    Bubble,\n    Skill,\n    Update,\n    Minigame,\n    Effect,\n    Friends,\n    Focus,\n    Rank,\n    Examine,\n    Player,\n    Relay,\n    Crafting\n}\n\nexport default Packets;\n","import { isMobile } from './detect';\n\nimport log from '../lib/log';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { RegionData, RegionTileData } from '@kaetram/common/types/map';\nimport type { CursorTiles } from '../map/map';\n\ninterface PlayerData {\n    username: string;\n    password: string;\n    autoLogin: boolean;\n    rememberMe: boolean;\n    orientation: number;\n    zoom: number;\n}\n\ninterface Settings {\n    musicVolume: number;\n    soundVolume: number;\n    brightness: number;\n    audioEnabled: boolean;\n    lowPowerMode: boolean;\n    debugMode: boolean;\n    showNames: boolean;\n    showLevels: boolean;\n    disableCaching: boolean;\n}\n\ninterface RegionMapData {\n    regionData: RegionData;\n    objects: number[];\n    cursorTiles: CursorTiles;\n}\n\ninterface StorageData {\n    new: boolean;\n    world: number;\n    clientVersion: string;\n    errorMessage: string;\n    player: PlayerData;\n    settings: Settings;\n}\n\nlet storage = window.localStorage,\n    name = 'data';\n\nexport default class Storage {\n    public data: StorageData;\n    public mapData!: IDBDatabase; // Where we store the region caching.\n\n    public newVersion = false;\n\n    public constructor() {\n        this.data = storage.data ? JSON.parse(storage.getItem(name)!) : this.create();\n\n        this.newVersion = this.isNewVersion();\n\n        if (this.newVersion) {\n            this.set(this.create());\n            this.clearIndexedDB();\n        } else this.loadIndexedDB();\n    }\n\n    /**\n     * Creates a new empty template for the storage data.\n     * @returns A StorageData object containing default values.\n     */\n\n    private create(): StorageData {\n        return {\n            new: true,\n            world: window.config.serverId,\n            clientVersion: window.config.version,\n            errorMessage: '',\n\n            player: {\n                username: '',\n                password: '',\n                autoLogin: false,\n                rememberMe: false,\n                orientation: Modules.Orientation.Down,\n                zoom: 3\n            },\n\n            settings: {\n                musicVolume: 100,\n                soundVolume: 100,\n                brightness: 100,\n                audioEnabled: !isMobile(),\n                lowPowerMode: false,\n                debugMode: false,\n                showNames: true,\n                showLevels: true,\n                disableCaching: false\n            }\n        };\n    }\n\n    /**\n     * Handles the creation of the IndexedDB database and population for the first run. This is\n     * where we store all of the map data for the regions.\n     */\n\n    private loadIndexedDB(): void {\n        let request: IDBOpenDBRequest = window.indexedDB?.open('mapCache', this.getDBVersion());\n\n        // If something goes wrong just re-create the database.\n        request.addEventListener('error', () => {\n            this.clearIndexedDB();\n        });\n\n        // Upgrade occurs when we change the version of the database (or a new one is created).\n        request.addEventListener('upgradeneeded', (event: Event) => {\n            let database = (event.target as IDBOpenDBRequest).result;\n\n            if (!database) console.error('Could not open IndexedDB database.');\n\n            // Create the object stores for the map data.\n            database.createObjectStore('regions');\n            database.createObjectStore('objects');\n            database.createObjectStore('cursorTiles');\n\n            log.debug(`IndexedDB created with version ${this.getDBVersion()}.`);\n        });\n\n        // Successfully managed to open the database.\n        request.addEventListener('success', (event: Event) => {\n            this.mapData = (event.target as IDBOpenDBRequest).result;\n\n            log.debug(`Successfully opened IndexedDB with version ${this.getDBVersion()}.`);\n        });\n    }\n\n    /**\n     * Saves the data object in this class' instance\n     * to the local storage.\n     */\n\n    public save(): void {\n        try {\n            if (this.data) storage.setItem(name, JSON.stringify(this.data));\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * Clears the local storage and saves the empty\n     * default parameters.\n     */\n\n    public clear(): void {\n        storage.removeItem(name);\n\n        this.set(this.create());\n\n        this.save();\n    }\n\n    /**\n     * Deletes the IndexedDB database and recreates it.\n     */\n\n    private clearIndexedDB(): void {\n        this.mapData?.close();\n\n        window.indexedDB.deleteDatabase('mapCache');\n\n        this.loadIndexedDB();\n    }\n\n    /**\n     * Sets the data onto the local storage and saves it.\n     * @param data The StorageData object we are writing.\n     */\n\n    public set(data: StorageData): void {\n        this.data = data;\n        this.save();\n    }\n\n    /**\n     * Updates the error message in the storage.\n     * @param error The new error message in the storage.\n     */\n\n    public setError(error: string): boolean {\n        this.data.errorMessage = error;\n        this.save();\n\n        return true;\n    }\n\n    /**\n     * Updates the player data remember me value.\n     * @param rememberMe New value of the remember me toggle switch.\n     */\n\n    public setRemember(rememberMe: boolean): void {\n        this.data.player.rememberMe = rememberMe;\n        this.save();\n    }\n\n    /**\n     * Sets the username and password into the local storage and saves it.\n     * @param username The username string we are setting.\n     * @param password The password string we are updating.\n     */\n\n    public setCredentials(username = '', password = ''): void {\n        this.data.player.username = username;\n        this.data.player.password = password;\n\n        this.save();\n    }\n\n    /**\n     * Updates the music music and stores it into the local storage.\n     * @param volume The new music we are setting the music to.\n     */\n\n    public setMusicVolume(volume = 100): void {\n        this.data.settings.musicVolume = volume;\n\n        this.save();\n    }\n\n    /**\n     * Updates the Sound and stores it into the local storage.\n     * @param volume New music we are setting the Sound to.\n     */\n\n    public setSoundVolume(volume = 100): void {\n        this.data.settings.soundVolume = volume;\n\n        this.save();\n    }\n\n    /**\n     * Sets the brightness value in the storage.\n     * @param brightness New brightness or default to 100 if not specified.\n     */\n\n    public setBrightness(brightness = 100): void {\n        this.data.settings.brightness = brightness;\n\n        this.save();\n    }\n\n    /**\n     * Updates the local storage value for audioEnabled.\n     * @param enabled New value to update variable to.\n     */\n\n    public setAudioEnabled(enabled: boolean): void {\n        this.data.settings.audioEnabled = enabled;\n\n        this.save();\n    }\n\n    /**\n     * Sets the value of the low power mode in the local storage.\n     * @param lowPowerMode New value to update in the local storage.\n     */\n\n    public setLowPowerMode(lowPowerMode: boolean): void {\n        this.data.settings.lowPowerMode = lowPowerMode;\n\n        this.save();\n    }\n\n    /**\n     * Updates the debug value in the local storage.\n     * @param debug New value of the debug.\n     */\n\n    public setDebug(debug: boolean): void {\n        this.data.settings.debugMode = debug;\n\n        this.save();\n    }\n\n    /**\n     * Updates whether or not to show names in the local storage.\n     * @param showNames New value to write to the local storage.\n     */\n\n    public setShowNames(showNames: boolean): void {\n        this.data.settings.showNames = showNames;\n\n        this.save();\n    }\n\n    /**\n     * Updates whether or not to display levels.\n     * @param showLevels New value we are updating in the local storage.\n     */\n\n    public setShowLevels(showLevels: boolean): void {\n        this.data.settings.showLevels = showLevels;\n\n        this.save();\n    }\n\n    /**\n     * Disables or enables region caching. Primarily for debugging.\n     * @param disableCaching The value of the disable caching toggle switch.\n     */\n\n    public setDisableCaching(disableCaching: boolean): void {\n        this.data.settings.disableCaching = disableCaching;\n\n        this.save();\n    }\n\n    /**\n     * Checks if the local storage version of the client\n     * matches the window's config version.\n     * @returns True if client version is the same as config version.\n     */\n\n    private isNewVersion(): boolean {\n        return this.data.clientVersion !== window.config.version;\n    }\n\n    /**\n     * Updates the orientation in the local storage.\n     * @param orientation New orientation we are saving.\n     */\n\n    public setOrientation(orientation: number): void {\n        this.data.player.orientation = orientation;\n\n        this.save();\n    }\n\n    /**\n     * Updates the zoom factor in the local storage.\n     * @param zoom New zoom factor we are saving.\n     */\n\n    public setZoom(zoom: number): void {\n        this.data.player.zoom = zoom;\n\n        this.save();\n    }\n\n    /**\n     * Saves the objects and cursor tiles into the first index of their respective\n     * object store within the IndexedDB database.\n     * @param objects The object tileIds.\n     * @param cursorTiles The cursor tileIds.\n     */\n\n    public setMapData(objects: number[], cursorTiles: CursorTiles): void {\n        if (!this.mapData) return;\n\n        let transaction = this.mapData.transaction(['objects', 'cursorTiles'], 'readwrite'),\n            objectStore = transaction.objectStore('objects'),\n            cursorStore = transaction.objectStore('cursorTiles');\n\n        // Save them at index 0.\n        objectStore.put(objects, 0);\n        cursorStore.put(cursorTiles, 0);\n    }\n\n    /**\n     * Stores the region data at the specified region id as the key within\n     * the IndexedDB database. Each region is stored as an array of RegionTileData.\n     * @param data Contains an array of information about each tile in the region.\n     * @param region The region id we are saving.\n     */\n\n    public setRegionData(data: RegionTileData[], region: number): void {\n        if (!this.mapData) return;\n\n        let objectStore = this.mapData.transaction('regions', 'readwrite').objectStore('regions'),\n            request = objectStore.get(region);\n\n        request.addEventListener('success', () => {\n            if (request.result) return;\n\n            objectStore.put(data, region);\n        });\n    }\n\n    /**\n     * Grabs the error message from local storage\n     * and immediately clears it. Error messages only\n     * get displayed once if they're queued up.\n     * @returns The string of the error message.\n     */\n\n    public getError(): string {\n        let { errorMessage } = this.data;\n\n        this.data.errorMessage = '';\n        this.save();\n\n        return errorMessage;\n    }\n\n    /**\n     * @returns The username string stored in the local storage.\n     */\n\n    public getUsername(): string {\n        return this.data.player.username;\n    }\n\n    /**\n     * @returns The password string (raw text) in the local storage.\n     */\n\n    public getPassword(): string {\n        return this.data.player.password;\n    }\n\n    /**\n     * Converts the game version string into a number.\n     * @returns The current version to be used in the IndexedDB database.\n     */\n\n    public getDBVersion(): number {\n        return parseInt(this.data.clientVersion.replace(/\\D/g, '')) || 1;\n    }\n\n    /**\n     * Whether or not the remember me toggle is on.\n     * @returns Boolean value of the remember me toggle.\n     */\n\n    public hasRemember(): boolean {\n        return this.data.player.rememberMe;\n    }\n\n    /**\n     * @returns Whether or not the new variable is set to true in the storage.\n     */\n\n    public isNew(): boolean {\n        return this.data.new;\n    }\n\n    /**\n     * Grabs the local storage data of the map.\n     * @returns RegionMapData object containing all the data stored so far.\n     */\n\n    public getRegionData(callback: (data: RegionMapData) => void): void {\n        let info: RegionMapData = {\n            regionData: {},\n            objects: [],\n            cursorTiles: {}\n        };\n\n        if (!this.mapData) return callback(info);\n\n        // Create the transaction and begin grabbing data from each object store.\n        let transaction = this.mapData.transaction(\n                ['regions', 'objects', 'cursorTiles'],\n                'readonly'\n            ),\n            regionRequest = transaction.objectStore('regions').openCursor(), // Grab all the indexes and the keys.\n            objectRequest = transaction.objectStore('objects').get(0), // Only need the first index.\n            cursorRequest = transaction.objectStore('cursorTiles').get(0); // Only need the first index.\n\n        transaction.addEventListener('error', () => callback(info));\n\n        regionRequest.addEventListener('success', (event: Event) => {\n            let cursor = (event.target as IDBRequest<IDBCursorWithValue>).result;\n\n            // Cursor is the currently processed index and key.\n            if (cursor) {\n                info.regionData[cursor.primaryKey as number] = cursor.value;\n                cursor.continue();\n            }\n        });\n        objectRequest.addEventListener('success', () => (info.objects = objectRequest.result));\n        cursorRequest.addEventListener('success', () => (info.cursorTiles = cursorRequest.result));\n\n        transaction.addEventListener('complete', () => callback(info));\n    }\n\n    /**\n     * @returns The settings values stored.\n     */\n\n    public getSettings(): Settings {\n        return this.data.settings;\n    }\n\n    /**\n     * @returns The debug value stored in the local storage.\n     */\n\n    public getDebug(): boolean {\n        return this.data.settings.debugMode;\n    }\n}\n","let holdTimeout: number | undefined;\n\n// A touch is considered a hold if it lasts longer than 200ms.\nconst HOLD_TIME = 200;\n\n/**\n * Resets the hold timeout.\n */\n\nfunction resetTimeout() {\n    // Clear the hold timeout if it exists\n    if (holdTimeout !== undefined) {\n        clearTimeout(holdTimeout);\n\n        holdTimeout = undefined;\n    }\n}\n\n/**\n * Registers a secondary press event, which is a right click or a long press.\n * @param element The element to register the event on.\n * @param callback The callback to call when the event is triggered.\n */\n\n// Register event listeners to detect a hold event.\nexport function onSecondaryPress(\n    element: HTMLElement,\n    callback: (position: { x: number; y: number }) => void\n) {\n    // Get the game container element.\n    let gameContainer = document.querySelector<HTMLElement>('#game-container')!;\n\n    element.addEventListener('contextmenu', (event) => {\n        // Prevent the default browser context menu.\n        event.preventDefault();\n\n        // Reset the hold timeout in case the touch is still active.\n        resetTimeout();\n\n        // Call the callback with the touch position.\n        callback({ x: event.clientX, y: event.clientY });\n    });\n\n    // Prevent the default browser context menu on the game container.\n    gameContainer.addEventListener('contextmenu', (event) => event.preventDefault());\n\n    element.addEventListener('touchstart', (event) => {\n        // Get the first touch.\n        let [touch] = event.touches;\n\n        // Set a timeout to call the callback after HOLD_TIME ms.\n        holdTimeout = window.setTimeout(\n            () => callback({ x: touch.clientX, y: touch.clientY }),\n            HOLD_TIME\n        );\n    });\n\n    // Reset the hold timeout in case the touch is still active.\n    gameContainer.addEventListener('touchmove', resetTimeout);\n}\n\n/**\n * Registers a drag and drop event.\n * @param element The element to register the event on.\n * @param dropCallback The callback to call when the element is dropped.\n * @param exception A function that returns true if the drag and drop should be cancelled.\n */\n\nexport function onDragDrop(\n    element: HTMLElement,\n    dropCallback: (clone: HTMLElement, target: HTMLElement) => void,\n    exception?: () => boolean\n) {\n    let isHolding = false,\n        dragClone: HTMLElement | undefined,\n        gameContainer = document.querySelector<HTMLElement>('#game-container')!;\n\n    // Add the event listeners for the mouse events\n    element.addEventListener('mousedown', () => startHold());\n    gameContainer.addEventListener('mousemove', (event) => moveHold(event.clientX, event.clientY));\n    gameContainer.addEventListener('mouseup', (event) => endHold(event.clientX, event.clientY));\n\n    // Add the event listeners for the touch events\n    element.addEventListener('touchstart', () => startHold(HOLD_TIME));\n    gameContainer.addEventListener('touchmove', (event) => {\n        let [touch] = event.touches;\n\n        if (isHolding) event.preventDefault();\n\n        moveHold(touch.clientX, touch.clientY);\n    });\n    gameContainer.addEventListener('touchend', (event) => {\n        let [touch] = event.changedTouches;\n\n        endHold(touch.clientX, touch.clientY);\n    });\n    gameContainer.addEventListener('touchcancel', cancelHold);\n\n    // When the user starts holding the item, start the hold timeout.\n    function startHold(delay?: number) {\n        // The timeout is used to determine if the user is holding the item.\n        // If the timeout is reset, the user is not holding the item.\n        holdTimeout = window.setTimeout(() => {\n            // If the exception function returns true, cancel the hold.\n            if (exception?.()) return;\n\n            cancelHold();\n            // The user is holding the item.\n            isHolding = true;\n\n            // Create a clone of the item element.\n            dragClone = element.cloneNode(true) as HTMLElement;\n\n            dragClone.style.position = 'absolute';\n            dragClone.style.opacity = '0.75';\n            dragClone.style.top = `${-element.clientHeight}px`;\n            dragClone.style.left = `${-element.clientWidth}px`;\n            dragClone.style.pointerEvents = 'none';\n            dragClone.style.touchAction = 'none';\n\n            // Append the clone to the game container.\n            gameContainer?.append(dragClone);\n        }, delay);\n    }\n\n    // When the user moves the item, update the clone's position.\n    function moveHold(x: number, y: number) {\n        // Reset the hold timeout.\n        resetTimeout();\n\n        // If the user is not holding the item or the clone does not exist, cancel the hold.\n        if (!isHolding || !dragClone) return cancelHold();\n\n        // Update the clone's position.\n        dragClone.style.top = `${y - element.clientHeight / 2}px`;\n        dragClone.style.left = `${x - element.clientWidth / 2}px`;\n    }\n\n    // When the user stops holding the item, drop the item.\n    function endHold(x: number, y: number) {\n        // If the user is not holding the item, cancel the hold.\n        if (!isHolding) return;\n\n        // Save the clone element in a variable.\n        let clone = dragClone;\n        cancelHold();\n\n        // Get the element at the specified coordinates.\n        let target = document.elementFromPoint(x, y) as HTMLElement | null;\n\n        // If the target does not exist or the clone does not exist, cancel the hold.\n        if (!target || !clone) return;\n\n        // Call the drop callback with the clone and the target.\n        dropCallback(clone, target);\n    }\n\n    // Cancel the hold.\n    function cancelHold() {\n        // Reset the hold timeout.\n        resetTimeout();\n        isHolding = false;\n\n        // Remove the clone from the game container.\n        dragClone?.remove();\n        dragClone = undefined;\n\n        // Remove the focused class from the item element.\n        element.classList.remove('item-slot-focused');\n    }\n}\n","interface Frame {\n    index: number;\n    x: number;\n    y: number;\n}\n\ntype BopCallback = (bopIndex: number) => void;\n\nexport default class Animation {\n    public frame: Frame = { index: 0, x: 0, y: 0 };\n    public count = 1;\n    public bopIndex = 0;\n    public bopCount = 4; // Used for items bopping up and down.\n    public decreaseBop = false;\n\n    private lastTime = Date.now();\n    private speed = 100;\n\n    private bopCallback?: BopCallback;\n    private endCallback?: () => void;\n\n    public constructor(\n        public name: string,\n        public length: number,\n        public row: number,\n        public width: number,\n        public height: number\n    ) {\n        this.reset();\n    }\n\n    /**\n     * Updates the animation frame.\n     * @param time The current game time.\n     */\n\n    public update(time: number): void {\n        if (!this.canAnimate()) return;\n\n        this.lastTime = time;\n\n        // Used for bopping up an item when it is spawned on the ground.\n        if (this.length === 1) {\n            // If we are decreasing the bop index, we are moving the item down.\n            if (this.decreaseBop) this.bopIndex--;\n            else this.bopIndex++;\n\n            // Toggle the bopping direction if we have reached the end of the animation.\n            if (this.bopIndex >= this.bopCount) this.decreaseBop = true;\n            else if (this.bopIndex <= 0) this.decreaseBop = false;\n\n            return this.bopCallback?.(this.bopIndex);\n        }\n\n        // When the animation reaches the end of the frames, we reset it.\n        if (this.frame.index >= this.length - 1) {\n            if (this.count > 0) this.count--;\n\n            // Invoke the callback if we have finished playing the animation.\n            if (this.count <= 0) this.endCallback?.();\n\n            return this.reset();\n        }\n\n        // Otherwise, we progress to the next frame.\n        this.frame.index++;\n\n        // Update the x and y coordinates of the frame.\n        this.frame.x = this.frame.index * this.width;\n        this.frame.y = this.row * this.height;\n    }\n\n    /**\n     * Updates the amount of times we play the animation and sets the\n     * callback handler if provided.\n     * @param count The amount of times we are playing the animation.\n     * @param onEnd The function to call once animation is completed.\n     */\n\n    public setCount(count: number, onEnd: () => void): void {\n        this.count = count;\n\n        this.endCallback = onEnd;\n    }\n\n    /**\n     * Updates the speed of the animation.\n     * @param speed The new speed of the animation.\n     */\n\n    public setSpeed(speed: number) {\n        this.speed = speed;\n    }\n\n    /**\n     * Updates the row of animations.\n     * @param row The new number of rows.\n     */\n\n    public setRow(row: number): void {\n        this.row = row;\n    }\n\n    /**\n     * If we should progress to the next animation frame.\n     * @returns Whether the last update time relative to now\n     * is greater than the animation speed.\n     */\n\n    private canAnimate(): boolean {\n        return Date.now() - this.lastTime > this.speed;\n    }\n\n    /**\n     * Resets the animation to the first frame.\n     */\n\n    public reset(): void {\n        this.lastTime = Date.now();\n\n        this.frame = {\n            index: 0,\n            x: 0,\n            y: this.row * this.height\n        };\n    }\n\n    /**\n     * Callback whenever the bopping index advances or decreases.\n     * @param callback Contains the current bop index.\n     */\n\n    public onBop(callback: BopCallback): void {\n        this.bopCallback = callback;\n    }\n}\n","import Animation from './animation';\n\nimport Utils from '../utils/util';\n\nexport interface AnimationData {\n    [name: string]: {\n        length: number;\n        row: number;\n    };\n}\nexport interface SpriteData {\n    id: string;\n    width?: number;\n    height?: number;\n    idleSpeed?: number;\n    animations?: AnimationData;\n    offsetX?: number;\n    offsetY?: number;\n}\nexport interface Animations {\n    [name: string]: Animation;\n}\n\nexport default class Sprite {\n    public key = '';\n\n    private path = '';\n\n    public width = Utils.tileSize;\n    public height = Utils.tileSize;\n\n    public offsetX = -Utils.tileSize;\n    public offsetY = -Utils.tileSize;\n\n    public idleSpeed = 450;\n\n    public loaded = false;\n    public loading = false;\n    public hasDeathAnimation = false;\n\n    public animations: Animations = {};\n\n    public image!: HTMLImageElement | HTMLCanvasElement;\n\n    public hurtSprite!: Sprite;\n    public silhouetteSprite!: Sprite;\n\n    private loadCallback?(): void;\n\n    public constructor(public data: SpriteData) {\n        this.key = this.data.id;\n\n        this.path = `/img/sprites/${this.key}.png`;\n\n        this.width = this.data.width || this.width;\n        this.height = this.data.height || this.height;\n\n        this.offsetX = this.data.offsetX ?? this.offsetX;\n        this.offsetY = this.data.offsetY ?? this.offsetY;\n\n        this.idleSpeed = this.data.idleSpeed || this.idleSpeed;\n\n        // Have the animations prepared for the sprite.\n        this.loadAnimations();\n    }\n\n    /**\n     * Loads the sprite image information for an entity. The `load` function\n     * is called on a demand basis, instead of initializing all sprites when\n     * we load the client, we initialize it as we find entities throughout the\n     * world. This may be changed in the future.\n     */\n\n    public load(): void {\n        if (this.loading || this.loaded) return;\n\n        this.loading = true;\n\n        this.image = new Image();\n\n        this.image.crossOrigin = 'Anonymous';\n        this.image.src = this.path;\n\n        // Callback for when the image successfully loads.\n        this.image.addEventListener('load', () => {\n            this.loaded = true;\n\n            /**\n             * We ignore small sprites and item sprites when drawing hurt sprites.\n             * The logic we're using is skipping keys that start with `items/*` and\n             * sprites whose width is less than 96 (assumed 4 animations and a small\n             * sprite of 24x24).\n             */\n\n            if (!this.key.startsWith('items/') && this.image.width > 96)\n                this.hurtSprite = Utils.getHurtSprite(this);\n\n            // Load the silhouette sprite for the entity.\n            this.silhouetteSprite = Utils.getSilhouetteSprite(this);\n\n            // Loading only done after the hurt sprite.\n            this.loading = false;\n\n            this.loadCallback?.();\n        });\n    }\n\n    /**\n     * Loads the animations for the said sprite. Parses through all of the animation\n     * objects and creates a new animation instance for each one. We also check if the\n     * sprite has a specific death animation, otherwise the generic one will be used.\n     */\n\n    private loadAnimations(): void {\n        if (!this.data.animations)\n            this.data.animations = Utils.getDefaultAnimations(this.key.startsWith('items/'));\n\n        for (let name in this.data.animations) {\n            let info = this.data.animations[name];\n\n            // Use a specified death animation if it exists, set the flag to true for later use.\n            if (name === 'death') this.hasDeathAnimation = true;\n\n            // Create an animation for the sprite.\n            this.animations[name] = new Animation(\n                name,\n                info.length,\n                info.row,\n                this.width,\n                this.height\n            );\n        }\n    }\n\n    /**\n     * Callback for when the sprite has successfully loaded. Used to load\n     * additional extra information afterwards.\n     */\n\n    public onLoad(callback: () => void): void {\n        this.loadCallback = callback;\n    }\n}\n","import { onSecondaryPress } from './press';\n\nimport Sprite from '../entity/sprite';\n\nimport { Modules, Opcodes } from '@kaetram/common/network';\n\nimport type { AnimationData } from '../entity/sprite';\nimport type { Bonuses, Stats } from '@kaetram/common/types/item';\n\nexport let isInt = (n: number): boolean => n % 1 === 0;\n\nexport default {\n    tileSize: -1,\n    sideLength: -1,\n    thirdTile: -1,\n    tileAndAQuarter: -1,\n\n    /**\n     * Creates a unique ID for a given time.\n     * @param time The time in milliseconds.\n     * @param x Optional parameter to concatenate to the ID.\n     * @param y Optional parameter to concatenate to the ID.\n     * @returns A concatenated string of the time and optional parameters.\n     */\n\n    createId(time: number, x = 0, y = 0): string {\n        return `${time}${x}${y}`;\n    },\n\n    /**\n     * Generates a random integer number using Math library.\n     * @param min Minimum value (inclusive)\n     * @param max Maximum value (inclusive)\n     * @returns Random integer between min and max.\n     */\n\n    randomInt(min: number, max: number): number {\n        return min + Math.floor(Math.random() * (max - min + 1));\n    },\n\n    /**\n     * Creates a new slot element based using the bank-slot class. This creates\n     * an empty skeleton that we can then place items in. A callback event listener\n     * is also created alongside the slot. Whenever a slot is pressed, its type\n     * and index are parameters that are passed to the callback.\n     * @param type The type of slot we are creating (used for callback as well).\n     * @param index Index of the slot we are creating (for identification).\n     * @param primaryCallback The callback function for the primary pressed.\n     * @param secondaryCallback The callback function for the secondary pressed.\n     */\n\n    createSlot(\n        type: Modules.ContainerType,\n        index: number,\n        primaryCallback?: (type: Modules.ContainerType, index: number) => void,\n        secondaryCallback?: (type: Modules.ContainerType, index: number) => void\n    ): HTMLLIElement {\n        let listElement = document.createElement('li'),\n            slot = document.createElement('div'),\n            image = document.createElement('div'),\n            count = document.createElement('div');\n\n        slot.dataset.type = `${type}`;\n        slot.dataset.index = `${index}`;\n\n        // Sets the class of the bank slot.\n        slot.classList.add('item-slot');\n\n        // Sets the class of the image.\n        image.classList.add('item-image');\n\n        // Sets the class of the count.\n        count.classList.add('item-count');\n\n        // Bank item counts are a different colour.\n        if (type === Modules.ContainerType.Bank) count.classList.add('bank-item-count');\n\n        // Appends image and count onto the bank slot.\n        slot.append(image);\n        slot.append(count);\n\n        if (primaryCallback) slot.addEventListener('click', () => primaryCallback(type, index));\n        if (secondaryCallback) onSecondaryPress(slot, () => secondaryCallback(type, index));\n\n        // Appends the bank slot onto the list element.\n        listElement.append(slot);\n\n        return listElement;\n    },\n\n    /**\n     * Converts an item's key into an image URL for the client.\n     * @param key The item's key, defaults to empty string.\n     * @returns The CSS image URL format for the item's key.\n     */\n\n    getImageURL(key = ''): string {\n        if (key === '') return '';\n\n        return `url(\"/img/sprites/items/${key}.png\")`;\n    },\n\n    /**\n     * Takes any name (or string as a matter of fact) and capitalizes\n     * every first letter after a space.\n     * Example: 'tHiS Is a usErName' -> 'This Is A Username'\n     * @param name The raw username string defaulting to '' if not specified.\n     * @param trim The amount of characters to trim the name to.\n     * @returns The formatted name string.\n     */\n\n    formatName(name = '', trim = 0): string {\n        name = name.replace(\n            /\\w\\S*/g,\n            (string) => string.charAt(0).toUpperCase() + string.slice(1).toLowerCase()\n        );\n\n        // Trim the name if specified.\n        if (trim > 1 && name.length > trim) name = `${name.slice(0, Math.max(0, trim))}...`;\n\n        return name;\n    },\n\n    /**\n     * Converts an integer value into a compact string used\n     * when wanting to display large numbers of stackable items.\n     * For example, 15000 coins get displayed as 15K and\n     * 1200400 coins displayed as 1.2M\n     */\n\n    getCount(count: number): string {\n        // Convert count to string.\n        let string = count.toString();\n\n        // Converts numbers 1 million and above to short-hand format (e.g. 25M)\n        if (count > 999_999) return `${Math.floor(count / 1_000_000)}M`;\n\n        // Convert numbers above 10,000 into kilo format (e.g. 25K)\n        if (count > 9999) return `${Math.floor(count / 1000)}K`;\n\n        // Any number above 1 is displayed as a string.\n        if (count > 1) return string;\n\n        // Do not display counts of 1.\n        return '';\n    },\n\n    /**\n     * Converts a menu action into a container opcode action.\n     * @param menuAction Menu action that we are converting.\n     */\n\n    getContainerAction(menuAction: Modules.MenuActions): Opcodes.Container | undefined {\n        switch (menuAction) {\n            case Modules.MenuActions.Wield:\n            case Modules.MenuActions.Equip:\n            case Modules.MenuActions.Eat:\n            case Modules.MenuActions.Eat2: {\n                return Opcodes.Container.Select;\n            }\n\n            case Modules.MenuActions.DropOne: {\n                return Opcodes.Container.Remove;\n            }\n\n            case Modules.MenuActions.Move: {\n                return Opcodes.Container.Swap;\n            }\n        }\n    },\n\n    /**\n     * Checks the email string against regular expression.\n     * @param email Email string to verify.\n     * @returns Whether or not the email string follows the proper Regex pattern.\n     */\n\n    isEmail(email: string): boolean {\n        return /^(([^\\s\"(),.:;<>@[\\\\\\]]+(\\.[^\\s\"(),.:;<>@[\\\\\\]]+)*)|(\".+\"))@((\\[(?:\\d{1,3}\\.){3}\\d{1,3}])|(([\\dA-Za-z-]+\\.)+[A-Za-z]{2,}))$/.test(\n            email\n        );\n    },\n\n    /**\n     * Calculates the region based on provided coordinates.\n     * @param x The x grid coordinate.\n     * @param y The y grid coordinate.\n     * @returns The region number.\n     */\n\n    getRegion(x: number, y: number): number {\n        let regX = Math.floor(x / Modules.Constants.MAP_DIVISION_SIZE),\n            regY = Math.floor(y / Modules.Constants.MAP_DIVISION_SIZE);\n\n        return regX + regY * this.sideLength;\n    },\n\n    /**\n     * For the purpose of not repeatedly writing the same stats.\n     * @returns Empty stats values.\n     */\n\n    getEmptyStats(): Stats {\n        return {\n            crush: 0,\n            slash: 0,\n            stab: 0,\n            archery: 0,\n            magic: 0\n        };\n    },\n\n    /**\n     * Creates an empty bonuses object.\n     * @returns Empty bonuses object with default values.\n     */\n\n    getEmptyBonuses(): Bonuses {\n        return {\n            accuracy: 0,\n            strength: 0,\n            archery: 0,\n            magic: 0\n        };\n    },\n\n    /**\n     * Given the input of a sprite, we generate a hurt sprite. A hurt sprite\n     * is one that has all non-empty pixels turned a shade of red. We assume that\n     * the sprite is loaded upon calling this function. The hurt sprite is\n     * identical and can be a clone of the original sprite.\n     * @param sprite The sprite that we want to generate a hurt sprite for.\n     */\n\n    getHurtSprite(sprite: Sprite): Sprite {\n        let canvas = document.createElement('canvas'),\n            context = canvas.getContext('2d')!,\n            hurtSprite = new Sprite(sprite.data); // Create a clone to avoid issues.\n\n        canvas.width = sprite.image.width;\n        canvas.height = sprite.image.height;\n\n        // Draw an image of the sprite onto the canvas.\n        context.drawImage(sprite.image, 0, 0, sprite.image.width, sprite.image.height);\n\n        let spriteData = context.getImageData(0, 0, sprite.image.width, sprite.image.height);\n\n        /**\n         * This function iterates through the pixel data. The context data stores pixel information\n         * in a 1D array. Each value represents a colour channel (red, green, blue, alpha). At each\n         * 4 indices, information about a single pixel is stored. For example, the first 4 indices\n         * represent the red, green, blue and alpha values of the first pixel. The next 4 indices\n         * represent the red, green, blue and alpha values of the second pixel and so on.\n         */\n\n        for (let i = 0; i < spriteData.data.length; i += 4) {\n            // Skip transparent pixels.\n            if (spriteData.data[i + 4] === 0) continue;\n\n            // 0 - red, 1 - green, 2 - blue, 3 - alpha\n            spriteData.data[i] = 255;\n            spriteData.data[i + 1] = spriteData.data[i + 2] = 75;\n        }\n\n        // Apply the new image data onto the context\n        context.putImageData(spriteData, 0, 0);\n\n        // Update the image of the hurt sprite.\n        hurtSprite.image = canvas;\n\n        // Toggle as loaded for use\n        hurtSprite.loaded = true;\n\n        return hurtSprite;\n    },\n\n    /**\n     * A silhouette is a yellow hue that is drawn around the sprite. It is used for\n     * highlighting a sprite when hovering over it.\n     */\n\n    getSilhouetteSprite(sprite: Sprite): Sprite {\n        let canvas = document.createElement('canvas'),\n            context = canvas.getContext('2d')!,\n            silhouetteSprite = new Sprite(sprite.data); // Create a clone to avoid issues.\n\n        canvas.width = sprite.image.width;\n        canvas.height = sprite.image.height;\n\n        // Draw an image of the sprite onto the canvas.\n        context.drawImage(sprite.image, 0, 0, sprite.image.width, sprite.image.height);\n\n        let spriteData = context.getImageData(0, 0, sprite.image.width, sprite.image.height),\n            cloneData = context.getImageData(0, 0, sprite.image.width, sprite.image.height);\n\n        /**\n         * We iterate each pixel (4 indices) and look for a pixel that has a zero alpha value\n         * but also has an adjacent pixel that has a non-zero alpha value. If this is the case,\n         * we set the pixel colour to (255, 255, 150) and alpha to 150.\n         */\n\n        for (let i = 0; i < cloneData.data.length; i += 4) {\n            // Non-empty pixels are skipped.\n            if (cloneData.data[i + 3] !== 0) continue;\n\n            // Extract the x and y coordinates of the pixel.\n            let x = (i / 4) % sprite.image.width,\n                y = Math.floor(i / 4 / sprite.image.width);\n\n            // Test edge cases, we don't want to draw a silhouette on the edge of the sprite.\n            if (x === 0 || x === sprite.image.width - 1 || y === 0 || y === sprite.image.height - 1)\n                continue;\n\n            // Verify the up, down, left and right pixels.\n            let adjacentPixels = [\n                cloneData.data[i - 1], // Left\n                cloneData.data[i + 7], // Right\n                cloneData.data[i - cloneData.width * 4 + 3], // Up\n                cloneData.data[i + cloneData.width * 4 + 3] // Down\n            ];\n\n            // If any of the adjacent pixels are non-empty, we set the current pixel to yellow.\n            if (adjacentPixels.some((pixel) => pixel !== 0)) {\n                spriteData.data[i] = spriteData.data[i + 1] = 255;\n                spriteData.data[i + 2] = spriteData.data[i + 3] = 150;\n            }\n        }\n\n        // Apply the new image data onto the context\n        context.putImageData(spriteData, 0, 0);\n\n        // Update the image of the silhouette sprite.\n        silhouetteSprite.image = canvas;\n\n        // Toggle as loaded for use\n        silhouetteSprite.loaded = true;\n\n        return silhouetteSprite;\n    },\n\n    /**\n     * Grabs the default animations for a sprite. We do this to alleviate\n     * the amount of information in the sprites.json file. We account for\n     * two types of sprites: items and characters.\n     * @param item Whether or not we are grabbing the default animations for an item.\n     * @returns The animation data for the sprite.\n     */\n\n    getDefaultAnimations(item = false): AnimationData {\n        // Default animations for an item.\n        if (item)\n            return {\n                idle: {\n                    length: 1,\n                    row: 0\n                }\n            };\n\n        // Default animations for a player/mob character.\n        return {\n            atk_right: {\n                length: 5,\n                row: 0\n            },\n            walk_right: {\n                length: 4,\n                row: 1\n            },\n            idle_right: {\n                length: 2,\n                row: 2\n            },\n            atk_up: {\n                length: 5,\n                row: 3\n            },\n            walk_up: {\n                length: 4,\n                row: 4\n            },\n            idle_up: {\n                length: 2,\n                row: 5\n            },\n            atk_down: {\n                length: 5,\n                row: 6\n            },\n            walk_down: {\n                length: 4,\n                row: 7\n            },\n            idle_down: {\n                length: 2,\n                row: 8\n            }\n        };\n    },\n\n    /**\n     * Fades in an element.\n     * @param element The element to fade in.\n     * @param speed (Optional) The speed at which to fade in.\n     */\n\n    fadeIn(element: HTMLElement, speed = 0.1): void {\n        element.style.opacity ||= '0';\n        element.style.display = 'block';\n\n        let fade = () => {\n            let opacity = parseFloat(element.style.opacity) + speed;\n            element.style.display = 'block';\n\n            if (opacity <= 1) {\n                element.style.opacity = opacity.toString();\n                requestAnimationFrame(fade);\n            }\n        };\n\n        requestAnimationFrame(fade);\n    },\n\n    /**\n     * Fades out an element.\n     * @param element The element to fade out.\n     * @param speed (Optional) The speed at which to fade out.\n     */\n\n    fadeOut(element: HTMLElement, speed = 0.2): void {\n        element.style.opacity ||= '1';\n\n        let fade = () => {\n            let opacity = parseFloat(element.style.opacity) - speed;\n\n            if (opacity >= 0) {\n                element.style.opacity = opacity.toString();\n                requestAnimationFrame(fade);\n            } else element.style.display = 'none';\n        };\n\n        requestAnimationFrame(fade);\n    }\n};\n","import install from './lib/pwa';\nimport { isMobile } from './utils/detect';\nimport Storage from './utils/storage';\nimport Util from './utils/util';\nimport { onSecondaryPress } from './utils/press';\n\nimport Updates from '@kaetram/common/text/en/updates.json';\n\nimport type { SerializedServer } from '@kaetram/common/types/api';\n\ntype EmptyCallback = () => void;\ntype KeyDownCallback = (e: KeyboardEvent) => void;\ntype KeyUpCallback = (e: KeyboardEvent) => void;\ntype LoginCallback = (server?: SerializedServer) => void;\ntype LeftClickCallback = (e: MouseEvent) => void;\ntype RightClickCallback = (position: { x: number; y: number }) => void;\ntype MouseMoveCallback = (e: MouseEvent) => void;\n\ntype ValidationType = 'status' | 'validation-error' | 'validation-warning';\n\nexport default class App {\n    public config = window.config;\n\n    public storage: Storage = new Storage();\n\n    public body: HTMLElement = document.querySelector('body')!;\n\n    private parchment: HTMLElement = document.querySelector('#parchment')!;\n\n    public canvas: HTMLElement = document.querySelector('#canvas')!;\n\n    private loginForm: HTMLElement = document.querySelector('#load-character form')!;\n    private registerForm: HTMLElement = document.querySelector('#create-character form')!;\n\n    private worldsList: HTMLOListElement = document.querySelector('#worlds')!;\n\n    private passwordConfirmation: HTMLInputElement = document.querySelector(\n        '#register-password-confirmation-input'\n    )!;\n    private emailField: HTMLInputElement = document.querySelector('#register-email-input')!;\n\n    private loginButton: HTMLButtonElement = document.querySelector('#login')!;\n    private registerButton: HTMLButtonElement = document.querySelector('#new-account')!;\n    private cancelRegister: HTMLButtonElement = document.querySelector('#cancel-register')!;\n    private cancelWorlds: HTMLButtonElement = document.querySelector('#cancel-worlds')!;\n    private continueWorlds: HTMLButtonElement = document.querySelector('#continue-worlds')!;\n\n    private respawn: HTMLButtonElement = document.querySelector('#respawn')!;\n\n    private rememberMe: HTMLInputElement = document.querySelector('#remember-me input')!;\n    private guest: HTMLInputElement = document.querySelector('#guest input')!;\n\n    private about: HTMLElement = document.querySelector('#toggle-about')!;\n\n    private validation: NodeListOf<HTMLElement> = document.querySelectorAll('.validation-summary')!;\n    private loading: HTMLElement = document.querySelector('.loader')!;\n    private worldSelectButton: HTMLElement = document.querySelector('#world-select-button')!;\n    private gameVersion: HTMLElement = document.querySelector('#game-version')!;\n\n    private currentScroll = 'load-character';\n    private parchmentAnimating = false;\n    private loggingIn = false; // Used to prevent interactions when trying to log in.\n    private menuHidden = false; // Used to reroute key input to the callback.\n\n    public statusMessage = '';\n\n    private selectedServer?: SerializedServer;\n\n    public keyDownCallback?: KeyDownCallback;\n    public keyUpCallback?: KeyUpCallback;\n    public loginCallback?: LoginCallback;\n    public leftClickCallback?: LeftClickCallback;\n    public rightClickCallback?: RightClickCallback;\n    public mouseMoveCallback?: MouseMoveCallback;\n    public resizeCallback?: EmptyCallback;\n    public respawnCallback?: EmptyCallback;\n    public focusCallback?: EmptyCallback;\n\n    public constructor() {\n        this.sendStatus('Initializing the game client');\n\n        this.load();\n    }\n\n    /**\n     * Loads all the callbacks responsible\n     * for interactions. Things such as mouse clicks,\n     * keyboard presses, interaction with main menu\n     * elements, etc.\n     */\n\n    private load(): void {\n        this.loginForm.addEventListener('submit', this.login.bind(this));\n        this.registerForm.addEventListener('submit', this.login.bind(this));\n\n        this.registerButton.addEventListener('click', () => this.openScroll('create-character'));\n        this.cancelRegister.addEventListener('click', () => this.openScroll('load-character'));\n\n        this.cancelWorlds.addEventListener('click', () => this.openScroll('load-character'));\n        this.continueWorlds.addEventListener('click', () => this.openScroll('load-character'));\n\n        this.about.addEventListener('click', () => this.openScroll('about'));\n\n        this.respawn.addEventListener('click', () => this.respawnCallback?.());\n\n        this.parchment.addEventListener('click', () => {\n            if (this.hasFooterOpen()) this.openScroll('load-character');\n            if (this.body.classList.contains('news')) this.body.classList.remove('news');\n        });\n\n        this.worldSelectButton.addEventListener('click', () => this.openScroll('world-select'));\n\n        this.gameVersion.textContent = `${this.config.version}${this.config.minor}`;\n\n        // Document callbacks such as clicks and keystrokes.\n        document.addEventListener('keydown', (e: KeyboardEvent) => e.key !== 'Enter');\n        document.addEventListener('keydown', this.handleKeyDown.bind(this));\n        document.addEventListener('keyup', (e: KeyboardEvent) => this.keyUpCallback?.(e));\n        document.addEventListener('mousemove', (e: MouseEvent) => this.mouseMoveCallback?.(e));\n\n        // Canvas callbacks\n        this.canvas.addEventListener('click', (e: MouseEvent) => this.leftClickCallback?.(e));\n\n        // Window callbacks\n        window.addEventListener('resize', () => this.resizeCallback?.());\n\n        window.addEventListener('focus', () => this.focusCallback?.());\n\n        // Body callbacks\n        onSecondaryPress(document.querySelector('#canvas')!, (position) =>\n            this.rightClickCallback?.(position)\n        );\n    }\n\n    /**\n     * Loads the local storage values for the username,\n     * password, and remember me checkmark. If there is an\n     * error in the storage, it will be displayed and immediately\n     * removed when the function to get is is called.\n     */\n\n    private loadLogin(): void {\n        // Grab and erase the error message.\n        let errorMessage = this.storage.getError();\n\n        // Display the error message if present.\n        if (errorMessage) this.sendError(errorMessage);\n\n        // No need to load anything if the remember me isn't toggled.\n        if (!this.storage.hasRemember()) return;\n\n        // Update the input fields with the stored values.\n        this.getUsernameField().value = this.storage.getUsername();\n        this.getPasswordField().value = this.storage.getPassword();\n\n        // Set the checkmark for remember me to true.\n        this.rememberMe.checked = true;\n    }\n\n    /**\n     * Handler for key down input event. When the menu is hidden,\n     * that is, the game has started, we redirect all input to the\n     * callback function.\n     * @param e Event containing key data.\n     */\n\n    public handleKeyDown(e: KeyboardEvent): void {\n        if (this.isMenuHidden()) return this.keyDownCallback?.(e);\n\n        if (e.key === 'Enter') this.login();\n    }\n\n    /**\n     * Clears all the status messages and allows the\n     * login button to be pressed. This function generally\n     * gets called once the map has finished loading.\n     */\n\n    public ready(): void {\n        this.sendStatus();\n\n        this.loginButton.disabled = false;\n\n        this.loadLogin();\n        this.loadWorlds();\n\n        if (!('indexedDB' in window))\n            this.setValidation(\n                'validation-warning',\n                'Your browser does not support IndexedDB. Regions will not be cached.'\n            );\n    }\n\n    /**\n     * Attempts to log in by checking all the necessary fields and creating\n     * a callback should all checks pass.\n     */\n\n    private login(): void {\n        if (this.loggingIn || this.statusMessage || !this.verifyForm()) return;\n\n        this.clearErrors();\n        this.toggleLogin(true);\n\n        // Creates a callback with all the fields.\n        this.loginCallback?.(this.selectedServer);\n\n        // Installs the PWA.\n        install();\n    }\n\n    /**\n     * Checks if the remember me checkbox is toggled and\n     * saves the username and password to local storage.\n     */\n\n    private saveLogin(): void {\n        // Always save the state of the remember me button.\n        this.storage.setRemember(this.isRememberMe());\n\n        // Reset the credentials each successful login.\n        this.storage.setCredentials();\n\n        // Stop here if the checkmark isn't toggled.\n        if (!this.isRememberMe()) return;\n\n        // Save the username and password.\n        this.storage.setCredentials(this.getUsername(), this.getPassword());\n    }\n\n    /**\n     * Shows all the elements regarding the main\n     * menu and hides the game element.\n     */\n\n    public showMenu(): void {\n        this.body.className = 'intro';\n\n        this.menuHidden = false;\n        this.worldSelectButton.hidden = false;\n        this.gameVersion.hidden = false;\n    }\n\n    /**\n     * Clears the loader and begins showing\n     * the game after a 500 millisecond timeout.\n     */\n\n    public fadeMenu(): void {\n        if (this.menuHidden) return;\n\n        this.body.className = 'game';\n\n        this.menuHidden = true;\n        this.worldSelectButton.hidden = true;\n        this.gameVersion.hidden = true;\n\n        this.updateLoader();\n        this.saveLogin();\n\n        setTimeout(() => this.displayNews(), 1000);\n    }\n\n    /**\n     * Opens a scroll by changing to the destination. Clears\n     * errors from the current scroll, and checks if to animate\n     * or not depending on if the dimensions match that of a mobile.\n     * @param destination The new scroll we are setting to.\n     */\n\n    public openScroll(destination: string): void {\n        if (this.loggingIn || this.parchmentAnimating) return;\n\n        // Clears all errors that may have been displayed.\n        this.clearErrors();\n\n        this.changeScroll(destination, !isMobile());\n    }\n\n    /**\n     * Changes a scroll with or without an animation. It updates the current scroll\n     * variable in the class as well.\n     * @param destination The destination of the scroll we're changing to.\n     * @param withAnimation Whether or not to use animation when changing scrolls.\n     */\n\n    public changeScroll(destination: string, withAnimation = false): void {\n        if (withAnimation) {\n            this.parchmentAnimating = true;\n\n            // Toggle animation and remove the current scroll class from parchment.\n            this.parchment.classList.toggle('animate');\n            this.parchment.classList.remove(this.currentScroll);\n\n            // Set a timeout for the animation before displaying data.\n            window.setTimeout(() => {\n                // Toggle so that we can allow changing scrolls again.\n                this.parchmentAnimating = false;\n\n                // Animate again and add the new destination scroll.\n                this.parchment.classList.toggle('animate');\n                this.parchment.classList.add(destination);\n\n                // Focus on the first text field in the new scroll.\n                document.querySelector<HTMLInputElement>(`#${destination} input`)?.focus();\n            }, 1000);\n        } else {\n            this.parchment.classList.remove(this.currentScroll);\n            this.parchment.classList.add(destination);\n        }\n\n        // Update the current scroll we're on to the destination.\n        this.currentScroll = destination;\n    }\n\n    /**\n     * Verifies the form inputs. Checks that the username, password,\n     * and email (if registering) are valid. It also checks against\n     * whether the password confirmation matches the password inputted.\n     * @returns True if all the checks pass, false otherwise.\n     */\n\n    private verifyForm(): boolean {\n        // Guest users don't need to input anything.\n        if (this.isGuest()) return true;\n\n        // Check the username is not empty.\n        if (!this.getUsername())\n            return this.sendError('Please enter a username.', this.getUsernameField());\n\n        // Check if the password is not empty.\n        if (!this.getPassword())\n            return this.sendError('Please enter a password.', this.getPasswordField());\n\n        // Handle registration page.\n        if (this.isRegistering()) {\n            // Password must be at least 3 characters long.\n            if (this.getPassword().length < 3)\n                return this.sendError(\n                    'Password must be at least 3 characters long.',\n                    this.getPasswordField()\n                );\n\n            // Check that the password matches the password confirmation.\n            if (this.getPassword() !== this.getPasswordConfirmation())\n                return this.sendError('Passwords do not match.', this.passwordConfirmation);\n\n            // Verify email against regex.\n            if (this.getEmail() !== '' && !Util.isEmail(this.getEmail()))\n                return this.sendError(`The email you've entered is not valid.`, this.emailField);\n        }\n\n        return true;\n    }\n\n    /**\n     * A status is a form of message used during the loading\n     * of the client. It is the blue text shown when we are\n     * initializing the map, renderer, etc.\n     * @param message Status string message to display.\n     */\n\n    public sendStatus(message = ''): void {\n        this.clearErrors();\n\n        this.statusMessage = message;\n\n        if (!message) return;\n\n        this.setValidation('status', message);\n\n        let status = document.querySelector('.status')!;\n\n        if (status) status.innerHTML = message + this.getLoaderDots();\n    }\n\n    /**\n     * A loader functions as a status update which is displayed\n     * during the connection process. It shows black letters followed\n     * by the loader dots.\n     * @param message The message to display.\n     */\n\n    public updateLoader(message = ''): void {\n        this.loading.innerHTML = message ? message + this.getLoaderDots() : '';\n    }\n\n    /**\n     * When a new player or an update to the game has occurred we send a scroll\n     * notification. In the case of a new player we welcome them to the game,\n     * in the case of an update, we show the update changelog using the JSON in `common`.\n     */\n\n    public displayNews(): void {\n        let title = document.querySelector('#news-title')!,\n            content = document.querySelector('#news-content')!;\n\n        if (!title || !content) return;\n\n        // Show the default welcome screen when there is a new player.\n        if (this.storage.isNew()) return this.body.classList.add('news');\n\n        // Display new version changelogs.\n        if (this.storage.newVersion) {\n            title.textContent = `Kaetram ${this.config.version} Changelog`;\n\n            let changes = Updates[this.config.version as keyof typeof Updates];\n\n            if (!changes) return;\n\n            content.textContent = '';\n\n            for (let cc of changes.content) content.innerHTML += `${cc}<br>`;\n\n            this.body.classList.add('news');\n        }\n    }\n\n    /**\n     * An error is a red message displayed on the login\n     * or registration page. This is generally when something\n     * goes wrong, like an invalid input, server responding\n     * with an error, or a malfunction in the client.\n     * @param field A field can be specified to point out an error.\n     * @param error An error message is specified to be displayed.\n     * @returns Defaults to returning false so that it can be used\n     * during the form validation as a return statement for cleanliness.\n     */\n\n    public sendError(error: string, field?: HTMLElement): boolean {\n        if (this.isMenuHidden()) return this.storage.setError(error);\n\n        // Clear existing errors.\n        this.clearErrors();\n\n        // Appends an error component to the validation summary.\n        this.setValidation('validation-error', error);\n\n        // Stop here if no field is specified.\n        if (!field) return false;\n\n        // Circles a field with a red border.\n        field.classList.add('field-error');\n        field.focus();\n\n        let keyEvent = () => {\n            // Clear the event listener.\n            field.removeEventListener('keypress', keyEvent, false);\n\n            field.classList.remove('field-error');\n            document.querySelector('.validation-error')?.remove();\n        };\n\n        field.addEventListener('keypress', keyEvent);\n\n        return false;\n    }\n\n    /**\n     * Clears all the errors that may have been displayed.\n     * This goes through all the fields as well as erasing\n     * the messages displayed.\n     */\n\n    public clearErrors(): void {\n        document.querySelector('.status')?.remove();\n\n        this.clearValidation();\n\n        this.getUsernameField().classList.remove('field-error');\n        this.getPasswordField().classList.remove('field-error');\n\n        this.passwordConfirmation.classList.remove('field-error');\n        this.emailField.classList.remove('field-error');\n    }\n\n    /**\n     * Prepares the main menu for the login status. We disable\n     * ability to change between scrolls, the login/register\n     * buttons, as well as hide certain elements.\n     */\n\n    public toggleLogin(toggle: boolean): void {\n        this.updateLoader('Connecting');\n\n        this.toggleTyping(toggle);\n\n        this.loggingIn = toggle;\n\n        this.loading.hidden = !toggle;\n\n        this.loginButton.disabled = toggle;\n        this.registerButton.disabled = toggle;\n        const logo = document.getElementById('logo');\n        if (logo) {\n            logo.style.display = 'none'\n        }\n    }\n\n    /**\n     * Toggles the readonly state of the input fields.\n     * @param state Boolean value to set the readonly state to.\n     */\n\n    private toggleTyping(state: boolean): void {\n        this.getUsernameField().readOnly = state;\n        this.getPasswordField().readOnly = state;\n\n        this.passwordConfirmation.readOnly = state;\n        this.emailField.readOnly = state;\n    }\n\n    private hasFooterOpen(): boolean {\n        return this.parchment.classList.contains('about');\n    }\n\n    /**\n     * @returns Whether or not the guest toggle is checked.\n     */\n\n    public isGuest(): boolean {\n        return this.guest.checked;\n    }\n\n    /**\n     * Checks if the remember me checkbox is checked.\n     * @returns Whether the remember me has the checked attribute.\n     */\n\n    public isRememberMe(): boolean {\n        return this.rememberMe.checked;\n    }\n\n    /**\n     * Checks whether or not the current activity in the main\n     * menu is the register screen.\n     * @returns Whether or not the current scroll is the `create-character` scroll.\n     */\n\n    public isRegistering(): boolean {\n        return this.currentScroll === 'create-character';\n    }\n\n    /**\n     * Checks if the main menu is currently hidden (game has started).\n     * @returns Whether the menuHidden attribute is set to true.\n     */\n\n    public isMenuHidden(): boolean {\n        return this.menuHidden;\n    }\n\n    /**\n     * @returns The jQuery HTML element of the username field\n     * depending on the currently open scroll.\n     */\n\n    private getUsernameField(): HTMLInputElement {\n        return document.querySelector(\n            this.isRegistering() ? '#register-name-input' : '#login-name-input'\n        )!;\n    }\n\n    /**\n     * Grabs the username field value from either the login screen or the register\n     * screen depending on the status of the current scroll open.\n     * @returns String value of the input field.\n     */\n\n    public getUsername(): string {\n        return this.getUsernameField().value;\n    }\n\n    /**\n     * @returns The JQuery HTML element of the password field\n     * depending on the currently open scroll.\n     */\n\n    private getPasswordField(): HTMLInputElement {\n        return document.querySelector(\n            this.isRegistering() ? '#register-password-input' : '#login-password-input'\n        )!;\n    }\n\n    /**\n     * Grabs the password value from the field. Acts the same as `getUsername` in that\n     * it selects the adequate field depending on the currently open scroll.\n     * @returns Raw string value of the password field.\n     */\n\n    public getPassword(): string {\n        return this.getPasswordField().value;\n    }\n\n    /**\n     * @returns The password confirmation field input string.\n     */\n\n    private getPasswordConfirmation(): string {\n        return this.passwordConfirmation.value;\n    }\n\n    /**\n     * Grabs the email field input from the register screen. If we are\n     * not on the registering screen, we return an empty string.\n     * @returns String value of the email field or an empty string if\n     * we are not on the register screen.\n     */\n\n    public getEmail(): string {\n        if (!this.isRegistering()) return '';\n\n        return this.emailField.value;\n    }\n\n    /**\n     * Returns a static string for the loader dots. We're\n     * essentially creating a `span` HTML element that\n     * we can just pull when needed.\n     * @returns A string containing the loader dots HTML.\n     */\n\n    public getLoaderDots(): string {\n        return '<span class=\"loader-dot\">.</span><span class=\"loader-dot\">.</span><span class=\"loader-dot\">.</span>';\n    }\n\n    /**\n     * Iterates through all the validations and clears them.\n     */\n\n    private clearValidation(): void {\n        for (let validation of this.validation) validation.innerHTML = '';\n    }\n\n    /**\n     * Iterates through the validation summaries (on the login and register)\n     * page and sets their status messages to the provided parameters.\n     * @param type What type of validation we're setting the message for.\n     * @param message The message we are setting for the validation.\n     */\n\n    private setValidation(type: ValidationType, message = ''): void {\n        this.clearValidation();\n\n        // Create a validation message based on type and string message.\n        for (let validation of this.validation)\n            validation.append(this.createValidation(type, message));\n    }\n\n    /**\n     * Creates a new <span></span> DOM element with the provided type\n     * and message contents.\n     * @param type Validation type, status is blue, error is red.\n     * @param message What to display in the message.\n     */\n\n    private createValidation(type: ValidationType, message = ''): HTMLSpanElement {\n        let spanElement = document.createElement('span');\n\n        // Type of element we are creating (status is blue, error is red).\n        spanElement.classList.add(type);\n        spanElement.classList.add('blink');\n\n        // Add the message onto the span element.\n        spanElement.textContent = message;\n\n        return spanElement;\n    }\n\n    /**\n     * Selects the server to connect to and displays its player count on the button.\n     *\n     * @param server The server to connect to.\n     */\n\n    private selectServer(server: SerializedServer): void {\n        this.selectedServer = server;\n\n        let name = this.worldSelectButton.querySelector('strong')!;\n        name.textContent = `${server.name} ${server.id}`;\n\n        let players = this.worldSelectButton.querySelector('span')!;\n        players.textContent = `(${server.players}/${server.maxPlayers} players)`;\n    }\n\n    /**\n     * Loads the list of worlds from the hub and adds them to the world select.\n     * The first world in the list is automatically selected.\n     */\n\n    private async loadWorlds(): Promise<void> {\n        if (!this.config.hub) return;\n\n        // Fetch a list of servers from the hub\n        let res = await fetch(`${this.config.hub}/all`).catch(() => null);\n\n        if (!res) return this.setValidation('validation-error', 'Unable to load world list.');\n\n        let servers: SerializedServer[] = await res.json(),\n            [firstServer] = servers;\n\n        // Check if there are no servers\n        if (!firstServer)\n            // Display an error message.\n            return this.setValidation('validation-error', 'No servers are currently available.');\n\n        // Select the first server\n        this.selectServer(firstServer);\n\n        // If there is only one server, then hide the world select button\n        if (servers.length < 2) return;\n\n        this.worldSelectButton.hidden = false;\n\n        for (let i in servers) {\n            let server = servers[i],\n                // Create a new <li> element for each server\n                li = document.createElement('li'),\n                name = document.createElement('strong'),\n                players = document.createElement('span');\n\n            // If this is the first server in the list, select it and mark it as active\n            if (parseInt(i) === 0) li.classList.add('active');\n\n            name.textContent = `${server.name} ${server.id}`;\n\n            players.textContent = `${server.players}/${server.maxPlayers} players`;\n\n            li.append(name);\n            li.append(players);\n\n            // When the <li> element is clicked, select the server and update the active class\n            li.addEventListener('click', () => {\n                this.selectServer(server);\n\n                this.worldsList.querySelector('li.active')?.classList.remove('active');\n                li.classList.add('active');\n            });\n\n            // Add the <li> element to the list of worlds\n            this.worldsList.append(li);\n        }\n    }\n\n    /**\n     * Handles the event of a key being initially pressed down.\n     * @param callback Contains event data about the key pressed.\n     */\n\n    public onKeyDown(callback: KeyDownCallback): void {\n        this.keyDownCallback = callback;\n    }\n\n    /**\n     * Handles the event of a key being released.\n     * @param callback Contains event data about the key released.\n     */\n\n    public onKeyUp(callback: KeyUpCallback): void {\n        this.keyUpCallback = callback;\n    }\n\n    /**\n     * Handles when an attempt to log in is made.\n     * @param callback Data contains username, password, and email\n     * if the user is registering.\n     */\n\n    public onLogin(callback: LoginCallback): void {\n        this.loginCallback = callback;\n    }\n\n    /**\n     * Callback for when left mouse click occurs.\n     * @param callback Event data about the left mouse click.\n     */\n\n    public onLeftClick(callback: LeftClickCallback): void {\n        this.leftClickCallback = callback;\n    }\n\n    /**\n     * Callback about context menu activation. Also known\n     * as right click in the browser.\n     * @param callback Callback containing ContextMenuData.\n     */\n\n    public onRightClick(callback: RightClickCallback): void {\n        this.rightClickCallback = callback;\n    }\n\n    /**\n     * Callback for whenever the mouse moves.\n     * @param callback Contains mouse movement event data.\n     */\n\n    public onMouseMove(callback: MouseMoveCallback): void {\n        this.mouseMoveCallback = callback;\n    }\n\n    /**\n     * An empty callback signal containing a signal\n     * for the renderer and various other elements\n     * to undergo resizing.\n     */\n\n    public onResize(callback: EmptyCallback): void {\n        this.resizeCallback = callback;\n    }\n\n    /**\n     * Callback for when the respawn button is pressed.\n     */\n\n    public onRespawn(callback: EmptyCallback): void {\n        this.respawnCallback = callback;\n    }\n\n    /**\n     * Callback for when the window comes back in focus. (e.g. tab is switched)\n     */\n\n    public onFocus(callback: EmptyCallback): void {\n        this.focusCallback = callback;\n    }\n}\n","import Util from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Entity from '../entity/entity';\nimport type Game from '../game';\n\nexport default class AudioController {\n    /** Duration for background music to fade in and out. */\n    private readonly musicCrossfadeDuration = 3; // Crossfade for 3 seconds.\n\n    /** Minimum gain for background music. */\n    private readonly musicMinGain = 0.01;\n    /** Maximum gain for background music. */\n    private readonly musicMaxGain = 0.5;\n\n    /** Save audio buffers. */\n    private buffers: { [url: string]: Promise<AudioBuffer> } = {};\n\n    /** The main audio context. */\n    private context!: AudioContext;\n\n    /** Gain node used to fade in/out the background music */\n    private musicGainNode!: GainNode;\n\n    /** Make sure there's only one gain node for music. */\n    private isMusicConnected = false;\n\n    public constructor(private game: Game) {}\n\n    /**\n     * Creates an audio context (generally when player first interacts with the website).\n     */\n\n    public createContext(): void {\n        this.context = new AudioContext();\n    }\n\n    /**\n     * Plays a new sound.\n     * @param sound - The sound to play.\n     * @param target - The target to play the sound from.\n     * If not specified, the sound will be played nonspatially.\n     */\n\n    public async playSound(sound: string, target?: Entity) {\n        if (!this.isAudioEnabled()) return;\n\n        let source = await this.bufferSource(`/audio/sounds/${sound}.mp3`),\n            soundVolume = this.getSoundVolume(),\n            node = source.connect(new GainNode(this.context, { gain: soundVolume }));\n\n        if (target && !this.getSettings().lowPowerMode) {\n            let { tileSize } = this.game.map;\n\n            // Create and connect a panner node for spatial sounds\n            node = node.connect(\n                new PannerNode(this.context, {\n                    positionX: target.x,\n                    positionY: target.y,\n                    distanceModel: 'linear',\n                    refDistance: tileSize,\n                    maxDistance: tileSize * 10 // Maximum of 10 tiles.\n                })\n            );\n        }\n\n        node.connect(this.context.destination);\n\n        let { gain } = this.musicGainNode;\n\n        // Make sure the music stays dampened with multiple concurrent sounds.\n        gain.cancelScheduledValues(this.context.currentTime);\n\n        // Dampen the music by the sound volume.\n        this.rampGain(gain, gain.value - (soundVolume * this.musicMaxGain) / 2);\n\n        source.addEventListener('ended', () => {\n            this.rampGain(gain, this.getMusicVolume(), 0.5);\n        });\n\n        source.start();\n    }\n\n    /**\n     * Plays background music, replacing any currently playing music.\n     * @param music - The music to play. If not specified, it will stop the current music.\n     */\n\n    public async playMusic(music?: string) {\n        if (!music) return this.stopMusic();\n\n        let source = await this.bufferSource(`/audio/music/${music}.mp3`);\n        source.loop = true;\n\n        this.stopMusic();\n        source.connect(this.musicGainNode);\n\n        if (this.isAudioEnabled()) this.musicGainNode.connect(this.context.destination);\n\n        this.rampGain(this.musicGainNode.gain, this.getMusicVolume(), this.musicCrossfadeDuration);\n        source.start();\n    }\n\n    /**\n     * Loads and saves the buffer of an audio source.\n     * @param url - The url of the audio to buffer.\n     * @returns The audio buffer source node.\n     */\n\n    private async bufferSource(url: string) {\n        this.updateVolume();\n\n        this.buffers[url] ??= this.loadAudio(url);\n\n        return new AudioBufferSourceNode(this.context, {\n            buffer: await this.buffers[url]\n        });\n    }\n\n    /**\n     * Loads and decodes an audio source into a buffer.\n     * @param url - The url of the audio to load.\n     * @returns The decoded audio source.\n     */\n\n    private async loadAudio(url: string) {\n        let audio = await fetch(url),\n            arrayBuffer = await audio.arrayBuffer(),\n            audioBuffer = await this.context.decodeAudioData(arrayBuffer);\n\n        return audioBuffer;\n    }\n\n    /**\n     * Updates the volume of the music.\n     * This is also where the audio context is initialized.\n     */\n\n    public updateVolume() {\n        if (!this.musicGainNode) this.initMusicNode();\n\n        let musicVolume = this.getMusicVolume();\n\n        if (musicVolume <= 0 || !this.isAudioEnabled()) {\n            if (this.isMusicConnected) {\n                this.musicGainNode.disconnect(this.context.destination);\n                this.isMusicConnected = false;\n            }\n        } else {\n            let { gain } = this.musicGainNode;\n\n            gain.cancelScheduledValues(this.context.currentTime);\n\n            if (this.isMusicConnected) this.rampGain(gain, musicVolume);\n            else {\n                this.musicGainNode.connect(this.context.destination);\n                this.isMusicConnected = true;\n\n                this.rampGain(gain, this.musicMinGain);\n                this.rampGain(gain, musicVolume, this.musicCrossfadeDuration);\n            }\n        }\n    }\n\n    /**\n     * Updates the current audio context listener with the position and orientation of the player.\n     */\n\n    public updatePlayerListener() {\n        if (!this.context || !this.isAudioEnabled() || this.getSettings().lowPowerMode) return;\n\n        let { player } = this.game,\n            { positionX, positionY, forwardX, forwardY } = this.context.listener;\n\n        if (!positionX || !positionY || !forwardX || !forwardY) {\n            this.context.listener.setPosition(player.x, player.y, 0);\n\n            return;\n        }\n\n        positionX.value = player.x;\n        positionY.value = player.y;\n\n        switch (player.orientation) {\n            case Modules.Orientation.Up: {\n                forwardX.value = 0;\n                forwardY.value = 1;\n                break;\n            }\n\n            case Modules.Orientation.Down: {\n                forwardX.value = 0;\n                forwardY.value = -1;\n                break;\n            }\n\n            case Modules.Orientation.Left: {\n                forwardX.value = -1;\n                forwardY.value = 0;\n                break;\n            }\n\n            case Modules.Orientation.Right: {\n                forwardX.value = 1;\n                forwardY.value = 0;\n                break;\n            }\n        }\n    }\n\n    /**\n     * Stops any currently playing music, and initializes a new one.\n     */\n\n    public stopMusic() {\n        let gainNode = this.musicGainNode;\n\n        // Replace the current music node.\n        this.initMusicNode();\n\n        // Return if there's no music to stop.\n        if (!gainNode) return;\n\n        let { gain } = gainNode;\n\n        gain.cancelScheduledValues(this.context.currentTime);\n        this.rampGain(gain, this.musicMinGain, this.musicCrossfadeDuration);\n\n        setTimeout(() => gainNode.disconnect(), this.musicCrossfadeDuration * 1000);\n    }\n\n    /**\n     * (Re)initialize a new music node.\n     */\n\n    private initMusicNode() {\n        this.musicGainNode = new GainNode(this.context, { gain: this.musicMinGain });\n    }\n\n    /**\n     * Transitions the audio gain following a linear ramp.\n     * @param gain - The audio parameter to ramp.\n     * @param volume - The volume to ramp to. If less or equal to zero, the volume won't change.\n     * @param duration - The duration to ramp by. If not specified, the ramp will be instant.\n     */\n\n    private rampGain(gain: AudioParam, volume: number, duration = 0) {\n        if (volume > 0) gain.linearRampToValueAtTime(volume, this.context.currentTime + duration);\n    }\n\n    /**\n     * Gets the sound volume from the settings.\n     * @returns The sound volume.\n     */\n\n    private getSoundVolume(): number {\n        return this.getSettings().soundVolume / 100;\n    }\n\n    /**\n     * Gets the music volume from the settings.\n     * @returns The music volume.\n     */\n\n    private getMusicVolume(): number {\n        return (this.getSettings().musicVolume / 100) * this.musicMaxGain * 2;\n    }\n\n    /**\n     * Gets whether or not the audio is enabled.\n     * @returns `true` if the audio is enabled.\n     */\n\n    private isAudioEnabled() {\n        return this.getSettings().audioEnabled;\n    }\n\n    /**\n     * Gets the settings object from the game storage.\n     * @returns The settings object.\n     */\n\n    private getSettings() {\n        return this.game.storage.data.settings;\n    }\n\n    /**\n     * Picks between the two possible hit sound effects\n     * and plays one of them randomly.\n     */\n\n    public playHitSound(target: Entity): void {\n        this.playSound(`hit${Util.randomInt(1, 2)}`, target);\n    }\n\n    /**\n     * Plays one of the kill sound effects randomly.\n     */\n\n    public playKillSound(target: Entity): void {\n        this.playSound(`kill${Util.randomInt(1, 2)}`, target);\n    }\n}\n","export default class Timer {\n    public constructor(public time: number, public duration: number) {}\n\n    /**\n     * Checks if the timer has expired, that is,\n     * the current time is greater than the time\n     * the timer was greated by duration amount.\n     * @param time The current game time.\n     * @returns Whether or not the timer has expired.\n     */\n\n    public isOver(time: number): boolean {\n        return time - this.time > this.duration;\n    }\n}\n","/*!\n * jQuery JavaScript Library v3.6.3\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright OpenJS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2022-12-20T21:28Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket trac-14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar flat = arr.flat ? function( array ) {\n\treturn arr.flat.call( array );\n} : function( array ) {\n\treturn arr.concat.apply( [], array );\n};\n\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n\t\t// Support: Chrome <=57, Firefox <=52\n\t\t// In some browsers, typeof returns \"function\" for HTML <object> elements\n\t\t// (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n\t\t// We don't want to classify *any* DOM node as a function.\n\t\t// Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n\t\t// Plus for old WebKit, typeof returns \"function\" for HTML collections\n\t\t// (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n\t\t\ttypeof obj.item !== \"function\";\n\t};\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\nvar document = window.document;\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnonce: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, node, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar i, val,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\n\t\t\t\t// Support: Firefox 64+, Edge 18+\n\t\t\t\t// Some browsers don't support the \"nonce\" property on scripts.\n\t\t\t\t// On the other hand, just using `getAttribute` is not enough as\n\t\t\t\t// the `nonce` attribute is reset to an empty string whenever it\n\t\t\t\t// becomes browsing-context connected.\n\t\t\t\t// See https://github.com/whatwg/html/issues/2369\n\t\t\t\t// See https://html.spec.whatwg.org/#nonce-attributes\n\t\t\t\t// The `node.getAttribute` check was added for the sake of\n\t\t\t\t// `jQuery.globalEval` so that it can fake a nonce-containing node\n\t\t\t\t// via an object.\n\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n\t\t\t\tif ( val ) {\n\t\t\t\t\tscript.setAttribute( i, val );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.6.3\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teven: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn ( i + 1 ) % 2;\n\t\t} ) );\n\t},\n\n\todd: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn i % 2;\n\t\t} ) );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent Object.prototype pollution\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\t\t\t\t\tsrc = target[ name ];\n\n\t\t\t\t\t// Ensure proper type for the source value\n\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n\t\t\t\t\t\tclone = {};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src;\n\t\t\t\t\t}\n\t\t\t\t\tcopyIsArray = false;\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a provided context; falls back to the global one\n\t// if not specified.\n\tglobalEval: function( code, options, doc ) {\n\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn flat( ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n\tfunction( _i, name ) {\n\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n\t} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.9\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://js.foundation/\n *\n * Date: 2022-12-19\n */\n( function( window ) {\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tnonnativeSelectorCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ( {} ).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpushNative = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[ i ] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|\" +\n\t\t\"ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram\n\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\n\t\t// \"Attribute values must be CSS identifiers [capture 5]\n\t\t// or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n\t\twhitespace + \"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" +\n\t\twhitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace +\n\t\t\"*\" ),\n\trdescend = new RegExp( whitespace + \"|>\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace +\n\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trhtml = /HTML$/i,\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace + \"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n\tfunescape = function( escape, nonHex ) {\n\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n\n\t\treturn nonHex ?\n\n\t\t\t// Strip the backslash prefix from a non-hex escape sequence\n\t\t\tnonHex :\n\n\t\t\t// Replace a hexadecimal escape sequence with the encoded Unicode code point\n\t\t\t// Support: IE <=11+\n\t\t\t// For values outside the Basic Multilingual Plane (BMP), manually construct a\n\t\t\t// surrogate pair\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" +\n\t\t\t\tch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tinDisabledFieldset = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n\t\tpreferredDoc.childNodes\n\t);\n\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\t// eslint-disable-next-line no-unused-expressions\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpushNative.apply( target, slice.call( els ) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( ( target[ j++ ] = els[ i++ ] ) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\t\tsetDocument( context );\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[ 2 ] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!nonnativeSelectorCache[ selector + \" \" ] &&\n\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&\n\n\t\t\t\t// Support: IE 8 only\n\t\t\t\t// Exclude object elements\n\t\t\t\t( nodeType !== 1 || context.nodeName.toLowerCase() !== \"object\" ) ) {\n\n\t\t\t\tnewSelector = selector;\n\t\t\t\tnewContext = context;\n\n\t\t\t\t// qSA considers elements outside a scoping root when evaluating child or\n\t\t\t\t// descendant combinators, which is not what we want.\n\t\t\t\t// In such cases, we work around the behavior by prefixing every selector in the\n\t\t\t\t// list with an ID selector referencing the scope context.\n\t\t\t\t// The technique has to be used as well when a leading combinator is used\n\t\t\t\t// as such selectors are not recognized by querySelectorAll.\n\t\t\t\t// Thanks to Andrew Dupont for this technique.\n\t\t\t\tif ( nodeType === 1 &&\n\t\t\t\t\t( rdescend.test( selector ) || rcombinators.test( selector ) ) ) {\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\n\t\t\t\t\t// We can use :scope instead of the ID hack if the browser\n\t\t\t\t\t// supports it & if we're not changing the context.\n\t\t\t\t\tif ( newContext !== context || !support.scope ) {\n\n\t\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n\t\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\t\t\t\t}\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// `qSA` may not throw for unrecognized parts using forgiving parsing:\n\t\t\t\t\t// https://drafts.csswg.org/selectors/#forgiving-selector\n\t\t\t\t\t// like the `:has()` pseudo-class:\n\t\t\t\t\t// https://drafts.csswg.org/selectors/#relational\n\t\t\t\t\t// `CSS.supports` is still expected to return `false` then:\n\t\t\t\t\t// https://drafts.csswg.org/css-conditional-4/#typedef-supports-selector-fn\n\t\t\t\t\t// https://drafts.csswg.org/css-conditional-4/#dfn-support-selector\n\t\t\t\t\tif ( support.cssSupportsSelector &&\n\n\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t!CSS.supports( \"selector(:is(\" + newSelector + \"))\" ) ) {\n\n\t\t\t\t\t\t// Support: IE 11+\n\t\t\t\t\t\t// Throw to get to the same code path as an error directly in qSA.\n\t\t\t\t\t\t// Note: once we only support browser supporting\n\t\t\t\t\t\t// `CSS.supports('selector(...)')`, we can most likely drop\n\t\t\t\t\t\t// the `try-catch`. IE doesn't implement the API.\n\t\t\t\t\t\tthrow new Error();\n\t\t\t\t\t}\n\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\tnonnativeSelectorCache( selector, true );\n\t\t\t\t} finally {\n\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn ( cache[ key + \" \" ] = value );\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement( \"fieldset\" );\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch ( e ) {\n\t\treturn false;\n\t} finally {\n\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split( \"|\" ),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[ i ] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( ( cur = cur.nextSibling ) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn ( name === \"input\" || name === \"button\" ) && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction( function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction( function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\tvar namespace = elem && elem.namespaceURI,\n\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n\n\t// Support: IE <=8\n\t// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes\n\t// https://bugs.jquery.com/ticket/4833\n\treturn !rhtml.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( preferredDoc != document &&\n\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t// Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,\n\t// Safari 4 - 5 only, Opera <=11.6 - 12.x only\n\t// IE/Edge & older browsers don't support the :scope pseudo-class.\n\t// Support: Safari 6.0 only\n\t// Safari 6.0 supports :scope but it's an alias of :root there.\n\tsupport.scope = assert( function( el ) {\n\t\tdocElem.appendChild( el ).appendChild( document.createElement( \"div\" ) );\n\t\treturn typeof el.querySelectorAll !== \"undefined\" &&\n\t\t\t!el.querySelectorAll( \":scope fieldset div\" ).length;\n\t} );\n\n\t// Support: Chrome 105+, Firefox 104+, Safari 15.4+\n\t// Make sure forgiving mode is not used in `CSS.supports( \"selector(...)\" )`.\n\t//\n\t// `:is()` uses a forgiving selector list as an argument and is widely\n\t// implemented, so it's a good one to test against.\n\tsupport.cssSupportsSelector = assert( function() {\n\t\t/* eslint-disable no-undef */\n\n\t\treturn CSS.supports( \"selector(*)\" ) &&\n\n\t\t\t// Support: Firefox 78-81 only\n\t\t\t// In old Firefox, `:is()` didn't use forgiving parsing. In that case,\n\t\t\t// fail this test as there's no selector to test against that.\n\t\t\t// `CSS.supports` uses unforgiving parsing\n\t\t\tdocument.querySelectorAll( \":is(:jqfake)\" ) &&\n\n\t\t\t// `*` is needed as Safari & newer Chrome implemented something in between\n\t\t\t// for `:has()` - it throws in `qSA` if it only contains an unsupported\n\t\t\t// argument but multiple ones, one of which is supported, are fine.\n\t\t\t// We want to play safe in case `:is()` gets the same treatment.\n\t\t\t!CSS.supports( \"selector(:is(*,:jqfake))\" );\n\n\t\t/* eslint-enable */\n\t} );\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert( function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute( \"className\" );\n\t} );\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert( function( el ) {\n\t\tel.appendChild( document.createComment( \"\" ) );\n\t\treturn !el.getElementsByTagName( \"*\" ).length;\n\t} );\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert( function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t} );\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[ \"ID\" ] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[ \"ID\" ] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode( \"id\" );\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[ \"TAG\" ] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[ \"CLASS\" ] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {\n\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert( function( el ) {\n\n\t\t\tvar input;\n\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll( \"[msallowcapture^='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"~=\" );\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 15 - 18+\n\t\t\t// IE 11/Edge don't find elements on a `[name='']` query in some cases.\n\t\t\t// Adding a temporary attribute to the document before the selection works\n\t\t\t// around the issue.\n\t\t\t// Interestingly, IE 10 & older don't seem to have the issue.\n\t\t\tinput = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"name\", \"\" );\n\t\t\tel.appendChild( input );\n\t\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n\t\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n\t\t\t\trbuggyQSA.push( \":checked\" );\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n\t\t\t}\n\n\t\t\t// Support: Firefox <=3.6 - 5 only\n\t\t\t// Old Firefox doesn't throw on a badly-escaped identifier.\n\t\t\tel.querySelectorAll( \"\\\\\\f\" );\n\t\t\trbuggyQSA.push( \"[\\\\r\\\\n\\\\f]\" );\n\t\t} );\n\n\t\tassert( function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll( \"[name=d]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll( \":enabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: Opera 10 - 11 only\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll( \"*,:x\" );\n\t\t\trbuggyQSA.push( \",.*:\" );\n\t\t} );\n\t}\n\n\tif ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector ) ) ) ) {\n\n\t\tassert( function( el ) {\n\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t} );\n\t}\n\n\tif ( !support.cssSupportsSelector ) {\n\n\t\t// Support: Chrome 105+, Safari 15.4+\n\t\t// `:has()` uses a forgiving selector list as an argument so our regular\n\t\t// `try-catch` mechanism fails to catch `:has()` with arguments not supported\n\t\t// natively like `:has(:contains(\"Foo\"))`. Where supported & spec-compliant,\n\t\t// we now use `CSS.supports(\"selector(:is(SELECTOR_TO_BE_TESTED))\")`, but\n\t\t// outside that we mark `:has` as buggy.\n\t\trbuggyQSA.push( \":has\" );\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( \"|\" ) );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\n\t\t\t// Support: IE <9 only\n\t\t\t// IE doesn't have `contains` on `document` so we need to check for\n\t\t\t// `documentElement` presence.\n\t\t\t// We need to fall back to `a` when `documentElement` is missing\n\t\t\t// as `ownerDocument` of elements within `<template/>` may have\n\t\t\t// a null one - a default behavior of all modern browsers.\n\t\t\tvar adown = a.nodeType === 9 && a.documentElement || a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t) );\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( ( b = b.parentNode ) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t// two documents; shallow comparisons work.\n\t\t// eslint-disable-next-line eqeqeq\n\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( a == document || a.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, a ) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( b == document || b.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, b ) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\treturn a == document ? -1 :\n\t\t\t\tb == document ? 1 :\n\t\t\t\t/* eslint-enable eqeqeq */\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[ i ] === bp[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[ i ], bp[ i ] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\tap[ i ] == preferredDoc ? -1 :\n\t\t\tbp[ i ] == preferredDoc ? 1 :\n\t\t\t/* eslint-enable eqeqeq */\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\tsetDocument( elem );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\n\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t// fragment in IE 9\n\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\tnonnativeSelectorCache( expr, true );\n\t\t}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( context.ownerDocument || context ) != document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( elem.ownerDocument || elem ) != document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( ( node = elem[ i++ ] ) ) {\n\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] ||\n\t\t\t\tmatch[ 5 ] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[ 2 ] === \"~=\" ) {\n\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n\n\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[ 3 ] ) {\n\t\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" ) );\n\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n\n\t\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[ 3 ] ) {\n\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n\n\t\t\tif ( matchExpr[ \"CHILD\" ].test( match[ 0 ] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[ 3 ] ) {\n\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() {\n\t\t\t\t\treturn true;\n\t\t\t\t} :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace +\n\t\t\t\t\t\")\" + className + \"(\" + whitespace + \"|$)\" ) ) && classCache(\n\t\t\t\t\t\tclassName, function( elem ) {\n\t\t\t\t\t\t\treturn pattern.test(\n\t\t\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n\t\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n\t\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t);\n\t\t\t\t} );\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\t/* eslint-disable max-len */\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t\t/* eslint-enable max-len */\n\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, _argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction( function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[ i ] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} ) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction( function( selector ) {\n\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ) :\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tinput[ 0 ] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[ 0 ] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t} ),\n\n\t\t\"has\": markFunction( function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t} ),\n\n\t\t\"contains\": markFunction( function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t} ),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t} ),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement &&\n\t\t\t\t( !document.hasFocus || document.hasFocus() ) &&\n\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn ( nodeName === \"input\" && !!elem.checked ) ||\n\t\t\t\t( nodeName === \"option\" && !!elem.selected );\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[ \"empty\" ]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE <10 only\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n\t\t\t\t\tattr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo( function() {\n\t\t\treturn [ 0 ];\n\t\t} ),\n\n\t\t\"last\": createPositionalPseudo( function( _matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t} ),\n\n\t\t\"eq\": createPositionalPseudo( function( _matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t} ),\n\n\t\t\"even\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"odd\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"lt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ?\n\t\t\t\targument + length :\n\t\t\t\targument > length ?\n\t\t\t\t\tlength :\n\t\t\t\t\targument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"gt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} )\n\t}\n};\n\nExpr.pseudos[ \"nth\" ] = Expr.pseudos[ \"eq\" ];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n\t\t\tif ( match ) {\n\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( ( tokens = [] ) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( ( match = rcombinators.exec( soFar ) ) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[ 0 ].replace( rtrim, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[ i ].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] ||\n\t\t\t\t\t\t\t( outerCache[ elem.uniqueID ] = {} );\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( ( oldCache = uniqueCache[ key ] ) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[ 0 ];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[ i ], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction( function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts(\n\t\t\t\tselector || \"*\",\n\t\t\t\tcontext.nodeType ? [ context ] : context,\n\t\t\t\t[]\n\t\t\t),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n\t\t\t\t\t\t( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {\n\n\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t} );\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t( checkContext = context ).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\n\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\ttokens\n\t\t\t\t\t\t.slice( 0, i - 1 )\n\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[ \"TAG\" ]( \"*\", outermost ),\n\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\n\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\toutermostContext = context == document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\n\t\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[ i ] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache(\n\t\t\tselector,\n\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers )\n\t\t);\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n\n\t\t\tcontext = ( Expr.find[ \"ID\" ]( token.matches[ 0 ]\n\t\t\t\t.replace( runescape, funescape ), context ) || [] )[ 0 ];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[ \"needsContext\" ].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[ i ];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( ( seed = find(\n\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext\n\t\t\t\t) ) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert( function( el ) {\n\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n} );\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert( function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute( \"href\" ) === \"#\";\n} ) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert( function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n} ) ) {\n\taddHandle( \"value\", function( elem, _name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert( function( el ) {\n\treturn el.getAttribute( \"disabled\" ) == null;\n} ) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\t\tnull;\n\t\t}\n\t} );\n}\n\nreturn Sizzle;\n\n} )( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n}\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)\n\t// Strict HTML recognition (trac-11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\tif ( elem.contentDocument != null &&\n\n\t\t\t// Support: IE 11+\n\t\t\t// <object> elements with no `data` attribute has an object\n\t\t\t// `contentDocument` with a `null` prototype.\n\t\t\tgetProto( elem.contentDocument ) ) {\n\n\t\t\treturn elem.contentDocument;\n\t\t}\n\n\t\t// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n\t\t// Treat the template element as a regular one in browsers that\n\t\t// don't support it.\n\t\tif ( nodeName( elem, \"template\" ) ) {\n\t\t\telem = elem.content || elem;\n\t\t}\n\n\t\treturn jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the primary Deferred\n\t\t\tprimary = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( primary.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn primary.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n\t\t}\n\n\t\treturn primary.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See trac-6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, _key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\t\tvalue :\n\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( _all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (trac-9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see trac-8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (trac-14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar documentElement = document.documentElement;\n\n\n\n\tvar isAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n\t\t},\n\t\tcomposed = { composed: true };\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n\t// Check attachment across shadow DOM boundaries when possible (gh-3504)\n\t// Support: iOS 10.0-10.2 only\n\t// Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n\t// leading to errors. We need to check for `getRootNode`.\n\tif ( documentElement.getRootNode ) {\n\t\tisAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n\t\t};\n\t}\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tisAttached( elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = elem.nodeType &&\n\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (trac-11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (trac-14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n\n\t// Support: IE <=9 only\n\t// IE <=9 replaces <option> tags with their contents when inserted outside of\n\t// the select element.\n\tdiv.innerHTML = \"<option></option>\";\n\tsupport.option = !!div.lastChild;\n} )();\n\n\n// We have to close these tags to support XHTML (trac-13200)\nvar wrapMap = {\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: IE <=9 only\nif ( !support.option ) {\n\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"</select>\" ];\n}\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (trac-15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, attached, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (trac-12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tattached = isAttached( elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( attached ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\nvar rtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 - 11+\n// focus() and blur() are asynchronous, except when they are no-op.\n// So expect focus to be synchronous when the element is already active,\n// and blur to be synchronous when the element is not already active.\n// (focus and blur are always synchronous in other supported browsers,\n// this just defines when we can count on it).\nfunction expectSync( elem, type ) {\n\treturn ( elem === safeActiveElement() ) === ( type === \"focus\" );\n}\n\n// Support: IE <=9 only\n// Accessing document.activeElement can throw unexpectedly\n// https://bugs.jquery.com/ticket/13393\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Only attach events to objects that accept data\n\t\tif ( !acceptData( elem ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = Object.create( null );\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\n\t\t\t// Make a writable jQuery.Event from the native event object\n\t\t\tevent = jQuery.event.fix( nativeEvent ),\n\n\t\t\thandlers = (\n\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n\t\t\t)[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// If the event is namespaced, then each handler is only invoked if it is\n\t\t\t\t// specially universal or its namespaces are a superset of the event's.\n\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (trac-13208)\n\t\t\t\t// Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (trac-13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\n\t\t\t// Utilize native event to ensure correct state for checkable inputs\n\t\t\tsetup: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Claim the first handler\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\t// dataPriv.set( el, \"click\", ... )\n\t\t\t\t\tleverageNative( el, \"click\", returnTrue );\n\t\t\t\t}\n\n\t\t\t\t// Return false to allow normal processing in the caller\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttrigger: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Force setup before triggering a click\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\tleverageNative( el, \"click\" );\n\t\t\t\t}\n\n\t\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, suppress native .click() on links\n\t\t\t// Also prevent it if we're currently inside a leveraged native-event stack\n\t\t\t_default: function( event ) {\n\t\t\t\tvar target = event.target;\n\t\t\t\treturn rcheckableType.test( target.type ) &&\n\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n\t\t\t\t\tnodeName( target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Ensure the presence of an event listener that handles manually-triggered\n// synthetic events by interrupting progress until reinvoked in response to\n// *native* events that it fires directly, ensuring that state changes have\n// already occurred before other listeners are invoked.\nfunction leverageNative( el, type, expectSync ) {\n\n\t// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add\n\tif ( !expectSync ) {\n\t\tif ( dataPriv.get( el, type ) === undefined ) {\n\t\t\tjQuery.event.add( el, type, returnTrue );\n\t\t}\n\t\treturn;\n\t}\n\n\t// Register the controller as a special universal handler for all event namespaces\n\tdataPriv.set( el, type, false );\n\tjQuery.event.add( el, type, {\n\t\tnamespace: false,\n\t\thandler: function( event ) {\n\t\t\tvar notAsync, result,\n\t\t\t\tsaved = dataPriv.get( this, type );\n\n\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n\n\t\t\t\t// Interrupt processing of the outer synthetic .trigger()ed event\n\t\t\t\t// Saved data should be false in such cases, but might be a leftover capture object\n\t\t\t\t// from an async native handler (gh-4350)\n\t\t\t\tif ( !saved.length ) {\n\n\t\t\t\t\t// Store arguments for use when handling the inner native event\n\t\t\t\t\t// There will always be at least one argument (an event object), so this array\n\t\t\t\t\t// will not be confused with a leftover capture object.\n\t\t\t\t\tsaved = slice.call( arguments );\n\t\t\t\t\tdataPriv.set( this, type, saved );\n\n\t\t\t\t\t// Trigger the native event and capture its result\n\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t// focus() and blur() are asynchronous\n\t\t\t\t\tnotAsync = expectSync( this, type );\n\t\t\t\t\tthis[ type ]();\n\t\t\t\t\tresult = dataPriv.get( this, type );\n\t\t\t\t\tif ( saved !== result || notAsync ) {\n\t\t\t\t\t\tdataPriv.set( this, type, false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = {};\n\t\t\t\t\t}\n\t\t\t\t\tif ( saved !== result ) {\n\n\t\t\t\t\t\t// Cancel the outer synthetic event\n\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: Chrome 86+\n\t\t\t\t\t\t// In Chrome, if an element having a focusout handler is blurred by\n\t\t\t\t\t\t// clicking outside of it, it invokes the handler synchronously. If\n\t\t\t\t\t\t// that handler calls `.remove()` on the element, the data is cleared,\n\t\t\t\t\t\t// leaving `result` undefined. We need to guard against this.\n\t\t\t\t\t\treturn result && result.value;\n\t\t\t\t\t}\n\n\t\t\t\t// If this is an inner synthetic event for an event with a bubbling surrogate\n\t\t\t\t// (focus or blur), assume that the surrogate already propagated from triggering the\n\t\t\t\t// native event and prevent that from happening again here.\n\t\t\t\t// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n\t\t\t\t// bubbling surrogate propagates *after* the non-bubbling base), but that seems\n\t\t\t\t// less bad than duplication.\n\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\n\t\t\t// If this is a native event triggered above, everything is now in order\n\t\t\t// Fire an inner synthetic event with the original arguments\n\t\t\t} else if ( saved.length ) {\n\n\t\t\t\t// ...and capture the result\n\t\t\t\tdataPriv.set( this, type, {\n\t\t\t\t\tvalue: jQuery.event.trigger(\n\n\t\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t\t// Extend with the prototype to reset the above stopImmediatePropagation()\n\t\t\t\t\t\tjQuery.extend( saved[ 0 ], jQuery.Event.prototype ),\n\t\t\t\t\t\tsaved.slice( 1 ),\n\t\t\t\t\t\tthis\n\t\t\t\t\t)\n\t\t\t\t} );\n\n\t\t\t\t// Abort handling of the native event\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\t} );\n}\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (trac-504, trac-13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcode: true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\twhich: true\n}, jQuery.event.addProp );\n\njQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n\tjQuery.event.special[ type ] = {\n\n\t\t// Utilize native event if possible so blur/focus sequence is correct\n\t\tsetup: function() {\n\n\t\t\t// Claim the first handler\n\t\t\t// dataPriv.set( this, \"focus\", ... )\n\t\t\t// dataPriv.set( this, \"blur\", ... )\n\t\t\tleverageNative( this, type, expectSync );\n\n\t\t\t// Return false to allow normal processing in the caller\n\t\t\treturn false;\n\t\t},\n\t\ttrigger: function() {\n\n\t\t\t// Force setup before trigger\n\t\t\tleverageNative( this, type );\n\n\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\treturn true;\n\t\t},\n\n\t\t// Suppress native focus or blur if we're currently inside\n\t\t// a leveraged native-event stack\n\t\t_default: function( event ) {\n\t\t\treturn dataPriv.get( event.target, type );\n\t\t},\n\n\t\tdelegateType: delegateType\n\t};\n} );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\n\trcleanScript = /^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.get( src );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdataPriv.remove( dest, \"handle events\" );\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = flat( args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (trac-8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n\t\t\t\t\t\t\t\t}, doc );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Unwrap a CDATA section containing script contents. This shouldn't be\n\t\t\t\t\t\t\t// needed as in XML documents they're already not visible when\n\t\t\t\t\t\t\t// inspecting element contents and in HTML documents they have no\n\t\t\t\t\t\t\t// meaning but we're preserving that logic for backwards compatibility.\n\t\t\t\t\t\t\t// This will be removed completely in 4.0. See gh-4904.\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && isAttached( node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html;\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = isAttached( elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar rcustomProp = /^--/;\n\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar swap = function( elem, options, callback ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.call( elem );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\nvar whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n\n\nvar rtrimCSS = new RegExp(\n\t\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\n\t\"g\"\n);\n\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\t// Support: Chrome <=64\n\t\t// Don't get tricked when zoom affects offsetWidth (gh-4029)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (trac-8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t},\n\n\t\t// Support: IE 9 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Behavior in IE 9 is more subtle than in newer versions & it passes\n\t\t// some versions of this test; make sure not to make it pass there!\n\t\t//\n\t\t// Support: Firefox 70+\n\t\t// Only Firefox includes border widths\n\t\t// in computed dimensions. (gh-4529)\n\t\treliableTrDimensions: function() {\n\t\t\tvar table, tr, trChild, trStyle;\n\t\t\tif ( reliableTrDimensionsVal == null ) {\n\t\t\t\ttable = document.createElement( \"table\" );\n\t\t\t\ttr = document.createElement( \"tr\" );\n\t\t\t\ttrChild = document.createElement( \"div\" );\n\n\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n\t\t\t\ttr.style.cssText = \"border:1px solid\";\n\n\t\t\t\t// Support: Chrome 86+\n\t\t\t\t// Height set through cssText does not get applied.\n\t\t\t\t// Computed height then comes back as 0.\n\t\t\t\ttr.style.height = \"1px\";\n\t\t\t\ttrChild.style.height = \"9px\";\n\n\t\t\t\t// Support: Android 8 Chrome 86+\n\t\t\t\t// In our bodyBackground.html iframe,\n\t\t\t\t// display for all div elements is set to \"inline\",\n\t\t\t\t// which causes a problem only in Android 8 Chrome 86.\n\t\t\t\t// Ensuring the div is display: block\n\t\t\t\t// gets around this issue.\n\t\t\t\ttrChild.style.display = \"block\";\n\n\t\t\t\tdocumentElement\n\t\t\t\t\t.appendChild( table )\n\t\t\t\t\t.appendChild( tr )\n\t\t\t\t\t.appendChild( trChild );\n\n\t\t\t\ttrStyle = window.getComputedStyle( tr );\n\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n\n\t\t\t\tdocumentElement.removeChild( table );\n\t\t\t}\n\t\t\treturn reliableTrDimensionsVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tisCustomProp = rcustomProp.test( name ),\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, trac-12537)\n\t//   .css('--customProperty) (gh-3144)\n\tif ( computed ) {\n\n\t\t// Support: IE <=9 - 11+\n\t\t// IE only supports `\"float\"` in `getPropertyValue`; in computed styles\n\t\t// it's only available as `\"cssFloat\"`. We no longer modify properties\n\t\t// sent to `.css()` apart from camelCasing, so we need to check both.\n\t\t// Normally, this would create difference in behavior: if\n\t\t// `getPropertyValue` returns an empty string, the value returned\n\t\t// by `.css()` would be `undefined`. This is usually the case for\n\t\t// disconnected elements. However, in IE even disconnected elements\n\t\t// with no styles return `\"none\"` for `getPropertyValue( \"float\" )`\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( isCustomProp && ret ) {\n\n\t\t\t// Support: Firefox 105+, Chrome <=105+\n\t\t\t// Spec requires trimming whitespace for custom properties (gh-4926).\n\t\t\t// Firefox only trims leading whitespace. Chrome just collapses\n\t\t\t// both leading & trailing whitespace to a single space.\n\t\t\t//\n\t\t\t// Fall back to `undefined` if empty string returned.\n\t\t\t// This collapses a missing definition with property defined\n\t\t\t// and set to an empty string but there's no standard API\n\t\t\t// allowing us to differentiate them without a performance penalty\n\t\t\t// and returning `undefined` aligns with older jQuery.\n\t\t\t//\n\t\t\t// rtrimCSS treats U+000D CARRIAGE RETURN and U+000C FORM FEED\n\t\t\t// as whitespace while CSS does not, but this is not a problem\n\t\t\t// because CSS preprocessing replaces them with U+000A LINE FEED\n\t\t\t// (which *is* CSS whitespace)\n\t\t\t// https://www.w3.org/TR/css-syntax-3/#input-preprocessing\n\t\t\tret = ret.replace( rtrimCSS, \"$1\" ) || undefined;\n\t\t}\n\n\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style,\n\tvendorProps = {};\n\n// Return a vendor-prefixed property or undefined\nfunction vendorPropName( name ) {\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a potentially-mapped jQuery.cssProps or vendor prefixed property\nfunction finalPropName( name ) {\n\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n\n\tif ( final ) {\n\t\treturn final;\n\t}\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t};\n\nfunction setPositiveNumber( _elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\tif ( box === \"margin\" ) {\n\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\n\t\t// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter\n\t\t// Use an explicit zero to avoid NaN (gh-3964)\n\t\t) ) || 0;\n\t}\n\n\treturn delta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\n\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n\t\t// Fake content-box until we know it's needed to know the true value.\n\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n\t\tisBorderBox = boxSizingNeeded &&\n\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox,\n\n\t\tval = curCSS( elem, dimension, styles ),\n\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\n\t// Support: IE 9 - 11 only\n\t// Use offsetWidth/offsetHeight for when box sizing is unreliable.\n\t// In those cases, the computed value can be trusted to be border-box.\n\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n\n\t\t// Support: IE 10 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Interestingly, in some cases IE 9 doesn't suffer from this issue.\n\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n\n\t\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t\t// This happens for inline elements with no explicit setting (gh-3571)\n\t\tval === \"auto\" ||\n\n\t\t// Support: Android <=4.1 - 4.3 only\n\t\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n\n\t\t// Make sure the element is visible & connected\n\t\telem.getClientRects().length ) {\n\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t\t// Where available, offsetWidth/offsetHeight approximate border box dimensions.\n\t\t// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n\t\t// retrieved value as a content box dimension.\n\t\tvalueIsBorderBox = offsetProp in elem;\n\t\tif ( valueIsBorderBox ) {\n\t\t\tval = elem[ offsetProp ];\n\t\t}\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"gridArea\": true,\n\t\t\"gridColumn\": true,\n\t\t\"gridColumnEnd\": true,\n\t\t\"gridColumnStart\": true,\n\t\t\"gridRow\": true,\n\t\t\"gridRowEnd\": true,\n\t\t\"gridRowStart\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (trac-7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug trac-9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (trac-7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\t// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n\t\t\t// \"px\" to a few hardcoded values.\n\t\t\tif ( type === \"number\" && !isCustomProp ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t} ) :\n\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\n\t\t\t\t// Only read styles.position if the test has a chance to fail\n\t\t\t\t// to avoid forcing a reflow.\n\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n\t\t\t\t\tstyles.position === \"absolute\",\n\n\t\t\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n\t\t\t\tisBorderBox = boxSizingNeeded &&\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra ?\n\t\t\t\t\tboxModelAdjustment(\n\t\t\t\t\t\telem,\n\t\t\t\t\t\tdimension,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tisBorderBox,\n\t\t\t\t\t\tstyles\n\t\t\t\t\t) :\n\t\t\t\t\t0;\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 && (\n\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\n\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( _i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// Use proper attribute retrieval (trac-12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + className + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += className + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + className + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + className + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar classNames, className, i, self,\n\t\t\ttype = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\treturn this.each( function() {\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\tself = jQuery( this );\n\n\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (trac-14686, trac-14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (trac-2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (trac-9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (trac-6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\n\t\t\t\t// Handle: regular nodes (via `this.ownerDocument`), window\n\t\t\t\t// (via `this.document`) & document (via `this`).\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = { guid: Date.now() };\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, parserErrorElem;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {}\n\n\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n\tif ( !xml || parserErrorElem ) {\n\t\tjQuery.error( \"Invalid XML: \" + (\n\t\t\tparserErrorElem ?\n\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n\t\t\t\t\treturn el.textContent;\n\t\t\t\t} ).join( \"\\n\" ) :\n\t\t\t\tdata\n\t\t) );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\tif ( a == null ) {\n\t\treturn \"\";\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} ).filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} ).map( function( _i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// trac-7653, trac-8125, trac-8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\noriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes trac-9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (trac-10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket trac-12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// trac-9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n\t\t\t\t\tuncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Use a noop converter for missing script but not if jsonp\n\t\t\tif ( !isSuccess &&\n\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n\t\t\t\ts.converters[ \"text script\" ] = function() {};\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\njQuery.ajaxPrefilter( function( s ) {\n\tvar i;\n\tfor ( i in s.headers ) {\n\t\tif ( i.toLowerCase() === \"content-type\" ) {\n\t\t\ts.contentType = s.headers[ i ] || \"\";\n\t\t}\n\t}\n} );\n\n\njQuery._evalUrl = function( url, options, doc ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (trac-11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\n\t\t// Only evaluate the response if it is successful (gh-4126)\n\t\t// dataFilter is not invoked for failure responses, so using it instead\n\t\t// of the default converter is kludgy but it works.\n\t\tconverters: {\n\t\t\t\"text script\": function() {}\n\t\t},\n\t\tdataFilter: function( response ) {\n\t\t\tjQuery.globalEval( response, options, doc );\n\t\t}\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// trac-1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see trac-8605, trac-14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// trac-14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain or forced-by-attrs requests\n\tif ( s.crossDomain || s.scriptAttrs ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" )\n\t\t\t\t\t.attr( s.scriptAttrs || {} )\n\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( {\n\t\tpadding: \"inner\" + name,\n\t\tcontent: type,\n\t\t\"\": \"outer\" + name\n\t}, function( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( _i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t},\n\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\njQuery.each(\n\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( _i, name ) {\n\n\t\t// Handle event binding\n\t\tjQuery.fn[ name ] = function( data, fn ) {\n\t\t\treturn arguments.length > 0 ?\n\t\t\t\tthis.on( name, null, data, fn ) :\n\t\t\t\tthis.trigger( name );\n\t\t};\n\t}\n);\n\n\n\n\n// Support: Android <=4.0 only\n// Make sure we trim BOM and NBSP\n// Require that the \"whitespace run\" starts from a non-whitespace\n// to avoid O(N^2) behavior when the engine would try matching \"\\s+$\" at each space position.\nvar rtrim = /^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$/g;\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\njQuery.trim = function( text ) {\n\treturn text == null ?\n\t\t\"\" :\n\t\t( text + \"\" ).replace( rtrim, \"$1\" );\n};\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (trac-7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (trac-13566)\nif ( typeof noGlobal === \"undefined\" ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n","import Timer from '../../utils/timer';\n\nimport $ from 'jquery';\n\nexport default class Blob {\n    public element: JQuery;\n    public duration = 5000;\n\n    private timer: Timer;\n    public static = false;\n\n    public constructor(\n        public instance: string,\n        message: string,\n        duration = 5000,\n        public position?: Position\n    ) {\n        this.timer = new Timer(Date.now(), duration);\n\n        this.element = this.createBlob(instance, message);\n\n        // Automatically static if we provied an absolute position.\n        this.static = !!this.position;\n    }\n\n    /**\n     * Updates a blob with the new text and resets the timer.\n     * @param text The new string text we are displaying.\n     * @param time The current game time.\n     */\n\n    public update(text: string, time: number): void {\n        // Reset timer\n        this.timer.time = time;\n\n        $(this.element).find('p').html(text);\n    }\n\n    /**\n     * Has the timer reached the end of the bubble's duration?\n     * @param time The current game time from the updater.\n     * @returns Whether or not the timer has reached the end of the bubble's duration.\n     */\n\n    public isOver(time: number): boolean {\n        return this.timer.isOver(time);\n    }\n\n    /**\n     * Removes the JQuery element from the DOM.\n     */\n\n    public destroy(): void {\n        $(this.element).remove();\n    }\n\n    /**\n     * Creates a JQuery HTML element of the bubble with the specified\n     * id and message contents.\n     * @param instance Bubble's identifier, generally the entity's instance.\n     * @param message Message that we are displaying in the bubble.\n     * @returns A JQuery element that is appended to the container.\n     */\n\n    public createBlob(instance: string, message: string): JQuery {\n        return $(\n            `<div id=\"${instance}\" class=\"bubble\"><p>${message}</p><div class=\"bubble-tip\"></div></div>`\n        );\n    }\n}\n","import Blob from '../renderer/bubbles/blob';\n\nimport $ from 'jquery';\n\nimport type Game from '../game';\n\nexport default class BubbleController {\n    private container: JQuery = $('#bubbles');\n\n    // Each entity's instance is associated with a bubble for the duration of a bubble.\n    private bubbles: { [instance: string]: Blob } = {};\n\n    public constructor(private game: Game) {}\n\n    /**\n     * This creates the blob that will be used to display text. The bubble\n     * is created above an entity (or static object if specified), and for the\n     * duration of its existence, is updated if another `create` is called.\n     *\n     * @param instance - An identifier for the bubble we are creating.\n     * @param message - A string of the text we are displaying.\n     * @param duration - How long the bubble will display for.\n     * @param position - Position containing x and y coordinates. Uses those and marks the bubble as static.\n     */\n    public create(instance: string, message: string, duration = 5000, position?: Position): void {\n        let bubble = this.bubbles[instance];\n\n        // Just update the bubble if it already exists.\n        if (bubble) return bubble.update(message, Date.now());\n\n        // Create a new bubble.\n        this.bubbles[instance] = new Blob(instance, message, duration, position);\n\n        // Add the newly created bubble element to the container of bubbles.\n        this.bubbles[instance].element.appendTo(this.container);\n    }\n\n    /**\n     * Sets a bubble to an instance and the position associated\n     * with it. The instance is any entity's instance, and\n     * the x and y are absolute values in pixels.\n     * @param instance The instance to store the bubble as.\n     * @param x The x position of the bubble.\n     * @param y The y position of the bubble.\n     */\n\n    public setTo(instance: string, x: number, y: number): void {\n        let bubble = this.bubbles[instance],\n            { zoomFactor } = this.game.camera,\n            tileSize = this.game.renderer.tileSize * zoomFactor,\n            width = parseInt(bubble.element.css('width')) + 24,\n            offset = width / 2 - tileSize / 2,\n            offsetY = -20;\n\n        x = (x - this.game.camera.x) * zoomFactor;\n        y = (y - this.game.camera.y) * zoomFactor - tileSize * 2 - offsetY;\n\n        bubble.element.css({ left: `${x - offset + 3}px`, top: `${y}px` });\n    }\n\n    /**\n     * Update function for the bubbles. Iterates through all the bubbles\n     * and updates their positioning relative to the screen. This gets called\n     * every frame so that the bubbles are following the entity adequately\n     * as it moves or the camera moves.\n     * @param time The current game time.\n     */\n\n    public update(time: number): void {\n        for (let bubble of Object.values(this.bubbles)) {\n            let entity = this.game.entities.get(bubble.instance);\n\n            // If there is an entity, we set the bubble to its position.\n            if (entity) this.setTo(entity.instance, entity.x, entity.y);\n\n            // If the bubble is static its position is always the specified one.\n            if (bubble.static) this.setTo(bubble.instance, bubble.position!.x, bubble.position!.y);\n\n            // Destroy once the timer runs out.\n            if (bubble.isOver(time)) this.destroy(bubble);\n        }\n    }\n\n    /**\n     * Removes a bubble based on its instance. Checks if it exists\n     * first then calls the destroy command with the bubble.\n     * @param instance The instance of the bubble we are checking.\n     */\n\n    public clear(instance: string): void {\n        if (this.bubbles[instance]) this.destroy(this.bubbles[instance]);\n    }\n\n    /**\n     * Destroys the bubble and removes it from our dictionary.\n     * @param bubble The bubble we are unloading.\n     */\n\n    public destroy(bubble: Blob): void {\n        bubble.destroy();\n        delete this.bubbles[bubble.instance];\n    }\n\n    /**\n     * Clears all the bubbles from the screen.\n     */\n\n    public clean(): void {\n        for (let bubble of Object.values(this.bubbles)) bubble.destroy();\n\n        this.bubbles = {};\n    }\n}\n","import { Opcodes, Packets } from '@kaetram/common/network';\n\nimport type Character from './character';\nimport type Game from '../../game';\nimport type EntitiesController from '../../controllers/entities';\n\nexport default class Handler {\n    protected game: Game;\n    protected entities: EntitiesController;\n\n    /**\n     * The handler is responsible for handling the character's movement and synchronizing\n     * that with the rest of the client. It also sends packets when appropriate.\n     */\n\n    public constructor(protected character: Character) {\n        this.game = character.game;\n        this.entities = this.game.entities;\n\n        // Callbacks for movements.\n        this.character.onRequestPath(this.handleRequestPath.bind(this));\n        this.character.onStartPathing(this.handleStartPathing.bind(this));\n        this.character.onBeforeStep(this.handleBeforeStep.bind(this));\n        this.character.onStep(this.handleStep.bind(this));\n        this.character.onSecondStep(this.handleSecondStep.bind(this));\n        this.character.onStopPathing(this.handleStopPathing.bind(this));\n        this.character.onMove(this.handleMove.bind(this));\n        this.character.onFallback(this.handleFallback.bind(this));\n    }\n\n    /**\n     * Callback that handles when the player clicks on a new tile. We must\n     * calculate the path to the new tile and begin moving the player.\n     * @param x The x grid coordinate of the tile the player clicked on.\n     * @param y The y grid coordinate of the tile the player clicked on.\n     * @returns The path to the new tile in a 2D array.\n     */\n\n    protected handleRequestPath(x: number, y: number): number[][] {\n        // Prevent any calculations from being made if the player clicked on the tile they are already on.\n        if (this.character.gridX === x && this.character.gridY === y) return [];\n\n        // Prevent calculating paths if the tile is colliding.\n        if (this.game.map.isColliding(x, y)) return [];\n\n        return this.game.findPath(this.character, x, y);\n    }\n\n    /**\n     * Empty implementation for when the character begins pathing. This is handled specifically\n     * by the player handler subclass.\n     * @param path The path in a 2D array containing the x and y coordinates of each tile.\n     */\n\n    protected handleStartPathing(_path: number[][]): void {\n        // log.info('Unimplemented handleStartPathing');\n    }\n\n    /**\n     * Handles the unregistering of the position prior to beginning movement.\n     */\n\n    protected handleBeforeStep(): void {\n        this.entities.unregisterPosition(this.character);\n    }\n\n    /**\n     * Callback for every step the character takes (every time they move to a new tile). We must\n     * update their position to the attackers and followers, as well as send a packet to the\n     * server containing their positions.\n     */\n\n    protected handleStep(): void {\n        this.entities.registerPosition(this.character);\n\n        /**\n         * The following iterates through all the attackers and signals to them\n         * to update their following to the target's latest position (this character).\n         */\n\n        this.character.forEachAttacker((attacker) => {\n            // Clear the attackers if their target doesn't match this character (or it doesn't exist).\n            if (!attacker.target || attacker.target.instance !== this.character.instance)\n                return this.character.removeAttacker(attacker);\n\n            // If the attacker is too far away from the target, make them follow their target.\n            if (!attacker.canAttackTarget()) attacker.follow(this.character);\n        });\n\n        // Essentially the same as the above, but for followers.\n        this.character.forEachFollower((follower: Character) => {\n            if (!follower.target || follower.target.instance !== this.character.instance)\n                return this.character.removeFollower(follower);\n\n            follower.follow(this.character);\n        });\n\n        /**\n         * We temporarily rely on a consensus between multiple clients to establish\n         * the position of a character (the server is only involved in telling the mob where to go).\n         */\n\n        if (this.character.hasTarget() || this.character.hasAttackers())\n            this.game.socket.send(Packets.Movement, {\n                opcode: Opcodes.Movement.Entity,\n                targetInstance: this.character.instance,\n                requestX: this.character.gridX,\n                requestY: this.character.gridY\n            });\n\n        /**\n         * This handles attacking using ranged projectiles. If the character has a target\n         * and it's within attack range distance we stop the movement.\n         */\n\n        if (this.character.canAttackTarget()) this.character.stop(true);\n    }\n\n    /**\n     * Second step is called every... second step the character takes. This is implemented\n     * in the player handler subclass.\n     */\n\n    protected handleSecondStep(): void {\n        // log.info('Unimplemented handleSecondStep');\n    }\n\n    /**\n     * Unimplemented base function for when the character stops pathing. This is used\n     * by the player handler implementation to send a packet to the server and update\n     * camera information and other things.\n     * @param _x The x grid coordinate of the tile the player stopped on.\n     * @param _y The y grid coordinate of the tile the player stopped on.\n     */\n\n    protected handleStopPathing(_x: number, _y: number): void {\n        // log.info('Unimplemented handleStopPathing');\n    }\n\n    /**\n     * Unimplemented base function that gets called for every pixel that the character moves.\n     */\n\n    protected handleMove(): void {\n        // log.info('Unimplemented handleMove');\n    }\n\n    /**\n     * Because the server is not yet calculating pathfinding, we use a fallback\n     * to teleport a character that the server moved to a tile to which pathfinding\n     * is not possible. This will be removed once the server does pathfinding.\n     * @param x The requested x grid coordinate.\n     * @param y The requested y grid coordinate.\n     */\n\n    protected handleFallback(x: number, y: number): void {\n        this.game.teleport(this.character, x, y);\n    }\n}\n","export default class Transition {\n    private startValue = 0;\n    public endValue = 0;\n    private duration = 0;\n    public inProgress = false;\n    private startTime!: number;\n\n    private updateCallback?: (value: number) => void;\n    private stopCallback?: () => void;\n\n    /**\n     * Starts a transition instance with the given parameters.\n     * @param currentTime The current game time tick in milliseconds.\n     * @param startValue Starting value of the transition.\n     * @param endValue Ending value determining when transition ends.\n     * @param duration How long the transition should be in milliseconds.\n     * @param updateCallback A callback for every increment of the transition between start and end value.\n     * @param stopCallback Callback for when transition finishes.\n     */\n\n    public start(\n        currentTime: number,\n        startValue: number,\n        endValue: number,\n        duration: number,\n        updateCallback: (value: number) => void,\n        stopCallback: () => void\n    ): void {\n        this.startTime = currentTime;\n        this.startValue = startValue;\n        this.endValue = endValue;\n        this.duration = duration;\n        this.updateCallback = updateCallback;\n        this.stopCallback = stopCallback;\n\n        this.inProgress = true;\n    }\n\n    /**\n     * Function responsible for incrementing an update into the transition.\n     * Say we start with a start value of 1, an end value of 16, and a duration of 100.\n     * We are essentially updating the step function every 10 milliseconds until\n     * we reach the end value. We continuously update until we reach the end value.\n     * Once we do so, we end the transition.\n     * @param currentTime The current game time tick.\n     */\n\n    public step(currentTime: number): void {\n        if (!this.inProgress) return;\n\n        // Current game tick minus the start time of the transition action.\n        let elapsed = currentTime - this.startTime;\n\n        // Max out if elapsed time is greater than duration of the transition.\n        if (elapsed > this.duration) elapsed = this.duration;\n\n        let diff = this.endValue - this.startValue,\n            interval = Math.round(this.startValue + (diff / this.duration) * elapsed);\n\n        if (elapsed === this.duration || interval === this.endValue) {\n            this.inProgress = false;\n\n            this.stopCallback?.();\n        } else this.updateCallback?.(interval);\n    }\n}\n","import Animation from './animation';\n\nimport Utils from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Sprite from './sprite';\n\nexport default abstract class Entity {\n    public x = 0;\n    public y = 0;\n    public gridX = 0;\n    public gridY = 0;\n    public nextGridX = -1;\n    public nextGridY = -1;\n\n    public movementSpeed = -1;\n    public attackRange = -1;\n    public frozen = false;\n    public dead = false;\n\n    public name = '';\n\n    public region = -1;\n\n    public healthBarVisible = false;\n\n    public sprite!: Sprite;\n\n    public spriteFlipX = false;\n    public spriteFlipY = false;\n\n    public animation!: Animation | null;\n\n    public shadowOffsetY = 0;\n    public hidden = false;\n\n    private visible = true;\n\n    public fading = false;\n\n    public angle = 0;\n    public angled = false;\n\n    public hasCounter = false;\n\n    public counter = 0;\n    public countdownTime = 0;\n    public fadingDuration = 1000;\n\n    public orientation: Modules.Orientation = Modules.Orientation.Down;\n\n    public fadingTime!: number;\n    private blinking!: number;\n\n    public normalSprite!: Sprite;\n    public hurtSprite!: Sprite;\n    public silhouetteSprite!: Sprite;\n\n    public ready = false;\n\n    public hitPoints = 0;\n    public maxHitPoints = 0;\n    public mana = 0;\n    public maxMana = 0;\n    public level = 1;\n    public experience = 0;\n    public teleporting = false;\n    public pvp = false;\n    public nameColour!: string;\n    public customScale!: number;\n    public fadingAlpha!: number;\n    public lastUpdate = Date.now();\n\n    public constructor(public instance = '', public type: Modules.EntityType) {}\n\n    /**\n     * Fades in the entity when spawning in.\n     * @param time The duration the fade-in will take.\n     */\n\n    public fadeIn(time: number): void {\n        this.fading = true;\n        this.fadingTime = time;\n    }\n\n    /**\n     * Begins the blinking interval.\n     * @param speed The speed at which the blink occurs.\n     */\n\n    public blink(speed = 150): void {\n        this.blinking = window.setInterval(() => this.toggleVisibility(), speed);\n    }\n\n    /**\n     * Stops teh blinking interval if it's running and updates the visibility.\n     */\n\n    protected stopBlinking(): void {\n        if (this.blinking) clearInterval(this.blinking);\n\n        this.setVisible(true);\n    }\n\n    /**\n     * Unimplemented idle() function.\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    public idle(): void {}\n\n    /**\n     * Animates the character's death animation and\n     * creates a callback if needed.\n     * @param callback Optional parameter for when the animation finishes.\n     * @param speed Optional parameter for the animation speed.\n     * @param count How many times to repeat the animation.\n     */\n\n    public animateDeath(callback?: () => void, speed = 120, count = 1): void {\n        this.setAnimation('death', speed, count, callback);\n    }\n\n    /**\n     * Updates the entity's silhouette sprite.\n     * @param active Whether or not to show the silhouette.\n     */\n\n    public updateSilhouette(active = false): void {\n        if (!this.silhouetteSprite) return;\n\n        this.sprite = active ? this.silhouetteSprite : this.normalSprite;\n    }\n\n    /**\n     * Updates the sprite of the entity with a new one.\n     * @param sprite The new sprite object (obtained using the sprites controller).\n     */\n\n    public setSprite(sprite: Sprite): void {\n        // Load the sprite if it hasn't been loaded yet.\n        if (!sprite.loaded) {\n            sprite.load();\n\n            // Make sure we're not setting the same sprite.\n            if (this.sprite?.key === sprite.key) return;\n        }\n\n        this.sprite = sprite;\n        this.normalSprite = sprite;\n\n        /**\n         * Attempt to reload the sprite if it's still loading, we do this\n         * because we want all elements of the sprite (hurt sprite, silhouette)\n         * to be fully loaded and then apply them to the entity.\n         */\n\n        if (sprite.loading) {\n            setTimeout(() => this.setSprite(sprite), 100);\n            return;\n        }\n\n        // Load the hurt and silhouette sprites if they exist.\n        if (sprite.hurtSprite) this.hurtSprite = sprite.hurtSprite;\n        if (sprite.silhouetteSprite) this.silhouetteSprite = sprite.silhouetteSprite;\n\n        sprite.onLoad(() => {\n            this.normalSprite = sprite;\n\n            // Load the hurt and silhouette sprites if they exist.\n            if (sprite.hurtSprite) this.hurtSprite = sprite.hurtSprite;\n            if (sprite.silhouetteSprite) this.silhouetteSprite = sprite.silhouetteSprite;\n\n            // Custom scales can be applied to certain entities.\n            if (!this.customScale) return;\n\n            this.sprite.offsetX *= this.customScale;\n            this.sprite.offsetY *= this.customScale;\n        });\n    }\n\n    /**\n     * Sets the animation of the entity.\n     * @param name The name of the animation to play.\n     * @param speed The speed at which the animation takes to play (in ms).\n     * @param count The amount of times the animation should play.\n     * @param onEndCount A function to be called upon animation completion.\n     */\n\n    public setAnimation(\n        name: string,\n        speed = this.sprite.idleSpeed,\n        count = 1,\n        onEndCount?: () => void\n    ): void {\n        // Prevent setting animation if no sprite or it's the same animation.\n        if (this.animation?.name === name) return;\n\n        // Copy the animation data from the sprite.\n        let { length, row, width, height } = this.sprite.animations[name];\n\n        // Create a new animation instance to prevent pointer issues.\n        this.animation = new Animation(name, length, row, width, height);\n\n        // Restart the attack animation if it's already playing.\n        if (name.startsWith('atk')) this.animation.reset();\n\n        this.animation.setSpeed(speed);\n\n        // Run the onEndCount function when the animation finishes or go to idle.\n        this.animation.setCount(count, onEndCount || (() => this.idle()));\n    }\n\n    /**\n     * Sets the absolute pixel coordinate position of the entity.\n     * @param x The new x pixel coordinate.\n     * @param y The new y pixel coordinate.\n     */\n\n    private setPosition(x: number, y: number): void {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Updates the grid position of the entity. Grid coordinates are pixel coordinates\n     * divided by the tlesize and floored.\n     * @param gridX The new grid x coordinate.\n     * @param gridY The new grid y coordinate.\n     */\n\n    public setGridPosition(gridX: number, gridY: number): void {\n        this.gridX = gridX;\n        this.gridY = gridY;\n        this.region = Utils.getRegion(gridX, gridY);\n\n        this.setPosition(gridX * Utils.tileSize, gridY * Utils.tileSize);\n    }\n\n    /**\n     * Sets the countdown to a value to start counting down from.\n     * @param count New value for the countdown.\n     */\n\n    public setCountdown(count: number): void {\n        this.counter = count;\n\n        this.countdownTime = Date.now();\n\n        this.hasCounter = true;\n    }\n\n    /**\n     * Sets the visibility of the entity.\n     * @param visible New visibility value.\n     */\n\n    private setVisible(visible: boolean): void {\n        this.visible = visible;\n    }\n\n    /**\n     * Returns the distance between the current entity and another entity.\n     * @param entity The entity we are finding the distance to.\n     * @returns Integer value of the distance (in tiles).\n     */\n\n    public getDistance(entity: Entity): number {\n        let { gridX, gridY } = this;\n\n        return Math.abs(gridX - entity.gridX) + Math.abs(gridY - entity.gridY);\n    }\n\n    /**\n     * Returns the angle of the entity in radians.\n     * @returns Angle number value.\n     */\n\n    public getAngle(): number {\n        return this.angle;\n    }\n\n    /**\n     * Changes the values of the entity visibility.\n     */\n\n    private toggleVisibility(): void {\n        this.setVisible(!this.visible);\n    }\n\n    /**\n     * Whether or not the entity is visible and should be drawn in the renderer.\n     * @returns The visibility status of the entity.\n     */\n\n    public isVisible(): boolean {\n        return this.visible;\n    }\n\n    /**\n     * Default value of whether or not to draw names above the entity. Overriden\n     * in the subclass implementations as needed.\n     * @returns Defaults to true.\n     */\n\n    public drawNames(): boolean {\n        return true;\n    }\n\n    /**\n     * Default value of whether or not the entity has a shadow underneath it. This\n     * gets overriden by subclass implementations as needed.\n     * @returns Defaults to false.\n     */\n\n    public hasShadow(): boolean {\n        return false;\n    }\n\n    /**\n     * Default implementation for medal.\n     * @returns Defaults to false.\n     */\n\n    public hasMedal(): boolean {\n        return false;\n    }\n\n    /**\n     * @returns Whether or not the entity is a player type.\n     */\n\n    public isPlayer(): boolean {\n        return this.type === Modules.EntityType.Player;\n    }\n\n    /**\n     * @returns Whether or not the entity is a player type.\n     */\n\n    public isMob(): boolean {\n        return this.type === Modules.EntityType.Mob;\n    }\n\n    /**\n     * @returns Whether or not the entity is an NPC type.\n     */\n\n    public isNPC(): boolean {\n        return this.type === Modules.EntityType.NPC;\n    }\n\n    /**\n     * @returns Whether or not the entity is an item type.\n     */\n\n    public isItem(): boolean {\n        return this.type === Modules.EntityType.Item;\n    }\n\n    /**\n     * @returns Whether or not the entity is a chest type.\n     */\n\n    public isChest(): boolean {\n        return this.type === Modules.EntityType.Chest;\n    }\n\n    /**\n     * @returns Whether or not the entity is a projectile type.\n     */\n\n    public isProjectile(): boolean {\n        return this.type === Modules.EntityType.Projectile;\n    }\n\n    /**\n     * @returns Whether or not the entity is an object type.\n     */\n\n    public isObject(): boolean {\n        return this.type === Modules.EntityType.Object;\n    }\n\n    /**\n     * Default implementation for `isModerator()`\n     * @returns False by default.\n     */\n\n    public isModerator(): boolean {\n        return false;\n    }\n\n    /**\n     * Default implementation for `isAdmin()`\n     * @returns False by default.\n     */\n\n    public isAdmin(): boolean {\n        return false;\n    }\n}\n","import Handler from './handler';\n\nimport Transition from '../../utils/transition';\nimport Animation from '../animation';\nimport Entity from '../entity';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Game from '../../game';\n\ntype RequestPathingCallback = (x: number, y: number) => number[][];\ntype StartPathingCallback = (path: number[][]) => void;\ntype StopPathingCallback = (gridX: number, gridY: number, forced: boolean) => void;\n\ntype HitPointsCallback = (hitPoints: number, maxHitPoints: number, decrease?: boolean) => void;\ntype FallbackCallback = (x: number, y: number) => void;\n\ninterface EffectInfo {\n    key: string;\n    animation: Animation;\n    perpetual?: boolean; // Animation plays endlessly until effect is manually removed.\n    speed?: number;\n}\n\nexport default class Character extends Entity {\n    public moving = false;\n    public following = false;\n    public stunned = false;\n    public forced = false;\n    public trading = false;\n\n    private interrupted = false;\n\n    public path: number[][] | null = null;\n    public target: Entity | null = null;\n\n    public lastTarget = '';\n\n    // List of active status effects currently applied on the player.\n    public statusEffects: Modules.Effects[] = [];\n\n    private attackers: { [id: string]: Character } = {};\n    private followers: { [id: string]: Character } = {};\n\n    public movement = new Transition();\n    public handler: Handler;\n\n    private readonly attackAnimationSpeed = 50;\n    private readonly walkAnimationSpeed = 120;\n\n    public effect: Modules.Effects = Modules.Effects.None;\n    public destination!: Position | null;\n    private newDestination!: Position | null;\n    private step!: number;\n    private healthBarTimeout!: number | null;\n\n    private effects: { [id: number]: EffectInfo } = {\n        [Modules.Effects.Critical]: {\n            key: 'effect-critical',\n            animation: new Animation('effect', 10, 0, 48, 48)\n        },\n        [Modules.Effects.Terror]: {\n            key: 'effect-terror',\n            animation: new Animation('effect', 8, 0, 64, 64)\n        },\n        [Modules.Effects.TerrorStatus]: {\n            key: 'effect-terror2',\n            animation: new Animation('effect', 5, 0, 32, 32),\n            perpetual: true,\n            speed: 200\n        },\n        [Modules.Effects.Stun]: {\n            key: 'effect-stun',\n            animation: new Animation('effect', 6, 0, 48, 48),\n            perpetual: true\n        },\n        [Modules.Effects.Healing]: {\n            key: 'effect-heal',\n            animation: new Animation('effect', 8, 0, 64, 64)\n        },\n        [Modules.Effects.Fireball]: {\n            key: 'effect-fireball',\n            animation: new Animation('effect', 8, 0, 64, 64)\n        },\n        [Modules.Effects.Iceball]: {\n            key: 'effect-iceball',\n            animation: new Animation('effect', 8, 0, 64, 64)\n        },\n        [Modules.Effects.Burning]: {\n            key: 'effect-burn',\n            animation: new Animation('effect', 5, 0, 32, 32),\n            perpetual: true,\n            speed: 150\n        },\n        [Modules.Effects.Freezing]: {\n            key: 'effect-freeze',\n            animation: new Animation('effect', 6, 0, 32, 32),\n            perpetual: true,\n            speed: 200\n        },\n        [Modules.Effects.Poisonball]: {\n            key: 'effect-poisonball',\n            animation: new Animation('effect', 10, 0, 40, 40),\n            speed: 175\n        },\n        [Modules.Effects.Boulder]: {\n            key: 'effect-boulder',\n            animation: new Animation('effect', 7, 0, 32, 32)\n        }\n    };\n\n    private requestPathCallback?: RequestPathingCallback;\n    private startPathingCallback?: StartPathingCallback;\n    private beforeStepCallback?: () => void;\n    private stepCallback?: () => void;\n    private secondStepCallback?: () => void;\n    private stopPathingCallback?: StopPathingCallback;\n    private moveCallback?: () => void;\n\n    private fallbackCallback?: FallbackCallback;\n    private hitPointsCallback?: HitPointsCallback;\n\n    public constructor(instance: string, type: Modules.EntityType, public game: Game) {\n        super(instance, type);\n\n        this.loadAnimations();\n\n        this.handler = new Handler(this);\n    }\n\n    /**\n     * Loads animations used for special effects.\n     */\n\n    private loadAnimations(): void {\n        // Iterate through all the effects and load default speed and end callback events.\n        for (let key in this.effects) {\n            let effect = this.effects[key],\n                keyValue = parseInt(key);\n\n            // Default speed\n            effect.animation.setSpeed(effect.speed || 50);\n\n            // Remove effect once it has finished playing.\n            effect.animation.setCount(1, () => {\n                if (!effect.perpetual) this.removeEffect(keyValue);\n\n                // Terror effect has a secondary effect that is added to the character.\n                if (keyValue === Modules.Effects.Terror)\n                    this.addEffect(Modules.Effects.TerrorStatus);\n\n                effect.animation.reset();\n                effect.animation.count = 1;\n            });\n        }\n    }\n\n    /**\n     * An override of the superclass function with added functionality and cases\n     * for characters. Since characters have a orientation, we must handle the\n     * 'directionality' of the animation sprite.\n     * @param name The name of the animation to play.\n     * @param speed The speed at which the animation takes to play (in ms).\n     * @param count The amount of times the animation should play.\n     * @param onEndCount A function to be called upon animation completion.\n     */\n\n    public override setAnimation(\n        name: string,\n        speed = 120,\n        count = 0,\n        onEndCount?: () => void\n    ): void {\n        let o = ['atk', 'walk', 'idle'];\n\n        // Do not perform another animation while the death one is playing.\n        if (this.animation?.name === 'death') return;\n\n        this.spriteFlipX = false;\n        this.spriteFlipY = false;\n\n        if (o.includes(name)) {\n            name += `_${\n                this.orientation === Modules.Orientation.Left ? 'right' : this.orientationToString()\n            }`;\n            this.spriteFlipX = this.orientation === Modules.Orientation.Left;\n        }\n\n        super.setAnimation(name, speed, count, onEndCount);\n    }\n\n    /**\n     * Override for the superclass function so that the character's `setAnimation` is called.\n     * @param callback Optional parameter for when the animation finishes.\n     * @param speed Optional parameter for the animation speed.\n     * @param count How many times to repeat the animation.\n     */\n\n    public override animateDeath(callback?: () => void, speed = 120, count = 0): void {\n        this.setAnimation('death', speed, count, callback);\n    }\n\n    /**\n     * Briefly changes the character's sprite with that of the\n     * hurt sprite (a white and red sprite when a character is hurt).\n     */\n\n    public toggleHurt(): void {\n        if (this.dead || this.teleporting || !this.hurtSprite) return;\n\n        this.sprite = this.hurtSprite;\n\n        window.setTimeout(() => (this.sprite = this.normalSprite), 100);\n    }\n\n    /**\n     * Declares the entity dead and stops all pathing.\n     */\n\n    public despawn(): void {\n        this.hitPoints = 0;\n        this.dead = true;\n        this.removeTarget();\n        this.stop();\n\n        this.orientation = Modules.Orientation.Down;\n    }\n\n    /**\n     * Follows the player then requests a trade with them.\n     * @param entity The entity we are trying to trade with.\n     */\n\n    public trade(entity: Entity): void {\n        this.trading = true;\n\n        this.follow(entity);\n    }\n\n    /**\n     * Begins the following process. The character will perpetually\n     * follow a moving target until it reaches its position.\n     * @param entity The entity we are trying to follow.\n     * @param forced Whether or not we start a new path or update current one.\n     */\n\n    public follow(entity: Entity, forced = false): void {\n        this.following = true;\n\n        this.setTarget(entity);\n        this.move(entity.gridX, entity.gridY, forced);\n    }\n\n    /**\n     * Pursues a character. Similar to following except no attacking\n     * is done and the character will not stop following until you\n     * click on something else.\n     * @param character The character we will be pursuing.\n     */\n\n    public pursue(character: Character): void {\n        this.setTarget(character);\n        this.move(character.gridX, character.gridY);\n\n        character.addFollower(this);\n    }\n\n    /**\n     * Not technically a following action, but it is used since\n     * it removes the last step from the path.\n     * @param x The x grid coordinate of the position we are moving towards.\n     * @param y The y grid coordinate of the position we are moving towards.\n     */\n\n    public followPosition(x: number, y: number): void {\n        this.following = true;\n\n        this.move(x, y);\n    }\n\n    /**\n     * Add a status effect to the character if it doesn't already have it.\n     * @param effect The status effect we are trying to add.\n     */\n\n    public addEffect(effect: Modules.Effects): void {\n        if (this.hasEffect(effect)) return;\n\n        this.statusEffects.push(effect);\n    }\n\n    /**\n     * Adds an attacker to the dictionary of attackers.\n     * @param character Character we are adding to the dictionary.\n     */\n\n    public addAttacker(character: Character): void {\n        this.attackers[character.instance] = character;\n    }\n\n    /**\n     * Adds a follower to the dictionary of followers.\n     * @param character Character we are adding to the dictionary.\n     */\n\n    public addFollower(character: Character): void {\n        this.followers[character.instance] = character;\n    }\n\n    /**\n     * Removes a status effect from the character.\n     * @param effect The status effect we are trying to remove.\n     */\n\n    public removeEffect(effect: Modules.Effects): void {\n        // We also want to make sure we remove the terror status effect alongside the terror.\n        if (effect === Modules.Effects.Terror) this.removeEffect(Modules.Effects.TerrorStatus);\n\n        this.statusEffects = this.statusEffects.filter((e) => e !== effect);\n    }\n\n    /**\n     * Clears the list of status effects.\n     */\n\n    public removeAllEffects(): void {\n        this.statusEffects = [];\n    }\n\n    /**\n     * Removes a character from the list of attackers.\n     * @param character The character we are trying to remove.\n     */\n\n    public removeAttacker(character: Character): void {\n        delete this.attackers[character.instance];\n    }\n\n    /**\n     * Removes a follower from the list of followers.\n     * @param character The character we are trying to remove.\n     */\n\n    public removeFollower(character: Character): void {\n        delete this.followers[character.instance];\n    }\n\n    /**\n     * Whether or not the character has a status effect.\n     * @param effect The status effect we are checking for.\n     * @returns If the status effect is included in the array of status effects or not.\n     */\n\n    public hasEffect(effect: Modules.Effects): boolean {\n        return this.statusEffects.includes(effect);\n    }\n\n    /**\n     * Whether or not the character has at least one status effect.\n     * @returns Whether the status effects array is empty or not.\n     */\n\n    public hasActiveEffect(): boolean {\n        return this.statusEffects.length > 0;\n    }\n\n    /**\n     * @returns Whether or not the character has any attackers.\n     */\n\n    public hasAttackers(): boolean {\n        return Object.keys(this.attackers).length > 0;\n    }\n\n    /**\n     * @returns Whether or not the character has any followers.\n     */\n\n    public hasFollowers(): boolean {\n        return Object.keys(this.followers).length > 0;\n    }\n\n    /**\n     * Performs an action and updates the orientation of the character.\n     * @param orientation New orientation we are setting.\n     * @param action The type of action we are performing.\n     */\n\n    public performAction(orientation: Modules.Orientation, action: Modules.Actions): void {\n        this.setOrientation(orientation);\n\n        switch (action) {\n            case Modules.Actions.Idle: {\n                this.setAnimation('idle', this.sprite.idleSpeed);\n                break;\n            }\n\n            case Modules.Actions.Orientate: {\n                this.setAnimation('idle', this.sprite.idleSpeed);\n                break;\n            }\n\n            case Modules.Actions.Attack: {\n                this.setAnimation('atk', this.attackAnimationSpeed, 1);\n                break;\n            }\n\n            case Modules.Actions.Walk: {\n                this.setAnimation('walk', this.walkAnimationSpeed);\n                break;\n            }\n        }\n    }\n\n    /**\n     * Return an entity to the base idle state.\n     * @param o Optional parameter if we want to update the orientation.\n     * @param force Whether or not we force the idle animation.\n     */\n\n    public override idle(o?: Modules.Orientation, force = false): void {\n        // Prevents the idle animation from affecting the walking animation.\n        if (this.hasPath() && !force) return;\n\n        let orientation = o || this.orientation;\n\n        this.performAction(orientation, Modules.Actions.Idle);\n    }\n\n    /**\n     * Converts the current orientation to a string that can\n     * be used in the animations.\n     * @returns String of the current orientation.\n     */\n\n    private orientationToString(): string {\n        switch (this.orientation) {\n            case Modules.Orientation.Left: {\n                return 'left';\n            }\n\n            case Modules.Orientation.Right: {\n                return 'right';\n            }\n\n            case Modules.Orientation.Up: {\n                return 'up';\n            }\n\n            case Modules.Orientation.Down: {\n                return 'down';\n            }\n        }\n    }\n\n    /**\n     * Used for setting the orientation of a character relative to another entity.\n     * @param entity The entity relative to the character.\n     */\n\n    public lookAt(entity: Entity): void {\n        let { gridX, gridY } = this;\n\n        if (entity.gridX > gridX) this.setOrientation(Modules.Orientation.Right);\n        else if (entity.gridX < gridX) this.setOrientation(Modules.Orientation.Left);\n        else if (entity.gridY > gridY) this.setOrientation(Modules.Orientation.Down);\n        else if (entity.gridY < gridY) this.setOrientation(Modules.Orientation.Up);\n\n        this.idle();\n    }\n\n    /**\n     * Begins the movement of the entity to the given position.\n     * @param x The grid x position to move to.\n     * @param y The grid y position to move to.\n     * @param forced Forced movement overrides any other movement.\n     * @param fallback Entities that cannot path correctly are teleported instead.\n     */\n\n    public go(x: number, y: number, forced = false, fallback = false): void {\n        if (this.frozen) return;\n\n        if (this.following) {\n            this.following = false;\n            this.removeTarget();\n        }\n\n        this.move(x, y, forced, fallback);\n    }\n\n    /**\n     * Updates the movement of the entity or starts a new path if needed.\n     * @param x The new grid x coordinate we are trying to move the character to.\n     * @param y The new grid y coordinate we are trying to move the character to.\n     * @param forced Whether or not to update the current pathing or request a new one.\n     * @param fallback Whether or not to teleport the entity if pathing fails.\n     */\n\n    private move(x: number, y: number, forced = false, fallback = false): void {\n        if (this.hasPath() && !forced) this.proceed(x, y);\n        else {\n            let path = this.requestPathfinding(x, y);\n\n            if ((!path || path.length < 2) && fallback) return this.fallbackCallback?.(x, y);\n\n            this.followPath(path);\n        }\n\n        this.destination = { x, y };\n    }\n\n    /**\n     * Soft update to the character's pathing destination.\n     * @param x The new grid x coordinate we are trying to move the character to.\n     * @param y The new grid y coordinate we are trying to move the character to.\n     */\n\n    private proceed(x: number, y: number): void {\n        this.newDestination = {\n            x,\n            y\n        };\n    }\n\n    /**\n     * This code will remain present throughout the alpha. Once we begin moving\n     * the pathfinder to the server-side, a tick-based system will be implemented\n     * to calculate steps and movement there rather than the client.\n     */\n\n    public nextStep(): void {\n        let stop = false,\n            x: number,\n            y: number,\n            path: number[][] | null;\n\n        // Make a callback every two steps the character takes.\n        if (this.step % 2 === 0 && this.secondStepCallback) this.secondStepCallback();\n\n        // Stop if there is no path present.\n        if (!this.hasPath()) return;\n\n        // Callback prior to taking a step.\n        this.beforeStepCallback?.();\n\n        // Set the new position onto the grid.\n        this.updateGridPosition();\n\n        if (!this.interrupted && this.path) {\n            if (this.hasNextStep()) [this.nextGridX, this.nextGridY] = this.path[this.step + 1];\n\n            this.stepCallback?.();\n\n            if (this.changedPath()) {\n                ({ x, y } = this.newDestination!);\n\n                path = this.requestPathfinding(x, y);\n\n                if (!path) return;\n\n                this.newDestination = null;\n\n                if (path.length < 2) stop = true;\n                else {\n                    this.startPathingCallback?.(path);\n                    this.followPath(path);\n                }\n            } else if (this.hasNextStep()) {\n                this.step++;\n                this.updateMovement();\n            } else stop = true;\n        } else {\n            stop = true;\n            this.interrupted = false;\n        }\n\n        if (stop) {\n            this.path = null;\n            this.idle();\n\n            if (this.stopPathingCallback)\n                this.stopPathingCallback(this.gridX, this.gridY, this.forced);\n\n            this.forced = false;\n        }\n    }\n\n    /**\n     * Determines which orientation the entity should be facing\n     * and animates the repsective walking animation.\n     */\n\n    private updateMovement(): void {\n        let { path, step } = this;\n\n        if (!path) return;\n\n        // nextStepX < prevStepX -> walking to the left\n        if (path[step][0] < path[step - 1][0])\n            this.performAction(Modules.Orientation.Left, Modules.Actions.Walk);\n\n        // nextStepX > prevStepX -> walking to the right\n        if (path[step][0] > path[step - 1][0])\n            this.performAction(Modules.Orientation.Right, Modules.Actions.Walk);\n\n        // nextStepY < prevStepY -> walking to the top\n        if (path[step][1] < path[step - 1][1])\n            this.performAction(Modules.Orientation.Up, Modules.Actions.Walk);\n\n        // nextStepY > prevStepY -> walking to the bottom\n        if (path[step][1] > path[step - 1][1])\n            this.performAction(Modules.Orientation.Down, Modules.Actions.Walk);\n    }\n\n    /**\n     * Begins the procedure to follow a path after it has been found.\n     * @param path The path we are following.\n     */\n\n    private followPath(path: number[][] | null): void {\n        /**\n         * This is to ensure the player does not click on\n         * himthis or somehow into another dimension\n         */\n\n        if (!path || path.length < 2) return;\n\n        this.path = path;\n        this.step = 0;\n\n        if (this.following) path.pop();\n\n        if (!this.moving && !this.changedPath()) this.startPathingCallback?.(path);\n\n        this.nextStep();\n    }\n\n    /**\n     * Stops the character's movement and resets the pathing variables.\n     * @param force Whether or not to stop movement without finishing the current step.\n     */\n\n    public stop(force = false): void {\n        if (!force) this.interrupted = true;\n        else if (this.hasPath()) {\n            this.path = null;\n            this.destination = null;\n            this.newDestination = null;\n            this.movement = new Transition();\n            this.performAction(this.orientation, Modules.Actions.Idle);\n            this.nextGridX = this.gridX;\n            this.nextGridY = this.gridY;\n        }\n    }\n\n    /**\n     * Whether or not the player can attack its target given its position.\n     * @returns True if the player is within the attack range of its target.\n     */\n\n    public canAttackTarget(): boolean {\n        if (!this.hasTarget()) return false;\n\n        if (!this.target!.isMob() && !this.target!.isPlayer()) return false;\n\n        if (this.getDistance(this.target!) > this.attackRange - 1) return false;\n\n        return true;\n    }\n\n    /**\n     * Returns an effect object from the effects list.\n     * @param effect The effect we are looking for.\n     * @returns The effect object.\n     */\n\n    public getEffect(effect: Modules.Effects): EffectInfo {\n        return this.effects[effect];\n    }\n\n    /**\n     * TRIGGERED!!!!\n     */\n    public triggerHealthBar(): void {\n        this.healthBarVisible = true;\n\n        if (this.healthBarTimeout) clearTimeout(this.healthBarTimeout);\n\n        this.healthBarTimeout = window.setTimeout(() => {\n            this.healthBarVisible = false;\n        }, 7000);\n    }\n\n    public clearHealthBar(): void {\n        this.healthBarVisible = false;\n        clearTimeout(this.healthBarTimeout!);\n        this.healthBarTimeout = null;\n    }\n\n    private requestPathfinding(x: number, y: number): number[][] | null {\n        return this.requestPathCallback?.(x, y) || null;\n    }\n\n    private updateGridPosition(): void {\n        if (!this.path || this.path.length === 0) return;\n\n        this.setGridPosition(this.path[this.step][0], this.path[this.step][1]);\n    }\n\n    public override hasShadow(): boolean {\n        return true;\n    }\n\n    public hasPath(): boolean {\n        return this.path !== null;\n    }\n\n    public hasNextStep(): boolean | null {\n        return this.path && this.path.length - 1 > this.step;\n    }\n\n    public changedPath(): boolean {\n        return !!this.newDestination;\n    }\n\n    /**\n     * Removes the current target from the character.\n     */\n\n    public removeTarget(): void {\n        this.target = null;\n    }\n\n    public moved(): void {\n        this.moveCallback?.();\n    }\n\n    public setTarget(target: Entity): void {\n        this.target = target;\n\n        this.lastTarget = target.instance;\n    }\n\n    /**\n     * @param target Optional parameter to check if the player has a specific target.\n     * @returns Whether or not the player has a specific target or a target at all.\n     */\n\n    public hasTarget(target?: Entity): boolean {\n        return target ? this.target === target : !!this.target;\n    }\n\n    /**\n     * Mocks a entity-based target function and targets an object instead.\n     * @param position The position of the object we are targeting.\n     */\n\n    public setObjectTarget(position: Coordinate): void {\n        /**\n         * All we are doing is mimicking the `setTarget` entity\n         * parameter. But we are throwing in an extra.\n         */\n\n        let character = new Character(\n            `${position.gridX}-${position.gridY}`,\n            Modules.EntityType.Object,\n            this.game\n        );\n        character.setGridPosition(position.gridX, position.gridY);\n\n        this.setTarget(character);\n        this.followPosition(position.gridX, position.gridY);\n    }\n\n    /**\n     * Sets the hitpoints values onto the character.\n     * @param hitPoints The new hitpoints value we are setting.\n     * @param maxHitPoints Optional parameter if we wish to update the max hitpoints.\n     */\n\n    public setHitPoints(hitPoints: number, maxHitPoints?: number): void {\n        let decrease = false;\n\n        // Clamp the hitpoints to 0.\n        if (hitPoints < 0) hitPoints = 0;\n\n        // Use the decrease value for the callback (used for certain UI special effects).\n        if (hitPoints < this.hitPoints) decrease = true;\n\n        this.hitPoints = hitPoints;\n\n        // Update the max hitPoints if it is specified.\n        if (maxHitPoints) this.maxHitPoints = maxHitPoints;\n\n        // Callback contains the new maxHitPoints if specified, otherwise we use the current one.\n        this.hitPointsCallback?.(this.hitPoints, maxHitPoints || this.maxHitPoints, decrease);\n    }\n\n    /**\n     * Updates the current orientation of the character.\n     */\n\n    public setOrientation(orientation: Modules.Orientation): void {\n        this.orientation = orientation;\n    }\n\n    /**\n     * Iterates through all the attackers in the list and returns them.\n     * @param callback The attacker currently being iterated.\n     */\n\n    public forEachAttacker(callback: (attacker: Character) => void): void {\n        for (let attacker of Object.values(this.attackers)) callback(attacker);\n    }\n\n    /**\n     * Iterates through all the followers in the list and returns them.\n     * @param callback The follower currently being iterated.\n     */\n\n    public forEachFollower(callback: (follower: Character) => void): void {\n        for (let follower of Object.values(this.followers)) callback(follower);\n    }\n\n    /**\n     * Initial action where we request a new position for the character to move to.\n     * @param callback Contains the x and y grid coordinates of the position requested.\n     */\n\n    public onRequestPath(callback: RequestPathingCallback): void {\n        this.requestPathCallback = callback;\n    }\n\n    /**\n     * Starts the pathing process for the character.\n     * @param callback Contains the path to follow.\n     */\n\n    public onStartPathing(callback: StartPathingCallback): void {\n        this.startPathingCallback = callback;\n    }\n\n    /**\n     * Callback for when the pathfinding stops.\n     * @param callback The grid x and y coordinates the player stopped pathing at.\n     */\n\n    public onStopPathing(callback: StopPathingCallback): void {\n        this.stopPathingCallback = callback;\n    }\n\n    /**\n     * Callback done just before the character begins movement to another grid position.\n     */\n\n    public onBeforeStep(callback: () => void): void {\n        this.beforeStepCallback = callback;\n    }\n\n    /**\n     * Callback for when the character moves from one grid position to another.\n     */\n\n    public onStep(callback: () => void): void {\n        this.stepCallback = callback;\n    }\n\n    /**\n     * Callback for every two grid positions the character moves across.\n     */\n\n    public onSecondStep(callback: () => void): void {\n        this.secondStepCallback = callback;\n    }\n\n    /**\n     * Callback for when a character moves one absolute unit (pixel).\n     */\n\n    public onMove(callback: () => void): void {\n        this.moveCallback = callback;\n    }\n\n    /**\n     * Callback for when hitpoints undergo a change.\n     * @param callback Contains the new hitpoints and the max hitpoints.\n     */\n\n    public onHitPoints(callback: HitPointsCallback): void {\n        this.hitPointsCallback = callback;\n    }\n\n    /**\n     * Callback for when we want to perform a fallback for entity movement.\n     * @param callback Contains the x and y coordinates to teleport the entity to.\n     */\n\n    public onFallback(callback: FallbackCallback): void {\n        this.fallbackCallback = callback;\n    }\n}\n","import Character from '../character';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Game from '../../../game';\n\nexport default class Mob extends Character {\n    public hiddenName = false;\n\n    public constructor(instance: string, game: Game) {\n        super(instance, Modules.EntityType.Mob, game);\n    }\n\n    public override hasShadow(): boolean {\n        return !this.hiddenName;\n    }\n\n    public override drawNames(): boolean {\n        return !this.hiddenName;\n    }\n}\n","import Entity from '../entity';\n\nimport { Modules } from '@kaetram/common/network';\n\nexport default class NPC extends Entity {\n    public constructor(instance: string) {\n        super(instance, Modules.EntityType.NPC);\n    }\n\n    /**\n     * Sets the idling state for the NPC.\n     */\n\n    public override idle(): void {\n        this.setAnimation('idle_down', this.sprite.idleSpeed);\n    }\n}\n","/**\n * A task represents a quest or an achievement object. The only difference\n * in serialized client data between those two is that a quest contains\n * a sub stage variable.\n */\n\nexport default class Task {\n    public secret = false; // Whether or not the task is a secret task.\n\n    public constructor(\n        public id: number,\n        public name: string,\n        public description: string,\n        public stage = 1,\n        public stageCount = 1,\n        public subStage?: number,\n        public rewards?: string[]\n    ) {}\n\n    /**\n     * Updates the stage and sub stage data for the task.\n     * @param stage New stage we are setting the task to.\n     * @param subStage New subStage we are setting the task to.\n     * @param name New name we are setting the task to (used for achievements).\n     * @param description New description we are setting the task to (used for hidden achievements).\n     */\n\n    public update(stage: number, subStage?: number, name?: string, description?: string): void {\n        this.stage = stage;\n\n        if (subStage) this.subStage = subStage;\n        if (name) this.name = name; // For achievements when they're discovered.\n        if (description) this.description = description; // For hidden achievements.\n    }\n\n    /**\n     * A task is deemed complete when the current stage\n     * we are on is equal or larger to total amount of stages.\n     * @returns If stage is equal or larger to total amount of stages.\n     */\n\n    public isFinished(): boolean {\n        return this.stage >= this.stageCount;\n    }\n\n    /**\n     * @returns Whether the task's stage is above 0, meaning task\n     * has been started.\n     */\n\n    public isStarted(): boolean {\n        return this.stage > 0;\n    }\n}\n","import { Modules } from '@kaetram/common/network';\n\nexport default class Skill {\n    public name: string;\n    public percentage = 0;\n    public nextExperience = 0;\n\n    public constructor(public type: Modules.Skills, public experience = 0, public level = 1) {\n        this.name = Modules.Skills[type];\n    }\n\n    /**\n     * Updates the current skill's experience and level.\n     * @param experience Experience we are updating to.\n     * @param level Level we are updating to.\n     */\n\n    public update(\n        experience: number,\n        nextExperience: number,\n        level: number,\n        percentage: number\n    ): void {\n        this.experience = experience;\n        this.nextExperience = nextExperience;\n        this.level = level || this.level;\n        this.percentage = percentage || 0;\n    }\n}\n","import type { Modules } from '@kaetram/common/network';\n\nexport default class Ability {\n    public active = false;\n\n    public constructor(\n        public type: Modules.AbilityType,\n        public key: string,\n        public level: number,\n        public quickSlot = -1\n    ) {}\n\n    /**\n     * Updates the ability information.\n     * @param level New level to set the ability to.\n     */\n\n    public update(level: number, quickSlot = this.quickSlot): void {\n        this.level = level;\n        this.quickSlot = quickSlot;\n    }\n\n    /**\n     * Updates the active status of the ability.\n     */\n\n    public toggle(): void {\n        this.active = !this.active;\n    }\n}\n","export default class Friend {\n    public constructor(\n        public id: number,\n        public username: string,\n        public online: boolean,\n        public serverId: number\n    ) {}\n}\n","import Util from '../../../../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { Bonuses, Enchantments, Stats } from '@kaetram/common/types/item';\n\nexport default abstract class Equipment {\n    public attackStats: Stats = Util.getEmptyStats();\n    public defenseStats: Stats = Util.getEmptyStats();\n    public bonuses: Bonuses = Util.getEmptyBonuses();\n\n    public attackStyle: Modules.AttackStyle = Modules.AttackStyle.None;\n    public attackStyles: Modules.AttackStyle[] = [];\n\n    public constructor(\n        public key = '',\n        public name = '',\n        public count = -1,\n        public enchantments: Enchantments = {}\n    ) {}\n\n    /**\n     * An update function that is called when the equipment is equipped.\n     * The function can be called with no parameters when the equipment is unequipped.\n     * @param key The key of the item.\n     * @param name The visual name of the item (the one the player sees).\n     * @param count The amount of items in the equipment (if it is stackable).\n     * @param enchantments The enchantments of the item.\n     * @param ranged Whether or not the item is ranged.\n     * @param attackStats The attack stats of the item.\n     * @param defenseStats The defense stats of the item.\n     * @param bonuses The bonuses of the item.\n     * @param attackStyle The attack style the weapon is using.\n     * @param attackStyles The list of attack styles the weapon is using.\n     */\n\n    public update(\n        key = '',\n        name = '',\n        count = -1,\n        enchantments: Enchantments = {},\n        attackStats?: Stats,\n        defenseStats?: Stats,\n        bonuses?: Bonuses,\n        attackStyle = Modules.AttackStyle.None,\n        attackStyles: Modules.AttackStyle[] = []\n    ): void {\n        this.key = key;\n        this.name = name;\n        this.count = count;\n        this.enchantments = enchantments;\n\n        // Add the stats and bonuses only if they exist.\n        this.attackStats = attackStats || Util.getEmptyStats();\n        this.defenseStats = defenseStats || Util.getEmptyStats();\n        this.bonuses = bonuses || Util.getEmptyBonuses();\n\n        // Attack styles are optional parameters for the weapon.\n        this.attackStyle = attackStyle;\n        this.attackStyles = attackStyles;\n    }\n\n    /**\n     * A check for whether or not the item is equipped.\n     * @returns Whether the key is an empty string or not.\n     */\n\n    public exists(): boolean {\n        return this.key !== '';\n    }\n}\n","import Equipment from './equipment';\n\nimport type { Bonuses, Enchantments, Stats } from '@kaetram/common/types/item';\n\nexport default class Armour extends Equipment {\n    public constructor(\n        key = 'clotharmor',\n        name = 'Cloth Armor',\n        count = -1,\n        enchantments: Enchantments = {}\n    ) {\n        super(key, name, count, enchantments);\n    }\n\n    /**\n     * An override for the superclass where we specify\n     * the default parameters for the key and name of the armour.\n     * This will be removed once the paper-doll system\n     * is improved to use a base character properly.\n     */\n\n    public override update(\n        key = 'clotharmor',\n        name = 'Cloth Armor',\n        count = -1,\n        enchantments: Enchantments = {},\n        attackStats?: Stats,\n        defenseStats?: Stats,\n        bonuses?: Bonuses\n    ): void {\n        super.update(key, name, count, enchantments, attackStats, defenseStats, bonuses);\n    }\n}\n","import Equipment from './equipment';\n\nexport default class ArmourSkin extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class Boots extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class Pendant extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class Ring extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class Weapon extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class WeaponSkin extends Equipment {}\n","import Equipment from './equipment';\n\nexport default class Arrows extends Equipment {}\n","import Task from './task';\nimport Skill from './skill';\nimport Ability from './ability';\nimport Friend from './friend';\nimport Armour from './equipment/armour';\nimport ArmourSkin from './equipment/armourskin';\nimport Boots from './equipment/boots';\nimport Pendant from './equipment/pendant';\nimport Ring from './equipment/ring';\nimport Weapon from './equipment/weapon';\nimport WeaponSkin from './equipment/weaponskin';\nimport Arrows from './equipment/arrows';\n\nimport Character from '../character';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { GuildPacket } from '@kaetram/common/types/messages/outgoing';\nimport type Game from '../../../game';\nimport type { AchievementData } from '@kaetram/common/types/achievement';\nimport type { EquipmentData } from '@kaetram/common/types/equipment';\nimport type { PlayerData } from '@kaetram/common/types/player';\nimport type { SkillData } from '@kaetram/common/types/skills';\nimport type { QuestData } from '@kaetram/common/types/quest';\nimport type { AbilityData } from '@kaetram/common/types/ability';\nimport type { Friend as FriendType } from '@kaetram/common/types/friends';\nimport type { GuildData, Member } from '@kaetram/common/types/guild';\n\ntype AbilityCallback = (key: string, level: number, quickSlot: number) => void;\ntype PoisonCallback = (status: boolean) => void;\ntype ManaCallback = (mana: number, maxMana: number) => void;\n\nexport default class Player extends Character {\n    public rank: Modules.Ranks = Modules.Ranks.None;\n    public wanted = false;\n\n    public serverId = -1;\n\n    public pvpKills = -1;\n    public pvpDeaths = -1;\n\n    public moveLeft = false;\n    public moveRight = false;\n    public moveUp = false;\n    public moveDown = false;\n\n    public poison = false;\n    public disableAction = false;\n\n    public medal: Modules.Medals = Modules.Medals.None;\n\n    public guild!: Partial<GuildData> | undefined;\n\n    public override hitPoints = 0;\n    public override maxHitPoints = 0;\n\n    public override mana = 0;\n    public override maxMana = 0;\n\n    // Mapping of all equipments to their type.\n    public equipments = {\n        [Modules.Equipment.Armour]: new Armour(),\n        [Modules.Equipment.ArmourSkin]: new ArmourSkin(),\n        [Modules.Equipment.Boots]: new Boots(),\n        [Modules.Equipment.Pendant]: new Pendant(),\n        [Modules.Equipment.Ring]: new Ring(),\n        [Modules.Equipment.Weapon]: new Weapon(),\n        [Modules.Equipment.WeaponSkin]: new WeaponSkin(),\n        [Modules.Equipment.Arrows]: new Arrows()\n    };\n\n    public skills: { [key: number]: Skill } = {};\n    public abilities: { [key: string]: Ability } = {};\n    public quests: { [key: string]: Task } = {};\n    public achievements: { [key: string]: Task } = {};\n    public friends: { [key: string]: Friend } = {};\n\n    private syncCallback?: () => void;\n    private poisonCallback?: PoisonCallback;\n    private abilityCallback?: AbilityCallback;\n    private manaCallback?: ManaCallback;\n\n    public constructor(instance: string, game: Game) {\n        super(instance, Modules.EntityType.Player, game);\n    }\n\n    /**\n     * Loads the player based on the serialzied player\n     * data sent from the server.\n     * @param data Player data containing essentials.\n     * @param sync Whether to sync the player.\n     */\n\n    public load(data: PlayerData, sync = false): void {\n        this.instance = data.instance;\n        this.name = data.name;\n        this.level = data.level!;\n        this.movementSpeed = data.movementSpeed!;\n        this.orientation = data.orientation!;\n        this.attackRange = data.attackRange!;\n\n        if (data.displayInfo) this.nameColour = data.displayInfo.colour!;\n\n        this.setRank(data.rank);\n        this.setOrientation(data.orientation);\n\n        if (!sync) this.setGridPosition(data.x, data.y);\n\n        this.setHitPoints(data.hitPoints!, data.maxHitPoints);\n\n        this.setMana(data.mana!, data.maxMana);\n\n        if (data.equipments) for (let equipment of data.equipments) this.equip(equipment);\n    }\n\n    /**\n     * Loads a batch of skills into the player's skill list.\n     * @param skills Contains skill type, experience, and level\n     * for each skill we are loading.\n     */\n\n    public loadSkills(skills: SkillData[]): void {\n        for (let skill of skills) this.setSkill(skill);\n    }\n\n    /**\n     * Loads batch of quest data from the server and inserts\n     * it into the list of quests stored for the player.\n     * @param quests An array of elements each containing quest info.\n     */\n\n    public loadQuests(quests: QuestData[]): void {\n        for (let [i, quest] of quests.entries())\n            this.quests[quest.key] = new Task(\n                i,\n                quest.name!,\n                quest.description!,\n                quest.stage,\n                quest.stageCount!,\n                quest.subStage,\n                quest.rewards\n            );\n    }\n\n    /**\n     * Parses through the array data containing achievement information\n     * and creates an object for each key as well as inserting preliminary data.\n     * @param achievements Array containing information about each achievement.\n     */\n\n    public loadAchievements(achievements: AchievementData[]): void {\n        for (let i in achievements) {\n            let achievement = achievements[i],\n                task = new Task(\n                    parseInt(i),\n                    achievement.name!,\n                    achievement.description!,\n                    achievement.stage,\n                    achievement.stageCount!\n                );\n\n            // Secret tasks are displayed slightly different.\n            if (achievement.secret) task.secret = true;\n\n            this.achievements[achievement.key] = task;\n        }\n    }\n\n    /**\n     * Parses through the serialized ability data and creates a new ability object.\n     * @param abilities List of abilities received from the server.\n     */\n\n    public loadAbilities(abilities: AbilityData[]): void {\n        for (let ability of abilities)\n            this.setAbility(ability.key, ability.level, ability.type, ability.quickSlot);\n    }\n\n    /**\n     * Loads the friend list from the server into the client.\n     * @param friends Contains information about friend usernames and their online status.\n     */\n\n    public loadFriends(friends: FriendType): void {\n        let i = 0;\n\n        for (let username in friends) {\n            let info = friends[username];\n\n            this.friends[username] = new Friend(i, username, info.online, info.serverId);\n\n            i++;\n        }\n    }\n\n    /**\n     * Equips the item based on the equipment type.\n     * @param equipment Contains data about the equipment such as\n     * type, name, count, ability, etc.\n     */\n\n    public equip(equipment: EquipmentData): void {\n        let {\n            type,\n            name,\n            key,\n            count,\n            enchantments,\n            attackRange,\n            attackStats,\n            defenseStats,\n            bonuses,\n            attackStyle,\n            attackStyles\n        } = equipment;\n\n        if (!key) return this.unequip(type);\n\n        this.equipments[type].update(\n            key,\n            name,\n            count,\n            enchantments,\n            attackStats,\n            defenseStats,\n            bonuses\n        );\n\n        // Updates the weapon attack range and attack style.\n        if (type === Modules.Equipment.Weapon) {\n            this.attackRange = attackRange || 1;\n            this.setAttackStyle(attackStyle!, attackStyles!);\n        }\n    }\n\n    /**\n     * Adds a new friend to the list.\n     * @param username The username of the friend.\n     * @param status Whether the friend is online or not.\n     */\n\n    public addFriend(username: string, status: boolean, serverId: number): void {\n        this.friends[username] = new Friend(\n            Object.keys(this.friends).length,\n            username,\n            status,\n            serverId\n        );\n    }\n\n    /**\n     * Calls an empty update() function onto the equipment slot\n     * and resets it.\n     * @param type Which equipment slot we are resetting.\n     * @param count Optional parameter to remove a certain amount of items.\n     */\n\n    public unequip(type: Modules.Equipment, count = -1): void {\n        // Decrement count if provided, otherwise reset the equipment slot.\n        if (count > 0) this.equipments[type].count = count;\n        else this.equipments[type].update();\n    }\n\n    /**\n     * Signals to the callbacks that the player's data (experience, level, equipment)\n     * has undergone a change. This updates the UI essentially.\n     */\n\n    public sync(): void {\n        this.syncCallback?.();\n    }\n\n    /**\n     * @returns The key of the currently equipped armour.\n     */\n\n    public getSpriteName(): string {\n        // Use the armour skin if it exists.\n        if (this.equipments[Modules.Equipment.ArmourSkin].key)\n            return this.equipments[Modules.Equipment.ArmourSkin].key;\n\n        return this.equipments[Modules.Equipment.Armour].key;\n    }\n\n    /**\n     * @returns The key of the currently equipped weapon.\n     */\n\n    public getWeaponSpriteName(): string {\n        // Use the weapon skin if it exists.\n        if (this.equipments[Modules.Equipment.WeaponSkin].key)\n            return this.equipments[Modules.Equipment.WeaponSkin].key;\n\n        return this.equipments[Modules.Equipment.Weapon].key;\n    }\n\n    /**\n     * @returns The armour object of the player.\n     */\n\n    public getArmour(): Armour {\n        return this.equipments[Modules.Equipment.Armour];\n    }\n\n    /**\n     * @returns The armour skin object of the player.\n     */\n\n    public getArmourSkin(): ArmourSkin {\n        return this.equipments[Modules.Equipment.ArmourSkin];\n    }\n\n    /**\n     * @returns The boots object of the player.\n     */\n\n    public getBoots(): Boots {\n        return this.equipments[Modules.Equipment.Boots];\n    }\n\n    /**\n     * @returns The arrows object of the player.\n     */\n\n    public getArrows(): Arrows {\n        return this.equipments[Modules.Equipment.Arrows];\n    }\n\n    /**\n     * @returns The pendant object of the player.\n     */\n\n    public getPendant(): Pendant {\n        return this.equipments[Modules.Equipment.Pendant];\n    }\n\n    /**\n     * @returns The ring object of the player.\n     */\n\n    public getRing(): Ring {\n        return this.equipments[Modules.Equipment.Ring];\n    }\n\n    /**\n     * @returns The weapon object of the player.\n     */\n\n    public getWeapon(): Weapon {\n        return this.equipments[Modules.Equipment.Weapon];\n    }\n\n    /**\n     * @returns The weapon skin object of the player.\n     */\n\n    public getWeaponSkin(): WeaponSkin {\n        return this.equipments[Modules.Equipment.WeaponSkin];\n    }\n\n    /**\n     * @returns Whether the player has the administrator rank.\n     */\n\n    public override isAdmin(): boolean {\n        return this.rank === Modules.Ranks.Admin || this.rank === Modules.Ranks.HollowAdmin;\n    }\n\n    /**\n     * @returns Whether the player has the moderator rank.\n     */\n\n    public override isModerator(): boolean {\n        return this.rank === Modules.Ranks.Moderator;\n    }\n\n    /**\n     * Adds up the experience from every skill and returns the total.\n     * @returns Integer value of the total experience.\n     */\n\n    public getTotalExperience(): number {\n        let total = 0;\n\n        for (let skill of Object.values(this.skills)) total += skill.experience;\n\n        return total;\n    }\n\n    /**\n     * @returns The key of the medal based on the player's medal type.\n     */\n\n    public getMedalKey(): string {\n        switch (this.medal) {\n            case Modules.Medals.Silver: {\n                return 'silvermedal';\n            }\n\n            case Modules.Medals.Gold: {\n                return 'goldmedal';\n            }\n\n            case Modules.Medals.Artist: {\n                return 'crown-artist';\n            }\n\n            case Modules.Medals.Tier1: {\n                return 'crown-tier1';\n            }\n\n            case Modules.Medals.Tier2: {\n                return 'crown-tier2';\n            }\n\n            case Modules.Medals.Tier3: {\n                return 'crown-tier3';\n            }\n\n            case Modules.Medals.Tier4: {\n                return 'crown-tier4';\n            }\n\n            case Modules.Medals.Tier5: {\n                return 'crown-tier5';\n            }\n\n            case Modules.Medals.Tier6: {\n                return 'crown-tier6';\n            }\n\n            case Modules.Medals.Tier7: {\n                return 'crown-tier7';\n            }\n\n            default: {\n                return '';\n            }\n        }\n    }\n\n    /**\n     * Returns a medal based on the player's rank.\n     * @returns The medal type for the player's rank.\n     */\n\n    private getRankMedal(): Modules.Medals {\n        switch (this.rank) {\n            case Modules.Ranks.Artist: {\n                return Modules.Medals.Artist;\n            }\n\n            case Modules.Ranks.TierOne: {\n                return Modules.Medals.Tier1;\n            }\n\n            case Modules.Ranks.TierTwo: {\n                return Modules.Medals.Tier2;\n            }\n\n            case Modules.Ranks.TierThree: {\n                return Modules.Medals.Tier3;\n            }\n\n            case Modules.Ranks.TierFour: {\n                return Modules.Medals.Tier4;\n            }\n\n            case Modules.Ranks.TierFive: {\n                return Modules.Medals.Tier5;\n            }\n\n            case Modules.Ranks.TierSix: {\n                return Modules.Medals.Tier6;\n            }\n\n            case Modules.Ranks.TierSeven: {\n                return Modules.Medals.Tier7;\n            }\n\n            default: {\n                return Modules.Medals.None;\n            }\n        }\n    }\n\n    /**\n     * Updates the mana of the player.\n     * @param mana The current amount of mana.\n     * @param maxMana Optional parameter for the max mana.\n     */\n\n    public setMana(mana: number, maxMana?: number): void {\n        this.mana = mana;\n\n        if (maxMana) this.maxMana = maxMana;\n\n        this.manaCallback?.(this.mana, maxMana || this.maxMana);\n    }\n\n    /**\n     * Updates the experience of the skill or create a new one first if it doesn't exist.\n     * @param arg0 Contains skill data such as type, experience, level, etc.\n     */\n\n    public setSkill({ type, experience, level, percentage, nextExperience }: SkillData): void {\n        if (!this.skills[type]) this.skills[type] = new Skill(type);\n\n        this.skills[type as Modules.Skills].update(\n            experience,\n            nextExperience!,\n            level!,\n            percentage!\n        );\n    }\n\n    /**\n     * Updates data of the quest based on the key provided with the new stage and\n     * substage information.\n     * @param key The key of the quest we are updating.\n     * @param stage The new stage of the quest.\n     * @param subStage The new substage of the quest.\n     */\n\n    public setQuest(key: string, stage: number, subStage: number): void {\n        this.quests[key]?.update(stage, subStage);\n    }\n\n    /**\n     * Updates data about an achievement using the provided key.\n     * @param key The key of the achievement we are updating.\n     * @param stage The new stage of the achievement.\n     * @param name The name of the achievement.\n     * @param description The description of the achievement.\n     */\n\n    public setAchievement(key: string, stage: number, name: string, description: string): void {\n        // Secret achievements that are not loaded initially.\n        if (!(key in this.achievements)) {\n            let task = new Task(Object.keys(this.achievements).length - 1, name, description);\n\n            // Only secret achievements are created this way.\n            task.secret = true;\n\n            this.achievements[key] = task;\n\n            return;\n        }\n\n        this.achievements[key]?.update(stage, undefined, name, description);\n    }\n\n    /**\n     * Updates an ability's key and level.\n     * @param key The key of the ability we are updating.\n     * @param level The level of the ability.\n     * @param type Optional parameter passed when we are creating a new ability.\n     * @param quickSlot The id of the quickslot the ability is in.\n     */\n\n    public setAbility(\n        key: string,\n        level: number,\n        type?: Modules.AbilityType,\n        quickSlot = -1\n    ): void {\n        // This function is used when adding abilities for the first time too.\n        if (key in this.abilities) this.abilities[key]?.update(level, quickSlot);\n        else this.abilities[key] = new Ability(type!, key, level, quickSlot);\n\n        // If any active ability is detected then we create a callback to display the quick slots.\n        if (type === Modules.AbilityType.Active || quickSlot !== -1)\n            this.abilityCallback?.(key, level, quickSlot);\n    }\n\n    /**\n     * Updates the poison status of the player.\n     * @param poison Poison status to update with.\n     */\n\n    public setPoison(poison: boolean): void {\n        this.poison = poison;\n\n        this.poisonCallback?.(poison);\n    }\n\n    /**\n     * Updates the online status of a friend.\n     * @param username The username of the friend we are updating.\n     * @param status The online status of the friend.\n     * @param serverId The server id of the friend.\n     */\n\n    public setFriendStatus(username: string, status: boolean, serverId: number): void {\n        this.friends[username].online = status;\n        this.friends[username].serverId = serverId;\n    }\n\n    /**\n     * Updates the attack styles of the weapon. This occurs when a player already has a weapon\n     * equipped and they change their attack style.\n     * @param style The active attack style of the weapon.\n     * @param styles (Optional) The list of all attack styles of the weapon.\n     */\n\n    public setAttackStyle(style: Modules.AttackStyle, styles?: Modules.AttackStyle[]): void {\n        this.getWeapon().attackStyle = style;\n\n        // May be null when we're swapping attack styles.\n        if (styles) this.getWeapon().attackStyles = styles;\n    }\n\n    /**\n     * Updates the player's rank and synchronizes the medals.\n     * @param rank The new rank of the player.\n     */\n\n    public setRank(rank: Modules.Ranks): void {\n        this.rank = rank;\n        this.medal = this.getRankMedal();\n    }\n\n    /**\n     * Synchronizes the guild connect packet with the player's guild information.\n     * @param packet Contains information about the guild we are updating.\n     */\n\n    public setGuild(packet?: GuildPacket): void {\n        if (!packet) {\n            this.guild = undefined;\n            return;\n        }\n\n        this.guild = {\n            name: packet.name,\n            members: packet.members\n        };\n    }\n\n    /**\n     * Updates the active status of an ability.\n     * @param key The key of the ability we are updating.\n     */\n\n    public toggleAbility(key: string): void {\n        this.abilities[key]?.toggle();\n    }\n\n    /**\n     * @returns If the weapon the player currently wields is a ranged weapon.\n     */\n\n    public isRanged(): boolean {\n        return this.attackRange > 1;\n    }\n\n    /**\n     * @returns Whether or not the player has a ranged-based magic weapon.\n     */\n\n    public isMagic(): boolean {\n        return this.getWeapon().bonuses.magic > 0 && this.isRanged();\n    }\n\n    /**\n     * @returns Whether or not the current weapon's key isn't an empty string.\n     */\n\n    public hasWeapon(): boolean {\n        return this.equipments[Modules.Equipment.Weapon].exists();\n    }\n\n    /**\n     * @returns Whether or not the player has a medal.\n     */\n\n    public override hasMedal(): boolean {\n        return this.medal !== Modules.Medals.None;\n    }\n\n    /**\n     * @returns Checks whether any of the keyboard directional\n     * movement conditionals are true.\n     */\n\n    public hasKeyboardMovement(): boolean {\n        return this.moveLeft || this.moveRight || this.moveUp || this.moveDown;\n    }\n\n    /**\n     * @param username The username of the friend we are checking.\n     * @returns Whether or not the player has a friend with the given username.\n     */\n\n    public hasFriend(username: string): boolean {\n        return username.toLowerCase() in this.friends;\n    }\n\n    /**\n     * Callback for when the poison status undergoes a change.\n     * @param callback Contains information about the current poison status.\n     */\n\n    public onPoison(callback: PoisonCallback): void {\n        this.poisonCallback = callback;\n    }\n\n    /**\n     * Callback for whenever we want to synchronize\n     * the player's data to the UI.\n     */\n\n    public onSync(callback: () => void): void {\n        this.syncCallback = callback;\n    }\n\n    /**\n     * Callback for when an active ability is added and we signal to the\n     * client that we want to display the quick slots menu.\n     */\n\n    public onAbility(callback: AbilityCallback): void {\n        this.abilityCallback = callback;\n    }\n\n    /**\n     * Callback for when the player's mana changes.\n     * @param callback Contains the current mana and max mana.\n     */\n\n    public onMana(callback: ManaCallback): void {\n        this.manaCallback = callback;\n    }\n}\n","import Entity from '../entity';\n\nimport { Modules } from '@kaetram/common/network';\n\nexport default class Chest extends Entity {\n    public constructor(instance: string) {\n        super(instance, Modules.EntityType.Chest);\n    }\n\n    public override idle(): void {\n        this.setAnimation('idle_down', 150);\n    }\n}\n","import Entity from '../entity';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { Enchantments } from '@kaetram/common/types/item';\n\nexport default class Item extends Entity {\n    public dropped = false;\n    public originalY = -1;\n\n    public constructor(\n        instance: string,\n        public count: number = 1,\n        public enchantments: Enchantments = {}\n    ) {\n        super(instance, Modules.EntityType.Item);\n    }\n\n    /**\n     * Override for the `setAnimation` function to handle\n     * bopping up and down when an item is spawned on the ground.\n     */\n\n    public override setAnimation(\n        name: string,\n        speed?: number,\n        count?: number,\n        onEndCount?: (() => void) | undefined\n    ): void {\n        super.setAnimation(name, speed, count, onEndCount);\n\n        if (this.animation!.length > 1) return;\n\n        // Store the original Y offset.\n        this.originalY = this.sprite.offsetY;\n\n        // We use the `onBop` callback to update the sprite's offset.\n        this.animation?.onBop((bopIndex: number) => {\n            this.sprite.offsetY = this.originalY - bopIndex;\n        });\n    }\n\n    public override idle(): void {\n        this.setAnimation('idle', 150);\n    }\n\n    public override hasShadow(): boolean {\n        return true;\n    }\n}\n","import Utils from '../../utils/util';\nimport Entity from '../entity';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Character from '../character/character';\n\nexport default class Projectile extends Entity {\n    public override type = Modules.EntityType.Projectile;\n\n    public speed = 150;\n\n    public override readonly fadingDuration = 100;\n\n    public target!: Character;\n\n    private impactCallback?(): void;\n\n    public constructor(instance: string, public owner: Entity) {\n        super(instance, Modules.EntityType.Projectile);\n    }\n\n    public override idle(): void {\n        this.setAnimation('travel');\n    }\n\n    public impact(): void {\n        this.impactCallback?.();\n    }\n\n    public setStart(x: number, y: number): void {\n        this.setGridPosition(Math.floor(x / Utils.tileSize), Math.floor(y / Utils.tileSize));\n    }\n\n    public setTarget(target: Character): void {\n        this.target = target;\n\n        this.updateAngle();\n    }\n\n    /**\n     * @returns How fast the projectile animation travels between frames (milliseconds)\n     */\n\n    public getAnimationSpeed(): number {\n        return this.sprite.idleSpeed;\n    }\n\n    /**\n     * Used to calculate the projectile's approach towards the target.\n     * @returns Time difference betwene the last update and now.\n     */\n\n    public getTimeDiff(): number {\n        return (Date.now() - this.lastUpdate) / 1000;\n    }\n\n    /**\n     * Impact effect is a special effect that is played when the projectile despawns.\n     * @returns The effect that is played when the projectile impacts the target.\n     */\n\n    public getImpactEffect(): Modules.Effects {\n        switch (this.sprite.key) {\n            case 'projectile-boulder': {\n                return Modules.Effects.Boulder;\n            }\n\n            case 'projectile-poisonball': {\n                return Modules.Effects.Poisonball;\n            }\n\n            case 'projectile-fireball':\n            case 'projectile-gift6': {\n                return Modules.Effects.Fireball;\n            }\n\n            case 'projectile-iceball': {\n                return Modules.Effects.Iceball;\n            }\n\n            case 'projectile-terror': {\n                return Modules.Effects.Terror;\n            }\n        }\n\n        return Modules.Effects.None;\n    }\n\n    /**\n     * Calculates the angle between the projectile and the target.\n     * @returns Angle in radians so that the projectile faces the target.\n     */\n\n    public updateAngle(): void {\n        if (!this.target) return;\n\n        this.angle =\n            Math.atan2(this.target.y - this.y, this.target.x - this.x) * (180 / Math.PI) - 90;\n    }\n\n    public override getAngle(): number {\n        return (this.angle * Math.PI) / 180;\n    }\n\n    /**\n     * Callback for when the projectile impacts the target.\n     */\n\n    public onImpact(callback: () => void): void {\n        this.impactCallback = callback;\n    }\n}\n","import log from '../lib/log';\n\nimport type Entity from '../entity/entity';\nimport type Map from '../map/map';\n\nexport default class Grids {\n    // Grid used for rendering entities.\n    public renderingGrid: { [id: string]: Entity }[][] = [];\n\n    public constructor(private map: Map) {\n        this.load();\n    }\n\n    /**\n     * Loads a rendering grid based on the proportions of the map's\n     * width and height. The rendering grid saves the entities near\n     * the players. We use this grid in order to render them.\n     */\n\n    private load(): void {\n        for (let i = 0; i < this.map.height; i++) {\n            this.renderingGrid[i] = [];\n\n            for (let j = 0; j < this.map.width; j++) this.renderingGrid[i][j] = {};\n        }\n\n        log.debug('Finished generating the rendering grid.');\n    }\n\n    /**\n     * Adds an entity to the rendering grid.\n     * @param entity The entity we are adding to the rendering grid.\n     */\n\n    public addToRenderingGrid(entity: Entity): void {\n        let { instance, gridX: x, gridY: y } = entity;\n\n        // Ensure the position is valid.\n        if (!this.map.isOutOfBounds(x, y)) this.renderingGrid[y][x][instance] = entity;\n    }\n\n    /**\n     * Removes an entity from the rendering grid.\n     * @param entity The entity parameter we are extracting instance, gridX, and gridY from.\n     */\n\n    public removeFromRenderingGrid({ instance, gridX, gridY }: Entity): void {\n        delete this.renderingGrid[gridY][gridX][instance];\n    }\n\n    /**\n     * Looks about a grid coordinate for entities and returns them.\n     * @param gridX The x grid coordinate we are looking around.\n     * @param gridY The y grid coordinate we are looking around.\n     * @param radius How many tiles we are looking around.\n     */\n\n    public getEntitiesAround(gridX: number, gridY: number, radius = 2): Entity[] {\n        let entities: Entity[] = [];\n\n        for (let i = gridY - radius; i < gridY + radius; i++)\n            for (let j = gridX - radius; j < gridX + radius; j++)\n                if (this.map.isOutOfBounds(j, i)) continue;\n                else entities = [...entities, ...Object.values(this.renderingGrid[i][j])];\n\n        return entities;\n    }\n}\n","import Mob from '../entity/character/mob/mob';\nimport NPC from '../entity/npc/npc';\nimport Player from '../entity/character/player/player';\nimport Chest from '../entity/objects/chest';\nimport Item from '../entity/objects/item';\nimport Projectile from '../entity/objects/projectile';\nimport log from '../lib/log';\nimport Grids from '../renderer/grids';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Character from '../entity/character/character';\nimport type { EntityData } from '@kaetram/common/types/entity';\nimport type { PlayerData } from '@kaetram/common/types/player';\nimport type Entity from '../entity/entity';\nimport type Game from '../game';\nimport type SpritesController from './sprites';\n\ninterface EntitiesCollection {\n    [instance: string]: Entity;\n}\n\nexport interface Movable {\n    string: number;\n    characterId: string;\n    targetId: string;\n    attackerId: string;\n    hitType: number;\n}\n\nexport default class EntitiesController {\n    public grids: Grids;\n    public sprites: SpritesController;\n\n    public entities: EntitiesCollection = {};\n    public decrepit: Entity[] = [];\n\n    public constructor(private game: Game) {\n        this.grids = new Grids(game.map);\n        this.sprites = game.sprites;\n\n        game.input.loadCursors();\n    }\n\n    /**\n     * Creates a new entity based on the EntityData object we\n     * received from the server. The entity is created depending\n     * on the type specified. The code following is the base\n     * entity data each entity contains (name, coordinates,\n     * sprite key).\n     * @param info EntityData containing information about an entity.\n     */\n\n    public create(info: EntityData): void {\n        // Don't spawn if we receive our own player data somehow.\n        if (this.isPlayer(info.instance)) return;\n\n        // Entity already exists, don't respawn.\n        if (info.instance in this.entities) return;\n\n        let entity!: Entity;\n\n        switch (info.type) {\n            case Modules.EntityType.Chest: {\n                entity = this.createChest(info.instance);\n                break;\n            }\n\n            case Modules.EntityType.NPC: {\n                entity = this.createNPC(info.instance);\n                break;\n            }\n\n            case Modules.EntityType.Item: {\n                entity = this.createItem(info);\n                break;\n            }\n\n            case Modules.EntityType.Mob: {\n                entity = this.createMob(info);\n                break;\n            }\n\n            case Modules.EntityType.Projectile: {\n                entity = this.createProjectile(info)!;\n                break;\n            }\n\n            case Modules.EntityType.Player: {\n                entity = this.createPlayer(info as PlayerData);\n                break;\n            }\n        }\n\n        // Something went wrong creating the entity.\n        if (!entity) return log.error(`Failed to create entity ${info.instance}`);\n\n        let sprite = this.game.sprites.get(entity.isItem() ? `items/${info.key}` : info.key);\n\n        // Don't add entities that don't have a sprite.\n        if (!sprite) return log.error(`Failed to create sprite for entity ${info.key}.`);\n\n        // The name the player sees for an entity.\n        entity.name = info.name;\n\n        // Server-sided x and y coordinates are the `gridX` and `gridY` client coordinates.\n        entity.setGridPosition(info.x, info.y);\n\n        // Set the sprite and sprite idle speed.\n        entity.setSprite(sprite);\n\n        // Begin the idling animation.\n        entity.idle();\n\n        this.addEntity(entity);\n    }\n\n    /**\n     * Creates a new chest entity with the instance provided.\n     * @param instance The instance of the chest entity.\n     * @returns A new chest object.\n     */\n\n    private createChest(instance: string): Chest {\n        return new Chest(instance);\n    }\n\n    /**\n     * Creates a new NPC object with the instance string provided.\n     * @param instance The instance of the NPC character.\n     * @returns A new NPC object.\n     */\n\n    private createNPC(instance: string): NPC {\n        return new NPC(instance);\n    }\n\n    /**\n     * Creates a new item object with the instance, count, and enchantments.\n     * @param info EntityData object containing item information.\n     * @returns A new item object.\n     */\n\n    private createItem(info: EntityData): Item {\n        return new Item(info.instance, info.count, info.enchantments);\n    }\n\n    /**\n     * Creates a new mob object, sets data such as its health,\n     * attack range, level, etc, and returns that object.\n     * @param info The entity data object containing mob information.\n     * @returns A new mob object.\n     */\n\n    private createMob(info: EntityData): Mob {\n        let mob = new Mob(info.instance, this.game);\n\n        mob.setHitPoints(info.hitPoints!, info.maxHitPoints);\n\n        // Apply the mob-specific properties\n        mob.attackRange = info.attackRange!;\n        mob.level = info.level!;\n        mob.hiddenName = info.hiddenName!;\n        mob.movementSpeed = info.movementSpeed!;\n        mob.orientation = info.orientation!;\n\n        // Set the display info properties directly onto the mob.\n        if (info.displayInfo) {\n            if (info.displayInfo.colour) mob.nameColour = info.displayInfo.colour;\n            if (info.displayInfo.scale) mob.customScale = info.displayInfo.scale;\n        }\n\n        return mob;\n    }\n\n    /**\n     * Creates a projectile based on the provided entity data. The projectile\n     * is a bit special in that it handles callbacks. This function will be further\n     * refactored, and timing for projectile collision will be handled server-sided\n     * instead of relying on the client to detect collision. Client should only\n     * be responsible for rendering. Right now, this could potentially be exploited.\n     * @param info Entity data containing projectile information.\n     * @returns New projectile object.\n     */\n\n    private createProjectile(info: EntityData): Projectile | undefined {\n        let attacker = this.get<Character>(info.ownerInstance!),\n            target = this.get<Character>(info.targetInstance!);\n\n        if (!attacker || !target) return undefined;\n\n        attacker.lookAt(target);\n\n        let projectile = new Projectile(info.instance, attacker);\n\n        projectile.name = info.name;\n\n        projectile.setStart(attacker.x, attacker.y);\n        projectile.setTarget(target);\n\n        projectile.angled = true;\n        projectile.type = info.type;\n\n        /**\n         * Move this into the external overall function\n         */\n\n        projectile.onImpact(() => {\n            /**\n             * Data contained within the projectile is solely for rendering purposes.\n             * The logic is handled in the backend.\n             */\n\n            let impactEffect = projectile.getImpactEffect();\n\n            if (impactEffect !== Modules.Effects.None) target.addEffect(impactEffect);\n\n            this.game.info.create(\n                Modules.Hits.Normal,\n                info.damage!,\n                target.x,\n                target.y,\n                this.isPlayer(target.instance)\n            );\n\n            target.triggerHealthBar();\n\n            this.unregisterPosition(projectile);\n            delete this.entities[projectile.instance];\n        });\n\n        attacker.performAction(attacker.orientation, Modules.Actions.Attack);\n        attacker.triggerHealthBar();\n\n        return projectile;\n    }\n\n    /**\n     * Creates a new player object based on the info provided.\n     * @param info Entity data info to spawn the player.\n     * @returns A new player object.\n     */\n\n    private createPlayer(info: PlayerData): Player {\n        let player = new Player(info.instance, this.game);\n\n        player.load(info);\n\n        player.setSprite(this.game.sprites.get(player.getSpriteName()));\n\n        player.ready = true;\n\n        return player;\n    }\n\n    /**\n     * Checks if the instance provided is the same as the main player.\n     * @param instance The instance we are checking.\n     * @returns If the instance is the same as the main player's instance.\n     */\n\n    private isPlayer(instance: string): boolean {\n        return this.game.player.instance === instance;\n    }\n\n    /**\n     * Gets an entity based on its instance, an entity type\n     * can be specified as long as its a sublcass of Entity.\n     * @param instance The instance of the entity we are looking for.\n     * @returns An entity object or subclass of Entity.\n     */\n\n    public get<E extends Entity>(instance: string): E {\n        return this.entities[instance] as E;\n    }\n\n    /**\n     * Adds an entity to the rendering grid and the list of entities.\n     * We do not render in the fading if the user is on a mobile device.\n     * @param entity The entity object we are adding.\n     */\n\n    public addEntity(entity: Entity): void {\n        this.entities[entity.instance] = entity;\n        this.registerPosition(entity);\n\n        if (!(entity instanceof Item && entity.dropped)) entity.fadeIn(this.game.time);\n    }\n\n    /**\n     * Removes an entity from the rendering grid, and also deletes\n     * it from our entity controller list.\n     * @param entity The entity we are removing.\n     */\n\n    public removeEntity(entity: Entity): void {\n        // Prevent any syncing from happening when the player is removed.\n        if (entity.isPlayer()) entity.ready = false;\n\n        this.unregisterPosition(entity);\n\n        delete this.entities[entity.instance];\n    }\n\n    /**\n     * Removes an item entity from the rendering grid and\n     * deletes it from our controller's list of entities.\n     * @param item The item instance we are removing.\n     */\n\n    public removeItem(item: Entity): void {\n        this.unregisterPosition(item);\n\n        delete this.entities[item.instance];\n    }\n\n    /**\n     * Chests have a special remove method which requires them\n     * to undergo the death animation before being removed.\n     * @param chest Chest we are removing.\n     */\n\n    public removeChest(chest: Chest): void {\n        chest.setSprite(this.game.sprites.getDeath());\n        chest.animateDeath(() => {\n            this.unregisterPosition(chest);\n\n            delete this.entities[chest.instance];\n        });\n    }\n\n    /**\n     * Removes an NPC from the game and plays the death animation.\n     * @param npc The NPC we are removing.\n     */\n\n    public removeNPC(npc: NPC): void {\n        npc.setSprite(this.game.sprites.getDeath());\n        npc.animateDeath(() => {\n            this.unregisterPosition(npc);\n\n            delete this.entities[npc.instance];\n        });\n    }\n\n    /**\n     * Registers an entity's position on the renderin grid.\n     * @param entity The entity we are adding to rendering grid.\n     */\n\n    public registerPosition(entity: Entity): void {\n        this.grids.addToRenderingGrid(entity);\n    }\n\n    /**\n     * Removes an entity from the renderin grid.\n     * @param entity The entity we are removing.\n     */\n\n    public unregisterPosition(entity: Entity): void {\n        this.grids.removeFromRenderingGrid(entity);\n    }\n\n    /**\n     * Decrepit entities are entities that are queued for deletion.\n     * This occurs when we traverse regions and the need to despawn\n     * entities no longer visible becomes necessary.\n     */\n\n    public clean(): void {\n        if (this.decrepit.length === 0) return;\n\n        for (let entity of this.decrepit) {\n            // Prevent cleaning an entity that may have been removed from a different packet.\n            if (!entity) continue;\n\n            this.removeEntity(entity);\n        }\n    }\n\n    /**\n     * Temporary solution (that will probably become permanent because\n     * I have a tendency of forgetting sorry) which removes the name\n     * colour and scaling effect from all entities prior to receiving\n     * new data.\n     */\n\n    public cleanDisplayInfo(): void {\n        for (let entity of Object.values(this.entities)) {\n            entity.nameColour = '';\n            entity.customScale = 0;\n        }\n    }\n\n    /**\n     * Clears all player entities from our list.\n     * @param exception A player type entity that we are excluding from the clear.\n     */\n\n    public clearPlayers(exception: Player): void {\n        for (let entity of Object.values(this.entities))\n            if (entity.isPlayer() && entity.instance !== exception.instance)\n                this.removeEntity(entity);\n    }\n\n    /**\n     * Shortcut for grabbing entity dictionary. Primarily used to increase\n     * readability when accessing the `entities` class. (Prevent .entities.entities)\n     * @returns The entities collection containing all loaded entities.\n     */\n\n    public getAll(): EntitiesCollection {\n        return this.entities;\n    }\n\n    /**\n     * Iterates through all the loaded entities and makes a callback for each one.\n     * @param callback Contains the entity object currently being iterated.\n     */\n\n    public forEachEntity(callback: (entity: Entity) => void): void {\n        for (let entity of Object.values(this.entities)) callback(entity);\n    }\n}\n","import { Modules } from '@kaetram/common/network';\n\ninterface Colour {\n    fill: string;\n    stroke: string;\n    inflicted?: Colour;\n}\n\ninterface Colours {\n    [key: string]: Colour;\n}\n\nexport default class Splat {\n    public opacity = 1;\n\n    private text: string;\n    private prefix: string;\n    private suffix: string;\n    private lastTime: number;\n    private speed: number;\n    private updateY: number;\n    private duration: number;\n    private colour: Colour;\n\n    public fill: string;\n    public stroke: string;\n\n    private destroyCallback?: (id: string) => void;\n\n    public constructor(\n        public id: string,\n        public type: Modules.Hits,\n        public value: number,\n        public x: number,\n        public y: number,\n        isTarget = false,\n        skill = -1\n    ) {\n        this.text = `${value}`;\n        this.prefix = '';\n        this.suffix = '';\n        this.lastTime = 0;\n        this.speed = 100;\n        this.updateY = this.isHeal() ? 2 : 1;\n        this.duration = this.isHeal() ? 400 : 1000;\n        this.colour = (Modules.DamageColours as Colours)[type];\n\n        if (skill > -1) this.colour = (Modules.SkillExpColours as Colours)[skill];\n\n        this.fill = this.colour.fill;\n        this.stroke = this.colour.stroke;\n\n        if (isTarget && this.hasInflicted()) {\n            this.fill = this.colour.inflicted!.fill;\n            this.stroke = this.colour.inflicted!.stroke;\n        }\n\n        // Text gets marked as MISS if this is a damage type and the value is 0.\n        if (this.isDamage() && value < 1) this.text = 'MISS';\n\n        if (this.isPoison() || this.isFreezing()) this.prefix = '--';\n        if (this.isPoints()) this.prefix = '++';\n\n        if (this.isExperience()) {\n            this.prefix = '+';\n            this.suffix = 'EXP';\n        }\n    }\n\n    /**\n     * Updates the current time of the splat.\n     * @param time The game time from the game loop.\n     */\n\n    public update(time: number): void {\n        if (time - this.lastTime > this.speed) {\n            this.y -= this.updateY;\n\n            this.lastTime = time;\n\n            this.opacity -= 70 / this.duration;\n\n            if (this.opacity < 0) this.destroyCallback?.(this.id);\n        }\n    }\n\n    /**\n     * @returns Concatenated text with prefix, text, and suffix.\n     */\n\n    public getText(): string {\n        return `${this.prefix}${this.text} ${this.suffix}`;\n    }\n\n    /**\n     * Checks if the type of the splat is a heal type.\n     * @returns Whether the type equals the enum Heal.\n     */\n\n    private isHeal(): boolean {\n        return this.type === Modules.Hits.Heal;\n    }\n\n    /**\n     * Checks if the splat type is a poison.\n     * @returns Whether the type equals the enum Poison.\n     */\n\n    private isPoison(): boolean {\n        return this.type === Modules.Hits.Poison;\n    }\n\n    /**\n     * Checks whether the hit type is that of cold damage.\n     * @returns Whether or not the splat type is cold.\n     */\n\n    private isFreezing(): boolean {\n        return this.type === Modules.Hits.Freezing;\n    }\n\n    /**\n     * Checks if the splat type is that of experience of profession. We\n     * separate these two since their prefix contains a '+' and suffix a 'EXP';\n     * @returns Whether the type equals the enum Experience or Profession.\n     */\n\n    private isExperience(): boolean {\n        return this.type === Modules.Hits.Experience || this.type === Modules.Hits.Profession;\n    }\n\n    /**\n     * Separate the heal and mana types since their prefix is '++';\n     * @returns Whether the type equals the enum Heal or Mana.\n     */\n\n    private isPoints(): boolean {\n        return this.type === Modules.Hits.Heal || this.type === Modules.Hits.Mana;\n    }\n\n    /**\n     * Damage types are characterized by combat related splats.\n     * When the splat is a damage type, we can replace the text\n     * with `MISS` should the value be undefined or less than 1.\n     * @returns Whether the type of the splat is a damage type.\n     */\n\n    private isDamage(): boolean {\n        return (\n            this.type === Modules.Hits.Normal ||\n            this.type === Modules.Hits.Stun ||\n            this.type === Modules.Hits.Critical\n        );\n    }\n\n    /**\n     * Checks if the current colour hsa a inflicted property.\n     * @returns Whether the inflicted property is defined.\n     */\n\n    private hasInflicted(): boolean {\n        return this.colour.inflicted !== undefined;\n    }\n\n    /**\n     * Callback for when the info is destroyed.\n     * @param callback Callback containing the id of the info.\n     */\n\n    public onDestroy(callback: (id: string) => void): void {\n        this.destroyCallback = callback;\n    }\n}\n","import Splat from '../renderer/infos/splat';\nimport Utils from '../utils/util';\n\nimport type { Modules } from '@kaetram/common/network';\n\nexport default class InfoController {\n    private infos: { [info: string]: Splat } = {};\n\n    /**\n     * Creates a new info splat.\n     * @param type Type of hit we are displaying.\n     * @param amount Number amount we are displaying (e.g. 30 damage).\n     * @param x Absolute x position of the splat.\n     * @param y Absolute y position of the splat.\n     * @param isTarget Whether we are getting hit or we are hitting something.\n     */\n\n    public create(\n        type: Modules.Hits,\n        amount: number,\n        x: number,\n        y: number,\n        isTarget = false,\n        skill = -1,\n        randomize = false\n    ): void {\n        if (randomize) {\n            x += Utils.randomInt(-16, 16);\n            y += Utils.randomInt(-10, 10);\n        }\n\n        let id = Utils.createId(Date.now(), x, y);\n\n        this.addInfo(new Splat(id, type, amount, x, y, isTarget, skill));\n    }\n\n    /**\n     * Adds an info and creates a callback for when\n     * the info is destroyed. When that happens, we\n     * delete the info from our dictionary of infos.\n     * @param info The info we are adding.\n     */\n\n    private addInfo(info: Splat): void {\n        this.infos[info.id] = info;\n\n        info.onDestroy((id) => delete this.infos[id]);\n    }\n\n    /**\n     * @returns True if the number of keys in infos is 0.\n     */\n\n    public isEmpty(): boolean {\n        return Object.keys(this.infos).length === 0;\n    }\n\n    /**\n     * Sends an update to each info object with the current time.\n     * @param time The current game time.\n     */\n\n    public update(time: number): void {\n        this.forEachInfo((info) => info.update(time));\n    }\n\n    /**\n     * Iterates through all the infos in the dictionary.\n     * @param callback Contains the current info being iterated.\n     */\n\n    public forEachInfo(callback: (info: Splat) => void): void {\n        for (let info of Object.values(this.infos)) callback(info);\n    }\n}\n","import Util from '../utils/util';\n\nimport { Packets } from '@kaetram/common/network';\n\nimport type Game from '../game';\n\nexport default class ChatController {\n    private chatBox: HTMLElement = document.querySelector('#chat')!;\n    private log: HTMLElement = document.querySelector('#chat-log')!;\n    private input: HTMLInputElement = document.querySelector('#chat-input')!;\n    private button = document.querySelector('#chat-button')!;\n\n    private readonly fadingDuration = 5000;\n    private fadingTimeout!: number | undefined;\n\n    public constructor(private game: Game) {\n        this.button.addEventListener('click', () => this.toggle());\n\n        this.input.addEventListener('blur', () => this.hide());\n    }\n\n    /**\n     * Handles key input from the handler. Pressing the ENTER\n     * key will trigger the chat input similar to the button.\n     * @param key The key identifier from the JQuery KeyDownEvent.\n     */\n\n    public keyDown(key: string): void {\n        if (key === 'Enter' && this.input.value !== '') return this.send();\n        if (key === 'Escape' || key === 'Enter') this.toggle();\n    }\n\n    /**\n     * Opens the chat box and automatically types the private message command.\n     * This is a temporary solution until we advance the chatbox some more.\n     * @param username The username of the friend we are messaging.\n     */\n\n    public privateMessage(username: string): void {\n        if (this.inputVisible()) return;\n\n        this.toggle();\n\n        this.input.value = `/pm *${username}* `;\n        this.input.focus();\n    }\n\n    /**\n     * Adds an entry to the chat box with the source,\n     * message, and optional colour (defaults to white).\n     * @param source Who is sending the message (username).\n     * @param message The contents of the message being sent.\n     * @param colour Optional parameter for the colour of the message.\n     * @param notify Optional parameter for whether to bold the message.\n     */\n\n    public add(source: string, message: string, colour = '', notify = false): void {\n        let element = this.createElement(source, message);\n\n        element.style.color = colour || 'white';\n        if (notify) element.style.fontWeight = 'bold';\n\n        // Scroll to the bottom of the chat log.\n        this.log.append(element);\n        this.log.scrollTop = this.log.scrollHeight;\n\n        this.displayChatBox();\n\n        // Start the timeout for hiding the chatbox.\n        this.hideChatBox();\n    }\n\n    /**\n     * Creates a chatbox element that we use to append to the chat log.\n     * @param source Who is sending the message, the player's username.\n     * @param message The contents of the message.\n     */\n\n    private createElement(source: string, message: string): HTMLElement {\n        let element = document.createElement('p');\n        element.innerHTML = `${source}  ${message}`;\n\n        return element;\n    }\n\n    /**\n     * Sends a packet to the server with the string\n     * of the chat message in the input field.\n     */\n\n    public send(): void {\n        this.game.socket.send(Packets.Chat, [this.input.value]);\n\n        this.hide();\n    }\n\n    /**\n     * Toggles the chat input and box.\n     * @param text Optional parameter for the text to display in the input field.\n     */\n\n    public toggle(): void {\n        this.clearTimeout();\n\n        if (this.inputVisible()) this.hide();\n        else this.display();\n    }\n\n    /**\n     * Makes the input field for the chat visible.\n     * It also updates the state of the chat button.\n     * @param text Optional parameter for the text to display in the input field.\n     */\n\n    private display(): void {\n        this.button.classList.add('active');\n\n        if (this.inputVisible()) this.input.style.display = 'block';\n        else Util.fadeIn(this.input);\n\n        this.displayChatBox();\n\n        // Fade input in, clear the input field, and focus it.\n        this.input.focus();\n        this.input.value = '';\n\n        this.log.scrollTop = this.log.scrollHeight;\n\n        Util.fadeIn(this.input);\n    }\n\n    /**\n     * Fades in the entire chatbox.\n     */\n\n    private displayChatBox(): void {\n        Util.fadeIn(this.chatBox);\n    }\n\n    /**\n     * Clears the input field and hides it from the view.\n     * It also updates the state of the chat button.\n     */\n\n    private hide(): void {\n        this.button.classList.remove('active');\n\n        this.hideChatBox();\n\n        // Fade input out and clear the input field.\n\n        this.input.blur();\n        this.input.value = '';\n\n        this.log.scrollTop = this.log.scrollHeight;\n\n        Util.fadeOut(this.input);\n    }\n\n    /**\n     * Hides the chatbox after running a timeout for\n     * `fadingDuration` period of time.\n     */\n\n    private hideChatBox(): void {\n        this.clearTimeout();\n\n        this.fadingTimeout = window.setTimeout(() => {\n            if (!this.inputVisible()) Util.fadeOut(this.chatBox);\n        }, this.fadingDuration);\n    }\n\n    /**\n     * Checks if the input element has a visible value.\n     * @returns Whether `:visible` flag is in the HTML element.\n     */\n\n    public inputVisible(): boolean {\n        return this.input.style.display === 'block';\n    }\n\n    /**\n     * Cleans all the chat inputs and hides everything if\n     * the input is visible.\n     */\n\n    public clear(): void {\n        if (this.inputVisible()) this.toggle();\n\n        this.clearTimeout();\n    }\n\n    /**\n     * Clears the fading timeout. The fading timeout represents\n     * the delay before the chat box fades out.\n     */\n\n    public clearTimeout(): void {\n        clearTimeout(this.fadingTimeout);\n        window.clearTimeout(this.fadingTimeout);\n\n        this.fadingTimeout = undefined;\n    }\n}\n","import $ from 'jquery';\n\nimport type Character from '../entity/character/character';\nimport type Entity from '../entity/entity';\nimport type InputController from './input';\n\nexport default class HUDController {\n    private hovering!: Entity | undefined;\n\n    private attackInfo = $('#attack-info');\n\n    private name;\n    private details;\n    private health;\n\n    public updateCallback?: (id: string, data: number) => void;\n\n    public constructor(private input: InputController) {\n        this.name = this.attackInfo.find('.name');\n        this.details = this.attackInfo.find('.details');\n        this.health = this.attackInfo.find('.health');\n\n        this.onUpdate(this.handleUpdate.bind(this));\n    }\n\n    /**\n     * Sets the hovering entity to the entity passed. If no\n     * entity is defined, then we hide the HUD and clear\n     * the hovering entity. If an entity has a health\n     * bar (player or mob) then we display the health bar.\n     */\n\n    public update(entity: Entity | undefined): void {\n        let { name, health, details } = this;\n\n        // Clear the entity and HUD if the entity is undefined.\n        if (!entity || !this.validEntity(entity)) {\n            this.hovering = undefined;\n            return this.hide();\n        }\n\n        // Display if it isn't visible.\n        if (!this.isVisible()) this.display();\n\n        // Sets the hovering entity.\n        this.hovering = entity;\n\n        // Updates the entity name.\n        name.html(entity.name);\n\n        // Check if the entity and set the health bar if it has health.\n        if (this.hasHealth()) this.setHealth((entity as Character).hitPoints);\n        else {\n            health.hide();\n            details.html('');\n        }\n    }\n\n    /**\n     * Checks whether the hovering entity exists and that it\n     * has a health bar. If the instance doesn't match the\n     * current hovering entity, then we don't proceed.\n     * @param instance The instance of the entity we're updating.\n     * @param hitPoints Updates the health bar of the hovering entity.\n     */\n\n    private handleUpdate(instance: string, hitPoints: number): void {\n        if (!this.hasHealth()) return;\n        if (this.hovering!.instance !== instance) return;\n\n        if (hitPoints < 1) this.hide();\n        else this.setHealth(hitPoints);\n    }\n\n    /**\n     * Updates the health bar and the detail info of the HUD.\n     * @param hitPoints The new hitpoints we are updating to.\n     */\n\n    private setHealth(hitPoints: number): void {\n        if (!this.hasHealth()) return;\n\n        this.health.show();\n\n        let { maxHitPoints } = this.hovering as Character;\n\n        this.health.css('width', `${Math.ceil((hitPoints / maxHitPoints) * 100) - 10}%`);\n        this.details.html(`${hitPoints} / ${maxHitPoints}`);\n    }\n\n    /**\n     * Checks whether the entity is valid by ensuring it is not the main\n     * player character or a projectile.\n     * @param entity The entity we are checking.\n     * @returns If the entity is not undefined, its instance isn't the same\n     * as the main player, and that it is not a projectile.\n     */\n\n    private validEntity(entity: Entity): boolean {\n        return entity.instance !== this.input.player.instance && !entity.isProjectile();\n    }\n\n    /**\n     * Checks whether the hovering entity exists. If it does\n     * then it checks if it is a player or a mob entity.\n     * @returns Checks if the hovering entity is a player or mob.\n     */\n\n    private hasHealth(): boolean {\n        if (!this.hovering) return false;\n\n        return this.hovering.isMob() || this.hovering.isPlayer();\n    }\n\n    /**\n     * Displays the HUD.\n     */\n\n    private display(): void {\n        this.attackInfo.fadeIn('fast');\n    }\n\n    /**\n     * Hides the HUD.\n     */\n\n    private hide(): void {\n        this.attackInfo.fadeOut('fast');\n    }\n\n    /**\n     * Checks whether or not the attackInfo is visible.\n     * @returns Whether the `display` property is set to `block`.\n     */\n\n    private isVisible(): boolean {\n        return this.attackInfo.css('display') === 'block';\n    }\n\n    /**\n     * Update to the HUD to update the health bar.\n     * @param callback The instance of the entity and the new data.\n     */\n\n    private onUpdate(callback: (instance: string, data: number) => void): void {\n        this.updateCallback = callback;\n    }\n}\n","import Chat from './chat';\nimport HUDController from './hud';\n\nimport Animation from '../entity/animation';\nimport log from '../lib/log';\nimport { isMobile } from '../utils/detect';\nimport Character from '../entity/character/character';\n\nimport { Modules, Packets, Opcodes } from '@kaetram/common/network';\n\nimport type Interact from '../menu/interact';\nimport type Friends from '../menu/friends';\nimport type Inventory from '../menu/inventory';\nimport type Player from '../entity/character/player/player';\nimport type Entity from '../entity/entity';\nimport type Sprite from '../entity/sprite';\nimport type Game from '../game';\nimport type Camera from '../renderer/camera';\nimport type App from '../app';\nimport type Map from '../map/map';\nimport type Trade from '../menu/trade';\nimport type Leaderboards from '../menu/leaderboards';\nimport type LeaderboardsFooter from '../menu/leaderboards-footer';\nimport type Guilds from '../menu/guilds';\n\ninterface TargetData {\n    sprite: Sprite;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    dx: number;\n    dy: number;\n    dw: number;\n    dh: number;\n}\n\nexport default class InputController {\n    private app: App;\n    private map: Map;\n    private camera: Camera;\n    public player: Player;\n    private friends: Friends;\n    private interact: Interact;\n    private inventory: Inventory;\n    private trade: Trade;\n    private leaderboards: Leaderboards;\n    private LeaderboardsFooter: LeaderboardsFooter;\n    private guilds: Guilds;\n\n    public selectedCellVisible = false;\n    public keyMovement = false;\n    public targetVisible = true;\n    public selectedX = -1;\n    public selectedY = -1;\n\n    public cursor!: Sprite;\n\n    public targetColour = 'rgba(255, 255, 255, 0.5)';\n\n    private cursors: { [cursor: string]: Sprite } = {};\n    public lastMousePosition: Position = { x: 0, y: 0 };\n\n    public hovering!: Modules.Hovering | null;\n\n    public mouse: Position = { x: 0, y: 0 };\n\n    /**\n     * This is the animation for the target\n     * cell spinner sprite (only on desktop)\n     */\n    public targetAnimation: Animation = new Animation('move', 4, 0, 16, 16);\n    public chatHandler: Chat;\n    public hud: HUDController;\n\n    public entity: Entity | undefined;\n    public interactEntity: Entity | undefined; // Used to store entity while the interact menu is active.\n\n    public constructor(private game: Game) {\n        this.app = game.app;\n        this.map = game.map;\n        this.camera = game.camera;\n        this.player = game.player;\n        this.friends = game.menu.getFriends();\n        this.inventory = game.menu.getInventory();\n        this.interact = game.menu.getInteract();\n        this.trade = game.menu.getTrade();\n        this.leaderboards = game.menu.getLeaderboards();\n        this.LeaderboardsFooter = game.menu.getLeaderboards2()\n        this.guilds = game.menu.getGuilds();\n\n        this.chatHandler = new Chat(game);\n        this.hud = new HUDController(this);\n\n        this.app.onLeftClick(this.handleLeftClick.bind(this));\n        this.app.onRightClick(this.handleRightClick.bind(this));\n\n        this.app.onKeyDown(this.handleKeyDown.bind(this));\n        this.app.onKeyUp(this.handleKeyUp.bind(this));\n\n        //this.app.onKeyDown(this.handle.bind(this));\n        this.app.onMouseMove((event: MouseEvent) => {\n            if (!this.game.started) return;\n\n            this.setCoords(event);\n            this.moveCursor();\n        });\n\n        this.interact.onButton(this.handleInteract.bind(this));\n        this.interact.onClose(() => (this.interactEntity = undefined));\n\n        this.friends.onMessage((username: string) => this.chatHandler.privateMessage(username));\n\n        this.targetAnimation.setSpeed(150);\n    }\n\n    /**\n     * Loads all the cursors one by one and inputs\n     * them in our dictionary of cursors.\n     */\n\n    public loadCursors(): void {\n        this.cursors.hand = this.game.sprites.get('hand');\n        this.cursors.sword = this.game.sprites.get('sword');\n        this.cursors.loot = this.game.sprites.get('loot');\n        this.cursors.target = this.game.sprites.get('target');\n        this.cursors.arrow = this.game.sprites.get('arrow');\n        this.cursors.talk = this.game.sprites.get('talk');\n        this.cursors.spell = this.game.sprites.get('spell');\n        this.cursors.bow = this.game.sprites.get('bow');\n        this.cursors.axe = this.game.sprites.get('axe_cursor');\n        this.cursors.pickaxe = this.game.sprites.get('pickaxe_cursor');\n        this.cursors.cooking = this.game.sprites.get('cooking');\n        this.cursors.fishing = this.game.sprites.get('fishing');\n        this.cursors.smithing = this.game.sprites.get('smithing');\n        this.cursors.crafting = this.game.sprites.get('crafting');\n        this.cursors.foraging = this.game.sprites.get('foraging');\n\n        log.debug('Loaded Cursors!');\n    }\n\n    /**\n     * Handles the input coming from the left click of the mouse.\n     * This is the equivalent to a tap on a mobile device.\n     * @param event DOM event containing click data on the screen.\n     */\n\n    private handleLeftClick(event: MouseEvent): void {\n        this.setCoords(event);\n\n        this.keyMovement = false;\n        this.player.disableAction = false;\n\n        // Admin command for teleporting to a location.\n        if (this.isCtrlKey())\n            return this.game.socket.send(Packets.Command, [\n                Opcodes.Command.CtrlClick,\n                this.getCoords()\n            ]);\n\n        this.move(this.getCoords());\n    }\n\n    /**\n     * A right click is called a ContextMenuEvent. Here we determine\n     * the coordinates of the click, and use that to activate the\n     * action menu at that location.\n     * @param position The position of the press.\n     */\n\n    private handleRightClick(pos: { x: number; y: number }): void {\n        this.setCoords(pos);\n\n        let position = this.getCoords(),\n            entity = this.game.searchForEntityAt(position);\n\n        // Ignore if no entity or the entity is the player.\n        if (!entity || entity.instance === this.player.instance) return this.interact.hide();\n\n        this.interact.show(this.mouse, entity, this.game.pvp);\n\n        this.interactEntity = entity;\n    }\n\n    /**\n     * Input handler for when a key goes down. Note that this only\n     * gets toggled in the event that the key is pressed down, and until\n     * the key is released (key up event) and pressed again, it won't call.\n     * @param event The DOM event containing key information.\n     */\n\n    private handleKeyDown(event: KeyboardEvent): void {\n        if (this.guilds.isVisible()) return this.guilds.keyDown(event.key);\n\n        // Redirect input to the leaderboards handler if the leaderboards are visible.\n        if (this.leaderboards.isVisible()) return this.leaderboards.keyDown(event.key);\n\n        // Redirect input to the leaderboards handler if the leaderboards are visible.\n        if (this.LeaderboardsFooter.isVisible()) return this.LeaderboardsFooter.keyDown(event.key);\n\n        // Redirect input to the trade handler if the trade input is visible.\n        if (this.trade.isInputDialogueVisible()) return this.trade.keyDown(event.key);\n\n        // Redirect input to the inventory handler if the inventory is visible.\n        if (this.inventory.isDropDialogVisible()) return this.inventory.keyDown(event.key);\n\n        // Redirect input to the friends handler if the friends input is visible.\n        if (this.friends.isPopupActive()) return this.friends.keyDown(event.key);\n\n        // Redirect input to the chat handler if the chat input is visible.\n        if (this.chatHandler.inputVisible()) return this.chatHandler.keyDown(event.key);\n\n        let target: Entity;\n\n        switch (event.key) {\n            case 'w':\n            case '':\n            case 'ArrowUp': {\n                this.player.moveUp = true;\n                return;\n            }\n\n            case 'a':\n            case '':\n            case 'ArrowLeft': {\n                this.player.moveLeft = true;\n                return;\n            }\n\n            case 's':\n            case '':\n            case 'ArrowDown': {\n                this.player.moveDown = true;\n                return;\n            }\n\n            case 'd':\n            case '':\n            case 'ArrowRight': {\n                this.player.moveRight = true;\n                return;\n            }\n\n            case 'Enter': {\n                this.chatHandler.toggle();\n                return;\n            }\n\n            case 'i': {\n                this.game.menu.getInventory().toggle();\n                return;\n            }\n\n            case 'm': {\n                this.game.menu.getWarp().toggle();\n                return;\n            }\n\n            case 'p': {\n                this.game.menu.getProfile().toggle();\n                return;\n            }\n\n            case 'h': {\n                this.game.menu.getInventory().selectEdible();\n                break;\n            }\n\n            case 't': {\n                target = this.game.entities.get(this.player.lastTarget);\n\n                if (!target) return;\n\n                this.setAttackTarget();\n                this.setPosition(target.gridX, target.gridY);\n\n                this.player.follow(target);\n\n                return;\n            }\n\n            case 'Escape': {\n                this.game.menu.hide();\n\n                if (this.player.moving) this.player.stop();\n                return;\n            }\n\n            case '+':\n            case '=': {\n                return this.game.zoom(0.2);\n            }\n\n            case '-':\n            case '_': {\n                return this.game.zoom(-0.2);\n            }\n\n            case '0':\n            case ')': {\n                this.camera.setZoom();\n\n                return this.game.zoom(0);\n            }\n        }\n    }\n\n    /**\n     * Event handler for when the key is released. This function's\n     * primary purpose is to stop movement when the key is released.\n     * @param event DOM event data containing key information.\n     */\n\n    public handleKeyUp(event: KeyboardEvent): void {\n        switch (event.key) {\n            case 'w':\n            case 'ArrowUp': {\n                this.player.moveUp = false;\n                break;\n            }\n\n            case 'a':\n            case 'ArrowLeft': {\n                this.player.moveLeft = false;\n                break;\n            }\n\n            case 's':\n            case 'ArrowDown': {\n                this.player.moveDown = false;\n                break;\n            }\n\n            case 'd':\n            case 'ArrowRight': {\n                this.player.moveRight = false;\n                break;\n            }\n        }\n\n        this.player.disableAction = false;\n    }\n\n    /**\n     * Receives an interact menu action from the interact handler. We use the entity\n     * in the input to determine the course of action.\n     * @param menuAction Which button in the interact menu was pressed.\n     */\n\n    private handleInteract(menuAction: Modules.MenuActions): void {\n        // No entity to interact with, perhaps this was called with the interact menu closed?\n        if (!this.interactEntity) return;\n\n        switch (menuAction) {\n            case Modules.MenuActions.Attack: {\n                return this.move({\n                    x: this.interactEntity.x,\n                    y: this.interactEntity.y,\n                    gridX: this.interactEntity.gridX,\n                    gridY: this.interactEntity.gridY\n                });\n            }\n\n            case Modules.MenuActions.Trade: {\n                this.game.player.trade(this.interactEntity);\n                break;\n            }\n\n            case Modules.MenuActions.Follow: {\n                if (this.interactEntity instanceof Character)\n                    this.game.player.pursue(this.interactEntity);\n                break;\n            }\n\n            case Modules.MenuActions.Examine: {\n                this.game.socket.send(Packets.Examine, [this.interactEntity.instance]);\n                break;\n            }\n\n            case Modules.MenuActions.AddFriend: {\n                this.game.socket.send(Packets.Friends, {\n                    opcode: Opcodes.Friends.Add,\n                    username: this.interactEntity.name\n                });\n                break;\n            }\n        }\n\n        this.interact.hide();\n    }\n\n    /**\n     * Receives position data from the updater and attempts\n     * to move the player to the specified grid coordinates.\n     * We essentially pass the coordinates through the same\n     * function responsible for targeting movement from a\n     * left click. Note that although the position type is\n     * that of `Position` the x and y values are actually\n     * grid coordinates.\n     * @param position Position object containing player's\n     * requested grid coordinates.\n     */\n\n    public keyMove(position: Coordinate): void {\n        if (this.player.hasPath()) return;\n\n        this.keyMovement = true;\n\n        this.move(position);\n    }\n\n    /**\n     * Function responsible for the movement of the player. If we detect\n     * an entity at the specific position (one that can be targeted or\n     * attacked) we initiate a target action. Otherwise, we just move\n     * the player to the new position and start the pathing.\n     * @param position The grid coordinates of the position we're requesting.\n     */\n\n    private move(position: Coordinate, useSearch = !this.keyMovement): void {\n        if (this.player.stunned || this.player.teleporting) return;\n\n        // Default the target to the passive one.\n        this.setPassiveTarget();\n\n        // Prevent any input when actions are disabled or we are zoning.\n        if (this.player.disableAction || this.game.zoning.direction) return;\n\n        // Prevent input outside map boundaries.\n        if (this.game.map.isOutOfBounds(position.gridX, position.gridY)) return;\n\n        // If chat is open on mobile we automatically toggle it so it gets out of the way.\n        if (isMobile() && this.chatHandler.inputVisible()) this.chatHandler.toggle();\n\n        // Hides all game menus (profile, inventory, warps, etc.)\n        this.game.menu.hide();\n\n        // Handle object interaction.\n        if (this.game.map.isObject(position.gridX, position.gridY))\n            return this.player.setObjectTarget(position);\n\n        // Remove player's targets prior to an action.\n        this.player.removeTarget();\n\n        // Handle NPC interaction.\n        this.entity = this.getEntity(position, useSearch);\n\n        if (this.entity && this.entity.instance !== this.player.instance) {\n            this.setAttackTarget();\n\n            // Set target and follow a targetable entity.\n            if (this.isTargetable(this.entity)) {\n                this.player.follow(this.entity);\n\n                if (this.isAttackable(this.entity))\n                    (this.entity as Character).addAttacker(this.player);\n\n                if (this.player.isRanged())\n                    this.game.socket.send(Packets.Target, [\n                        Opcodes.Target.Attack,\n                        this.entity.instance\n                    ]);\n                return;\n            }\n        }\n\n        // Move the player to the new position.\n        this.player.go(position.gridX, position.gridY);\n    }\n\n    /**\n     * Function every time the cursor moves on the webpage. We essentially\n     * grab the cursor's grid position within the game and check if there\n     * are any entities or objects at that location. We update the cursor\n     * sprite depending on the type of entity or object.\n     */\n\n    public moveCursor(): void {\n        if (isMobile()) return;\n\n        let position = this.getCoords(),\n            entity = this.game.searchForEntityAt(position);\n\n        // Ignore if the entity is our player.\n        if (entity?.instance === this.player.instance) return;\n\n        // The entity we are currently hovering over.\n        this.entity = this.getEntity(position);\n\n        // Update the overlay with entity information.\n        this.hud.update(this.entity);\n\n        if (!this.entity) {\n            /**\n             * Because objects aren't exactly entities, we have a special\n             * case for checking if the hovering coordinates are objects.\n             */\n\n            if (this.map.isObject(position.gridX, position.gridY)) {\n                let cursor = this.map.getTileCursor(position.gridX, position.gridY);\n\n                // Default to the talk if no cursor is specified for the object.\n                this.setCursor(this.cursors[cursor || 'talk']);\n                this.hovering = Modules.Hovering.Object;\n\n                return;\n            }\n\n            // Default to hand cursor when no entities or objects are present.\n            this.setCursor(this.cursors.hand);\n            this.hovering = null;\n\n            return;\n        }\n\n        this.entity.updateSilhouette(true);\n\n        switch (this.entity.type) {\n            case Modules.EntityType.Item:\n            case Modules.EntityType.Chest: {\n                this.setCursor(this.cursors.loot);\n                this.hovering = Modules.Hovering.Item;\n                break;\n            }\n\n            case Modules.EntityType.Mob: {\n                this.setCursor(this.getAttackCursor());\n                this.hovering = Modules.Hovering.Mob;\n                break;\n            }\n\n            case Modules.EntityType.NPC: {\n                this.setCursor(this.cursors.talk);\n                this.hovering = Modules.Hovering.NPC;\n                break;\n            }\n\n            case Modules.EntityType.Player: {\n                if (this.game.pvp) {\n                    this.setCursor(this.getAttackCursor());\n                    this.hovering = Modules.Hovering.Player;\n                }\n                break;\n            }\n        }\n    }\n\n    /**\n     * Handles grabbing the silhouette at the current cursor position.\n     * @param position The position of the cursor.\n     * @param useSearch Whether or not to use the search function.\n     */\n\n    private getEntity(position: Coordinate, useSearch = true): Entity | undefined {\n        let entity = useSearch\n            ? this.game.searchForEntityAt(position)\n            : this.game.getEntityAt(position.gridX, position.gridY);\n\n        // Remove the silhouette from the previous entity.\n        if (this.entity && (!entity || entity.instance !== this.entity.instance))\n            this.entity.updateSilhouette(false);\n\n        return entity;\n    }\n\n    /**\n     * Saves the current mouse position into a position object\n     * to prevent the mouse from rendering if it doesn't move.\n     */\n\n    public saveMouse(): void {\n        this.lastMousePosition.x = this.mouse.x;\n        this.lastMousePosition.y = this.mouse.y;\n    }\n\n    /**\n     * Sets the grid coordinate position of the\n     * currently selected x and y coordinates.\n     * @param x The grid x coordinate.\n     * @param y The grid y coordinate.\n     */\n\n    public setPosition(x: number, y: number): void {\n        this.selectedX = x;\n        this.selectedY = y;\n    }\n\n    /**\n     * Updates the current cursor with the new cursor provided.\n     * @param cursor Sprite of the cursor we are updating our current one with.\n     */\n\n    private setCursor(cursor: Sprite): void {\n        if (cursor) this.cursor = cursor;\n    }\n\n    /**\n     * Sets the animation for the target when requesting a\n     * position to the green spinning square target sprite.\n     */\n\n    public setPassiveTarget(): void {\n        this.targetAnimation.setRow(0);\n    }\n\n    /**\n     * Sets the animation for the target to the red\n     * spinning sprite indicating a target-based\n     * movement is occurring.\n     */\n\n    private setAttackTarget(): void {\n        this.targetAnimation.setRow(1);\n    }\n\n    /**\n     * Updates the mouse's position using the `pageX` and `pageY`\n     * properties contained within the event parameter. Function\n     * also checks if the mouse somehow magically exits the boundaries\n     * of the canvas and binds it to the edge.test\n     * @param event The event object containing the mouse's position.\n     */\n\n    public setCoords(position: { x: number; y: number }): void {\n        let { width, height } = this.game.renderer.background;\n\n        // Set the mouse position to the x and y coordinates within the event.\n        this.mouse.x = position.x;\n        this.mouse.y = position.y;\n\n        // Add horizontal boundaries to the mouse.\n        if (this.mouse.x >= width) this.mouse.x = width - 1;\n        else if (this.mouse.x <= 0) this.mouse.x = 0;\n\n        // Add vertical boundaries to the mouse.\n        if (this.mouse.y >= height) this.mouse.y = height - 1;\n        else if (this.mouse.y <= 0) this.mouse.y = 0;\n    }\n\n    /**\n     * @returns If a player uses a ranged magic weapon we display the spell icon,\n     * if they are using a ranged weapon we display the bow, otherwise a sword.\n     */\n\n    private getAttackCursor(): Sprite {\n        if (this.player.isMagic()) return this.cursors.spell;\n        if (this.player.isRanged()) return this.cursors.bow;\n\n        return this.cursors.sword;\n    }\n\n    /**\n     * Uses the mouse x and y position to calculate the exact grid\n     * coordinate on the screen.\n     * @returns A position object containing the grid coordinates.\n     */\n\n    public getCoords(): Coordinate {\n        let offsetX = this.mouse.x % this.camera.zoomFactor,\n            offsetY = this.mouse.y % this.camera.zoomFactor,\n            x = (this.mouse.x - offsetX) / this.camera.zoomFactor + this.camera.x,\n            y = (this.mouse.y - offsetY) / this.camera.zoomFactor + this.camera.y,\n            gridX = Math.floor(x / this.map.tileSize),\n            gridY = Math.floor(y / this.map.tileSize);\n\n        return { x, y, gridX, gridY };\n    }\n\n    /**\n     * Prepares the target data for the renderer to use.\n     * Though this function would belong more-so in the\n     * renderer, it is best to have it here since target\n     * data is associated with input information.\n     * @returns A TargetData object ready for the renderer.\n     */\n\n    public getTargetData(): TargetData | undefined {\n        let sprite = this.game.sprites.get('target');\n\n        if (!sprite) return;\n\n        let { frame } = this.targetAnimation,\n            { tileSize } = this.game.map,\n            { zoomFactor } = this.game.camera;\n\n        // Load the sprite if it isn't loaded.\n        if (!sprite.loaded) sprite.load();\n\n        return {\n            sprite,\n            x: frame.x,\n            y: frame.y,\n            width: sprite.width,\n            height: sprite.height,\n            dx: this.selectedX * tileSize * zoomFactor,\n            dy: this.selectedY * tileSize * zoomFactor,\n            dw: sprite.width * zoomFactor,\n            dh: sprite.height * zoomFactor\n        };\n    }\n\n    /**\n     * Checks if the CTRL key is currently being held down. This\n     * is generally used for administrators to teleport.\n     * @returns Whether the CTRL key is active in the window.\n     */\n\n    private isCtrlKey(): boolean {\n        return (window.event as MouseEvent).ctrlKey;\n    }\n\n    /**\n     * Targetable entities are those that can be attacked, NPCs, and chests.\n     * @param entity The entity we're comparing.\n     */\n\n    private isTargetable(entity: Entity): boolean {\n        return this.isAttackable(entity) || entity.isNPC() || entity.isChest();\n    }\n\n    /**\n     * An attackable entity is either a mob or a player in a PVP area.\n     * @param entity The entity we are checking.\n     */\n\n    private isAttackable(entity: Entity): boolean {\n        return entity.isMob() || (entity.isPlayer() && this.game.pvp);\n    }\n\n    /**\n     * Checks if the last mouse position equals to that of the\n     * current mouse position. If it is not, then the mouse must\n     * be rendered to update its position on the screen.\n     * @returns Whether the current mouse position is the same\n     * as the old mouse's position.\n     */\n\n    public isMouseRendered(): boolean {\n        return (\n            this.mouse.x === this.lastMousePosition.x && this.mouse.y === this.lastMousePosition.y\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport log from '../lib/log';\nimport Util from '../utils/util';\n\nexport default abstract class Menu {\n    public hideOnShow = true;\n\n    protected container: HTMLElement;\n    protected close: HTMLElement;\n    protected button: HTMLElement;\n\n    // Callback sent to the controller to close other menus.\n    private showCallback?: () => void;\n\n    /**\n     * Initializes the menu container using the provided container name string.\n     * This one is used to load the body of the interface.\n     * @param containerName Optional string name passed to the constructor that is\n     * used to load the body of the interface using the querySelector. If this is not\n     * provided, it is then expected that the body is overrided and loaded in the subclass.\n     * @param closeButton Optional parameter passed when we want to load a close button\n     * into the interface and load its respective event listener. This is automatically\n     * linked to the hide() function.\n     * @param toggleButton Optional string parameter for the toggle button. These are buttons\n     * that are displayed in the bottom right corner of the screen and are used to open and\n     * close the user interface.\n     */\n\n    public constructor(\n        private containerName?: string,\n        private closeButton?: string,\n        private toggleButton?: string\n    ) {\n        this.container = document.querySelector(this.containerName!)!;\n        this.close = document.querySelector(this.closeButton!)!;\n        this.button = document.querySelector(this.toggleButton!)!;\n\n        this.close?.addEventListener('click', this.hide.bind(this));\n        this.button?.addEventListener('click', this.toggle.bind(this));\n    }\n\n    /**\n     * Called by subclasses when attempting to load batch\n     * serialized data from the server.\n     * @param _data Can contain array of slots to load.\n     */\n\n    public batch(_data: unknown): void {\n        log.debug(`Unimplemented menu batch() function.`);\n    }\n\n    /**\n     * Used to synchronize data betwene the inventory and the UI.\n     * @param _var1 Optional unknown data that may be passed along.\n     */\n\n    public synchronize(_var1?: unknown): void {\n        //log.debug(`Unimplemented menu synchronize() function.`);\n    }\n\n    /**\n     * Called by subclasses when attempting to add an element.\n     * @param _data Unknown data that may contain information about an item.\n     */\n\n    public add(_data: unknown, _data1: unknown, _data2: unknown, data3: unknown): void {\n        log.debug(`Unimplemented menu add() function.`);\n    }\n\n    /**\n     * Called by subclasses when removing an item from slots.\n     * @param _data Unknown data that may contain information to remove an item.\n     */\n\n    public remove(_data: unknown, _data1?: unknown): void {\n        log.debug(`Unimplemented menu remove() function.`);\n    }\n\n    /**\n     * Called by subclasses when we want to display the interface.\n     * @param _var* Unknown data that may be passed when opening the menu subclass.\n     */\n\n    public show(\n        _var1?: unknown,\n        _var2?: unknown,\n        _var3?: unknown,\n        _var4?: unknown,\n        _var5?: unknown,\n        _var6?: unknown\n    ): void {\n        this.showCallback?.();\n\n        this.button?.classList.add('active');\n\n        Util.fadeIn(this.container);\n    }\n\n    /**\n     * Called by subclasses when we want to hide the interface.\n     */\n\n    public hide(): void {\n        this.button?.classList.remove('active');\n\n        Util.fadeOut(this.container);\n    }\n\n    /**\n     * Toggles the visible of the main body element.\n     * If the UI is visible, it hides it, if it's\n     * not visible, then we display it.\n     */\n\n    public toggle(): void {\n        if (this.isVisible()) this.hide();\n        else this.show();\n    }\n\n    /**\n     * Special call for when we are asking the menu\n     * interface to resize. For example, say a notification\n     * is displayed and the screen is resized, we may need\n     * to call this function to the notification object to\n     * update the `top` style position of the notification.\n     */\n\n    public resize(): void {\n        //log.debug(`Unimplemented menu resize() function.`);\n    }\n\n    /**\n     * @returns Whether or not the body is visible.\n     */\n\n    public isVisible(): boolean {\n        return this.container.style.display === 'block';\n    }\n\n    /**\n     * Creates a callback for when the interface is being shown.\n     */\n\n    public onShow(callback: () => void): void {\n        this.showCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { Bonuses, Enchantments, Stats } from '@kaetram/common/types/item';\n\nexport default class Actions extends Menu {\n    private page: HTMLElement = document.querySelector('#action-page')!;\n\n    // Contains the list of actions.\n    private list: HTMLUListElement = document.querySelector('#action-page > ul')!;\n\n    // Info about the current action.\n    private name: HTMLElement = document.querySelector('#action-page > .action-item-name')!;\n    private description: HTMLElement = document.querySelector(\n        '#action-page > .action-item-description'\n    )!;\n\n    // Drop dialog elements\n    public dropDialog: HTMLElement = document.querySelector('#action-drop')!;\n    private dropCount: HTMLInputElement = document.querySelector('#action-drop .dialog-count')!;\n    private dropAccept: HTMLElement = document.querySelector('#action-drop .dialog-accept')!;\n    private dropCancel: HTMLElement = document.querySelector('#action-drop .dialog-cancel')!;\n\n    private buttonCallback?: (menuAction: Modules.MenuActions) => void;\n    private dropCallback?: (count: number) => void;\n\n    public constructor() {\n        super('#action-container');\n\n        this.dropCancel.addEventListener('click', this.hideDropDialog.bind(this));\n        this.dropAccept.addEventListener('click', this.handleDrop.bind(this));\n    }\n\n    /**\n     * Handles the click event for the drop dialog.\n     */\n\n    public handleDrop(): void {\n        let count = this.dropCount.valueAsNumber;\n\n        // Reset the input field value\n        this.dropCount.value = '';\n\n        // Hide the drop dialog.\n        this.hideDropDialog();\n\n        // Exit the actions menu dialog\n        this.hide();\n\n        // Send the callback to the inventory handler.\n        this.dropCallback?.(count);\n    }\n\n    /**\n     * Opens the action menu with a specified array of actions. We first clear\n     * all the previous actions and load the new ones in.\n     * @param actions Array of actions to append to our list prior to displaying.\n     * @param name The name of the item that the actions are being performed on.\n     * @param attackStats The attack stats of the item.\n     * @param defenseStats The defense stats of the item.\n     * @param bonuses The bonuses of the item.\n     */\n\n    public override show(\n        actions: Modules.MenuActions[],\n        name: string,\n        attackStats: Stats,\n        defenseStats: Stats,\n        bonuses: Bonuses,\n        enchantments: Enchantments,\n        itemDescription = ''\n    ): void {\n        this.clear();\n\n        for (let action of actions) this.add(action);\n\n        // Update the name of the selected item.\n        this.name.innerHTML = name;\n\n        // Determine whether the description is for objects or items.\n        if (itemDescription) this.description.innerHTML = itemDescription;\n        else {\n            // Clear the description.\n            this.description.innerHTML = '';\n\n            let attack = document.createElement('div'),\n                defense = document.createElement('div'),\n                bonusesDiv = document.createElement('div'),\n                enchantmentsDiv = document.createElement('div');\n\n            // Set the id's of the divs.\n            attack.id = 'action-description-attack';\n            defense.id = 'action-description-defense';\n            bonusesDiv.id = 'action-description-bonuses';\n            enchantmentsDiv.id = 'action-description-enchantments';\n\n            // Apply the attack stats to the attack div.\n            attack.innerHTML = `<u>Attack Stats:</u> <br>\n                Crush: ${attackStats.crush} <br>\n                Slash: ${attackStats.slash} <br>\n                Stab: ${attackStats.stab} <br>\n                Archery: ${attackStats.archery} <br>\n                Magic: ${attackStats.magic} <br>`;\n\n            // Apply the defense stats to the defense div.\n            defense.innerHTML = `<u>Defense Stats:</u> <br>\n                Crush: ${defenseStats.crush} <br>\n                Slash: ${defenseStats.slash} <br>\n                Stab: ${defenseStats.stab} <br>\n                Archery: ${defenseStats.archery} <br>\n                Magic: ${defenseStats.magic} <br>`;\n\n            // Apply the bonuses to the bonuses div.\n            bonusesDiv.innerHTML = `<u>Bonuses:</u> <br>\n                Accuracy: ${bonuses.accuracy} <br>\n                Strength: ${bonuses.strength} <br>\n                Archery: ${bonuses.archery} <br>\n                Magic: ${bonuses.magic} <br>`;\n\n            // If the item has enchantments, apply them to the enchantments div.\n            if (Object.keys(enchantments).length > 0) {\n                // Apply the enchantments to the enchantments div.\n                enchantmentsDiv.innerHTML = `<u>Enchantments:</u> <br>`;\n\n                for (let key in enchantments) {\n                    let enchantment = Modules.Enchantment[key];\n\n                    enchantmentsDiv.innerHTML += `${enchantment}: ${enchantments[key].level} <br>`;\n                }\n            }\n\n            this.description.append(attack, defense, bonusesDiv, enchantmentsDiv);\n        }\n\n        super.show();\n    }\n\n    /**\n     * Implementation of the `hide` superclass where we also hide the\n     * drop dialog upon exiting the actions menu.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        // Hide the drop dialog.\n        this.hideDropDialog();\n    }\n\n    /**\n     * Appends an action element to the list of actions.\n     * @param menuAction Enumeration containing the string text of the action.\n     */\n\n    public override add(menuAction: Modules.MenuActions): void {\n        let element = document.querySelector(`.action-${menuAction}`);\n\n        if (!element) {\n            element = document.createElement('li');\n\n            // Set the type of action to the button element\n            element.classList.add('action-button', `action-${menuAction}`);\n\n            this.list.append(element);\n        }\n\n        // Assign an action when the element is clicked.\n        element.addEventListener('click', (e) => {\n            e.preventDefault();\n\n            this.buttonCallback?.(menuAction);\n        });\n    }\n\n    /**\n     * Hides the description and shows the drop dialog. Also\n     * focuses on the input field for the drop dialog.\n     */\n\n    public showDropDialog(): void {\n        Util.fadeIn(this.dropDialog);\n        Util.fadeOut(this.description);\n\n        this.page.classList.add('dimmed');\n\n        this.dropCount.value = '1';\n        this.dropCount.focus();\n    }\n\n    /**\n     * Hides the drop dialog and brings back the description info.\n     */\n\n    public hideDropDialog(): void {\n        Util.fadeOut(this.dropDialog);\n        Util.fadeIn(this.description);\n\n        this.page.classList.remove('dimmed');\n    }\n\n    /**\n     * Removes all the `div` action elements from the list.\n     */\n\n    private clear(): void {\n        this.list.innerHTML = '';\n    }\n\n    /**\n     * Callback handler for when an action button has been pressed.\n     * @param callback Contains the action that was pressed.\n     */\n\n    public onButton(callback: (menuAction: Modules.MenuActions) => void): void {\n        this.buttonCallback = callback;\n    }\n\n    /**\n     * Callback handler for when the drop dialog has been accepted.\n     * @param callback Contains the number of items to be dropped.\n     */\n\n    public onDrop(callback: (count: number) => void): void {\n        this.dropCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\nimport Util from '../utils/util';\nimport { onDragDrop } from '../utils/press';\n\nimport { Modules, Opcodes } from '@kaetram/common/network';\n\nimport type Actions from './actions';\nimport type { SlotData } from '@kaetram/common/types/slot';\nimport type { Bonuses, Enchantments, Stats } from '@kaetram/common/types/item';\n\ntype SelectCallback = (index: number, action: Opcodes.Container, value?: number) => void;\ntype BatchCallback = () => void;\n\ninterface SlotElement extends HTMLElement {\n    edible?: boolean;\n    interactable?: boolean;\n    equippable?: boolean;\n\n    name?: string;\n    count?: number;\n    description?: string;\n    attackStats?: Stats;\n    defenseStats?: Stats;\n    bonuses?: Bonuses;\n    enchantments?: Enchantments;\n}\n\nexport default class Inventory extends Menu {\n    private list: HTMLUListElement = document.querySelector('#inventory-container > ul')!;\n\n    // Used for when we open the action menu interface.\n    private selectedSlot = -1;\n\n    private selectCallback?: SelectCallback;\n    private batchCallback?: BatchCallback;\n\n    public constructor(private actions: Actions) {\n        super('#inventory', undefined, '#inventory-button');\n\n        this.load();\n\n        this.actions.onButton((action: Modules.MenuActions) => this.handleAction(action));\n        this.actions.onDrop((count: number) => this.handleDrop(count));\n    }\n\n    /**\n     * Creates an empty inventory of the size defined in the\n     * constants. This may get adapted in the future for potential\n     * dynamic inventory sizes, though it has yet to be decided.\n     */\n\n    public load(): void {\n        if (!this.list) return log.error(`Could not create the skeleton for the inventory.`);\n\n        // Create slots based on the constants.\n        for (let i = 0; i < Modules.Constants.INVENTORY_SIZE; i++)\n            this.list.append(this.createSlot(i));\n    }\n\n    /**\n     * Handles pressing down a key while the dialogue is open. We redirect any keys\n     * from the keyboard into this class when the dialogue is open.\n     * @param key The key that was pressed.\n     */\n\n    public keyDown(key: string): void {\n        switch (key) {\n            case 'Escape': {\n                return this.actions.hideDropDialog();\n            }\n\n            case 'Enter': {\n                return this.actions.handleDrop();\n            }\n        }\n    }\n\n    /**\n     * Creates a select callback using the action parameter specified.\n     * @param menuAction Which type of action is being performed.\n     */\n\n    private handleAction(menuAction: Modules.MenuActions): void {\n        if (menuAction === Modules.MenuActions.DropMany) return this.actions.showDropDialog();\n\n        this.selectCallback?.(Util.getContainerAction(menuAction)!, this.selectedSlot, 1);\n\n        this.actions.hide();\n    }\n\n    /**\n     * Drops an item from the inventory based on the count specified.\n     * @param count The amount of items we are dropping.\n     */\n\n    private handleDrop(count: number): void {\n        return this.selectCallback?.(Opcodes.Container.Remove, this.selectedSlot, count);\n    }\n\n    /**\n     * Loads the batch data into the inventory from the server. Each\n     * slot is selected from the list element.\n     * @param slots Serialized slots received from the server. We take\n     * the index contained within these slots and attribute them\n     * to the index within our slot list.\n     */\n\n    public override batch(slots: SlotData[]): void {\n        for (let slot of slots) {\n            if (!slot.key) continue;\n\n            this.setSlot(slot);\n        }\n\n        this.batchCallback?.();\n    }\n\n    /**\n     * Uses the slot's index to add an item into our inventory UI.\n     * @param slot Contains data about the item we are adding.\n     */\n\n    public override add(slot: SlotData): void {\n        this.setSlot(slot);\n    }\n\n    /**\n     * Removes an item from our inventory and resets the slot to\n     * its default state.\n     * @param slot Contains index of the slot we are removing.\n     */\n\n    public override remove(slot: SlotData): void {\n        this.setSlot(slot);\n    }\n\n    /**\n     * Used for updating the currently selected slot while\n     * the action menu is open.\n     * @param index Index of the slot we are currently selected.\n     */\n\n    private select(index: number, doubleClick = false): void {\n        let element = this.getElement(index);\n\n        // If the slot is empty, we do not want to select it.\n        if (this.isEmpty(element)) return this.actions.hide();\n\n        // Update the currently selected slot.\n        this.selectedSlot = index;\n\n        /**\n         * When we double click, we only determine if the item is edible or\n         * equippable. If any of those properties are true, we skip having\n         * to display the action menu and send the packet.\n         */\n\n        if (doubleClick) {\n            if (element.edible) this.handleAction(Modules.MenuActions.Eat);\n            else if (element.equippable || element.interactable)\n                this.handleAction(Modules.MenuActions.Equip);\n\n            this.actions.hide();\n\n            return;\n        }\n\n        /**\n         * Here we create a list of all the actions pertaining to the slot\n         * based on the equippable and edible properties. This list can always\n         * be expanded as more item properties are added.\n         */\n\n        let actions: Modules.MenuActions[] = [];\n\n        if (element.edible) actions.push(Modules.MenuActions.Eat);\n        if (element.interactable) actions.push(Modules.MenuActions.Eat2);\n        if (element.equippable) actions.push(Modules.MenuActions.Equip);\n\n        // Push drop option as the last one.\n        actions.push(Modules.MenuActions.DropOne);\n\n        if (element.count! > 1) actions.push(Modules.MenuActions.DropMany);\n\n        this.actions.show(\n            actions,\n            element.name!,\n            element.attackStats!,\n            element.defenseStats!,\n            element.bonuses!,\n            element.enchantments!,\n            element.description\n        );\n    }\n\n    /**\n     * Selects the first edible item in the inventory then mimics the\n     * select function as if the player is clicking it. Used for hotkey\n     * functions to quickly heal when in combat.\n     */\n\n    public selectEdible(): void {\n        let index = this.getFirstEdible();\n\n        // No edible items found.\n        if (index === -1) return;\n\n        this.selectedSlot = index;\n\n        this.handleAction(Modules.MenuActions.Eat);\n    }\n\n    /**\n     * Swaps the currently selected slot with the target slot.\n     * @param fromIndex Index of the slot we are swapping from.\n     * @param toIndex Index of the slot we are swapping to.\n     */\n\n    public swap(fromIndex: number, toIndex: number): void {\n        this.selectCallback?.(Opcodes.Container.Swap, fromIndex, toIndex);\n\n        // Reset the selected slot after.\n        this.selectedSlot = -1;\n    }\n\n    /**\n     * Sets the slot's image and count at a specified index. If no key is provided\n     * then we remove the slot's `backgroundImage` property and set the count to\n     * an empty string.\n     * @param slot Contains information about the slot element.\n     */\n\n    private setSlot(slot: SlotData): void {\n        let slotElement = this.getElement(slot.index);\n\n        if (!slotElement) return log.error(`Could not find slot element at: ${slot.index}`);\n\n        let imageElement: HTMLElement = slotElement.querySelector('.item-image')!,\n            countElement = slotElement.querySelector('.item-count');\n\n        if (!imageElement) return log.error(`Could not find image element at: ${slot.index}`);\n\n        if (countElement) countElement.textContent = Util.getCount(slot.count);\n\n        imageElement.style.backgroundImage = slot.key ? Util.getImageURL(slot.key) : '';\n\n        // Set data properties for easy testing (see Cypress best practices)\n        slotElement.dataset.key = slot.key;\n        slotElement.dataset.count = `${slot.count}`;\n\n        // Update the edible and equippable properties.\n        slotElement.edible = slot.edible!;\n        slotElement.interactable = slot.interactable!;\n        slotElement.equippable = slot.equippable!;\n\n        // Add the item stats and name\n        slotElement.name = slot.name!;\n        slotElement.count = slot.count!;\n        slotElement.description = this.formatDescription(slot.name!, slot.count, slot.description!);\n        slotElement.attackStats = slot.attackStats!;\n        slotElement.defenseStats = slot.defenseStats!;\n        slotElement.bonuses = slot.bonuses!;\n        slotElement.enchantments = slot.enchantments!;\n    }\n\n    /**\n     * Creates a slot element using the DOM. The slot is\n     * used when we want to add an item to the invnetory.\n     * @returns A list element containing an empty slot.\n     */\n\n    private createSlot(index: number): HTMLLIElement {\n        let slot = document.createElement('li'),\n            item = document.createElement('div'),\n            image = document.createElement('div'),\n            count = document.createElement('div');\n\n        item.dataset.index = `${index}`;\n\n        item.classList.add('item-slot');\n\n        // Add the item image element onto the slot.\n        image.classList.add('item-image');\n\n        // Add the class element onto the count.\n        count.classList.add('item-count');\n\n        // Append the image onto the item slot.\n        item.append(image);\n\n        // Append the count onto the item slot.\n        item.append(count);\n\n        // Append the item onto the slot list element.\n        slot.append(item);\n\n        // Add the click event listeners to the slot.\n        slot.addEventListener('click', () => this.select(index));\n        slot.addEventListener('dblclick', () => this.select(index, true));\n\n        onDragDrop(item, this.handleHold.bind(this), () => this.isEmpty(this.getElement(index)));\n\n        return slot;\n    }\n\n    private handleHold(clone: HTMLElement, target: HTMLElement): void {\n        let fromIndex = clone?.dataset?.index,\n            toIndex = target?.dataset?.index;\n\n        if (!fromIndex || !toIndex) return;\n\n        this.swap(parseInt(fromIndex), parseInt(toIndex));\n    }\n\n    /**\n     * Sets the body's display style to `none` and\n     * clears all the items from the bank user interface.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        // Reset the selected slot whenever the menu is hidden.\n        this.selectedSlot = -1;\n\n        this.actions.hide();\n    }\n\n    /**\n     * Includes the exact count in the description of an item. Applies for things like\n     * gold, tokens, or large stackable items.\n     * @param name The name of the item\n     * @param count The count of the item\n     * @param description The original description of the item.\n     * @returns String containing the formatted description.\n     */\n\n    private formatDescription(name: string, count: number, description: string): string {\n        return count < 1000\n            ? description\n            : `${description} You have a stack of ${count.toLocaleString(\n                  'en-US'\n              )} ${name.toLowerCase()}. `;\n    }\n\n    /**\n     * Checks whether the specified element is empty by verifying its\n     * background image property.\n     * @param element SlotElement that we are checking.\n     * @returns Whether or not the background image style is an empty string or not.\n     */\n\n    public isEmpty(element: SlotElement): boolean {\n        let image: HTMLElement = element.querySelector('.item-image')!;\n\n        return !image || image.style.backgroundImage === '';\n    }\n\n    /**\n     * @returns Whether or not the actions menu has the drop dialog visible.\n     */\n\n    public isDropDialogVisible(): boolean {\n        return this.actions.dropDialog.style.display === 'block';\n    }\n\n    /**\n     * Grabs the `div` slot element within the `li` element.\n     * @param index The index of the slot we are grabbing.\n     * @returns An HTMLElement for the slot.\n     */\n\n    public getElement(index: number): SlotElement {\n        return this.list.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Returns the number value of the count at a specified index.\n     * @param index The index at which we are grabbing the count.\n     * @returns The number value of the count or 0 if it is not found.\n     */\n\n    public getCount(index: number): number {\n        return this.getElement(index)?.count || 0;\n    }\n\n    /**\n     * Iterates through all the slots and grabs the first edible item\n     * that appears in the inventory returning its index.\n     * @returns The slot index of the first edible item or -1 if none are found.\n     */\n\n    private getFirstEdible(): number {\n        for (let i = 0; i < this.list.children.length; i++) {\n            let slot = this.getElement(i);\n\n            if (slot.edible) return i;\n        }\n\n        return -1;\n    }\n\n    /**\n     * Iterates through all the children of the inventory list\n     * and returns the index and the element.\n     * @param callback Contains the index and the slot HTML element.\n     */\n\n    public forEachSlot(callback: (index: number, slot: SlotElement) => void): void {\n        for (let i = 0; i < this.list.children.length; i++) callback(i, this.getElement(i));\n    }\n\n    /**\n     * Callback for when an item slot element is selected.\n     * @param callback Contains the index of the slot selected.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n\n    /**\n     * Callback for when a batch is loaded\n     */\n\n    public onBatch(callback: BatchCallback): void {\n        this.batchCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\nimport Util from '../utils/util';\nimport { onDragDrop } from '../utils/press';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { SlotData } from '@kaetram/common/types/slot';\nimport type Inventory from './inventory';\n\ntype SelectCallback = (\n    fromContainer: Modules.ContainerType,\n    fromIndex: number,\n    toContainer: Modules.ContainerType,\n    toIndex?: number\n) => void;\n\nexport default class Bank extends Menu {\n    private bankList: HTMLUListElement = document.querySelector('#bank-slot > ul')!;\n    private inventoryList: HTMLUListElement = document.querySelector('#bank-inventory-slots > ul')!;\n\n    private selectCallback?: SelectCallback;\n\n    public constructor(private inventory: Inventory) {\n        super('#bank', '#close-bank');\n\n        this.load();\n    }\n\n    /**\n     * Loads an empty bank interface with no items but the\n     * bank and inventory slots. The amount of slots are defined\n     * in the module constants.\n     */\n\n    private load(): void {\n        if (!this.bankList) return log.error('[Bank] Could not find the bank slot list.');\n        if (!this.inventoryList) return log.error('[Bank] Could not find the inventory slot list.');\n\n        for (let i = 0; i < Modules.Constants.BANK_SIZE; i++) {\n            let slot = this.draggableSlot(\n                i,\n                Modules.ContainerType.Bank,\n                Modules.ContainerType.Inventory\n            );\n\n            this.bankList.append(slot);\n        }\n\n        for (let i = 0; i < Modules.Constants.INVENTORY_SIZE; i++) {\n            let slot = this.draggableSlot(\n                i,\n                Modules.ContainerType.Inventory,\n                Modules.ContainerType.Bank\n            );\n\n            this.inventoryList.append(slot);\n        }\n\n        this.inventory.onBatch(this.synchronize.bind(this));\n    }\n\n    /**\n     * Creates a draggable slot for the bank interface.\n     * @param index The index of the slot.\n     * @param fromContainer The type of container the slot is from.\n     * @param defaultContainer The default type of container the slot is going.\n     * @returns The slot element.\n     */\n\n    private draggableSlot(\n        index: number,\n        fromContainer: Modules.ContainerType,\n        defaultContainer: Modules.ContainerType\n    ): HTMLLIElement {\n        let slot = Util.createSlot(fromContainer, index, () =>\n                this.select(fromContainer, index, defaultContainer)\n            ),\n            item = slot.querySelector<HTMLDivElement>('.item-slot')!;\n\n        onDragDrop(item, this.handleHold.bind(this), () =>\n            this.inventory.isEmpty(this.getElement(index, fromContainer))\n        );\n\n        return slot;\n    }\n\n    private handleHold(clone: HTMLElement, target: HTMLElement): void {\n        let fromContainer = clone?.dataset?.type,\n            fromIndex = clone?.dataset?.index,\n            toContainer = target?.dataset?.type,\n            toIndex = target?.dataset?.index;\n\n        if (!fromContainer || !fromIndex || !toContainer || !toIndex) return;\n\n        this.select(\n            parseInt(fromContainer),\n            parseInt(fromIndex),\n            parseInt(toContainer),\n            parseInt(toIndex)\n        );\n    }\n\n    /**\n     * Initializes the selection process. A callback is created so that\n     * the menu controller can send specified request to the server.\n     * @param fromContainer The type of container the item is being selected from.\n     * @param toContainer The type of container the item is being selected to.\n     * @param index The index of the item being acted on.\n     */\n\n    private select(\n        fromContainer: Modules.ContainerType,\n        fromIndex: number,\n        toContainer: Modules.ContainerType,\n        toIndex?: number\n    ): void {\n        this.selectCallback?.(fromContainer, fromIndex, toContainer, toIndex);\n    }\n\n    /**\n     * Sets the slot in the bank list at a specified index. Updates the image\n     * and the count of the item.\n     * @param index The index of the slot we are setting.\n     * @param key The key of the image, defaults to a blank string to clear the slot image.\n     * @param count The amount of an item in the slot, defaults to 0 to clear the slot.\n     */\n\n    private setSlot(slot: SlotData): void {\n        let image = this.getBankElement(slot.index).querySelector<HTMLElement>('.item-image')!,\n            countElement = this.getBankElement(slot.index).querySelector<HTMLElement>(\n                '.item-count'\n            )!;\n\n        image.style.backgroundImage = Util.getImageURL(slot.key);\n        countElement.textContent = Util.getCount(slot.count);\n    }\n\n    /**\n     * Synchronizes the slot data between the bank and the inventory.\n     */\n\n    public override synchronize(): void {\n        if (!this.isVisible()) return;\n\n        this.inventory.forEachSlot((index: number, slot: HTMLElement) => {\n            let element = this.getInventoryElement(index),\n                image = element.querySelector<HTMLElement>('.item-image')!,\n                count = element.querySelector<HTMLElement>('.item-count')!,\n                slotImage = slot.querySelector<HTMLElement>('.item-image')!;\n\n            if (!slotImage) return;\n\n            image.style.backgroundImage = slotImage.style.backgroundImage;\n            count.textContent = slot.textContent;\n        });\n    }\n\n    /**\n     * Loads the batch data into the bank from the server. Each\n     * slot is selected from the list element.\n     * @param slots Serialized slots received from the server. We take\n     * the index contained within these slots and attribute them\n     * to the index within our slot list.\n     */\n\n    public override batch(slots: SlotData[]): void {\n        for (let slot of slots) {\n            if (!slot.key) continue;\n\n            this.setSlot(slot);\n        }\n    }\n\n    /**\n     * Adds an item to the bank list by updating the slot data.\n     */\n\n    public override add(slot: SlotData): void {\n        this.setSlot(slot);\n    }\n\n    /**\n     * Updates the slot data of the bank list.\n     */\n\n    public override remove(slot: SlotData): void {\n        this.setSlot(slot);\n    }\n\n    /**\n     * Displays the bank interface.\n     */\n\n    public override show(slots: SlotData[]): void {\n        super.show();\n\n        this.synchronize();\n\n        // Set all slots to the new data.\n        for (let slot of slots) this.setSlot(slot);\n    }\n\n    /**\n     * Hides the bank and clears all the bank slots.\n     */\n\n    public override hide(): void {\n        super.hide();\n    }\n\n    private getElement(index: number, container: Modules.ContainerType): HTMLElement {\n        return container === Modules.ContainerType.Bank\n            ? this.getBankElement(index)\n            : this.getInventoryElement(index);\n    }\n\n    /**\n     * Grabs the bank HTML element at a specified index.\n     * @param index The index of the bank slot.\n     * @returns An HTMLElement div within the list at the specified index.\n     */\n\n    private getBankElement(index: number): HTMLElement {\n        return this.bankList.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Grabs the HTMLElement at a specified index within the\n     * inventory slot list.\n     * @param index The index of the element to grab.\n     * @returns The HTMLElement at the specified index.\n     */\n\n    private getInventoryElement(index: number): HTMLElement {\n        return this.inventoryList.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Callback used for whenever a slot is selected. This is used\n     * by an external controller in order to make requests to the server.\n     * @param callback Contains the type of container that is\n     * being clicked, as well as the index of the slot.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\nimport Util from '../utils/util';\nimport { isMobile } from '../utils/detect';\nimport { onSecondaryPress } from '../utils/press';\n\nimport { Modules, Opcodes } from '@kaetram/common/network';\n\nimport type Inventory from './inventory';\nimport type { StorePacket } from '@kaetram/common/types/messages/outgoing';\nimport type { SerializedStoreItem } from '@kaetram/common/types/stores';\n\ntype SelectCallback = (opcode: Opcodes.Store, key: string, index: number, count?: number) => void;\n\nexport default class Store extends Menu {\n    private key = ''; // Key of the current store\n    private currency = 'gold'; // Key of the currency used, defaults to gold.\n\n    private selectedIndex = -1; // Index of currently selected item.\n    private selectedCount = -1; // Amount of currently selected item.\n\n    private selectedBuyIndex = -1; // Index of currently selected item to buy.\n\n    private storeContainer: HTMLElement = document.querySelector('#store-container')!;\n\n    private storeHelp: HTMLElement = document.querySelector('#store-help')!;\n\n    private confirmSell: HTMLElement = document.querySelector('#confirm-sell')!;\n\n    // Sell slot information\n    private sellSlot: HTMLElement = document.querySelector('#store-sell-slot')!;\n    private sellSlotText: HTMLElement = document.querySelector('#store-sell-slot-text')!;\n    private sellSlotReturn: HTMLElement = document.querySelector('#store-sell-slot-return')!;\n    private sellSlotReturnText: HTMLElement = document.querySelector(\n        '#store-sell-slot-return-text'\n    )!;\n\n    // Lists\n    private storeList: HTMLUListElement = document.querySelector('#store-container')!;\n    private inventoryList: HTMLUListElement = document.querySelector('#store-inventory-slots')!;\n\n    // Buy dialog elements\n    public buyDialog: HTMLElement = document.querySelector('#store-buy')!;\n    private buyCount: HTMLInputElement = document.querySelector('#store-buy .dialog-count')!;\n    private buyAccept: HTMLElement = document.querySelector('#store-buy .dialog-accept')!;\n    private buyCancel: HTMLElement = document.querySelector('#store-buy .dialog-cancel')!;\n\n    private selectCallback?: SelectCallback;\n\n    public constructor(private inventory: Inventory) {\n        super('#store', '#close-store');\n\n        this.resize();\n\n        this.sellSlot.addEventListener('click', this.synchronize.bind(this));\n        this.confirmSell.addEventListener('click', this.sell.bind(this));\n\n        this.buyCancel.addEventListener('click', this.hideBuyDialog.bind(this));\n        this.buyAccept.addEventListener('click', this.handleBuy.bind(this));\n\n        // Create the slot elements for the inventory container.\n        for (let i = 0; i < Modules.Constants.INVENTORY_SIZE; i++)\n            this.inventoryList.append(\n                Util.createSlot(Modules.ContainerType.Inventory, i, this.select.bind(this))\n            );\n    }\n\n    /**\n     * Updates the helper text when the user resizes the screen.\n     */\n\n    public override resize(): void {\n        let action = isMobile() ? 'Long tap' : 'Right click';\n\n        this.storeHelp.textContent = `${action} to buy multiple items.`;\n    }\n\n    /**\n     * Takes the store packet data and inserts it all into the store. Note that the store packet\n     * data changes depending on whether we're opening/updating or selecting an item in the store.\n     * In this case, the store packet contains data about the store rather than a selected item.\n     * @param info Contains the store's key, currency, and items (or specific item if selecting).\n     */\n\n    public update(info: StorePacket): void {\n        this.clear();\n\n        this.key = info.key!;\n        this.currency = info.currency!;\n\n        for (let i = 0; i < info.items!.length; i++)\n            this.storeList.append(this.createStoreItem(info.items![i], i));\n    }\n\n    /**\n     * Handles the initial action of clicking on an item in the inventory.\n     * @param _type Unused parameter identifying the container being clicked.\n     * @param index The index of the item we are selecting (in the inventory).\n     */\n\n    public select(_type: Modules.ContainerType, index: number): void {\n        this.selectCallback?.(Opcodes.Store.Select, this.key, index);\n    }\n\n    /**\n     * Creates the callback for the sell opcode and passes onto it the currently\n     * selected item index and the count.\n     */\n\n    private sell(): void {\n        this.selectCallback?.(Opcodes.Store.Sell, this.key, this.selectedIndex, this.selectedCount);\n    }\n\n    /**\n     * Sends a callback signal with the buy opcode.\n     * @param index The index of the item we are trying to purchase.\n     * @param count Optional parameter for the amount of an item we are trying to buy.\n     */\n\n    private buy(index: number, count = 1): void {\n        this.selectCallback?.(Opcodes.Store.Buy, this.key, index, count);\n    }\n\n    /**\n     * Buy dialog handler. Takes the value of the input field and sends it to the server.\n     */\n\n    private handleBuy(): void {\n        this.buy(this.selectedBuyIndex, this.buyCount.valueAsNumber);\n\n        this.hideBuyDialog();\n    }\n\n    /**\n     * Hides the description and shows the drop dialog. Also\n     * focuses on the input field for the drop dialog.\n     */\n\n    public showBuyDialog(): void {\n        Util.fadeIn(this.buyDialog);\n\n        this.storeContainer.classList.add('dimmed');\n\n        this.buyCount.value = '1';\n        this.buyCount.focus();\n    }\n\n    /**\n     * Hides the drop dialog and brings back the description info.\n     */\n\n    private hideBuyDialog(): void {\n        Util.fadeOut(this.buyDialog);\n\n        this.storeContainer.classList.remove('dimmed');\n    }\n\n    /**\n     * Synchronizes the slot data between the store and the inventory.\n     */\n\n    public override synchronize(): void {\n        if (!this.isVisible()) return;\n\n        this.clearSellSlot();\n\n        this.inventory.forEachSlot((index: number, slot: HTMLElement) => {\n            let image = this.getElement(index).querySelector<HTMLElement>('.item-image')!,\n                count = this.getElement(index).querySelector<HTMLElement>('.item-count')!,\n                slotImage = slot.querySelector<HTMLElement>('.item-image')!;\n\n            if (!slotImage) return;\n\n            image.style.backgroundImage = slotImage.style.backgroundImage;\n            count.textContent = slot.textContent;\n        });\n    }\n\n    /**\n     * Displays the store UI and updates the items\n     * in the store inventory.\n     * @param info Store packet data containing information about the store.\n     */\n\n    public override show(info: StorePacket): void {\n        super.show();\n\n        this.update(info);\n        this.synchronize();\n    }\n\n    /**\n     * Clears the store so that new data can be inserted\n     * once again. Clears the key of the currently open store,\n     * defaults the currency, and empties the list of store items.\n     */\n\n    private clear(): void {\n        this.key = '';\n        this.currency = 'gold';\n\n        this.storeList.innerHTML = '';\n    }\n\n    /**\n     * Clears the sell slots and selected item index. Removes all the image\n     * and text contents from the HTML elements and clears the index and count.\n     */\n\n    private clearSellSlot(): void {\n        this.selectedIndex = -1;\n        this.selectedCount = -1;\n\n        this.sellSlot.style.backgroundImage = '';\n        this.sellSlotText.textContent = '';\n        this.sellSlotReturn.style.backgroundImage = '';\n        this.sellSlotReturnText.textContent = '';\n    }\n\n    /**\n     * When the server sends a select packet, we use this function\n     * to move an item from the inventory to the select slot. We also\n     * add the currency and price to bottom slots.\n     * @param info Contains store packet data such as the index, key, price, etc.\n     */\n\n    public move(info: StorePacket): void {\n        if (info.key !== this.key) return log.error(`Invalid store key provided for the select.`);\n\n        //Refreshes the inventory container prior to moving.s\n        this.synchronize();\n\n        let image = this.getElement(info.item!.index!).querySelector<HTMLElement>('.item-image')!,\n            count = this.getElement(info.item!.index!).querySelector<HTMLElement>('.item-count')!;\n\n        if (!image || !count) return log.error(`[Store] Could not find image and count elements.`);\n\n        // Updates the sell slot.\n        this.sellSlot.style.backgroundImage = image.style.backgroundImage;\n        this.sellSlotText.textContent = count.textContent;\n        this.sellSlotReturn.style.backgroundImage = Util.getImageURL(this.currency);\n        this.sellSlotReturnText.textContent = info.item!.price.toString() || '';\n\n        // Visually removes the item from the inventory.\n        image.style.backgroundImage = '';\n        count.textContent = '';\n\n        // Store the currently selected item index and count for when we sell.\n        this.selectedIndex = info.item!.index!;\n        this.selectedCount = info.item!.count!;\n    }\n\n    /**\n     * Creates a new store element item and returns it.\n     * @param item Contains data about the item (price, image, name, etc).\n     * @returns An HTML list element that can be appended to the list of store items.\n     */\n\n    private createStoreItem(item: SerializedStoreItem, index: number): HTMLElement {\n        let listElement = document.createElement('li'),\n            image = document.createElement('div'),\n            name = document.createElement('div'),\n            count = document.createElement('div'),\n            price = document.createElement('div');\n\n        // Add the class to the elements.\n        listElement.classList.add('store-item');\n        image.classList.add('store-item-image');\n        name.classList.add('store-item-name', 'stroke');\n        count.classList.add('store-item-count', 'stroke');\n        price.classList.add('store-item-price', 'stroke');\n\n        // Set the text HTML values for the children elements.\n        if (item.count !== -1) count.textContent = `x${item.count.toString()}`;\n        name.textContent = item.name;\n        price.textContent = `${item.price.toString()}${this.currency[0]}`;\n\n        // Update the image of the element.\n        image.style.backgroundImage = Util.getImageURL(item.key);\n\n        listElement.addEventListener('click', () => this.buy(index));\n        onSecondaryPress(listElement, () => {\n            this.selectedBuyIndex = index;\n\n            this.showBuyDialog();\n        });\n\n        // Append all the elements together and nest them.\n        listElement.append(image, name, count, price);\n\n        return listElement;\n    }\n\n    /**\n     * Grabs the HTMLElement at a specified index within the\n     * inventory slot list.\n     * @param index The index of the element to grab.\n     * @returns The HTMLElement at the specified index.\n     */\n\n    private getElement(index: number): HTMLElement {\n        return this.inventoryList.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Select callback for whenever a store action is performed. This includes\n     * buying, selling, or selecting an item.\n     * @param callback Passes data such as the type of action performed and index.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n}\n","import type Player from '../entity/character/player/player';\n\n/**\n * The header is the GUI on top of the screen that displays\n * the user's hitPoints, and exp bar. Every time there's\n * an update to the game's player, it gets relayed here.\n */\n\nexport default class Header {\n    private health: HTMLElement = document.querySelector('#health')!; // The red element within the health bar.\n    private healthBar: HTMLElement = document.querySelector('#health-bar')!;\n\n    private mana: HTMLElement = document.querySelector('#mana')!;\n    private manaBar: HTMLElement = document.querySelector('#mana-bar')!;\n\n    private healthText: HTMLElement = document.querySelector('#health-bar-text')!; // Numerical value of the health bar.\n    private manaText: HTMLElement = document.querySelector('#mana-bar-text')!;\n\n    public constructor(private player: Player) {\n        this.player.onHitPoints(this.handleHitPoints.bind(this));\n        this.player.onMana(this.handleMana.bind(this));\n        this.player.onPoison(this.handlePoison.bind(this));\n    }\n\n    /**\n     * Updates the health bar on the game screen.\n     * @param hitPoints Current hit points of the player.\n     * @param maxHitPoints Maximum attainable hit points (used to calcualte percentages).\n     * @param decrease Whether or not the hit points are decreasing.\n     */\n\n    private handleHitPoints(hitPoints: number, maxHitPoints: number, decrease?: boolean): void {\n        this.setPoints(\n            this.health,\n            this.healthBar,\n            this.healthText,\n            hitPoints,\n            maxHitPoints,\n            decrease\n        );\n    }\n\n    /**\n     * Updates the mana bar on the game screen.\n     * @param mana Current mana of the player.\n     * @param maxMana Maximum attainable mana (used to calcualte percentages).\n     */\n\n    public handleMana(mana: number, maxMana: number): void {\n        this.setPoints(this.mana, this.manaBar, this.manaText, mana, maxMana);\n    }\n\n    /**\n     * Updates the poison status by changing the colour of the health bar.\n     * @param status The current status of the player's poison.\n     */\n\n    public handlePoison(status: boolean): void {\n        this.health.style.background = status\n            ? 'linear-gradient(to right, #046E20, #19B047)'\n            : 'linear-gradient(to right, #f00, #ef5a5a)';\n    }\n\n    /**\n     * Updates the width of all the bars when the window is resized.\n     */\n\n    public resize(): void {\n        this.handleHitPoints(this.player.hitPoints, this.player.maxHitPoints);\n        this.handleMana(this.player.mana, this.player.maxMana);\n    }\n\n    /**\n     * Function that updates a specified element and its text value\n     * based on the points data provided.\n     * @param element The element we are updating the width of.\n     * @param barElement Used to compare against the element's width.\n     * @param textElement The text element we are adding the points info to.\n     * @param points The points value we are updating the element with.\n     * @param maxPoints The maximum points value.\n     * @param decrease Whether or not the points value is decreasing.\n     */\n\n    private setPoints(\n        element: HTMLElement,\n        barElement: HTMLElement,\n        textElement: HTMLElement,\n        points: number,\n        maxPoints: number,\n        decrease?: boolean\n    ): void {\n        let percentage = points / maxPoints;\n\n        element.style.width = `${Math.floor(barElement.offsetWidth * percentage).toString()}px`;\n\n        textElement.textContent = `${points}/${maxPoints}`;\n\n        if (decrease) this.flash(this.player.poison ? 'poison' : 'white');\n    }\n\n    /**\n     * Temporarily adds a class to the health (to give the visual\n     * effect of it flashing) and creates a timeout that removes\n     * it after 500 milliseconds.\n     */\n\n    private flash(style: string): void {\n        this.health.classList.add(style);\n\n        window.setTimeout(() => this.health.classList.remove(style), 500);\n    }\n}\n","let tooltip!: HTMLElement;\n\n/**\n * Creates a tooltip and shows it on the given element.\n * @param element The element to attach the tooltip to.\n * @param text The text to display in the tooltip.\n */\nfunction showTooltip(element: HTMLElement, text: string) {\n    // If the tooltip already exists, don't create a new one\n    tooltip ??= document.createElement('div');\n\n    // Get the element's bounding rectangle\n    let rect = element.getBoundingClientRect();\n\n    tooltip.classList.add('bubble');\n    tooltip.textContent = text;\n\n    // Add the tooltip to the DOM\n    document.querySelector('#bubbles')!.append(tooltip);\n\n    // Set the style of the tooltip\n    tooltip.style.padding = '5px 10px';\n    tooltip.style.left = `${rect.left + rect.width / 2 - tooltip.offsetWidth / 2}px`;\n    tooltip.style.top = `${rect.top - tooltip.offsetHeight}px`;\n\n    // Mouse events\n\n    element.addEventListener('blur', () => tooltip.remove());\n    element.addEventListener('mouseout', () => tooltip.remove());\n    element.addEventListener('mouseleave', () => tooltip.remove());\n\n    // Touch events\n\n    element.addEventListener('touchend', (event) => {\n        if (event.target !== element) tooltip.remove();\n    });\n    element.addEventListener('touchcancel', (event) => {\n        if (event.target !== element) tooltip.remove();\n    });\n\n    document.addEventListener('touchend', (event) => {\n        if (event.target !== element) tooltip.remove();\n    });\n    document.addEventListener('touchcancel', (event) => {\n        if (event.target !== element) tooltip.remove();\n    });\n}\n\n/**\n * Listens for events on the given element and shows a tooltip when the event is triggered.\n * @param element The element to attach the tooltip to.\n * @param text The text to display in the tooltip.\n */\nexport function attachTooltip(element: HTMLElement, text: string): void {\n    element.addEventListener('focus', () => showTooltip(element, text));\n    element.addEventListener('mouseover', () => showTooltip(element, text));\n    element.addEventListener('mouseenter', () => showTooltip(element, text));\n    element.addEventListener('touchstart', () => showTooltip(element, text));\n}\n","import Util from '../../../utils/util';\nimport Menu from '../../menu';\n\nimport { Modules } from '@kaetram/common/network';\nimport { attachTooltip } from '@kaetram/client/src/utils/tooltip';\n\nimport type Player from '../../../entity/character/player/player';\n\ntype UnequipCallback = (type: Modules.Equipment) => void;\ntype StyleCallback = (style: Modules.AttackStyle) => void;\n\nexport default class State extends Menu {\n    // General player information.\n    private level: HTMLElement = document.querySelector('#profile-level')!;\n    private experience: HTMLElement = document.querySelector('#profile-experience')!;\n\n    // Attack style element\n    private attackStyleList: HTMLUListElement = document.querySelector('#attack-style-list')!;\n\n    // Equipment information\n    private weapon: HTMLElement = document.querySelector('#state-page > .weapon-slot')!;\n    private weaponSkin: HTMLElement = document.querySelector('#state-page > .weapon-skin-slot')!;\n    private armour: HTMLElement = document.querySelector('#state-page > .armour-slot')!;\n    private armourSkin: HTMLElement = document.querySelector('#state-page > .armour-skin-slot')!;\n    private pendant: HTMLElement = document.querySelector('#state-page > .pendant-slot')!;\n    private ring: HTMLElement = document.querySelector('#state-page > .ring-slot')!;\n    private boots: HTMLElement = document.querySelector('#state-page > .boots-slot')!;\n    private arrow: HTMLElement = document.querySelector('#state-page > .arrows-slot')!;\n\n    private unequipCallback?: UnequipCallback;\n    private styleCallback?: StyleCallback;\n\n    public constructor(private player: Player) {\n        super('#state-page');\n\n        this.weapon.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Weapon)\n        );\n        this.weaponSkin.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.WeaponSkin)\n        );\n        this.armour.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Armour)\n        );\n        this.armourSkin.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.ArmourSkin)\n        );\n        this.pendant.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Pendant)\n        );\n        this.ring.addEventListener('click', () => this.unequipCallback?.(Modules.Equipment.Ring));\n        this.boots.addEventListener('click', () => this.unequipCallback?.(Modules.Equipment.Boots));\n        this.arrow.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Arrows)\n        );\n    }\n\n    /**\n     * Synchronizes the player data into its respective slots. Takes\n     * the player's name, level, experience, and equipment and updates\n     * the user interface accordingly.\n     */\n\n    public override synchronize(): void {\n        // Synchronize the player's general information\n        this.level.textContent = `Level ${this.player.level}`;\n        this.experience.textContent = `${this.player.getTotalExperience()}`;\n\n        // Synchronize equipment data\n        this.weapon.style.backgroundImage = Util.getImageURL(this.player.getWeapon().key);\n        this.weaponSkin.style.backgroundImage = Util.getImageURL(this.player.getWeaponSkin().key);\n        // Cloth armour shouldn't be displayed in the UI.\n        this.armour.style.backgroundImage = Util.getImageURL(\n            this.player.getArmour().key === 'clotharmor' ? '' : this.player.getArmour().key\n        );\n        this.armourSkin.style.backgroundImage = Util.getImageURL(this.player.getArmourSkin().key);\n        this.pendant.style.backgroundImage = Util.getImageURL(this.player.getPendant().key);\n        this.ring.style.backgroundImage = Util.getImageURL(this.player.getRing().key);\n        this.boots.style.backgroundImage = Util.getImageURL(this.player.getBoots().key);\n        this.arrow.style.backgroundImage = Util.getImageURL(this.player.getArrows().key);\n\n        // Synchronize the attack styles\n        this.loadAttackStyles();\n    }\n\n    /**\n     * Iterates through all the attack styles currently present on the player's weapon\n     * and creates the HTML element for each one of them. The element is then appended\n     * onto the attack style list.\n     */\n\n    private loadAttackStyles(): void {\n        // Clear the attack style list.\n        this.attackStyleList.innerHTML = '';\n\n        // Iterate through all the attack styles and create the HTML element for each one.\n        for (let style of this.player.getWeapon().attackStyles)\n            this.attackStyleList.append(this.createStyle(style));\n    }\n\n    /**\n     * Creates an attack style list element that is appended onto the\n     * attack style list. Each attack style has a different image and\n     * that is determined based on the style parameter provided.\n     * @param style The attack style we are creating.\n     * @returns A list element that contains the attack style image.\n     */\n\n    private createStyle(style: Modules.AttackStyle): HTMLLIElement {\n        let element = document.createElement('li'),\n            image = document.createElement('div');\n\n        // Append the default box onto the list element.\n        element.classList.add('attack-style-box');\n\n        attachTooltip(element, this.getTooltip(style));\n\n        // Add the attack style image.\n        image.classList.add(\n            'attack-style',\n            `attack-style-${Modules.AttackStyle[style].toLowerCase()}`\n        );\n\n        // If the style is the same as the player's current style, we add the active class.\n        if (style === this.player.getWeapon().attackStyle) element.classList.add('active');\n\n        // Append the image onto the list element.\n        element.append(image);\n\n        // Add the click event listener to the element.\n        element.addEventListener('click', () => this.styleCallback?.(style));\n\n        return element;\n    }\n\n    private getTooltip(style: Modules.AttackStyle): string {\n        switch (style) {\n            case Modules.AttackStyle.Stab: {\n                return 'Stab (Accuracy EXP)';\n            }\n\n            case Modules.AttackStyle.Slash: {\n                return 'Slash (Strength EXP)';\n            }\n\n            case Modules.AttackStyle.Defensive: {\n                return 'Defensive (Defense EXP)';\n            }\n\n            case Modules.AttackStyle.Crush: {\n                return 'Crush (Accuracy + Strength EXP)';\n            }\n\n            case Modules.AttackStyle.Shared: {\n                return 'Shared (Accuracy + Strength + Defense EXP)';\n            }\n\n            case Modules.AttackStyle.Hack: {\n                return 'Hack (Strength + Defense EXP)';\n            }\n\n            case Modules.AttackStyle.Chop: {\n                return 'Chop (Accuracy + Defense EXP)';\n            }\n\n            case Modules.AttackStyle.Accurate: {\n                return 'Accurate (Increased Accuracy)';\n            }\n\n            case Modules.AttackStyle.Fast: {\n                return 'Fast (Increased Speed)';\n            }\n\n            case Modules.AttackStyle.Focused: {\n                return 'Focused (Increased Damage)';\n            }\n\n            case Modules.AttackStyle.LongRange: {\n                return 'Long Range';\n            }\n        }\n\n        return 'Report as bug if you see this :)';\n    }\n\n    /**\n     * Callback for when we click on an equipment slot.\n     * @param callback Contains the slot type we are selecting.\n     */\n\n    public onUnequip(callback: UnequipCallback): void {\n        this.unequipCallback = callback;\n    }\n\n    /**\n     * Callback for when we click on an attack style.\n     * @param callback Contains the attack style we are selecting.\n     */\n\n    public onStyle(callback: StyleCallback): void {\n        this.styleCallback = callback;\n    }\n}\n","import log from '../../../lib/log';\nimport Menu from '../../menu';\nimport QuickSlots from '../../quickslots';\n\nimport { Modules, Opcodes } from '@kaetram/common/network';\n\nimport type Ability from '../../../entity/character/player/ability';\nimport type Player from '../../../entity/character/player/player';\n\ninterface AbilityElement extends HTMLElement {\n    key?: string;\n}\n\nexport type SelectCallback = (type: Opcodes.Ability, key: string, index?: number) => void;\n\nexport default class Abilities extends Menu {\n    private activeAbilities: HTMLUListElement = document.querySelector('#active-abilities')!;\n    private passiveAbilities: HTMLUListElement = document.querySelector('#passive-abilities')!;\n\n    private abilityBar: HTMLElement = document.querySelector('#ability-shortcut')!;\n\n    private draggedElement = '';\n\n    //private quickSlots: QuickSlots;\n\n    private selectCallback?: SelectCallback;\n\n    public constructor(private player: Player) {\n        super('#abilities-page');\n\n        // Loads the event listeners for when we click on an ability.\n        for (let i = 0; i < this.activeAbilities.children.length; i++)\n            this.activeAbilities.children[i].addEventListener('click', () => this.handleAction(i));\n\n        // Creates the drag detection listener onto the ability bar.\n        for (let i = 0; i < this.abilityBar.children.length; i++) {\n            let element = this.abilityBar.children[i] as AbilityElement;\n\n            element.draggable = true;\n\n            element.addEventListener('dragover', (event: DragEvent) => this.dragOver(event));\n            element.addEventListener('drop', (event: DragEvent) => this.dragDrop(event, i));\n        }\n\n        // // Load the quickslots.\n        // this.quickSlots = new QuickSlots(this.player);\n\n        // // Redirect the quick slots select callback through this class' select callback.\n        // this.quickSlots.onSelect((type: Opcodes.Ability, key: string) =>\n        //     this.selectCallback?.(type, key)\n        // );\n    }\n\n    /**\n     * Synchronizes ability information from the player object into the interface.\n     * @param player The player object we are synchronizing abilities from.\n     */\n\n    public override synchronize(): void {\n        // Hide all abilities and start from scratch.\n        this.hideAll();\n\n        let activeIndex = 0,\n            passiveIndex = 0;\n\n        /**\n         * Depending on whether the ability is passive or active, we increment\n         * the adequate index and add it to the appropriate list.\n         */\n\n        for (let ability of Object.values(this.player.abilities))\n            switch (ability.type) {\n                case Modules.AbilityType.Active: {\n                    this.setActiveAbility(activeIndex, ability.key, ability.level, ability.active);\n                    activeIndex++;\n                    break;\n                }\n\n                case Modules.AbilityType.Passive: {\n                    this.setPassiveAbility(passiveIndex, ability.key, ability.level);\n                    passiveIndex++;\n                    break;\n                }\n            }\n    }\n\n    /**\n     * Handler for when an ability at a specific index is used. We createa a callback\n     * that is passed through the controllers to the the server.\n     * @param index The index of the ability.\n     */\n\n    private handleAction(index: number): void {\n        let ability = this.activeAbilities.children[index] as AbilityElement;\n\n        if (ability.style.display === 'none' || !ability.key) return;\n\n        this.selectCallback?.(Opcodes.Ability.Use, ability.key);\n    }\n\n    /**\n     * Event handler for when a slot begins the dragging and dropping\n     * process. We store the key of the ability we are currently dragging.\n     * @param key The key of the ability that is being dragged.\n     */\n\n    private dragStart(key: string): void {\n        this.draggedElement = key;\n    }\n\n    /**\n     * The drop event within the drag and drop actions. The target represents\n     * the slot that the item is being dropped into.\n     * @param event Contains event data about the target.\n     * @param index The index of the quick slot we are dragging ability onto.\n     */\n\n    private dragDrop(event: DragEvent, index: number): void {\n        this.selectCallback?.(Opcodes.Ability.QuickSlot, this.draggedElement, index);\n\n        this.draggedElement = '';\n    }\n\n    /**\n     * Event handler for when a slot is being dragged over (but not dropped).\n     * We use this to give the user feedback on which slot they are hovering.\n     * @param event Contains event data and the ability element being dragged\n     */\n\n    private dragOver(event: DragEvent): void {\n        // Check that a target exists firstly.\n        if (!event.target || !(event.target as HTMLElement).draggable) return;\n\n        event.preventDefault();\n    }\n\n    /**\n     * Event handler for when an item being dragged exits a valid slot area.\n     * @param event Contains the target slot that is exited.\n     */\n\n    private dragLeave(_event: DragEvent): void {\n        //\n    }\n\n    /**\n     * Takes in an HTMLElement object and assigns the necessary information to it. This is used\n     * by both the active and passive abilities.\n     * @param ability The HTML element that we are modifying.\n     * @param key The key of the image that we are using.\n     * @param level The level of the ability.\n     */\n\n    private setAbility(ability: AbilityElement, key: string, level = 1, passive = false): void {\n        // Clear the inner HTML first (to erase any potential existing elements such as levels).\n        ability.innerHTML = '';\n        ability.className = `ability`; // Clear the classes\n\n        // Make ability visible.\n        ability.style.display = 'block';\n\n        // Handle icons for the abilities\n        let icon = document.createElement('div');\n\n        // Set the icon class and add it to the ability.\n        icon.classList.add('ability-icon');\n        icon.classList.add(`ability-icon-${key}`);\n\n        // Make the icon draggable.\n        icon.draggable = true;\n\n        // Ignore the drag and drop events if the ability is passive.\n        if (!passive) {\n            // Add event listeners for drag and drop for the ability icon.\n            icon.addEventListener('dragleave', (event: DragEvent) => this.dragLeave(event));\n            icon.addEventListener('dragstart', () => this.dragStart(key));\n        }\n\n        // Clamp the level.\n        if (level > 4) level = 4;\n        if (level < 1) level = 1;\n\n        // Add the levels to the ability.t\n        for (let i = 0; i < level; i++) {\n            let level = document.createElement('div');\n\n            level.classList.add('ability-level');\n            level.classList.add(`ability-level${i + 1}`);\n\n            ability.append(level, icon);\n        }\n    }\n\n    /**\n     * Updates the icon of a active ability based on the key and level provided.\n     * @param index The index of the ability we are modifying.\n     * @param key The key of the ability we are setting.\n     * @param level The level of the ability.\n     */\n\n    public setActiveAbility(index: number, key: string, level = 1, active = false): void {\n        let ability = this.activeAbilities.children[index] as AbilityElement;\n\n        // Invalid index is provided.\n        if (!ability) return log.error(`Could not find ability with index ${index}, key: ${key}.`);\n\n        // Indicates that we are clearing an active ability.\n        if (!key) return this.hideAbility(ability);\n\n        this.setAbility(ability, key, level);\n\n        ability.key = key;\n\n        let icon = ability.querySelector('.ability-icon')!;\n\n        if (!icon) return;\n\n        // Toggle the ability if it has been activated.\n        if (active) icon.classList.add('active');\n        else icon.classList.remove('active');\n\n        //this.quickSlots.toggleAbility(key, active);\n    }\n\n    /**\n     * Updates the icon and level of a passive ability in the user interface.\n     * @param index The index of the passive ability.\n     * @param key The key (image) of the passive ability.\n     * @param level The level we are setting the passive ability to.\n     */\n\n    public setPassiveAbility(index: number, key: string, level = 1): void {\n        let ability = this.passiveAbilities.children[index] as AbilityElement;\n\n        // Invalid index is provided.\n        if (!ability) return log.error(`Could not find ability with index ${index}, key: ${key}.`);\n\n        // Indicates that we are clearing a passive ability.\n        if (!key) return this.hideAbility(ability);\n\n        this.setAbility(ability, key, level, true);\n    }\n\n    /**\n     * Sets the display style for an ability to hidden to hide it.\n     * @param ability The HTML element of the ability we are hiding.\n     */\n\n    private hideAbility(ability: HTMLElement): void {\n        ability.style.display = 'none';\n    }\n\n    /**\n     * Goes through all the passive and active abilities and hides\n     * all of them. We generally use this during batching.\n     */\n\n    private hideAll(): void {\n        for (let child of this.activeAbilities.children) this.hideAbility(child as HTMLElement);\n\n        for (let child of this.passiveAbilities.children) this.hideAbility(child as HTMLElement);\n    }\n\n    /**\n     * Callback for when an active ability is selected within the menu.\n     * @param callback Contains the key of the ability that was selected.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n}\n","import Menu from '../../menu';\nimport Util from '../../../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Skill from '../../../entity/character/player/skill';\nimport type Player from '../../../entity/character/player/player';\n\ninterface SkillElement extends HTMLLIElement {\n    name?: string;\n    level?: number;\n    percentage?: number;\n    originalWidth?: number;\n}\n\nexport default class Skills extends Menu {\n    private list: HTMLUListElement = document.querySelector('#skills-list > ul')!;\n\n    // Skill info side-menu\n    private info: HTMLElement = document.querySelector('#profile-info')!;\n\n    // Skill we have info menu open for.\n    private selectedSkill!: Skill;\n\n    private loaded = false;\n\n    public constructor(private player: Player) {\n        super('#skills-page');\n    }\n\n    /**\n     * Synchronizes the player's skill data into the user interface.\n     * @param resize Whether we need to re-calculate the experience bar widths.\n     */\n\n    public override synchronize(resize = false): void {\n        if (Object.keys(this.player.skills).length === 0) return;\n\n        if (resize) this.list.innerHTML = '';\n\n        for (let id of Modules.SkillsOrder) {\n            let skill = this.player.skills[id],\n                element = this.get(skill.name);\n\n            // Update the element if found.\n            if (element) this.update(element, skill);\n            else {\n                // Create the element otherwise...\n                element = this.createElement(skill);\n\n                // Append the element to the list.\n                this.list.append(element);\n\n                // Update the element with the latest data.\n                this.update(element, skill);\n            }\n        }\n\n        if (this.isInfoVisible()) this.showInfo();\n    }\n\n    /**\n     * Override for the show function. Due to the nature of the HTML DOM we must\n     * re-synchronize data when we first show the page. This is because the skills\n     * experience bar does not have a width until it is first shown on the page.\n     * This function just checks if we have already loaded the page, if not, we\n     * synchronize again since we just created the elements, the `synchronize` function\n     * will grab the existing elements in the list and update their experience bar\n     * widths accordingly.\n     */\n\n    public override show(): void {\n        super.show();\n\n        // Only synchronize upon first showing the page.\n        if (this.loaded) return;\n\n        this.loaded = true;\n\n        this.synchronize();\n    }\n\n    /**\n     * Override for the superclass `hide` function to also hide\n     * the profile info side-menu.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        this.hideInfo();\n    }\n\n    /**\n     * Hides the info side-menu.\n     */\n\n    public hideInfo(): void {\n        Util.fadeOut(this.info);\n    }\n\n    /**\n     * Creates a new skill element that will be appended to the list.\n     * @param skill Contains skill data to create the element with.\n     */\n\n    private createElement(skill: Skill): HTMLLIElement {\n        let element: SkillElement = document.createElement('li'),\n            level = document.createElement('div'),\n            image = document.createElement('div'),\n            experience = document.createElement('div');\n\n        // Add the skill class to the base element.\n        element.classList.add('skill');\n\n        // Update the skill level\n        level.classList.add('skill-level', 'stroke');\n\n        // Load the image based on the skill name.\n        image.classList.add('skill-image', `skill-image-${skill.name.toLowerCase()}`);\n\n        // Load up the experience bar.\n        experience.classList.add('skill-experience');\n\n        // Add the image to the element.\n        element.append(level, experience, image);\n\n        // Store information about the skill in the element.\n        element.name = skill.name;\n        element.level = skill.level;\n        element.percentage = skill.percentage;\n\n        // Add the click event to the element.\n        element.addEventListener('click', () => this.showInfo(skill));\n\n        return element;\n    }\n\n    /**\n     * When we click on a skill we want to show some more information.\n     * @param skill The skill that we are showing information for.\n     */\n\n    private showInfo(skill = this.selectedSkill): void {\n        Util.fadeIn(this.info);\n\n        let image = this.info.querySelector('.profile-info-skill-image')!,\n            title = this.info.querySelector('.profile-info-title')!,\n            details = this.info.querySelector('.profile-info-details')!;\n\n        // Update the image and title of the skill.\n        image.className = `profile-info-skill-image skill-image-${skill.name.toLowerCase()}`;\n        title.innerHTML = skill.name;\n\n        // Update the details of the skill.\n        details.innerHTML = `\n            <p><span>Level:</span> ${skill.level}</p>\n            <br>\n            <p><span>Exp:</span> ${skill.experience}</p>\n            <br>\n            <p><span>Next Exp:</span> ${skill.nextExperience}</p>\n            <br>\n            <p><span>Percent:</span> ${(skill.percentage * 100).toFixed(3)}%</p>\n        `;\n\n        this.selectedSkill = skill;\n    }\n\n    /**\n     * Updates a slot element with the latest level and percentage information.\n     * @param element SkillElement HTML element that we are updating.\n     * @param skill The skill we are using to update the data with.\n     */\n\n    private update(element: SkillElement, skill: Skill): void {\n        // Update the level and experience bar of the skill.\n        let level: HTMLElement = element.querySelector('.skill-level')!,\n            experience: HTMLElement = element.querySelector('.skill-experience')!;\n\n        // Update the skill level\n        level.innerHTML = `${skill.level}/${Modules.Constants.MAX_LEVEL}`;\n\n        // Store the original width of the experience bar.\n        if (!element.originalWidth && experience.offsetWidth !== 0)\n            element.originalWidth = experience.offsetWidth;\n\n        if (!element.originalWidth) return;\n\n        // Set the experience bar's width.\n        experience.style.width = `${element.originalWidth * skill.percentage}px`;\n\n        // Update the properties of the element.\n        element.level = skill.level;\n        element.percentage = skill.percentage;\n    }\n\n    /**\n     * Finds an HTML skill element extension based on the name of the skill.\n     * @param name The name of the skill we are looking for.\n     * @returns A skill element extension if found, otherwise undefined.\n     */\n\n    private get(name: string): SkillElement | undefined {\n        for (let element of this.list.children)\n            if ((element as SkillElement).name === name) return element as SkillElement;\n\n        return undefined;\n    }\n\n    /**\n     * @returns Whether or not the profile info side-menu is visible.\n     */\n\n    public isInfoVisible(): boolean {\n        return this.info.style.display === 'block';\n    }\n}\n","import State from './impl/state';\nimport Abilities from './impl/abilities';\nimport Skills from './impl/skills';\n\nimport Menu from '../menu';\n\nimport type Player from '../../entity/character/player/player';\nimport type { Modules, Opcodes } from '@kaetram/common/network';\nimport type { SelectCallback } from './impl/abilities';\n\ntype UnequipCallback = (type: Modules.Equipment) => void;\ntype AttackStyleCallback = (style: Modules.AttackStyle) => void;\n\nexport default class Profile extends Menu {\n    // Initialize the pages separately for callbacks sake.\n    private state: State;\n    private skills: Skills;\n    private abilities: Abilities;\n\n    // Initialize all pages here.\n    private pages: Menu[] = [];\n\n    // Current page we are on.\n    private activePage = 0;\n\n    // Navigation buttons for the profile.\n    private previous: HTMLElement = document.querySelector('#profile-navigator > .previous')!;\n    private next: HTMLElement = document.querySelector('#profile-navigator > .next')!;\n\n    private unequipCallback?: UnequipCallback;\n    private attackStyleCallback?: AttackStyleCallback;\n    private abilityCallback?: SelectCallback;\n\n    public constructor(private player: Player) {\n        super('#profile-dialog', undefined, '#profile-button');\n\n        // Initialize the state page.\n        this.state = new State(this.player);\n\n        // Initialize the skills page.\n        this.skills = new Skills(this.player);\n\n        // Initialize the abilities page.\n        this.abilities = new Abilities(this.player);\n\n        // Add the abilities and skills page to the pages array.\n        this.pages.push(this.state, this.skills, this.abilities);\n\n        // Used to initialize the navigation buttons.\n        this.update();\n\n        // Navigation event listeners.\n        this.previous.addEventListener('click', () => this.handleNavigation('previous'));\n        this.next.addEventListener('click', () => this.handleNavigation('next'));\n\n        // Initialize callbacks for pages.\n        this.state.onUnequip((type: Modules.Equipment) => this.unequipCallback?.(type));\n        this.state.onStyle((style: Modules.AttackStyle) => this.attackStyleCallback?.(style));\n\n        this.abilities.onSelect((type: Opcodes.Ability, key: string, index?: number) =>\n            this.abilityCallback?.(type, key, index)\n        );\n    }\n\n    /**\n     * Override for the `hide` function to include hiding the side menu panel.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        this.skills.hideInfo();\n    }\n\n    /**\n     * We are modifying the currently active page and updating the status of\n     * the previous and next buttons depending on whether or not we're on\n     * the last or first page.\n     * @param direction Which way we are navigating, defaults to previous.\n     */\n\n    private handleNavigation(direction: 'previous' | 'next'): void {\n        // Prevent actions on disabled buttons.\n        if (this.isDisabled(direction)) return;\n\n        // Reset the status of the buttons.\n        this.previous.classList.remove('disabled');\n        this.next.classList.remove('disabled');\n\n        // Hide the current page we are on.\n        this.pages[this.activePage]?.hide();\n\n        // Modify the currently active page based on the direction.\n        this.activePage += direction === 'previous' ? -1 : 1;\n\n        // Update the status of the buttons.\n        this.update();\n    }\n\n    /**\n     * Updates the status of the buttons depending on whether or not we are\n     * on the first or last page.\n     */\n\n    private update() {\n        // Reaching the first page navigating backwards.\n        if (this.activePage <= 0) {\n            this.activePage = 0;\n            this.previous.classList.add('disabled');\n        }\n\n        // We are reaching the last page.\n        if (this.activePage >= this.pages.length - 1) {\n            this.activePage = this.pages.length - 1;\n            this.next.classList.add('disabled');\n        }\n\n        // Show the new page.\n        this.pages[this.activePage]?.show();\n    }\n\n    /**\n     * Iterates through all the pages in the profile and synchronizes them. This\n     * is called every time the player undergoes a change, whether it be equipping/unequipping,\n     * experience gain, or when a new ability is unlocked.\n     */\n\n    public override synchronize(): void {\n        this.forEachPage((page: Menu) => page.synchronize());\n    }\n\n    /**\n     * Synchronizes the skills interface upon resizing. This is because the experience\n     * bars are drawn according to the UI size, so we need to redraw them.\n     */\n\n    public override resize(): void {\n        this.skills.synchronize(true);\n    }\n\n    /**\n     * Checks if the direction is valid by ensuring the button\n     * associated with it is not disabled.\n     * @param direction Which direction we are navigating.\n     * @returns Whether the direction and the button associated\n     * with it are disabled or not.\n     */\n\n    private isDisabled(direction: 'previous' | 'next'): boolean {\n        return (\n            (direction === 'previous' && this.previous.classList.contains('disabled')) ||\n            (direction === 'next' && this.next.classList.contains('disabled'))\n        );\n    }\n\n    /**\n     * Iterates through each page menu and creates a callback.\n     * @param callback Contains the current page menu being iterated.\n     */\n\n    private forEachPage(callback: (page: Menu) => void): void {\n        for (let page of this.pages) callback(page);\n    }\n\n    /**\n     * Callback for when an item is being unequipped.\n     * @param callback Contains the type of slot being unequipped.\n     */\n\n    public onUnequip(callback: UnequipCallback): void {\n        this.unequipCallback = callback;\n    }\n\n    /**\n     * Callback for when an attack style is being changed.\n     * @param callback Contains the new attack style.\n     */\n\n    public onAttackStyle(callback: AttackStyleCallback): void {\n        this.attackStyleCallback = callback;\n    }\n\n    /**\n     * Callback for when an ability action occurs.\n     * @param callback Contains data about the action.\n     */\n\n    public onAbility(callback: SelectCallback): void {\n        this.abilityCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Inventory from './inventory';\n\ntype SelectCallback = (index: number) => void;\ntype ConfirmCallback = (index: number, shardIndex: number) => void;\nexport default class Enchant extends Menu {\n    private list: HTMLUListElement = document.querySelector('#enchant-inventory-slots')!;\n\n    // Selected items for the enchanting process.\n    private selectedItem: HTMLElement = document.querySelector('#enchant-selected-item')!;\n    private selectedShards: HTMLElement = document.querySelector('#enchant-shards')!;\n    private selectedShardsCount: HTMLElement = document.querySelector('#shards-count')!;\n\n    // Confirm button\n    private confirmButton: HTMLElement = document.querySelector('#confirm-enchant')!;\n\n    // Selected elements for packet data\n    private selectedSlot = -1; // Item slot\n    private selectedShard = -1; // Shard slot\n\n    // Callbacks for the enchanting process.\n    private selectCallback?: SelectCallback;\n    private confirmCallback?: ConfirmCallback;\n\n    public constructor(private inventory: Inventory) {\n        super('#enchant', '#close-enchant');\n\n        // Event listeners for selected slots.\n        this.selectedItem.addEventListener('click', this.clear.bind(this));\n        this.selectedShards.addEventListener('click', this.clear.bind(this));\n        this.confirmButton.addEventListener('click', this.confirm.bind(this));\n\n        // Create an empty inventory slot list.\n        for (let i = 0; i < Modules.Constants.INVENTORY_SIZE; i++)\n            this.list.append(\n                Util.createSlot(Modules.ContainerType.Inventory, i, this.select.bind(this))\n            );\n    }\n\n    /**\n     * Synchronizes the slot data between the store and the inventory.\n     */\n\n    public override synchronize(): void {\n        if (!this.isVisible()) return;\n\n        this.clearSelections();\n\n        this.inventory.forEachSlot((index: number, slot: HTMLElement) => {\n            let image = this.getElement(index).querySelector<HTMLElement>('.item-image')!,\n                count = this.getElement(index).querySelector<HTMLElement>('.item-count')!,\n                slotImage = slot.querySelector<HTMLElement>('.item-image')!;\n\n            if (!slotImage) return;\n\n            image.style.backgroundImage = slotImage.style.backgroundImage;\n            count.textContent = slot.textContent;\n        });\n    }\n\n    /**\n     * Override for showing the enchantment menu. We ensure we synchronize with the\n     * inventory every time we open the menu.\n     */\n\n    public override show(): void {\n        super.show();\n\n        this.synchronize();\n    }\n\n    /**\n     * Creates a callback for when an item is selected. Sends a packet to the\n     * server with the selected slot and selected shard slot (index).\n     */\n\n    private confirm(): void {\n        // Client-sided prevention for sending an invalid packet.\n        if (this.selectedSlot === -1 || this.selectedShard === -1) return;\n\n        this.confirmCallback?.(this.selectedSlot, this.selectedShard);\n    }\n\n    /**\n     * Sends a packet to the server in order to verify the item that was selected. Depending on the\n     * type of item (normal or shard) we will assign it to the correct slot.\n     * @param _type (Unused) The type of container we are selecting from.\n     * @param index The index in the inventory container where we clicked.\n     */\n\n    private select(_type: Modules.ContainerType, index: number): void {\n        this.selectCallback?.(index);\n    }\n\n    /**\n     * Moves an item from the inventory to the enchantment menu. If the item is a shard, it will\n     * move all the shards to the shard slot.\n     * @param index The index of the item we are moving.\n     * @param isShard Whether the item is a shard or not (determined by the server).\n     */\n\n    public move(index: number, isShard = false): void {\n        let image = this.getElement(index).querySelector<HTMLElement>('.item-image')!,\n            count = this.getElement(index).querySelector<HTMLElement>('.item-count')!;\n\n        // We already have an item selected, move it back to the inventory.\n        if (this.selectedSlot !== -1 && !isShard) {\n            let element = this.getElement(this.selectedSlot),\n                elementImage = element.querySelector<HTMLElement>('.item-image')!;\n\n            elementImage.style.backgroundImage = this.selectedItem.style.backgroundImage;\n        }\n\n        // We already have a shard selected, move it back to the inventory.\n        if (this.selectedShard !== -1 && isShard) {\n            let element = this.getElement(this.selectedShard),\n                elementImage = element.querySelector<HTMLElement>('.item-image')!,\n                elementCount = element.querySelector<HTMLElement>('.item-count')!;\n\n            elementImage.style.backgroundImage = this.selectedShards.style.backgroundImage;\n            elementCount.textContent = this.selectedShardsCount.textContent;\n        }\n\n        // If the item is a shard, we will move all the shards to the shard slot.\n        if (isShard) this.selectedShard = index;\n        else this.selectedSlot = index;\n\n        // Update the slot depending on whether or not the item is a shard.\n        (isShard ? this.selectedShards : this.selectedItem).style.backgroundImage =\n            image.style.backgroundImage;\n\n        // Shards also have counts so we will update that as well.\n        if (isShard) this.selectedShardsCount.textContent = count.textContent;\n\n        // Remove the item from the inventory slot (and its count).\n        image.style.backgroundImage = '';\n        count.textContent = '';\n    }\n\n    /**\n     * Cleans everything up and re-synchronizes the inventory with default values.\n     */\n\n    private clear(): void {\n        this.clearSelections();\n\n        this.synchronize();\n    }\n\n    /**\n     * Clears all the selections from the user interface enchantment menu.\n     */\n\n    private clearSelections(): void {\n        this.selectedSlot = -1;\n        this.selectedShard = -1;\n\n        // Reset the slot images and text.\n        this.selectedItem.style.backgroundImage = '';\n        this.selectedShards.style.backgroundImage = '';\n        this.selectedShardsCount.textContent = '';\n    }\n\n    /**\n     * Grabs the HTMLElement at a specified index within the\n     * inventory slot list.\n     * @param index The index of the element to grab.\n     * @returns The HTMLElement at the specified index.\n     */\n\n    private getElement(index: number): HTMLElement {\n        return this.list.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Callback for when an item in the inventory is selected. A packet\n     * is sent to the server.\n     * @param callback Contains the index of the item that was selected.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n\n    /**\n     * Callback for when the player confirms their selection and attempts\n     * to enchant an item using the shards.\n     * @param callback Contains the index of the item and the shard index.\n     */\n\n    public onConfirm(callback: ConfirmCallback): void {\n        this.confirmCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\n\nimport type Socket from '../network/socket';\n\nexport default class Warp extends Menu {\n    private list: NodeListOf<HTMLElement> = document.querySelectorAll('.map-button')!;\n\n    private selectCallback?: (id: number) => void;\n\n    public constructor(private socket: Socket) {\n        super('#map-frame', '#close-map-frame', '#warp-button');\n\n        for (let element of this.list)\n            element.addEventListener('click', () => this.handleWarp(element));\n    }\n\n    /**\n     * Handles the interaction when a warp element is clicked.\n     * Extracts the id of the warp button, and sends a packet\n     * to the server containing the id.\n     * @param element Which warp button is being clicked.\n     */\n\n    private handleWarp(element: HTMLElement): void {\n        let id = parseInt(element.id.replace('warp', ''));\n\n        if (isNaN(id)) return log.error('Invalid warp element clicked.');\n\n        this.selectCallback?.(id);\n\n        this.hide();\n    }\n\n    /**\n     * Callback for when the warp is clicked.\n     * @param callback Contains the id of the warp.\n     */\n\n    public onSelect(callback: (id: number) => void): void {\n        this.selectCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nexport default class Notification extends Menu {\n    private title: HTMLElement = document.querySelector('#notification-text-title')!;\n    private description: HTMLElement = document.querySelector('#notification-text-description')!;\n\n    private timeout!: number | null;\n\n    public constructor() {\n        super('#notification');\n    }\n\n    /**\n     * The notification system has a special behavior\n     * when it is displayed. The CSS handles the smooth\n     * animation for it, and when we display it, we must\n     * move it according to the screen size.\n     */\n\n    public override show(title: string, message: string, colour: string): void {\n        // If a notification is already visible we hide it and display new one.\n        if (this.isVisible()) {\n            this.hide(false);\n            window.setTimeout(() => this.show(title, message, colour), 700);\n            return;\n        }\n\n        // Displays the notification.\n        this.container.classList.add('active');\n        this.setPosition();\n\n        // Updates the title's colour.\n        this.title.style.color = colour;\n\n        // Sets the title and description.\n        this.title.innerHTML = title;\n        this.description.innerHTML = message;\n\n        // Clear the timeout if it exists.\n        clearTimeout(this.timeout!);\n\n        // Starts a timeout.\n        this.timeout = window.setTimeout(() => this.hide(false), 7000);\n    }\n\n    /**\n     * Override for hiding the notification. We move the notification outside the\n     * screen area and remove its active element.\n     */\n\n    public override hide(ignore = true): void {\n        if (ignore) return;\n\n        // Hides the notification.\n        this.container.classList.remove('active');\n        this.container.style.top = '100%';\n    }\n\n    /**\n     * Updates the position of the notification.\n     */\n\n    public override resize(): void {\n        // Don't update unless visible.\n        if (!this.isVisible()) return;\n\n        this.setPosition();\n    }\n\n    /**\n     * Override for whether or not the notification is\n     * currently visible. Notifications are checked by\n     * verifying the class list instead of body display.\n     * @returns Whether the class list contains the active\n     * element.\n     */\n\n    public override isVisible(): boolean {\n        return this.container.classList.contains('active');\n    }\n\n    /**\n     * Calculates the positioning of the notification\n     * based on the current screen size.\n     * @returns The window's size minus the notification's\n     * height. This places the notification at the bottom\n     * of the screen.\n     */\n\n    private getPosition(): number {\n        return window.innerHeight - this.container.offsetHeight;\n    }\n\n    /**\n     * Updates the notification's body positioning relative to the screen.\n     */\n\n    private setPosition(): void {\n        this.container.style.top = `${this.getPosition()}px`;\n    }\n}\n","import Menu from './menu';\n\nimport type Game from '../game';\n\nexport default class Settings extends Menu {\n    private musicSlider: HTMLInputElement = document.querySelector('#music')!;\n    private soundSlider: HTMLInputElement = document.querySelector('#sound')!;\n    private brightnessSlider: HTMLInputElement = document.querySelector('#brightness')!;\n\n    private audioEnabledCheckbox: HTMLInputElement = document.querySelector(\n        '#audio-enabled-checkbox > input'\n    )!;\n    private lowPowerCheckbox: HTMLInputElement = document.querySelector(\n        '#low-power-checkbox > input'\n    )!;\n    private debugCheckbox: HTMLInputElement = document.querySelector(\n        '#debug-mode-checkbox > input'\n    )!;\n    private showNamesCheckbox: HTMLInputElement = document.querySelector(\n        '#show-names-checkbox > input'\n    )!;\n    private showLevelsCheckbox: HTMLInputElement = document.querySelector(\n        '#show-levels-checkbox > input'\n    )!;\n    private disableCachingCheckbox: HTMLInputElement = document.querySelector(\n        '#disable-region-caching-checkbox > input'\n    )!;\n\n    public constructor(private game: Game) {\n        super('#settings-page', undefined, '#settings-button');\n\n        this.musicSlider.addEventListener('input', this.handleMusic.bind(this));\n        this.soundSlider.addEventListener('input', this.handleSoundVolume.bind(this));\n        this.brightnessSlider.addEventListener('input', this.handleBrightness.bind(this));\n\n        this.audioEnabledCheckbox.addEventListener('change', this.handleAudioEnabled.bind(this));\n        this.lowPowerCheckbox.addEventListener('change', this.handleLowPower.bind(this));\n        this.debugCheckbox.addEventListener('change', this.handleDebug.bind(this));\n        this.showNamesCheckbox.addEventListener('change', this.handleName.bind(this));\n        this.showLevelsCheckbox.addEventListener('change', this.handleLevel.bind(this));\n        this.disableCachingCheckbox.addEventListener('change', this.handleCaching.bind(this));\n\n        this.load();\n    }\n\n    /**\n     * Loads all the information about the sliders and checkboxes from the local storage.\n     * We call all the handler functions here to ensure that the associated functions are\n     * called without having them import the settings page and create a spaghetti code situation.\n     * The settings page lives independently of the game and calls functions as needed.\n     */\n\n    private load(): void {\n        let settings = this.game.storage.getSettings();\n\n        this.musicSlider.value = settings.musicVolume?.toString();\n        this.soundSlider.value = settings.soundVolume?.toString();\n        this.brightnessSlider.value = settings.brightness?.toString();\n\n        this.audioEnabledCheckbox.checked = settings.audioEnabled;\n        this.lowPowerCheckbox.checked = settings.lowPowerMode;\n        this.debugCheckbox.checked = settings.debugMode;\n        this.showNamesCheckbox.checked = settings.showNames;\n        this.showLevelsCheckbox.checked = settings.showLevels;\n        this.disableCachingCheckbox.checked = settings.disableCaching;\n\n        // Update brightness value.\n        this.handleBrightness();\n\n        // Update debugging\n        this.handleDebug();\n\n        // Update camera once loaded.\n        this.handleLowPower();\n\n        // Update the renderer for names and levels\n        this.handleName();\n        this.handleLevel();\n    }\n\n    /**\n     * Handler for when the music input slider changes, sets the value into the local storage.\n     */\n\n    private handleMusic(): void {\n        this.game.storage.setMusicVolume(this.musicSlider.valueAsNumber);\n        this.game.audio.updateVolume();\n    }\n\n    /**\n     * Handler for when the Sound slider changes, updates the value in the local storage.\n     */\n\n    private handleSoundVolume(): void {\n        this.game.storage.setSoundVolume(this.soundSlider.valueAsNumber);\n    }\n\n    /**\n     * Handler for the brightness slider when it undergoes a change. Relays\n     * to both the renderer and the storage system that an update has commenced.\n     */\n\n    private handleBrightness(): void {\n        this.game.storage.setBrightness(this.brightnessSlider.valueAsNumber);\n        this.game.renderer.setBrightness(this.brightnessSlider.valueAsNumber);\n    }\n\n    /**\n     * Handler for when the sound checkbox is toggled.\n     */\n\n    private handleAudioEnabled(): void {\n        this.game.storage.setAudioEnabled(this.audioEnabledCheckbox.checked);\n        this.game.audio.updateVolume();\n    }\n\n    /**\n     * Handler for when the low power checkbox is toggled.\n     */\n\n    private handleLowPower(): void {\n        this.game.storage.setLowPowerMode(this.lowPowerCheckbox.checked);\n\n        this.game.renderer.animateTiles = !this.lowPowerCheckbox.checked;\n\n        if (this.lowPowerCheckbox.checked) this.game.camera.decenter();\n        else {\n            // Force camera to recenter on the player.\n            this.game.camera.center();\n            this.game.camera.centreOn(this.game.player);\n            this.game.renderer.updateAnimatedTiles();\n        } // Remove the camera from the player.\n    }\n\n    /**\n     * Handler for when the debug checkbox is toggled.\n     */\n\n    private handleDebug(): void {\n        this.game.storage.setDebug(this.debugCheckbox.checked);\n        this.game.renderer.debugging = this.debugCheckbox.checked;\n    }\n\n    /**\n     * Handler for when the name checkbox is toggled.\n     */\n\n    private handleName(): void {\n        this.game.storage.setShowNames(this.showNamesCheckbox.checked);\n        this.game.renderer.drawNames = this.showNamesCheckbox.checked;\n    }\n\n    /**\n     * Handler for when the level checkbox is toggled.\n     */\n\n    private handleLevel(): void {\n        this.game.storage.setShowLevels(this.showLevelsCheckbox.checked);\n        this.game.renderer.drawLevels = this.showLevelsCheckbox.checked;\n    }\n\n    /**\n     * Disables the region caching checkbox.\n     */\n\n    private handleCaching(): void {\n        this.game.storage.setDisableCaching(this.disableCachingCheckbox.checked);\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type { Bonuses, Stats } from '@kaetram/common/types/item';\nimport type SpritesController from '../controllers/sprites';\nimport type Player from '../entity/character/player/player';\n\ntype UnequipCallback = (type: Modules.Equipment) => void;\n\nexport default class Equipments extends Menu {\n    // Player image elements\n    private playerArmour: HTMLElement = document.querySelector('#player-image-armour')!;\n    private playerWeapon: HTMLElement = document.querySelector('#player-image-weapon')!;\n\n    // Equipment slots elements\n    private weapon: HTMLElement = document.querySelector('.equip-weapon-slot')!;\n    private weaponSkin: HTMLElement = document.querySelector('.equip-weapon-skin-slot')!;\n    private armour: HTMLElement = document.querySelector('.equip-armour-slot')!;\n    private armourSkin: HTMLElement = document.querySelector('.equip-armour-skin-slot')!;\n    private pendant: HTMLElement = document.querySelector('.equip-pendant-slot')!;\n    private ring: HTMLElement = document.querySelector('.equip-ring-slot')!;\n    private boots: HTMLElement = document.querySelector('.equip-boots-slot')!;\n    private arrow: HTMLElement = document.querySelector('.equip-arrows-slot')!;\n\n    // Counts\n    private arrowsCount: HTMLElement = document.querySelector('#arrows-count')!;\n\n    // Navigation elements\n    private previous: HTMLElement = document.querySelector('#player-image-navigator > .previous')!;\n    private next: HTMLElement = document.querySelector('#player-image-navigator > .next')!;\n\n    // Stats elements\n    private attackStats: HTMLElement = document.querySelector('#attack-stats')!;\n    private defenseStats: HTMLElement = document.querySelector('#defense-stats')!;\n    private bonuses: HTMLElement = document.querySelector('#bonuses')!;\n\n    // Class properties\n    private imageOrientation: Modules.Orientation = Modules.Orientation.Down;\n\n    private unequipCallback?: UnequipCallback;\n\n    public constructor(private player: Player, private sprites: SpritesController) {\n        super('#equipments', '#close-equipments', '#equipment-button');\n\n        // Navigation event listeners.\n        this.previous.addEventListener('click', () => this.handleNavigation('previous'));\n        this.next.addEventListener('click', () => this.handleNavigation('next'));\n\n        // Equipment slot event listeners -- definitely not stolen from the state page :)\n        this.weapon.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Weapon)\n        );\n        this.weaponSkin.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.WeaponSkin)\n        );\n        this.armour.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Armour)\n        );\n        this.armourSkin.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.ArmourSkin)\n        );\n        this.pendant.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Pendant)\n        );\n        this.ring.addEventListener('click', () => this.unequipCallback?.(Modules.Equipment.Ring));\n        this.boots.addEventListener('click', () => this.unequipCallback?.(Modules.Equipment.Boots));\n        this.arrow.addEventListener('click', () =>\n            this.unequipCallback?.(Modules.Equipment.Arrows)\n        );\n    }\n\n    /**\n     * Synchronizes the equipment screen with the player's equipment data.\n     */\n\n    public override synchronize(): void {\n        this.loadStats();\n        this.loadPlayerImage();\n\n        // Synchronize equipment data\n        this.weapon.style.backgroundImage = Util.getImageURL(this.player.getWeapon().key);\n        this.weaponSkin.style.backgroundImage = Util.getImageURL(this.player.getWeaponSkin().key);\n        // Cloth armour shouldn't be displayed in the UI.\n        this.armour.style.backgroundImage = Util.getImageURL(\n            this.player.getArmour().key === 'clotharmor' ? '' : this.player.getArmour().key\n        );\n        this.armourSkin.style.backgroundImage = Util.getImageURL(this.player.getArmourSkin().key);\n        this.pendant.style.backgroundImage = Util.getImageURL(this.player.getPendant().key);\n        this.ring.style.backgroundImage = Util.getImageURL(this.player.getRing().key);\n        this.boots.style.backgroundImage = Util.getImageURL(this.player.getBoots().key);\n        this.arrow.style.backgroundImage = Util.getImageURL(this.player.getArrows().key);\n\n        // Synchronize arrow count\n        let arrowCount = this.player.getArrows().count;\n\n        this.arrowsCount.innerHTML = arrowCount < 1 ? '' : `+${arrowCount}`;\n    }\n\n    /**\n     * Reload the image every time we resize the screen.\n     */\n\n    public override resize(): void {\n        this.loadPlayerImage();\n    }\n\n    /**\n     * Handles the navigation arrows. We just change the orientation and then update the player image.\n     */\n\n    private handleNavigation(direction: 'next' | 'previous'): void {\n        let orientations = [\n                Modules.Orientation.Left,\n                Modules.Orientation.Up,\n                Modules.Orientation.Right,\n                Modules.Orientation.Down\n            ],\n            index = orientations.indexOf(this.imageOrientation);\n\n        switch (direction) {\n            case 'previous': {\n                index = index === 0 ? orientations.length - 1 : index - 1;\n                break;\n            }\n\n            case 'next': {\n                index = index === orientations.length - 1 ? 0 : index + 1;\n                break;\n            }\n        }\n\n        this.imageOrientation = orientations[index];\n\n        this.loadPlayerImage();\n    }\n\n    /**\n     * Adds up all the attack, defense, and bonuses from all the equipments and displays them.\n     */\n\n    private loadStats(): void {\n        let attackStats: Stats = Util.getEmptyStats(),\n            defenseStats: Stats = Util.getEmptyStats(),\n            bonuses: Bonuses = Util.getEmptyBonuses();\n\n        // iterate through all the equipments and add up the stats.\n        for (let equipment of Object.values(this.player.equipments)) {\n            if (!equipment.exists()) continue;\n\n            attackStats.crush += equipment.attackStats.crush;\n            attackStats.slash += equipment.attackStats.slash;\n            attackStats.stab += equipment.attackStats.stab;\n            attackStats.archery += equipment.attackStats.archery;\n            attackStats.magic += equipment.attackStats.magic;\n\n            defenseStats.crush += equipment.defenseStats.crush;\n            defenseStats.slash += equipment.defenseStats.slash;\n            defenseStats.stab += equipment.defenseStats.stab;\n            defenseStats.archery += equipment.defenseStats.archery;\n            defenseStats.magic += equipment.defenseStats.magic;\n\n            bonuses.accuracy += equipment.bonuses.accuracy;\n            bonuses.strength += equipment.bonuses.strength;\n            bonuses.archery += equipment.bonuses.archery;\n            bonuses.magic += equipment.bonuses.magic;\n        }\n\n        let stats = ['Crush', 'Slash', 'Stab', 'Archery', 'Magic'],\n            statBonuses = ['Accuracy', 'Strength', 'Archery', 'Magic'];\n\n        for (let stat of stats) {\n            let lStat = stat.toLowerCase(),\n                attackElement = this.attackStats.querySelector(`.${lStat.toLowerCase()}`)!,\n                defenseElement = this.defenseStats.querySelector(`.${lStat.toLowerCase()}`)!,\n                attackStat = attackStats[lStat as keyof Stats],\n                defenseStat = defenseStats[lStat as keyof Stats];\n\n            attackElement.textContent = `${stat}: ${attackStat > 0 ? '+' : ''}${attackStat}`;\n            defenseElement.textContent = `${stat}: ${defenseStat > 0 ? '+' : ''}${defenseStat}`;\n        }\n\n        for (let bonus of statBonuses) {\n            let lBonus = bonus.toLowerCase(),\n                bonusElement = this.bonuses.querySelector(`.${lBonus.toLowerCase()}`)!,\n                bonusStat = bonuses[lBonus as keyof Bonuses];\n\n            bonusElement.textContent = `${bonus}: ${bonusStat > 0 ? '+' : ''}${bonusStat}`;\n        }\n    }\n\n    /**\n     * Prepares the player image that is displayed in the equipment screen. We pick both the\n     * armour and the weapon and overlay them on top of each other.\n     */\n\n    private loadPlayerImage(): void {\n        let armourUrl = `url(\"/img/sprites/${this.player.getArmour().key}.png\")`,\n            armourSprite = this.player.sprite,\n            isFlipped = this.imageOrientation === Modules.Orientation.Left,\n            index = this.getOrientationIndex();\n\n        if (!armourSprite) return;\n\n        // Set the player armour sprite.\n        this.playerArmour.style.backgroundImage = armourUrl;\n        this.playerArmour.style.backgroundPosition = `0 -${index * armourSprite.height}px`;\n\n        /**\n         * If the player has a weapon we do some fancy math, otherwise we remove the weapon\n         * element's background image.\n         */\n\n        if (this.player.hasWeapon()) {\n            let weaponUrl = `url(\"/img/sprites/${this.player.getWeapon().key}.png\")`,\n                weaponSprite = this.sprites.get(this.player.getWeapon().key),\n                offsetX = Math.floor(weaponSprite.offsetX / 2),\n                offsetY = Math.floor(weaponSprite.offsetY / 2);\n\n            // Since weapons have varying widths and heights, we update every time we load the image.\n            this.playerWeapon.style.width = `${weaponSprite.width}px`;\n            this.playerWeapon.style.height = `${weaponSprite.height}px`;\n\n            // Offset by the sprite x and y offsets\n            this.playerWeapon.style.marginLeft = `${offsetX}px`;\n            this.playerWeapon.style.marginTop = `${offsetY}px`;\n\n            // Set the background image and position.\n            this.playerWeapon.style.backgroundImage = weaponUrl;\n            this.playerWeapon.style.backgroundPosition = `0 -${index * weaponSprite.height}px`;\n        } else this.playerWeapon.style.backgroundImage = 'none';\n\n        // Flip the player image if we are rendering the right orientation.\n        this.playerArmour.style.transform = `scaleX(${isFlipped ? -1 : 1})`;\n        this.playerWeapon.style.transform = `scaleX(${isFlipped ? -1 : 1})`;\n    }\n\n    /**\n     * Orientation grabs the y frame index of the sprite in its sprite sheet. The left and right\n     * orientations are the same since we just flip the sprite.\n     * @returns A number representing the y frame index of the sprite in its sprite sheet.\n     */\n\n    private getOrientationIndex(): number {\n        switch (this.imageOrientation) {\n            case Modules.Orientation.Left:\n            case Modules.Orientation.Right: {\n                return 1;\n            }\n\n            case Modules.Orientation.Up: {\n                return 4;\n            }\n\n            case Modules.Orientation.Down: {\n                return 7;\n            }\n        }\n    }\n\n    /**\n     * Callback for when we click on an equipment slot.\n     * @param callback Contains the slot type we are selecting.\n     */\n\n    public onUnequip(callback: UnequipCallback): void {\n        this.unequipCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport { Opcodes } from '@kaetram/common/network';\n\nimport type Player from '../entity/character/player/player';\nimport type Task from '../entity/character/player/task';\n\nexport default class Achievements extends Menu {\n    // List where all the achievement objects are contained.\n    private list: HTMLUListElement = document.querySelector('#achievements-container > ul')!;\n\n    public constructor(private player: Player) {\n        super('#achievements', '#close-achievements', '#achievements-button');\n    }\n\n    /**\n     * We use the opcode from the achievement packet in order to determine what we are doing. If a batch\n     * opcode is received then we create the list. Otherwise we extract the id of the achievement and update\n     * it individually.\n     */\n\n    public handle(opcode: Opcodes.Achievement, key?: string): void {\n        // Handle achievement batch creation.\n        if (opcode === Opcodes.Achievement.Batch) {\n            for (let key in this.player.achievements)\n                this.createAchievement(this.player.achievements[key], key);\n\n            return;\n        }\n\n        // Grab the task by key from the player. This will have been recently updated.\n        let task = this.player.achievements[key!];\n\n        // No task found.\n        if (!task) return;\n\n        // Secret tasks don't exist until they are discovered.\n        if (task.secret) return this.createAchievement(task, key!);\n\n        // Update the achievement element.\n        this.update(this.list.children[task.id] as HTMLLIElement, task);\n    }\n\n    /**\n     * Creates an achievement based on the task object provided. A task object is used\n     * for either quests or achievements. In this case we are only using it for achievements.\n     * @param task Contains information about the achievement we are creating.\n     * @param key The key of the achievement we are creating.\n     * @returns A list element containing the achievement information.\n     */\n\n    private createAchievement(task: Task, key: string): void {\n        let element = document.createElement('li'),\n            coin = document.createElement('div'),\n            title = document.createElement('p'),\n            description = document.createElement('p');\n\n        // Adds the achievement element styling.\n        element.classList.add('achievement-element');\n\n        // Adds the classes for achievement title styling.\n        title.classList.add('stroke');\n        title.classList.add('achievement-title');\n\n        // Adds the classes for achievement description.\n        description.classList.add('achievement-description');\n\n        /**\n         * We add the achievement task information onto the title and description upon\n         * creating the element. If the task is completed then the name and description\n         * will display, otherwise question marks will appear.\n         */\n\n        title.innerHTML = task.name;\n        description.innerHTML = task.description;\n\n        // Add the title and description elements onto the achievement element.\n        element.append(title);\n        element.append(description);\n\n        if (task.isFinished()) {\n            // Title is displayed as gold if the achievement is completed.\n            title.style.color = '#fcda1d';\n\n            // Styling for the coin element.\n            coin.classList.add('coin', task.secret ? `coin-${key}` : 'coin-default');\n\n            // Add the coin element.\n            element.prepend(coin);\n        } else if (task.isStarted())\n            // Create and add the progress to the achievement element.\n            element.append(this.createProgress(task));\n\n        this.list.append(element);\n    }\n\n    /**\n     * Creates a progress text element in the bottom-right corner of the achievement element.\n     * @param task Task we are using the base the progress off of.\n     * @returns A paragraph element containing the progress information.\n     */\n\n    private createProgress(task: Task): HTMLElement {\n        let progress = document.createElement('p');\n\n        // Add styling to the progress.\n        progress.classList.add('stroke');\n        progress.classList.add('achievement-progress');\n\n        // Hide the progress if task is not started and we are creating a progress object anyway.\n        progress.innerHTML = task.isStarted() ? `${task.stage - 1}/${task.stageCount - 1}` : '';\n\n        return progress;\n    }\n\n    /**\n     * Updates a specified element with the task information provided.\n     * @param element Element we are updating.\n     * @param task Task information we are using to update the element.\n     */\n\n    private update(element: HTMLLIElement, task: Task): void {\n        let title = element.querySelector<HTMLElement>('.achievement-title')!,\n            description = element.querySelector<HTMLElement>('.achievement-description')!,\n            progress = element.querySelector<HTMLElement>('.achievement-progress')!;\n\n        /**\n         * Synchronize the information from the task with that\n         * of the achievement element.\n         */\n\n        title.innerHTML = task.name;\n        description.innerHTML = task.description;\n\n        if (task.isFinished()) {\n            // Title is displayed as gold if the achievement is completed.\n            title.style.color = '#fcda1d';\n\n            // Remove the progression element.\n            progress?.remove();\n\n            // Styling for the coin element.\n            let coin = document.createElement('div');\n\n            coin.classList.add('coin');\n            coin.classList.add('coin-default');\n\n            // Add the coin element to the beginning of the children list.\n            element.prepend(coin);\n        } else {\n            // Title is displayed as white if the achievement is not completed.\n            title.style.color = '#fff';\n\n            // Remove the coin element.\n            let coin = element.querySelector('.coin')!;\n\n            coin?.remove();\n\n            // No progress element found.\n            if (progress)\n                progress.innerHTML = task.isStarted()\n                    ? `${task.stage - 1}/${task.stageCount - 1}`\n                    : '';\n            else {\n                progress = this.createProgress(task);\n                element.append(progress);\n            }\n        }\n    }\n}\n","import Menu from './menu';\n\nimport { Opcodes } from '@kaetram/common/network';\n\nimport type Player from '../entity/character/player/player';\nimport type Task from '../entity/character/player/task';\n\nexport default class Quests extends Menu {\n    // Contains the list of all the quests and their respective status.\n    private list: HTMLUListElement = document.querySelector('#quests-container > ul')!;\n\n    // Contains information about a selected quest.\n    private title: HTMLElement = document.querySelector('#quest-log-title')!;\n    private shortDescription: HTMLElement = document.querySelector('#quest-log-shortdesc')!;\n    private description: HTMLElement = document.querySelector('#quest-log-description')!;\n    private rewards: HTMLElement = document.querySelector('#quest-log-rewards')!;\n\n    public constructor(private player: Player) {\n        super('#quests', '#close-quests', '#quests-button');\n    }\n\n    /**\n     * Handles the incoming packets from the server and synchronizes the quest list.\n     * @param opcode Type of action we are performing on the quest list.\n     * @param key Optional parameter passed when a quest progresses.\n     */\n\n    public handle(opcode: Opcodes.Quest, key = ''): void {\n        switch (opcode) {\n            case Opcodes.Quest.Batch: {\n                for (let quest of Object.values(this.player.quests)) this.createElement(quest);\n\n                break;\n            }\n\n            case Opcodes.Quest.Progress: {\n                return this.handleProgress(key);\n            }\n        }\n\n        this.buildLog(this.player.quests.tutorial);\n    }\n\n    /**\n     * Updates the progress of a quest.\n     * @param key Used for identifying the quest.\n     */\n\n    private handleProgress(key: string): void {\n        if (!key) return;\n\n        let quest = this.player.quests[key];\n\n        if (!quest) return;\n\n        let element = this.list.children[quest.id],\n            nameElement = element.querySelector('p')!;\n\n        if (!nameElement) return;\n\n        nameElement.classList.remove('green', 'yellow');\n\n        // Update colours of the name relative to its completion\n        if (quest.isFinished()) nameElement.classList.add('green');\n        else if (quest.isStarted()) nameElement.classList.add('yellow');\n    }\n\n    /**\n     * Creates a quest element and adds it to the list.\n     * @param questName The name of the quest.\n     */\n\n    private createElement(quest: Task): void {\n        let element = document.createElement('li'),\n            name = document.createElement('p');\n\n        // Add the slot class to the element.\n        element.classList.add('container-slot');\n\n        // Add styling to the friend name element.\n        name.classList.add('stroke');\n\n        // Set the quest name.\n        name.innerHTML = quest.name;\n\n        // Update colours of the name relative to its completion\n        if (quest.isFinished()) name.classList.add('green');\n        else if (quest.isStarted()) name.classList.add('yellow');\n\n        // Add the name element to the element.\n        element.append(name);\n\n        this.list.append(element);\n\n        element.addEventListener('click', () => this.buildLog(quest));\n    }\n\n    /**\n     * Uses the information from the quest to create the quest description.\n     * @param quest The quest we are using to build the log.\n     */\n\n    private buildLog(quest: Task): void {\n        let [shortDescription, description] = quest.description.split('|');\n\n        this.title.innerHTML = quest.name;\n        this.shortDescription.innerHTML = shortDescription;\n        this.description.innerHTML = description;\n\n        if (quest.rewards) this.rewards.innerHTML = quest.rewards.join('<br>');\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\nimport { isLargeScreen } from '../utils/detect';\n\nimport { Opcodes } from '@kaetram/common/network';\n\nimport type Player from '../entity/character/player/player';\n\ntype ConfirmCallback = (username: string, remove?: boolean) => void;\n\nexport default class Friends extends Menu {\n    private page: HTMLDivElement = document.querySelector('#friends-page')!;\n\n    // List where we store all the friends.\n    private list: HTMLUListElement = document.querySelector('#friends-page > ul')!;\n\n    // Primary buttons (for adding and removing friends).\n    private addButton: HTMLButtonElement = document.querySelector('#add-friend')!;\n    private removeButton: HTMLButtonElement = document.querySelector('#remove-friend')!;\n\n    // Popup-related input and buttons.\n    private input: HTMLInputElement = document.querySelector('#popup-friend-input')!;\n    private confirm: HTMLButtonElement = document.querySelector('#popup-friend-confirm')!;\n    private cancel: HTMLButtonElement = document.querySelector('#popup-friend-cancel')!;\n\n    // Popup element\n    private popup: HTMLDivElement = document.querySelector('#popup-container')!;\n\n    // Callbacks\n    private confirmCallback?: ConfirmCallback;\n    private messageCallback?: (username: string) => void;\n\n    // Booleans\n    private popupActive = false;\n    private removeActive = false;\n\n    public constructor(private player: Player) {\n        super('#friends-container', undefined, '#friends-button');\n\n        this.addButton.addEventListener('click', () => this.showPopup());\n        this.removeButton.addEventListener('click', () => this.showPopup(true));\n\n        this.confirm.addEventListener('click', this.handleConfirm.bind(this));\n        this.cancel.addEventListener('click', this.hidePopup.bind(this));\n    }\n\n    public override resize(): void {\n        for (let key in this.player.friends) {\n            let friend = this.player.friends[key],\n                element = this.list.children[friend.id];\n\n            if (!element) return;\n\n            let name = element.children[0] as HTMLElement,\n                maxLength = this.getMaxLength();\n\n            if (friend.username.length > maxLength)\n                name.innerHTML = `${friend.username.slice(0, maxLength)}...`;\n        }\n    }\n\n    /**\n     * Function is called whenever we receive the initial friend list or subsequent\n     * updates from the server regarding adding, removing, or status changes.\n     * @param opcode The type of action we are handling.\n     * @param username (Only for add/remove/update) The username of the friend we are handling.\n     * @param status (Only for add/update) The world that the friend is in.\n     */\n\n    public handle(opcode: Opcodes.Friends, username = '', status = false, serverId = -1): void {\n        switch (opcode) {\n            case Opcodes.Friends.List: {\n                for (let friend of Object.values(this.player.friends))\n                    this.createElement(friend.username, friend.online, friend.serverId);\n\n                break;\n            }\n\n            case Opcodes.Friends.Add: {\n                return this.createElement(username, status, serverId);\n            }\n\n            case Opcodes.Friends.Remove: {\n                return this.removeElement(username);\n            }\n\n            case Opcodes.Friends.Status: {\n                return this.updateStatus(username, status, serverId);\n            }\n        }\n    }\n\n    /**\n     * Uses the input field to add a friend and sends a packet to the server.\n     */\n\n    private handleConfirm(): void {\n        let username = this.input.value,\n            remove = this.removeActive; // Before we clear its status.\n\n        // Clear the input field.\n        this.input.value = '';\n\n        // Hide the popup.\n        this.hidePopup();\n\n        // Client-sided sanitization for the input field.\n        if (!username || username.length > 32) return;\n\n        // Send the packet to the server.\n        this.confirmCallback?.(username, remove);\n    }\n\n    /**\n     * Event handler for when the user clicks on a friend's name.\n     */\n\n    private handleMessage(username: string): void {\n        if (!this.player.friends[username].online) return;\n\n        this.messageCallback?.(username);\n    }\n\n    /**\n     * Handles the keydown event for the friends menu.\n     * @param key The key that was pressed.\n     */\n\n    public keyDown(key: string): void {\n        if (key === 'Escape') this.hidePopup();\n        if (key === 'Enter' && this.input.value !== '') this.handleConfirm();\n    }\n\n    /**\n     * Show the popup and dim the background.\n     */\n\n    private showPopup(remove = false): void {\n        this.popupActive = true;\n        this.removeActive = remove;\n\n        this.input.placeholder = remove ? 'Enter name to remove...' : 'Enter name to add...';\n\n        Util.fadeIn(this.popup);\n\n        this.page.classList.add('dimmed');\n\n        this.input.focus();\n    }\n\n    /**\n     * Hide the popup and remove the dim from the background.\n     */\n\n    private hidePopup(): void {\n        this.popupActive = false;\n        this.removeActive = false;\n\n        Util.fadeOut(this.popup);\n\n        this.page.classList.remove('dimmed');\n    }\n\n    /**\n     * Creates a mew HTML element for the friend slot.\n     * @param username The username of the friend.\n     */\n\n    private createElement(username: string, online = false, serverId = -1): void {\n        let element = document.createElement('li'),\n            name = document.createElement('p'),\n            world = document.createElement('p');\n\n        // Add styling to the friend slot element.\n        element.classList.add('container-slot');\n\n        // Add styling to the friend name element.\n        name.classList.add('stroke', 'left');\n\n        // Add styling to the world element.\n        world.classList.add('stroke', 'right');\n\n        // If the friend is online, add the online class (makes the username green).\n        if (online) world.classList.add(this.player.serverId === serverId ? 'green' : 'yellow');\n\n        // Set the name of the friend.\n        let maxLength = this.getMaxLength();\n\n        if (username.length > maxLength) username = `${username.slice(0, maxLength)}...`;\n\n        name.innerHTML = Util.formatName(username);\n\n        // Update the world information.\n        world.innerHTML = online ? `World ${serverId}` : 'Offline';\n\n        // Add the name element to the friend slot element.\n        element.append(name, world);\n\n        // Add the friend slot element to the friend list.\n        this.list.append(element);\n\n        element.addEventListener('click', () => this.handleMessage(username));\n    }\n\n    /**\n     * Grabs the friend from the list of friends and removes the element from the DOM.\n     * @param username The username of the player we are removing.\n     */\n\n    private removeElement(username: string): void {\n        let friend = this.player.friends[username];\n\n        // No friend has been found.\n        if (!friend) return;\n\n        // Remove the friend from the UI list.\n        this.list.children[friend.id].remove();\n\n        // Remove the friend from the player's friend list.\n        delete this.player.friends[username];\n    }\n\n    /**\n     * Grabs the friend from the list of friends and updates the status.\n     * @param username Username of the friend we are updating.\n     * @param online The online status of the friend.\n     * @param serverId The world id that the friend is on.\n     */\n\n    private updateStatus(username: string, online: boolean, serverId: number): void {\n        let friend = this.player.friends[username];\n\n        // No friend has been found.\n        if (!friend) return;\n\n        // Grab the friend's name element.\n        let world = this.list.children[friend.id].children[1] as HTMLParagraphElement;\n\n        // If the friend is online, add the online class (makes the username green).\n        if (online) {\n            world.classList.add(this.player.serverId === serverId ? 'green' : 'yellow');\n            world.innerHTML = `World ${friend.serverId}`;\n        } else {\n            world.classList.remove('green', 'yellow');\n            world.innerHTML = 'Offline';\n        }\n    }\n\n    /**\n     * @returns Whether or not the popup is visible.\n     */\n\n    public isPopupActive(): boolean {\n        return this.popupActive;\n    }\n\n    /**\n     * Large devices can fit more text so we truncate less of the username string.\n     * @returns The maximum length of the username based on the screen size.\n     */\n\n    private getMaxLength(): number {\n        return isLargeScreen() ? 16 : 10;\n    }\n\n    /**\n     * Confirm callback is called whenever the player presses the confirm button.\n     * @param callback Contains the username and the type of action (add/remove).\n     */\n\n    public onConfirm(callback: ConfirmCallback): void {\n        this.confirmCallback = callback;\n    }\n\n    /**\n     * Event handler for when a friend is clicked. Their username is passed to\n     * chat handler.\n     * @param callback Contains username of the friend.\n     */\n\n    public onMessage(callback: (username: string) => void): void {\n        this.messageCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Inventory from './inventory';\nimport type Player from '../entity/character/player/player';\n\ninterface PlayerSlot extends HTMLElement {\n    inventoryIndex?: number;\n}\n\ntype SelectCallback = (type: Modules.ContainerType, index: number, count?: number) => void;\n\nexport default class Trade extends Menu {\n    public override hideOnShow = false;\n\n    private inventoryList: HTMLUListElement = document.querySelector(\n        '#trade-inventory-slots > ul'\n    )!;\n\n    // Where we visually display the changes to the trade.\n    private playerSlots: HTMLUListElement = document.querySelector('#trade-player-slots > ul')!;\n    private otherPlayerSlots: HTMLUListElement = document.querySelector(\n        '#trade-oplayer-slots > ul'\n    )!;\n\n    private playerName: HTMLElement = document.querySelector('#trade-player-name')!;\n    private otherPlayerName: HTMLElement = document.querySelector('#trade-oplayer-name')!;\n    private tradeStatus: HTMLElement = document.querySelector('#trade-status')!;\n\n    private acceptButton: HTMLButtonElement = document.querySelector('#trade-accept')!;\n\n    // Trade count dialog elements\n    public tradeDialog: HTMLElement = document.querySelector('#trade-count')!;\n    private tradeCount: HTMLInputElement = document.querySelector('#trade-count .dialog-count')!;\n    private tradeCountAccept: HTMLElement = document.querySelector('#trade-count .dialog-accept')!;\n    private tradeCountCancel: HTMLElement = document.querySelector('#trade-count .dialog-cancel')!;\n\n    private inventoryIndex = -1; // Index of the inventory slot that was last selected.\n\n    private selectCallback?: SelectCallback;\n    private acceptCallback?: () => void;\n    private closeCallback?: () => void;\n\n    public constructor(private inventory: Inventory) {\n        super('#trade-container', undefined, '#close-trade');\n\n        this.load();\n\n        // Send the accept callback when the accept button is clicked.\n        this.acceptButton.addEventListener('click', () => this.acceptCallback?.());\n\n        // Send the trade count when the accept button is clicked.\n        this.tradeCountAccept.addEventListener('click', () => this.sendTradeAmount());\n\n        // Close the trade count dialog when the cancel button is clicked.\n        this.tradeCountCancel.addEventListener('click', () => this.hideTradeAmountDialog());\n    }\n\n    /**\n     * Loads the empty inventory slots based on the size of the inventory.\n     * Creates an event listener for each slot that directs to `select()`.\n     */\n\n    public load(): void {\n        for (let i = 0; i < Modules.Constants.INVENTORY_SIZE; i++) {\n            // Inventory slots\n            this.inventoryList.append(\n                Util.createSlot(\n                    Modules.ContainerType.Inventory,\n                    i,\n                    this.select.bind(this),\n                    this.showTradeAmountDialog.bind(this)\n                )\n            );\n\n            // Player slots\n            this.playerSlots.append(\n                Util.createSlot(Modules.ContainerType.Trade, i, this.select.bind(this))\n            );\n\n            // Other player slots\n            this.otherPlayerSlots.append(Util.createSlot(Modules.ContainerType.Trade, i));\n        }\n    }\n\n    /**\n     * Handles pressing down a key while the dialogue is open. We redirect any keys\n     * from the keyboard into this class when the dialogue is open.\n     * @param key The key that was pressed.\n     */\n\n    public keyDown(key: string): void {\n        switch (key) {\n            case 'Escape': {\n                return this.hideTradeAmountDialog();\n            }\n\n            case 'Enter': {\n                return this.sendTradeAmount();\n            }\n        }\n    }\n\n    /**\n     * Synchronizes the slot data between the store and the inventory.\n     */\n\n    public override synchronize(): void {\n        if (!this.isVisible()) return;\n\n        this.inventory.forEachSlot((index: number, slot: HTMLElement) => {\n            let image = this.getElement(index).querySelector<HTMLElement>('.item-image')!,\n                count = this.getElement(index).querySelector<HTMLElement>('.item-count')!,\n                slotImage = slot.querySelector<HTMLElement>('.item-image')!;\n\n            if (!slotImage) return;\n\n            image.style.backgroundImage = slotImage.style.backgroundImage;\n            count.textContent = slot.textContent;\n        });\n    }\n\n    /**\n     * Override for the show method where we use information from the two players\n     * participating in the trading action to update the user interface.\n     * @param player The primary player (from our perspective) who is trading.\n     * @param otherPlayer The other player. For the other player, our player is the other player.\n     */\n\n    public override show(player: Player, otherPlayer: Player): void {\n        super.show();\n\n        this.synchronize();\n\n        // Update the player names\n        this.playerName.textContent = player.name;\n        this.otherPlayerName.textContent = otherPlayer.name;\n    }\n\n    /**\n     * Called when the player closes the trade menu.\n     * @param ignoreCallback Whether or not to ignore the close callback.\n     */\n\n    public override hide(ignoreCallback = false): void {\n        super.hide();\n\n        if (!ignoreCallback) this.closeCallback?.();\n\n        this.clearAll();\n\n        this.inventoryIndex = -1;\n        this.tradeStatus.innerHTML = '';\n    }\n\n    /**\n     * Adds an item to the trade menu.\n     * @param index The index of the item being added (if it is the current player adding the item).\n     * @param count The amount of the item being added.\n     * @param key The key of the item being added (if we are adding item of other player).\n     */\n\n    public override add(index: number, count: number, key: string, otherPlayer = false): void {\n        let slot = otherPlayer\n                ? this.otherPlayerSlots.children[index]\n                : this.playerSlots.children[index],\n            image = slot.querySelector<HTMLElement>('.item-image')!,\n            slotCount = slot.querySelector<HTMLElement>('.item-count')!;\n\n        // Reset the trade status when an update occurs\n        this.tradeStatus.innerHTML = '';\n        // Update the icon of the item that is being added.\n        image.style.backgroundImage = otherPlayer\n            ? Util.getImageURL(key)\n            : this.getElementImage(this.inventoryIndex);\n\n        // Update the count of the item that is being added.\n        slotCount.innerHTML = count > 1 ? Util.getCount(count) : '';\n\n        if (!otherPlayer) {\n            let itemCount = this.getElement(this.inventoryIndex).querySelector<HTMLElement>(\n                    '.item-count'\n                )!,\n                actualCount = this.inventory.getCount(this.inventoryIndex) - count;\n\n            // Store the inventory slot into the trade slot if it is the current player adding the item.\n            (slot as PlayerSlot).inventoryIndex = this.inventoryIndex;\n\n            // Remove the item if the count is lesser than 0 (we moved everything to the trade menu).\n            if (isNaN(actualCount) || actualCount < 1) return this.clearSlot(this.inventoryIndex);\n\n            // Update the remaining count of the item in the inventory.\n            itemCount.innerHTML = Util.getCount(actualCount);\n        }\n    }\n\n    /**\n     * Remove an item from the trade menu.\n     * @param index The index of the slot to remove the item from.\n     * @param otherPlayer Whether we are removing from the other player's trade menu.\n     */\n\n    public override remove(index: number, otherPlayer = false): void {\n        let slot = otherPlayer\n                ? this.otherPlayerSlots.children[index]\n                : this.playerSlots.children[index],\n            image = slot.querySelector<HTMLElement>('.item-image')!,\n            slotCount = slot.querySelector<HTMLElement>('.item-count')!;\n\n        // Add the item back into the inventory.\n        if (!otherPlayer) {\n            let inventoryIndex = (slot as PlayerSlot).inventoryIndex!;\n\n            this.setSlot(\n                inventoryIndex,\n                image.style.backgroundImage,\n                this.inventory.getCount(inventoryIndex)\n            );\n        }\n\n        // Clear the image and count of the slot.\n        image.style.backgroundImage = '';\n        slotCount.innerHTML = '';\n\n        this.tradeStatus.innerHTML = '';\n\n        this.inventoryIndex = -1;\n    }\n\n    /**\n     * Handles clicking the accept in the trade count dialog popup. Ensures the trade count\n     * is valid (client-sided) and then sends the trade amount to the server by creating a callback.\n     */\n\n    public sendTradeAmount(): void {\n        let count = this.tradeCount.valueAsNumber;\n\n        if (count < 1) return;\n\n        this.select(Modules.ContainerType.Inventory, this.inventoryIndex, count);\n\n        this.hideTradeAmountDialog();\n    }\n\n    /**\n     * Hides the description and shows the trade count dialog. Also\n     * focuses on the input field for the trade count dialog.\n     */\n\n    public showTradeAmountDialog(_type: Modules.ContainerType, index: number): void {\n        this.inventoryIndex = index;\n\n        Util.fadeIn(this.tradeDialog);\n\n        this.inventoryList.classList.add('dimmed');\n\n        this.tradeCount.value = '1';\n        this.tradeCount.focus();\n    }\n\n    /**\n     * Hides the drop dialog and brings back the description info.\n     */\n\n    private hideTradeAmountDialog(): void {\n        Util.fadeOut(this.tradeDialog);\n\n        this.inventoryList.classList.remove('dimmed');\n    }\n\n    /**\n     * Visually updates the text information in the trade with\n     * the information received from the server.\n     */\n\n    public accept(message?: string): void {\n        this.tradeStatus.innerHTML = message || '';\n    }\n\n    /**\n     * Initializes the selection process. A callback is created so that\n     * the menu controller can send specified request to the server.\n     * @param type Which container is being acted on (inventory or bank).\n     * @param index The index of the item being acted on.\n     */\n\n    private select(type: Modules.ContainerType, index: number, count?: number): void {\n        this.inventoryIndex = index;\n\n        this.selectCallback?.(type, index, count);\n    }\n\n    /**\n     * Grabs the HTMLElement at a specified index within the\n     * inventory slot list.\n     * @param index The index of the element to grab.\n     * @returns The HTMLElement at the specified index.\n     */\n\n    private getElement(index: number): HTMLElement {\n        return this.inventoryList.children[index].querySelector('div') as HTMLElement;\n    }\n\n    /**\n     * Grabs the item image of a specified slot.\n     * @param index The index of the slot to grab the image from.\n     * @returns The string of the css `backgroundImage` property.\n     */\n\n    private getElementImage(index: number): string {\n        let slot = this.getElement(index),\n            image = slot.querySelector<HTMLElement>('.item-image')!;\n\n        return image.style.backgroundImage;\n    }\n\n    /**\n     * @returns Whether or not the actions menu has the drop dialog visible.\n     */\n\n    public isInputDialogueVisible(): boolean {\n        return this.tradeDialog.style.display === 'block';\n    }\n\n    /**\n     * Clears a slot of the inventory at a specified index.\n     * @param index The slot in the inventory that we are clearing.\n     */\n\n    private clearSlot(index: number): void {\n        let slot = this.getElement(index),\n            image = slot.querySelector<HTMLElement>('.item-image')!,\n            count = slot.querySelector<HTMLElement>('.item-count')!;\n\n        image.style.backgroundImage = '';\n        count.innerHTML = '';\n    }\n\n    /**\n     * Clears both the player's slots and the other player's slots of any images\n     * or item counts that were previously set. This occurs when the trade is finalized.\n     */\n\n    private clearAll(): void {\n        // Clear the player's slots.\n        for (let i of this.playerSlots.children) {\n            let image = i.querySelector<HTMLElement>('.item-image')!,\n                count = i.querySelector<HTMLElement>('.item-count')!;\n\n            image.style.backgroundImage = '';\n            count.innerHTML = '';\n        }\n\n        // Clear the other player's slots.\n        for (let i of this.otherPlayerSlots.children) {\n            let image = i.querySelector<HTMLElement>('.item-image')!,\n                count = i.querySelector<HTMLElement>('.item-count')!;\n\n            image.style.backgroundImage = '';\n            count.innerHTML = '';\n        }\n    }\n\n    /**\n     * Sets the image slot and count at a specified index.\n     * @param index The index we are setting the slot at.\n     * @param image The image background url that we are setting.\n     * @param count The count of the item that we are setting.\n     */\n\n    private setSlot(index: number, image: string, count: number): void {\n        let slot = this.getElement(index),\n            slotImage = slot.querySelector<HTMLElement>('.item-image')!,\n            slotCount = slot.querySelector<HTMLElement>('.item-count')!;\n\n        slotImage.style.backgroundImage = image;\n        slotCount.innerHTML = Util.getCount(count);\n    }\n\n    /**\n     * Callback used for whenever a slot is selected. This is used\n     * by an external controller in order to make requests to the server.\n     * @param callback Contains the type of container that is\n     * being clicked, as well as the index of the slot.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n\n    /**\n     * Callback for when the player clicks the accept button.\n     */\n\n    public onAccept(callback: () => void): void {\n        this.acceptCallback = callback;\n    }\n\n    /**\n     * Callback for when the player closes the trade menu.\n     */\n\n    public onClose(callback: () => void): void {\n        this.closeCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type Player from '../entity/character/player/player';\nimport type Entity from '../entity/entity';\n\nexport default class Interact extends Menu {\n    // Contains the list of actions.\n    private list: HTMLUListElement = document.querySelector('#interact > ul')!;\n\n    private buttonCallback?: (menuAction: Modules.MenuActions) => void;\n    private closeCallback?: () => void;\n\n    public constructor(private player: Player) {\n        super('#interact');\n    }\n\n    /**\n     * Override for the show function. Takes a position as a parameter.\n     * @param position The mouse position (on the screen) where we will display the interact menu.\n     * @param entity The entity that the player is interacting with. Used to determine what actions to display.\n     * @param pvp Whether or not the player is in a pvp zone. Adds attack action to the player entity if true.\n     */\n\n    public override show(position: Position, entity: Entity, pvp = false): void {\n        this.clear();\n\n        let actions: Modules.MenuActions[] = [];\n\n        if (entity.isItem()) actions.push(Modules.MenuActions.Examine);\n\n        // Add attack interactions to all mob entities.\n        if (entity.isMob()) actions.push(Modules.MenuActions.Attack, Modules.MenuActions.Examine);\n\n        // Add the trade and follow interactions to all player entities.\n        if (entity.isPlayer()) {\n            // Use attack if player is in PvP\n            if (pvp) actions.push(Modules.MenuActions.Attack);\n            else actions.push(Modules.MenuActions.Follow);\n\n            // Add the trade action\n            actions.push(Modules.MenuActions.Trade);\n\n            // If we don't have the player added then add the add friend action.\n            if (!this.player.hasFriend(entity.name)) actions.push(Modules.MenuActions.AddFriend);\n        }\n\n        // Add all the actions to the list.\n        for (let action of actions) this.add(action);\n\n        // Display only if there's enough actions.\n        if (actions.length > 0) {\n            let x =\n                    position.x + this.container.offsetWidth > window.innerWidth\n                        ? window.innerWidth - this.container.offsetWidth\n                        : position.x,\n                y =\n                    position.y + this.container.offsetHeight > window.innerHeight\n                        ? window.innerHeight - this.container.offsetHeight\n                        : position.y;\n\n            this.container.style.left = `${x}px`;\n            this.container.style.top = `${y}px`;\n\n            super.show();\n        }\n    }\n\n    /**\n     * Override for the hide function which implements the hide callback.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        this.closeCallback?.();\n    }\n\n    /**\n     * Appends an action element to the list of actions.\n     * @param menuAction Enumeration containing the string text of the action.\n     */\n\n    public override add(menuAction: Modules.MenuActions): void {\n        let element = document.createElement('li');\n\n        // Set the type of action to the button element\n        element.classList.add('action-button', `action-${menuAction}`);\n\n        // Assign an action when the element is clicked.\n        element.addEventListener('click', () => this.buttonCallback!(menuAction));\n\n        this.list.append(element);\n    }\n\n    /**\n     * Removes all the `div` action elements from the list.\n     */\n\n    private clear(): void {\n        this.list.innerHTML = '';\n    }\n\n    /**\n     * Handles the press of one of the interact buttons.\n     * @param callback Contains the button that was pressed.\n     */\n\n    public onButton(callback: (menuAction: Modules.MenuActions) => void): void {\n        this.buttonCallback = callback;\n    }\n\n    /**\n     * Callback for when the interact menu has been hidden.\n     */\n\n    public onClose(callback: () => void): void {\n        this.closeCallback = callback;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type App from '../app';\n\ninterface SearchElement {\n    name: string;\n    key: string | number;\n    type: 'skill' | 'mob' | 'pvp' | '';\n}\n\ninterface ResultInfo {\n    _id: string;\n    experience?: number;\n    kills?: number;\n    cheater?: boolean;\n}\n\nexport default class Leaderboards extends Menu {\n    // Where we show all the possible leaderboards\n    private searchList: HTMLUListElement = document.querySelector('#leaderboards-search')!;\n\n    // Where we display the results from the selected list\n    private resultsList: HTMLUListElement = document.querySelector('#leaderboards-results')!;\n\n    // The search input\n    private search: HTMLInputElement = document.querySelector('#leaderboards-search-input')!;\n\n    // Search elements available (key is the search URL term, value is the name displayed).\n    private searchElements: SearchElement[] = [\n        { name: 'Total Experience', key: '', type: '' },\n        { name: 'PVP Kills', key: 'pvp', type: 'pvp' }\n    ];\n    private availableMobs: { [key: string]: string } = {};\n\n    public constructor(private app: App) {\n        super('#leaderboards', '#close-leaderboards', '#leaderboards-button');\n\n        this.search.addEventListener('input', this.handleInput.bind(this));\n\n        // Append all the skills to the search elements\n        for (let index of Modules.SkillsOrder)\n            this.searchElements.push({ name: Modules.Skills[index], key: index, type: 'skill' });\n\n        // Hub is not enabled, stop here.\n        if (!this.app.config.hub) {\n            this.load();\n            return\n        };\n\n        // Fetch the available mobs from the hub\n        fetch(`${this.app.config.hub}/leaderboards`)\n            .then((response: Response) => response.json())\n            .then((data) => {\n                if (data.availableMobs) {\n                    // Save the available mobs.\n                    this.availableMobs = data.availableMobs;\n\n                    // Append the name of the mobs to the search elements.\n                    for (let mob in this.availableMobs)\n                        this.searchElements.push({\n                            name: this.availableMobs[mob],\n                            key: mob,\n                            type: 'mob'\n                        });\n\n                    this.load();\n                }\n            })\n            .catch((error: Error) => {\n                log.error(error);\n            });\n    }\n\n    /**\n     * Loads the available search elements into an individual object. The object\n     * is then appended to the search list.\n     */\n\n    private load(): void {\n        // Clear the search list\n        this.searchList.innerHTML = '';\n\n        // Create a search element for each search element.\n        for (let element of this.searchElements) this.createSearchElement(element);\n\n        // Select the first element in the list.\n        this.handleSearchElement(this.searchElements[0]);\n    }\n\n    /**\n     * Handler for when the player has inputted something in the search bar. We iterate\n     * through all the elements and if they do not match the inputted text, we hide them.\n     * @param event Contains information about the input event.\n     */\n\n    private handleInput(event: Event): void {\n        let input = (event.target as HTMLInputElement).value.toLowerCase();\n\n        for (let element of this.searchList.children) {\n            let name = element.querySelector('p')!.innerHTML.toLowerCase();\n\n            // Hide the element if it doesn't match the input or unhide it if it does.\n            if (name.includes(input)) (element as HTMLElement).hidden = false;\n            else (element as HTMLElement).hidden = true;\n        }\n    }\n\n    /**\n     * Handles the action of clicking on a search element. We create an API call to the\n     * hub then we update the search list with the results.\n     * @param searchElement The search element that the player has clicked on.\n     */\n\n    private handleSearchElement(searchElement: SearchElement): void {\n        if (!this.app.config.hub) {\n            return;\n        };\n        let url = `${this.app.config.hub}/leaderboards`;\n\n        // If we have a search type then we append that onto the URL.\n        if (searchElement.type) url += `?${searchElement.type}=${searchElement.key}`;\n\n        // Fetch the results from the hub.\n        fetch(url)\n            .then((response: Response) => response.json())\n            .then((data) => {\n                if (!data.list) return log.info('No results found.');\n\n                // Clear the results list.\n                this.resultsList.innerHTML = '';\n\n                // Create a result element for each result.\n                for (let result of data.list)\n                    this.createResultElement(result as ResultInfo, searchElement.type);\n            })\n            .catch((error: Error) => {\n                log.error(error);\n            });\n    }\n\n    /**\n     * Override for the hide function where we also clear the input field.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        // Clear the input field\n        this.search.value = '';\n    }\n\n    /**\n     * Handler for when the player enters a key while the leaderboards menu is\n     * open. We want to prevent keys from activating other menus.\n     * @param key The key that the player is pressing.\n     */\n\n    public keyDown(key: string): void {\n        // Ignore any other keys aside from escape.\n        if (key !== 'Escape') return;\n\n        this.hide();\n    }\n\n    /**\n     * Creates an element in the search menu with the specified name.\n     * @param searchElement Contains information about the element we are creating, we're\n     * also using it to bind the click event.\n     */\n\n    private createSearchElement(searchElement: SearchElement): void {\n        let element = document.createElement('li'),\n            name = document.createElement('p');\n\n        // Add the slot class to the element.\n        element.classList.add('container-slot');\n\n        // Add styling to the friend name element.\n        name.classList.add('stroke', 'white');\n\n        // Set the name of the element.\n        name.innerHTML = searchElement.name;\n\n        // Add the name element to the element.\n        element.append(name);\n\n        // Bind the click event to the element.\n        element.addEventListener('click', () => this.handleSearchElement(searchElement));\n\n        this.searchList.append(element);\n    }\n\n    /**\n     * Creates a result element in the list of results. The result relates to a player\n     * and the description to how much of exp/mob kills they have.\n     * @param result Contains the information of the result element we are creating.\n     * @param type The type of result we are creating (skill or kills) so we can extract necessary info.\n     */\n\n    private createResultElement(result: ResultInfo, type: string): void {\n        let element = document.createElement('li'),\n            name = document.createElement('p'),\n            info = document.createElement('p');\n\n        // Add the slot class to the element.\n        element.classList.add('container-slot-large');\n\n        // Bind the username to the left of the container\n        name.classList.add('stroke', result.cheater ? 'red' : 'white', 'left');\n\n        // Bind the description to the right of the container\n        info.classList.add('stroke', result.cheater ? 'red' : 'white', 'right');\n\n        // Set the name of the element.\n        name.innerHTML = result._id;\n\n        // Set the description of the element.\n        info.innerHTML =\n            type === 'skill' || type === '' ? `${result.experience}` : `${result.kills}`;\n\n        // Add the name element to the element.\n        element.append(name, info);\n\n        // Append the element to the results list.\n        this.resultsList.append(element);\n    }\n}\n","import Menu from './menu';\n\nimport Util from '../utils/util';\n\nimport { Modules, Packets, Opcodes } from '@kaetram/common/network';\n\nimport type Game from '../game';\nimport type { ListInfo, Member } from '@kaetram/common/types/guild';\nimport type { GuildPacket } from '@kaetram/common/types/messages/outgoing';\n\ninterface ListElement extends HTMLElement {\n    identifier?: string;\n}\n\nexport default class Guilds extends Menu {\n    // The banner is the banner of the guild that the player is currently in.\n    private banner: HTMLElement = document.querySelector('#guilds > .banner')!;\n\n    // The default container and elements for the guilds list, displayed prior to joining a guild.\n    private listContainer: HTMLElement = document.querySelector('#guilds-list-container')!;\n    private createButton: HTMLButtonElement = document.querySelector('#create-guild')!;\n\n    // Container for creating a new guild.\n    private create: HTMLElement = document.querySelector('#guilds-create-container')!;\n\n    private createError: HTMLElement = document.querySelector('#create-error')!;\n\n    private backButton: HTMLElement = document.querySelector('#guild-back')!;\n    private createConfirmButton: HTMLButtonElement = document.querySelector('#guild-create')!;\n\n    private bannerColours: HTMLUListElement = document.querySelector('#banner-colours')!;\n    private bannerOutlines: HTMLUListElement = document.querySelector('#banner-outline-colours')!;\n    private bannerCrests: HTMLUListElement = document.querySelector('#banner-crests')!;\n\n    private nameInput: HTMLInputElement = document.querySelector('#guild-name-input')!;\n\n    // Decorations for the guild interface banner (updated during creation or when guild data is received).\n    private bannerColour: Modules.BannerColour = Modules.BannerColour.Grey;\n    private bannerOutline: Modules.BannerOutline | '' = '';\n    private bannerCrest: Modules.BannerCrests = Modules.BannerCrests.None;\n\n    // The guild information container (if the player is in a guild).\n    private infoContainer: HTMLElement = document.querySelector('#guilds-info-container')!;\n    private chatLog: HTMLUListElement = document.querySelector('#guild-chat-log')!;\n    private chatInput: HTMLInputElement = document.querySelector('#guild-chat-input')!;\n\n    private guildName: HTMLElement = document.querySelector('#guild-name')!;\n    private leaveButton: HTMLElement = document.querySelector('#guild-leave')!;\n\n    // List where we store players/guilds list (depending on the context).\n    private guildList: HTMLUListElement = document.querySelector('#guilds-list-container > ul')!;\n    private memberList: HTMLUListElement = document.querySelector('#member-list')!;\n    private sidebarList: HTMLUListElement = document.querySelector('#sidebar-list')!;\n\n    // Indexing - default values, used for pagination.\n    private from = 0;\n    private to = 10;\n\n    // Sidebar we're currently naivgating.\n    private currentSidebar: 'sidebar-members' | 'sidebar-chat' = 'sidebar-members';\n\n    public constructor(private game: Game) {\n        super('#guilds', '#close-guilds', '#guilds-button');\n\n        this.createButton.addEventListener('click', this.handleCreate.bind(this));\n\n        this.backButton.addEventListener('click', this.handleBackButton.bind(this));\n        this.createConfirmButton.addEventListener('click', this.handleCreateConfirm.bind(this));\n        this.leaveButton.addEventListener('click', this.handleLeave.bind(this));\n\n        this.loadSidebar();\n        this.loadDecorations();\n    }\n\n    /**\n     * Updates the user interface according to the action that was performed.\n     * @param opcode The opcode of the action that was performed.\n     * @param info Information about the opcode we received.\n     */\n\n    public handle(opcode: Opcodes.Guild, info: GuildPacket): void {\n        switch (opcode) {\n            case Opcodes.Guild.Join: {\n                return this.handleMemberJoin(info.username!, info.serverId!);\n            }\n\n            case Opcodes.Guild.Login: {\n                return this.handleConnect(info);\n            }\n\n            case Opcodes.Guild.Leave: {\n                if (info?.username) return this.handleMemberLeave(info.username);\n\n                return this.handleBackButton();\n            }\n\n            case Opcodes.Guild.Rank: {\n                console.log(info);\n                break;\n            }\n\n            case Opcodes.Guild.Update: {\n                return this.loadMembers(info.members!);\n            }\n\n            case Opcodes.Guild.Experience: {\n                console.log(info);\n\n                break;\n            }\n\n            case Opcodes.Guild.List: {\n                return this.loadList(info.guilds, info.total);\n            }\n\n            case Opcodes.Guild.Error: {\n                return this.setError(info.message);\n            }\n\n            case Opcodes.Guild.Chat: {\n                return this.handleChat(info);\n            }\n        }\n    }\n\n    /**\n     * Handler for when the player clicks the create guild button.\n     */\n\n    private handleCreate(): void {\n        // Hide the default information and show the create guild form.\n        this.listContainer.style.display = 'none';\n        this.infoContainer.style.display = 'none';\n\n        // Display the create guild form.\n        this.create.style.display = 'block';\n    }\n\n    /**\n     * Handler for when the player wants to go back to the guilds list.\n     * Basically the opposite of `handleCreate`.\n     */\n\n    private handleBackButton(): void {\n        // Reset the banner decorations and update it.\n        this.bannerColour = Modules.BannerColour.Grey;\n        this.bannerOutline = '';\n        this.bannerCrest = Modules.BannerCrests.None;\n\n        this.updateBanner();\n        this.cleanSelectedCrests(true);\n\n        // Clear all the errors.\n        this.setError();\n\n        // Empty the members list.\n        this.memberList.innerHTML = '';\n\n        // Empty the chat log.\n        this.chatLog.innerHTML = '';\n\n        // Hide other containers and show the default information.\n        this.create.style.display = 'none';\n        this.infoContainer.style.display = 'none';\n\n        // Display the default information.\n        this.listContainer.style.display = 'block';\n\n        // Request the guilds list from the server.\n        this.requestList();\n    }\n\n    /**\n     * Handler for when we click the create confirm button.\n     * This will send the packet to the server with the information provided.\n     */\n\n    private handleCreateConfirm(): void {\n        // Clear the error message.\n        this.setError();\n\n        // Verify the values client-sided (server also verifies them).\n        if (this.bannerOutline === '') return this.setError('Please select an outline colour.');\n\n        // Ensure the guild name is valid.\n        if (this.nameInput.value.length < 3 || this.nameInput.value.length > 16)\n            return this.setError('Guild name must be between 3 and 15 characters.');\n\n        // Send the packet to the server with the information.\n        this.game.socket.send(Packets.Guild, {\n            opcode: Opcodes.Guild.Create,\n            name: this.nameInput.value,\n            colour: this.bannerColour,\n            outline: this.bannerOutline,\n            crest: this.bannerCrest\n        });\n    }\n\n    /**\n     * Handler for when the player clicks the leave guild button.\n     */\n\n    private handleLeave(): void {\n        this.game.socket.send(Packets.Guild, {\n            opcode: Opcodes.Guild.Leave\n        });\n    }\n\n    /**\n     * Handles connection received from the server. We essentially\n     * clear all the other interfaces and focus on the guild interface.\n     * The player object contains all the guild information necessary.\n     * @param info Contains information about the guild, such as decorations.\n     */\n\n    private handleConnect(info: GuildPacket): void {\n        // Clear the error message.\n        this.setError();\n\n        // Hide the default information.\n        this.listContainer.style.display = 'none';\n\n        // Hide the create guild form just in case.\n        this.create.style.display = 'none';\n\n        // Display the guild information container.\n        this.infoContainer.style.display = 'block';\n\n        // Load the guild decorations.\n        this.bannerColour = info.decoration?.banner || Modules.BannerColour.Grey;\n        this.bannerOutline = info.decoration?.outline || '';\n        this.bannerCrest = info.decoration?.crest;\n\n        this.updateBanner();\n\n        // Clear the guild name and members list.\n        this.guildName.innerHTML = '';\n        this.memberList.innerHTML = '';\n\n        // Update the guild name\n        let name = document.createElement('p');\n\n        name.className = 'stroke';\n\n        name.innerHTML = info.name || 'Unknown';\n\n        this.guildName.append(name);\n\n        // Update the leave button to disband if we're the leader.\n        if (this.game.player.name.toLowerCase() === info.owner)\n            this.leaveButton.innerHTML = 'Disband';\n\n        // Update the guild members list.\n        for (let member of info.members!)\n            this.createElement(this.memberList, member.rank!, member.username);\n    }\n\n    /**\n     * Creates a new element based on the username is that joining. Since the player\n     * is brand new, then the default rank is the lowest rank. Other inforamtion\n     * is not really necessary.\n     * @param username The username of the member that joined the guild.\n     * @param serverId The server id of the member that joined the guild.\n     */\n\n    private handleMemberJoin(username: string, serverId = -1): void {\n        // Ignore if we're the one joining.\n        if (username === this.game.player.name.toLowerCase()) return;\n\n        this.createElement(this.memberList, Modules.GuildRank.Fledgling, username);\n\n        this.loadMembers([{ username, serverId }]);\n    }\n\n    /**\n     * Removes a child element from the member list based on the username.\n     * @param username The username of the member that left the guild.\n     */\n\n    private handleMemberLeave(username: string): void {\n        let element = this.getElement(this.memberList, username);\n\n        element?.remove();\n    }\n\n    /**\n     * Handles clicking on a side bar in a guild interface and updating\n     * the interface accordingly.\n     * @param menu The string identification of the menu we want to open.\n     */\n\n    private handleSidebar(menu: 'sidebar-members' | 'sidebar-chat'): void {\n        // Ignore if we don't have a guild.\n        if (!this.game.player.guild) return;\n\n        // Ignore if we're already on the menu.\n        if (this.currentSidebar === menu) return;\n\n        switch (menu) {\n            case 'sidebar-members': {\n                this.memberList.style.display = 'block';\n\n                // Remove the active class from the other sidebar.\n                this.infoContainer.className = '';\n\n                // Hide the chat input.\n                this.chatInput.style.display = 'none';\n\n                // Hide the chat log\n                this.chatLog.style.display = 'none';\n\n                break;\n            }\n\n            case 'sidebar-chat': {\n                // Hide the members list.\n                this.memberList.style.display = 'none';\n\n                // Add the chat class to the container.\n                this.infoContainer.className = 'guild-chat';\n\n                // Show the chat input.\n                this.chatInput.style.display = 'block';\n\n                // Show the chat log.\n                this.chatLog.style.display = 'block';\n\n                break;\n            }\n        }\n\n        // Update the current sidebar.\n        this.currentSidebar = menu;\n    }\n\n    /**\n     * Handles a message received from the server. We add the message\n     * to the chat log alongside information about who and from\n     * where the message was sent.\n     * @param packet Contains information about the message.\n     */\n\n    private handleChat(packet: GuildPacket): void {\n        // Ignore invalid packets (shouldn't happen).\n        if (!packet.username || !packet.serverId) return;\n\n        // Format the source of the message.\n        let source = `[W${packet.serverId}] ${Util.formatName(packet.username)}`,\n            element = document.createElement('p');\n\n        // Add the message to the chat log.\n        element.innerHTML = `${source}  ${packet.message}`;\n\n        this.chatLog.append(element);\n    }\n\n    /**\n     * Handles the keydown event for the guild interface. Usually when the\n     * player is using the chat input, we want to re-route the enter key to\n     * send the message to the server.\n     * @param key The key that was pressed.\n     */\n\n    public keyDown(key: string): void {\n        // Ignore if we're not on the chat sidebar.\n        if (key !== 'Enter' || this.currentSidebar !== 'sidebar-chat') return;\n\n        // Ignore if the input is empty.\n        if (this.chatInput.value.length === 0) return;\n\n        // Send the message to the server.\n        this.sendChat();\n    }\n\n    /**\n     * Requests a list of guilds from the server.\n     */\n\n    private requestList(): void {\n        if (this.game.player.guild) return;\n\n        return this.game.socket.send(Packets.Guild, {\n            opcode: Opcodes.Guild.List,\n            from: this.from,\n            to: this.to\n        });\n    }\n\n    /**\n     * Sends a chat message to the server.\n     */\n\n    private sendChat(): void {\n        // Ignore if the input is empty.\n        if (this.chatInput.value.length === 0) return;\n\n        // Send the message to the server.\n        this.game.socket.send(Packets.Guild, {\n            opcode: Opcodes.Guild.Chat,\n            message: this.chatInput.value\n        });\n\n        // Clear the input.\n        this.chatInput.value = '';\n    }\n\n    /**\n     * Loads a list of guilds received from the server.\n     * @param guilds Contains information about each guild.\n     * @param total The total number of guilds available (used for pagination).\n     */\n\n    private loadList(guilds: ListInfo[] = [], total = 0): void {\n        // Nothing to do if there are no guilds.\n        if (total === 0) return;\n\n        // Clear the list of guilds.\n        this.guildList.innerHTML = '';\n\n        // Remove the description for no guilds available.\n        let description = this.listContainer.querySelector('#guilds-info')!;\n\n        description.innerHTML = '';\n\n        // Iterate through the guilds and create a list element for each one.\n        for (let guild of guilds)\n            this.createElement(this.guildList, 'guild', guild.name, guild.members);\n    }\n\n    /**\n     * Creates an event listener and action for each sidebar element.\n     */\n\n    private loadSidebar(): void {\n        for (let child of this.sidebarList.children)\n            child.addEventListener('click', () => {\n                // Deselect all the other elements.\n                this.cleanSidebar();\n\n                // Select the current element.\n                child.classList.add('active');\n\n                // Handle updating the interface.\n                this.handleSidebar(child.id as 'sidebar-members' | 'sidebar-chat');\n            });\n    }\n\n    /**\n     * Programmatically creates the banner decorations for the guild interface. We create\n     * each individual element on the page and assign an event listener to each one. We\n     * do this to make it easier ot add new decorations in the future.\n     */\n\n    private loadDecorations(): void {\n        this.loadColours();\n        this.loadOutlines();\n        this.loadCrests();\n    }\n\n    /**\n     * Loads the banner colour elements for the create guild interface. We\n     * do it programmatically to make it easier to add new colours in the future.\n     */\n\n    private loadColours(): void {\n        // Iterate through the banner colours and create a list element for each one.\n        for (let colour in Modules.BannerColour) {\n            let element = document.createElement('li'),\n                colourName = Modules.BannerColour[colour as keyof typeof Modules.BannerColour];\n\n            // Add the banner colour classes to the element.\n            element.className = `banner-colour-button banner-colour-button-${colourName}`;\n\n            // Event listener to change the selected colour.\n            element.addEventListener('click', () => {\n                // Update the banner colour.\n                this.bannerColour = colourName;\n\n                // Update the banner.\n                this.updateBanner();\n            });\n\n            // Add the element to the list of banner colours.\n            this.bannerColours.append(element);\n        }\n    }\n\n    /**\n     * Loads the banner outline elements for the create guild interface. We\n     * do it programmatically to make it easier to add new outlines in the future.\n     */\n\n    private loadOutlines(): void {\n        // Iterate through the banner outlines and create a list element for each one.\n        for (let colour in Modules.BannerOutline) {\n            let element = document.createElement('li'),\n                outline = Modules.BannerOutline[colour as keyof typeof Modules.BannerOutline];\n\n            // Add the banner outline classes to the element.\n            element.className = `banner-outline-button banner-outline-button-${outline}`;\n\n            // Event listener to change the selected outline.\n            element.addEventListener('click', () => {\n                // Update the banner outline.\n                this.bannerOutline = outline;\n\n                // Update the banner.\n                this.updateBanner();\n            });\n\n            // Add the element to the list of banner outlines.\n            this.bannerOutlines.append(element);\n        }\n    }\n\n    /**\n     * Loads the banner crest elements for the create guild interface. We create\n     * the appropriate event listener for each crest and add it to the list.\n     */\n\n    private loadCrests(): void {\n        // Add the crest elements to the banner.\n        for (let crest in Modules.BannerCrests) {\n            let element = document.createElement('li'),\n                icon = document.createElement('div'),\n                crestName = Modules.BannerCrests[crest as keyof typeof Modules.BannerCrests];\n\n            // Add the class to the element.\n            element.className = `crest-element`;\n\n            // Add the icon class to the icon element.\n            icon.className = `banner-crest-icon banner-crest-icon-${crestName}`;\n\n            // Add the icon to the element.\n            element.append(icon);\n\n            // Set the default empty crest icon as active.\n            if (crestName === 'none') element.classList.add('active');\n\n            // Event listener to change the selected crest.\n            element.addEventListener('click', () => {\n                this.cleanSelectedCrests();\n\n                // Update the banner crest.\n                this.bannerCrest = crestName;\n\n                // Update the banner.\n                this.updateBanner();\n\n                // Set active crest.\n                element.classList.add('active');\n            });\n\n            // Add the element to the list of crests.\n            this.bannerCrests.append(element);\n        }\n    }\n\n    /**\n     * Loads a list of members (specifically their online status) for the guild interface.\n     * @param members Contains an array of guild members and their online status.\n     */\n\n    private loadMembers(members: Member[]): void {\n        for (let member of members) {\n            let element = this.getElement(this.memberList, member.username);\n\n            if (!element) continue;\n\n            let nameElement = element.querySelector('.name')!,\n                serverElement = element.querySelector('.server')!,\n                colour =\n                    member.serverId === -1\n                        ? 'red'\n                        : member.serverId === this.game.player.serverId\n                        ? 'green'\n                        : 'yellow';\n\n            // Update the colour based on the online status.\n            nameElement.className = `name`;\n            serverElement.className = `server ${colour}`;\n\n            serverElement.innerHTML =\n                member.serverId === -1\n                    ? 'Offline'\n                    : `${this.game.app.config.name} ${member.serverId}`;\n        }\n    }\n\n    /**\n     * Override for the show function where we send a packet requesting\n     * a list of active guilds if the player is not in a guild.\n     */\n\n    public override show(): void {\n        super.show();\n\n        // No guild so we request a list of active guilds.\n        this.requestList();\n    }\n\n    /**\n     * Override for the hide function where we reset the pagination.\n     * We also make sure we hide the create interface if the player\n     * does not have a guild.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        // Reset the pagination.\n        this.from = 0;\n        this.to = 10;\n\n        // Hide the create interface if the player is not in a guild.\n        if (!this.game.player.guild) this.handleBackButton();\n    }\n\n    /**\n     * Creates an element and appends it to the list. The element depends on the type\n     * we are provided. Generally we have two types: guilds and ranks. When creating a rank\n     * based element it's generally for players, whereas a guild one is for a list of\n     * available guilds.\n     * @param list The list to append the element to.\n     * @param type The type of element we are creating.\n     * @param name The name to display in the element.\n     */\n\n    private createElement(\n        list: HTMLUListElement,\n        type: Modules.GuildRank | 'guild',\n        name: string,\n        count = 0\n    ): void {\n        let element = document.createElement('li') as ListElement,\n            nameElement = document.createElement('span'),\n            isGuild = type === 'guild',\n            slotType = type === 'guild' ? 'guild' : Modules.GuildRank[type].toLowerCase();\n\n        // Assign the name as the identifier for the element\n        element.identifier = name;\n\n        // Add the classes to the element and name element.\n        element.className = `slot-element slot-${slotType} stroke`;\n        nameElement.className = `name`;\n\n        // Set the name of the element, format it if it's a player name.\n        nameElement.innerHTML = isGuild ? name : Util.formatName(name, 14);\n\n        // Conditional for dealing with guild element creation.\n        if (isGuild) {\n            if (count > 0) {\n                let countElement = document.createElement('span');\n\n                // Add the class and inner HTML to the count element.\n                countElement.classList.add('count');\n                countElement.innerHTML = `${count}/${Modules.Constants.MAX_GUILD_MEMBERS}`;\n\n                element.append(countElement);\n            }\n\n            // Create the join button for the guild.\n            let joinButton = document.createElement('div');\n\n            // Add the class to the join button.\n            joinButton.className = 'element-button stroke';\n\n            // Add the inner HTML to the join button.\n            joinButton.innerHTML = 'Join';\n\n            // Add the event listener to the join button.\n            joinButton.addEventListener('click', () => {\n                this.game.socket.send(Packets.Guild, {\n                    opcode: Opcodes.Guild.Join,\n                    identifier: name.toLowerCase()\n                });\n            });\n\n            // Append name and join elements.\n            element.append(nameElement, joinButton);\n        }\n\n        // Append just the name element.\n        if (!isGuild) {\n            element.append(nameElement);\n\n            let serverElement = document.createElement('span'),\n                isPlayer = this.game.player.name.toLowerCase() === element.identifier;\n\n            serverElement.className = `server ${isPlayer ? 'green' : 'red'}`;\n\n            serverElement.innerHTML = isPlayer ? 'Online' : 'Offline';\n\n            element.append(serverElement);\n        }\n\n        // Append the element to the list.\n        list.append(element);\n    }\n\n    /**\n     * Removes the active class from all the crest selection elements.\n     */\n\n    private cleanSelectedCrests(selectEmpty = false): void {\n        for (let crest of this.bannerCrests.children) crest.classList.remove('active');\n\n        // Select the empty crest if specified.\n        if (selectEmpty) this.bannerCrests.children[0].classList.add('active');\n    }\n\n    /**\n     * Deselects all the sidebar elements by removing the active class.\n     */\n\n    private cleanSidebar(): void {\n        for (let element of this.sidebarList.children) element.classList.remove('active');\n    }\n\n    /**\n     * Updates the banner with the specified colours (in the class).\n     */\n\n    private updateBanner(): void {\n        let outlineElement = this.banner.querySelector('.banner-outline')!,\n            crestElement = this.banner.querySelector('.banner-crest')!;\n\n        // Update the classes with the new colours.\n        this.banner.className = `banner banner-${this.bannerColour}`;\n\n        // Update the outline and crest if specified\n        outlineElement.className = `banner-outline${\n            this.bannerOutline ? ` banner-outline-${this.bannerOutline}` : ''\n        }`;\n\n        if (this.bannerCrest)\n            crestElement.className = `banner-crest banner-crest-${this.bannerCrest}`;\n    }\n\n    /**\n     * Grabs a list element from the list based on the identifier.\n     * @param list The list we are searching through.\n     * @param identifier The identifier we are searching for.\n     * @returns A list element if found otherwise undefined.\n     */\n\n    private getElement(list: HTMLUListElement, identifier: string): ListElement | undefined {\n        for (let element of list.children)\n            if ((element as ListElement).identifier === identifier) return element as ListElement;\n\n        return undefined;\n    }\n\n    /**\n     * Updates the create error element with a message.\n     * @param text The message to display.\n     */\n\n    private setError(text = ''): void {\n        this.createError.innerHTML = text;\n    }\n}\n","import Menu from './menu';\n\nimport log from '../lib/log';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type App from '../app';\n\ninterface SearchElement {\n    name: string;\n    key: string | number;\n    type: string;\n}\n\ninterface ResultInfo {\n    _id: string;\n    experience?: number;\n    kills?: number;\n    cheater?: boolean;\n}\n\nexport default class Leaderboards extends Menu {\n    // Where we show all the possible leaderboards\n    private searchList: HTMLUListElement = document.querySelector('#leaderboards-search')!;\n\n    // Where we display the results from the selected list\n    private resultsList: HTMLUListElement = document.querySelector('#leaderboards-results')!;\n\n    // The search input\n    private search: HTMLInputElement = document.querySelector('#leaderboards-search-input')!;\n\n    // Search elements available (key is the search URL term, value is the name displayed).\n    private searchElements: SearchElement[] = [\n        { name: 'Total Experience', key: '', type: 'totalExperience' },\n        { name: 'Rank', key: 'rank', type: 'rank' }\n    ];\n    private availableMobs: { [key: string]: string } = {};\n\n    public constructor(private app: App) {\n        super('#leaderboards', '#close-leaderboards', '#leaderboards-button2');\n\n        this.search.addEventListener('input', this.handleInput.bind(this));\n\n        // Append all the skills to the search elements\n        for (let index of Modules.SkillsOrder)\n            this.searchElements.push({ name: Modules.Skills[index], key: index, type: 'skill' });\n\n        // Hub is not enabled, stop here.\n        if (!this.app.config.hub) {\n            this.load();\n            return\n        };\n\n        // Fetch the available mobs from the hub\n        fetch(`${this.app.config.hub}/leaderboards`)\n            .then((response: Response) => response.json())\n            .then((data) => {\n                if (data.availableMobs) {\n                    // Save the available mobs.\n                    this.availableMobs = data.availableMobs;\n\n                    // Append the name of the mobs to the search elements.\n                    for (let mob in this.availableMobs)\n                        this.searchElements.push({\n                            name: this.availableMobs[mob],\n                            key: mob,\n                            type: 'mob'\n                        });\n\n                    this.load();\n                }\n            })\n            .catch((error: Error) => {\n                log.error(error);\n            });\n    }\n\n    /**\n     * Loads the available search elements into an individual object. The object\n     * is then appended to the search list.\n     */\n\n    private load(): void {\n        // Clear the search list\n        this.searchList.innerHTML = '';\n\n        // Create a search element for each search element.\n        for (let element of this.searchElements) this.createSearchElement(element);\n\n        // Select the first element in the list.\n        this.handleSearchElement(this.searchElements[0]);\n    }\n\n    /**\n     * Handler for when the player has inputted something in the search bar. We iterate\n     * through all the elements and if they do not match the inputted text, we hide them.\n     * @param event Contains information about the input event.\n     */\n\n    private handleInput(event: Event): void {\n        let input = (event.target as HTMLInputElement).value.toLowerCase();\n\n        for (let element of this.searchList.children) {\n            let name = element.querySelector('p')!.innerHTML.toLowerCase();\n\n            // Hide the element if it doesn't match the input or unhide it if it does.\n            if (name.includes(input)) (element as HTMLElement).hidden = false;\n            else (element as HTMLElement).hidden = true;\n        }\n    }\n\n    /**\n     * Handles the action of clicking on a search element. We create an API call to the\n     * hub then we update the search list with the results.\n     * @param searchElement The search element that the player has clicked on.\n     */\n\n    private async handleSearchElement(searchElement: SearchElement) {\n\n        this.resultsList.innerHTML = ''\n        const players = await fetch(`http://localhost:9003/`).then(r => r.json());\n        let data = players.data;\n\n        data.forEach((player: any) => {\n            let totalExperience = 0;\n\n            player.skills.skills.forEach((skill: any) => {\n                totalExperience = totalExperience + skill.experience\n            });\n\n            data = [...data.filter((i: any) => i._id !== player._id), {\n                ...player,\n                totalExperience\n            }]\n        });\n\n        if (!this.app.config.hub) {\n            for (let result of data.sort(function (a: any, b: any) {\n                return b[searchElement.type] - a[searchElement.type];\n            }))\n                this.createResultElement(result as any, searchElement.type);\n            return;\n        };\n        let url = `${this.app.config.hub}/leaderboards`;\n\n        // If we have a search type then we append that onto the URL.\n        if (searchElement.type) url += `?${searchElement.type}=${searchElement.key}`;\n\n        // Fetch the results from the hub.\n        fetch(url)\n            .then((response: Response) => response.json())\n            .then((data) => {\n                if (!data.list) return log.info('No results found.');\n\n                // Clear the results list.\n                this.resultsList.innerHTML = '';\n\n                // Create a result element for each result.\n                for (let result of data.list)\n                    this.createResultElement(result as ResultInfo, searchElement.type);\n            })\n            .catch((error: Error) => {\n                log.error(error);\n            });\n    }\n\n    /**\n     * Override for the hide function where we also clear the input field.\n     */\n\n    public override hide(): void {\n        super.hide();\n\n        // Clear the input field\n        this.search.value = '';\n    }\n\n    /**\n     * Handler for when the player enters a key while the leaderboards menu is\n     * open. We want to prevent keys from activating other menus.\n     * @param key The key that the player is pressing.\n     */\n\n    public keyDown(key: string): void {\n        // Ignore any other keys aside from escape.\n        if (key !== 'Escape') return;\n\n        this.hide();\n    }\n\n    /**\n     * Creates an element in the search menu with the specified name.\n     * @param searchElement Contains information about the element we are creating, we're\n     * also using it to bind the click event.\n     */\n\n    private createSearchElement(searchElement: SearchElement): void {\n        let element = document.createElement('li'),\n            name = document.createElement('p');\n\n        // Add the slot class to the element.\n        element.classList.add('container-slot');\n\n        // Add styling to the friend name element.\n        name.classList.add('stroke', 'white');\n\n        // Set the name of the element.\n        name.innerHTML = searchElement.name;\n\n        // Add the name element to the element.\n        element.append(name);\n\n        // Bind the click event to the element.\n        element.addEventListener('click', () => this.handleSearchElement(searchElement));\n\n        this.searchList.append(element);\n    }\n\n    /**\n     * Creates a result element in the list of results. The result relates to a player\n     * and the description to how much of exp/mob kills they have.\n     * @param result Contains the information of the result element we are creating.\n     * @param type The type of result we are creating (skill or kills) so we can extract necessary info.\n     */\n\n    private createResultElement(result: any, type: string): void {\n        console.log(result)\n        let element = document.createElement('li'),\n            name = document.createElement('p'),\n            info = document.createElement('p');\n\n        // Add the slot class to the element.\n        element.classList.add('container-slot-large');\n\n        // Bind the username to the left of the container\n        name.classList.add('stroke', result.cheater ? 'red' : 'white', 'left');\n\n        // Bind the description to the right of the container\n        info.classList.add('stroke', result.cheater ? 'red' : 'white', 'right');\n\n        // Set the name of the element.\n        name.innerHTML = result.username;\n\n        // Set the description of the element.\n        info.innerHTML = result[type] || 0;\n\n        // Add the name element to the element.\n        element.append(name, info);\n\n        // Append the element to the results list.\n        this.resultsList.append(element);\n    }\n}\n","import Menu from './menu';\n\nimport Utils from '../utils/util';\n\nimport { Modules, Opcodes } from '@kaetram/common/network';\n\nimport type { CraftingRequirement } from '@kaetram/common/types/crafting';\nimport type { CraftingPacket } from '@kaetram/common/types/messages/outgoing';\n\ntype SelectCallback = (key: string) => void;\ntype CraftCallback = (key: string, amount: number) => void;\nexport default class Crafting extends Menu {\n    // Where we store the available options for crafting.\n    private options: HTMLUListElement = document.querySelector('#crafting-options')!;\n    private requirements: HTMLUListElement = document.querySelector('#crafting-requirements')!;\n\n    // Result section\n    private result: HTMLDivElement = document.querySelector('#crafting-result')!;\n    private level: HTMLDivElement = document.querySelector('#crafting-level')!;\n    private name: HTMLDivElement = document.querySelector('#crafting-result-name')!;\n\n    // Amount buttons.\n    private craftOne: HTMLDivElement = document.querySelector('#craft-one')!;\n    private craftFive: HTMLDivElement = document.querySelector('#craft-five')!;\n    private craftTen: HTMLDivElement = document.querySelector('#craft-ten')!;\n\n    // Confirm button\n    private craftButton: HTMLDivElement = document.querySelector('#craft-button')!;\n\n    // Crafting amount for sending to the server.\n    private selectedKey = '';\n    private craftAmount = 1;\n\n    // Data for the currently selected crafting elements.\n    private type: Modules.Skills = Modules.Skills.Crafting;\n\n    // Callbacks for when the player selects an option.\n    private selectCallback?: SelectCallback;\n    private craftCallback?: CraftCallback;\n\n    public constructor() {\n        super('#crafting', '#close-crafting');\n\n        this.craftOne.addEventListener('click', () => this.handleAmount(1));\n        this.craftFive.addEventListener('click', () => this.handleAmount(5));\n        this.craftTen.addEventListener('click', () => this.handleAmount(10));\n\n        this.craftButton.addEventListener('click', () => {\n            this.craftCallback?.(this.selectedKey, this.craftAmount);\n            this.hide();\n        });\n    }\n\n    /**\n     * Handles receiving information about crafting. This is used to synchronize the crafting\n     * user interface with the server. When a player selects an item to craft this\n     * @param opcode Contains the type of crafting action that we want to perform.\n     * @param info Contains the information about the crafting action.\n     */\n\n    public handle(opcode: Opcodes.Crafting, info: CraftingPacket): void {\n        switch (opcode) {\n            case Opcodes.Crafting.Open: {\n                return this.show(info.type!, info.keys!);\n            }\n\n            case Opcodes.Crafting.Select: {\n                return this.handleSelect(\n                    info.key!,\n                    info.name!,\n                    info.level!,\n                    info.result!,\n                    info.requirements!\n                );\n            }\n        }\n    }\n\n    /**\n     * Handles displaying the requirements and result for the item that the player selected.\n     * @param key The key of the item that the player selected.\n     * @param name The formatted name of the item (the one the player sees).\n     * @param level The level required to craft the item.\n     * @param count The amount of the item selected we will receive as a result.\n     * @param requirements The requirements for the item that the player selected.\n     */\n\n    private handleSelect(\n        key: string,\n        name: string,\n        level: number,\n        count: number,\n        requirements: CraftingRequirement[]\n    ): void {\n        // Clear the requirements and result.\n        this.requirements.innerHTML = '';\n\n        // Update the selected key.\n        this.selectedKey = key;\n\n        // Set the result image.\n        let icon: HTMLElement = this.result.querySelector('.crafting-option-icon')!,\n            countElement: HTMLElement = this.result.querySelector('.crafting-option-count')!,\n            levelIcon: HTMLElement = this.level.querySelector('.crafting-option-icon')!,\n            levelCount = this.level.querySelector('.crafting-option-count')!;\n\n        // Update the result icons.\n        icon.style.backgroundImage = Utils.getImageURL(key);\n        levelIcon.style.backgroundImage = this.getSkillIcon();\n\n        // Set the amount of the item that we will receive as a result.\n        countElement.innerHTML = `x${count}`;\n\n        // Set the level required to craft the item.\n        levelCount.innerHTML = `${level}`;\n\n        // Update the name of the item.\n        this.name.innerHTML = name;\n\n        // Create new requirement element and append it to the list of requirements.\n        for (let requirement of requirements)\n            this.requirements.append(this.createSlot(requirement.key, requirement.count, true));\n    }\n\n    /**\n     * Handles when we click the craft amount buttons. Handles toggling the active classes\n     * and updating how many items we want to craft.\n     * @param amount The amount of items selected.\n     */\n\n    private handleAmount(amount: number): void {\n        this.craftAmount = amount;\n\n        this.craftOne.classList.remove('active');\n        this.craftFive.classList.remove('active');\n        this.craftTen.classList.remove('active');\n\n        switch (amount) {\n            case 1: {\n                this.craftOne.classList.add('active');\n                break;\n            }\n\n            case 5: {\n                this.craftFive.classList.add('active');\n                break;\n            }\n\n            case 10: {\n                this.craftTen.classList.add('active');\n                break;\n            }\n        }\n    }\n\n    /**\n     * Loads the keys in the options list. This is used to display the available items\n     * that the player can craft.\n     * @param keys Contains a string array of the available keys (used for item url path).\n     */\n\n    public override show(type: Modules.Skills, keys: string[]): void {\n        super.show();\n\n        // Clear all the options.\n        this.options.innerHTML = '';\n\n        // Update the crafting type\n        this.type = type;\n\n        // Create a new option for each key and append it to the list of options.\n        for (let key of keys) this.options.append(this.createSlot(key));\n\n        // Select the first option by default if it exists.\n        if (keys.length > 0) {\n            this.selectCallback?.(keys[0]);\n\n            this.options.children[0].classList.add('active');\n        }\n\n        // Update the craft button text according to the type of interface.\n        let text = 'Craft';\n\n        switch (type) {\n            case Modules.Skills.Cooking: {\n                text = 'Cook';\n                break;\n            }\n\n            case Modules.Skills.Crafting: {\n                text = 'Craft';\n                break;\n            }\n\n            case Modules.Skills.Fletching: {\n                text = 'Fletch';\n                break;\n            }\n\n            case Modules.Skills.Smithing: {\n                text = 'Smith';\n                break;\n            }\n\n            case Modules.Skills.Smelting: {\n                text = 'Smelt';\n                break;\n            }\n        }\n\n        this.craftButton.innerHTML = text;\n    }\n\n    /**\n     * Creates a option list element and appends it to the list of options.\n     * @param key The key of the item to craft.\n     */\n\n    private createSlot(key: string, count?: number, disableClick = false): HTMLLIElement {\n        let element = document.createElement('li'),\n            icon = document.createElement('div');\n\n        // Apply the classes to the elements\n        element.classList.add('crafting-option');\n        icon.classList.add('crafting-option-icon');\n\n        // Apply the image url to the icon.\n        icon.style.backgroundImage = Utils.getImageURL(key);\n\n        // Append the icon to the option element.\n        element.append(icon);\n\n        // Create the count element and apply it if it's provided\n        if (count) {\n            let countElement = document.createElement('div');\n\n            countElement.classList.add('crafting-option-count', 'stroke');\n            countElement.innerHTML = `x${count}`;\n\n            element.append(countElement);\n        }\n\n        // Bind the click event to the select callback so that it can be sent to the server.\n        if (disableClick) element.classList.add('disabled');\n        else\n            element.addEventListener('click', () => {\n                // Remove the active class from all the options.\n                for (let child of this.options.children) child.classList.remove('active');\n\n                // Add the active class to the selected option.\n                element.classList.add('active');\n\n                this.selectCallback?.(key);\n            });\n\n        return element;\n    }\n\n    /**\n     * Grabs the skill icon for the currently open interface. We use\n     * this function to handle special cases of crafting interfaces that\n     * share the same skill.\n     */\n\n    private getSkillIcon(): string {\n        let name = Modules.Skills[this.type].toLowerCase();\n\n        switch (this.type) {\n            case Modules.Skills.Smelting:\n            case Modules.Skills.Smithing: {\n                return `url(/img/interface/skills/smithing.png)`;\n            }\n        }\n\n        return `url(/img/interface/skills/${name}.png)`;\n    }\n\n    /**\n     * Handles clicking on a crafting option. Sends a request to the server to\n     * obtain information about the item that the player wishes to craft.\n     * @param callback Contains the key of the item to craft.\n     */\n\n    public onSelect(callback: SelectCallback): void {\n        this.selectCallback = callback;\n    }\n\n    /**\n     * Handles sending a packet to the server that we want to craft.\n     * @param callback Contains the key and amount we want to craft.\n     */\n\n    public onCraft(callback: CraftCallback): void {\n        this.craftCallback = callback;\n    }\n}\n","import Actions from '../menu/actions';\nimport Inventory from '../menu/inventory';\nimport Bank from '../menu/bank';\nimport Store from '../menu/store';\nimport Header from '../menu/header';\nimport Profile from '../menu/profile/profile';\nimport Enchant from '../menu/enchant';\nimport Warp from '../menu/warp';\nimport Notification from '../menu/notification';\nimport Settings from '../menu/settings';\nimport Equipments from '../menu/equipments';\nimport Achievements from '../menu/achievements';\nimport Quests from '../menu/quests';\nimport Friends from '../menu/friends';\nimport Trade from '../menu/trade';\nimport Interact from '../menu/interact';\nimport Leaderboards from '../menu/leaderboards';\nimport Guilds from '../menu/guilds';\nimport LeaderboardsFooter from '../menu/leaderboards-footer';\nimport Crafting from '../menu/crafting';\n\nimport { Modules, Opcodes, Packets } from '@kaetram/common/network';\n\nimport type Game from '../game';\nimport type Menu from '../menu/menu';\n\nexport default class MenuController {\n    private actions: Actions = new Actions();\n    private crafting: Crafting = new Crafting();\n\n    private inventory: Inventory;\n    private bank: Bank;\n    private store: Store;\n    private profile: Profile;\n    private enchant: Enchant;\n    private warp: Warp;\n    private notification: Notification;\n    private settings: Settings;\n    private equipments: Equipments;\n    private achievements: Achievements;\n    private quests: Quests;\n    private friends: Friends;\n    private trade: Trade;\n    private interact: Interact;\n    private leaderboards: Leaderboards;\n    private LeaderboardsFooter: LeaderboardsFooter;\n    private guilds: Guilds;\n\n    public header: Header;\n\n    public menus: { [key: string]: Menu };\n\n    public constructor(private game: Game) {\n        this.inventory = new Inventory(this.actions);\n        this.bank = new Bank(this.inventory);\n        this.store = new Store(this.inventory);\n        this.profile = new Profile(game.player);\n        this.enchant = new Enchant(this.inventory);\n        this.warp = new Warp(game.socket);\n        this.notification = new Notification();\n        this.settings = new Settings(game);\n        this.header = new Header(game.player);\n        this.equipments = new Equipments(game.player, game.sprites);\n        this.achievements = new Achievements(game.player);\n        this.quests = new Quests(game.player);\n        this.friends = new Friends(game.player);\n        this.trade = new Trade(this.inventory);\n        this.interact = new Interact(game.player);\n        this.leaderboards = new Leaderboards(game.app);\n        this.LeaderboardsFooter = new LeaderboardsFooter(game.app);\n        this.guilds = new Guilds(game);\n\n        this.menus = {\n            inventory: this.inventory,\n            bank: this.bank,\n            store: this.store,\n            profile: this.profile,\n            enchant: this.enchant,\n            warp: this.warp,\n            notification: this.notification,\n            settings: this.settings,\n            equipments: this.equipments,\n            achievements: this.achievements,\n            quests: this.quests,\n            friends: this.friends,\n            trade: this.trade,\n            interact: this.interact,\n            leaderboards: this.leaderboards,\n            LeaderboardsFooter: this.LeaderboardsFooter,\n            guilds: this.guilds,\n            crafting: this.crafting\n        };\n\n        this.inventory.onSelect(this.handleInventorySelect.bind(this));\n        this.bank.onSelect(this.handleBankSelect.bind(this));\n        this.store.onSelect(this.handleStoreSelect.bind(this));\n        this.equipments.onUnequip(this.handleProfileUnequip.bind(this));\n\n        this.profile.onUnequip(this.handleProfileUnequip.bind(this));\n        this.profile.onAttackStyle(this.handleProfileAttackStyle.bind(this));\n        this.profile.onAbility(this.handleAbility.bind(this));\n\n        this.enchant.onSelect(this.handleEnchantSelect.bind(this));\n        this.enchant.onConfirm(this.handleEnchantConfirm.bind(this));\n\n        this.warp.onSelect(this.handleWarp.bind(this));\n\n        this.friends.onConfirm(this.handleFriendConfirm.bind(this));\n\n        this.trade.onSelect(this.handleTradeSelect.bind(this));\n        this.trade.onAccept(this.handleTradeAccept.bind(this));\n        this.trade.onClose(this.handleTradeClose.bind(this));\n\n        this.crafting.onSelect(this.handleCraftingSelect.bind(this));\n        this.crafting.onCraft(this.handleCraftingConfirm.bind(this));\n\n        this.load();\n    }\n\n    /**\n     * Initializes the header and a callback that automatically\n     * hides all the other menus when a menu is shown.\n     */\n\n    private load(): void {\n        this.forEachMenu((menu: Menu) => menu.onShow(() => this.hide()));\n    }\n\n    /**\n     * Iterates through all menus and calls the hide function.\n     * This is used when we want to hide every user interface.\n     */\n\n    public hide(): void {\n        this.forEachMenu((menu: Menu) => {\n            // Hide only if the menu is visible to prevent unnecessary calls to subclass `hide`.\n            if (menu.isVisible()) menu.hide();\n        });\n    }\n\n    /**\n     * Synchronizes the contains and the UI for all menus.\n     * @param key Optional key to synchronize a specific menu.\n     */\n\n    public synchronize(key?: string): void {\n        if (key) return this.menus[key]?.synchronize();\n\n        this.forEachMenu((menu: Menu) => menu.synchronize());\n    }\n\n    /**\n     * Calls every menu's resize function if it is initialized.\n     */\n\n    public resize(): void {\n        this.header.resize(); // Non Menu UI (for now?)\n\n        this.forEachMenu((menu: Menu) => menu.resize());\n    }\n\n    /**\n     * @returns The interact menu object.\n     */\n\n    public getInteract(): Interact {\n        return this.interact;\n    }\n\n    /**\n     * @returns The inventory menu object.\n     */\n\n    public getInventory(): Inventory {\n        return this.inventory;\n    }\n\n    /**\n     * @returns The bank menu object.\n     */\n\n    public getBank(): Bank {\n        return this.bank;\n    }\n\n    /**\n     * @returns The store menu object.\n     */\n\n    public getStore(): Store {\n        return this.store;\n    }\n\n    /**\n     * @returns The profile menu object.\n     */\n\n    public getProfile(): Profile {\n        return this.profile;\n    }\n\n    /**\n     * @returns The notification menu object.\n     */\n\n    public getNotification(): Notification {\n        return this.notification;\n    }\n\n    /**\n     * @returns The enchant menu object.\n     */\n\n    public getEnchant(): Enchant {\n        return this.enchant;\n    }\n\n    /**\n     * @returns The warp menu object\n     */\n\n    public getWarp(): Warp {\n        return this.warp;\n    }\n\n    /**\n     * @returns The achievement menu object.\n     */\n\n    public getAchievements(): Achievements {\n        return this.achievements;\n    }\n\n    /**\n     * @returns The quests menu object.\n     */\n\n    public getQuests(): Quests {\n        return this.quests;\n    }\n\n    /**\n     * @returns The friends menu object.\n     */\n\n    public getFriends(): Friends {\n        return this.friends;\n    }\n\n    /**\n     * @returns The trade menu object.\n     */\n\n    public getTrade(): Trade {\n        return this.trade;\n    }\n\n    /**\n     * @returns The leaderboards menu object.\n     */\n\n    public getLeaderboards(): Leaderboards {\n        return this.leaderboards;\n    }\n    public getLeaderboards2(): LeaderboardsFooter {\n        return this.LeaderboardsFooter;\n    }\n\n    /**\n     * @returns The guilds menu object.\n     */\n\n    public getGuilds(): Guilds {\n        return this.guilds;\n    }\n\n    /**\n     * @returns The crafting menu object.\n     */\n\n    public getCrafting(): Crafting {\n        return this.crafting;\n    }\n\n    /**\n     * Callback handler for when an item in the inventory is selected.\n     * @param fromIndex Index of the item selected.\n     * @param opcode Opcode identifying the type of action performed on the item.\n     * @param toIndex Optional parameter that is used either for count (drop packet) or index (swap packet).\n     */\n\n    private handleInventorySelect(\n        opcode: Opcodes.Container,\n        fromIndex: number,\n        toIndex?: number\n    ): void {\n        this.game.socket.send(Packets.Container, {\n            opcode,\n            type: Modules.ContainerType.Inventory,\n            fromIndex,\n            value: toIndex\n        });\n    }\n\n    /**\n     * Callback handler for when an item in the bank is selected.\n     * @param type Indicates which container (inventory or bank) was selected.\n     * @param index The index within that container.\n     */\n\n    private handleBankSelect(\n        fromContainer: Modules.ContainerType,\n        fromIndex: number,\n        toContainer: Modules.ContainerType,\n        toIndex?: number\n    ): void {\n        this.game.socket.send(Packets.Container, {\n            opcode: Opcodes.Container.Select,\n            type: Modules.ContainerType.Bank,\n            fromContainer,\n            fromIndex,\n            toContainer,\n            value: toIndex\n        });\n    }\n\n    /**\n     * Callback for when a store selection occurs. This is the packet format for when\n     * an item in the inventory is selected, when it is sold, or when we are attempting\n     * to purchase an item from the store.\n     * @param opcode The type of action we are performing.\n     * @param key The key of the store that we are in.\n     * @param index The index of the item (whether in the inventory or store).\n     */\n\n    private handleStoreSelect(opcode: Opcodes.Store, key: string, index: number, count = 1): void {\n        this.game.socket.send(Packets.Store, {\n            opcode,\n            key,\n            index,\n            count\n        });\n    }\n\n    /**\n     * Callback received from one of the profile pages when\n     * an equipment slot is clicked. We send a packet to the\n     * server requesting unequipping.\n     * @param type What slot is being unequipped.\n     */\n\n    private handleProfileUnequip(type: Modules.Equipment): void {\n        this.game.socket.send(Packets.Equipment, {\n            opcode: Opcodes.Equipment.Unequip,\n            type\n        });\n    }\n\n    /**\n     * Sends a packet to the server when a player selects a different\n     * attack style.\n     * @param style The new attack style we are selecting.\n     */\n\n    private handleProfileAttackStyle(style: Modules.AttackStyle): void {\n        this.game.socket.send(Packets.Equipment, {\n            opcode: Opcodes.Equipment.Style,\n            style\n        });\n    }\n\n    /**\n     * Callback for when an action within the abilities menu occurs.\n     * Generally this will consist of activating an ability or dragging it\n     * into the quick slot menu.\n     * @param type The type of action we are performing (using ability or dragging it to a quickslot).\n     * @param key The key of the ability we are performing an action on.\n     * @param index The index of the quickslot we are dragging to (only specified when dragging).\n     */\n\n    private handleAbility(type: Opcodes.Ability, key: string, index?: number): void {\n        this.game.socket.send(Packets.Ability, {\n            opcode: type,\n            key,\n            index\n        });\n    }\n\n    /**\n     * Sends a packet to the server with the index of the inventory slot the\n     * player has selected. The server verifies the request and sends back a\n     * packet indicating we want to move the item.\n     * @param index The index of the item the player has selected.\n     */\n\n    private handleEnchantSelect(index: number): void {\n        this.game.socket.send(Packets.Enchant, {\n            opcode: Opcodes.Enchant.Select,\n            index\n        });\n    }\n\n    /**\n     * Sends a request to the server that the player wants to enchant an item given\n     * some shards. The server double checks the validity of the request and proceeds\n     * accordingly.\n     * @param index The index of the item we want to enchant.\n     * @param shardIndex The index of the shards we want to use for enchanting.\n     */\n\n    private handleEnchantConfirm(index: number, shardIndex: number): void {\n        this.game.socket.send(Packets.Enchant, {\n            opcode: Opcodes.Enchant.Confirm,\n            index,\n            shardIndex\n        });\n    }\n\n    /**\n     * Sends a packet to the server about the warp that was just selected.\n     * @param id The id of the warp that was selected.\n     */\n\n    private handleWarp(id: number): void {\n        this.game.socket.send(Packets.Warp, {\n            id\n        });\n    }\n\n    /**\n     * Sends a packet to the server with the type of friend action we are performing. If the\n     * `remove` variable is set to false then we are adding a friend, otherwise we are removing.\n     * @param username The username we are performing the action on.\n     * @param remove (Optional) Whether we are removing a friend or not (default: false).\n     */\n\n    private handleFriendConfirm(username: string, remove = false): void {\n        this.game.socket.send(Packets.Friends, {\n            opcode: remove ? Opcodes.Friends.Remove : Opcodes.Friends.Add,\n            username\n        });\n    }\n\n    /**\n     * Handles the select action for the trade interface. When the player clicks an\n     * item in the inventory we send a packet to the server that we are adding an item\n     * to the trade session. When the player clicks an item in the trade window we send\n     * a packet to the server that we are removing an item from the trade session.\n     * @param type The type of container the action is performed in, determines the add/remove opcode.\n     * @param index The index in the container that the action is performed on.\n     */\n\n    private handleTradeSelect(type: Modules.ContainerType, index: number, count?: number): void {\n        switch (type) {\n            case Modules.ContainerType.Inventory: {\n                return this.game.socket.send(Packets.Trade, {\n                    opcode: Opcodes.Trade.Add,\n                    index,\n                    count\n                });\n            }\n\n            case Modules.ContainerType.Trade: {\n                return this.game.socket.send(Packets.Trade, {\n                    opcode: Opcodes.Trade.Remove,\n                    index,\n                    count\n                });\n            }\n        }\n    }\n\n    /**\n     * Handles the clicking of the accept button. Both players must accept to the trade\n     * in order to complete it.\n     */\n\n    private handleTradeAccept(): void {\n        this.game.socket.send(Packets.Trade, {\n            opcode: Opcodes.Trade.Accept\n        });\n    }\n\n    /**\n     * Sends a trade packet to the server indicating that the session has been closed.\n     */\n\n    private handleTradeClose(): void {\n        this.game.socket.send(Packets.Trade, {\n            opcode: Opcodes.Trade.Close\n        });\n    }\n\n    /**\n     * Sends a packet to the server with the key of the item that was just selected.\n     * @param key Contains the key of the item that was selected.\n     */\n\n    private handleCraftingSelect(key: string): void {\n        this.game.socket.send(Packets.Crafting, {\n            opcode: Opcodes.Crafting.Select,\n            key\n        });\n    }\n\n    /**\n     * Sends a packet to the server with the craft opcode and information about\n     * what the player wants to try and craft..\n     * @param key The key of the item we are trying to craft.\n     * @param count The amount of items we are trying to craft.\n     */\n\n    private handleCraftingConfirm(key: string, count: number): void {\n        this.game.socket.send(Packets.Crafting, {\n            opcode: Opcodes.Crafting.Craft,\n            key,\n            count\n        });\n    }\n\n    /**\n     * Iterates through all the menus and passes a callback.\n     * @param callback Current menu being iterated through.\n     */\n\n    private forEachMenu(callback: (menu: Menu) => void): void {\n        for (let menu of Object.values(this.menus)) callback(menu);\n    }\n}\n","import { Opcodes } from '@kaetram/common/network';\n\nexport default class Arrow {\n    public x = -1;\n    public y = -1;\n\n    private blinkInterval!: number;\n    private visible = true;\n\n    public constructor(public id: string, public element: JQuery, public type: Opcodes.Pointer) {\n        this.load();\n    }\n\n    private load(): void {\n        this.blinkInterval = window.setInterval(() => {\n            if (this.visible) this.hide();\n            else this.show();\n\n            this.visible = !this.visible;\n        }, 600);\n    }\n\n    /**e\n     * Sets the coordinates of the pointer.\n     * @param x Sets the x position of the pointer (relative or absolute).\n     * @param y Sets the y position of the pointer (relative or absolute).\n     */\n\n    public setPosition(x: number, y: number): void {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Clears the interval and deletes the pointer element.\n     */\n\n    public destroy(): void {\n        clearInterval(this.blinkInterval);\n\n        if (this.type === Opcodes.Pointer.Button) this.hide();\n        else this.element.remove();\n    }\n\n    /**\n     * Displays the pointer object.\n     */\n\n    private show(): void {\n        if (this.type === Opcodes.Pointer.Button) this.element.addClass('active');\n        else this.element.show();\n    }\n\n    /**\n     * Hides the current pointer.\n     */\n\n    private hide(): void {\n        if (this.type === Opcodes.Pointer.Button) this.element.removeClass('active');\n        else this.element.hide();\n    }\n}\n","import Arrow from '../renderer/pointers/arrow';\n\nimport { Opcodes } from '@kaetram/common/network';\nimport $ from 'jquery';\n\nimport type Entity from '../entity/entity';\nimport type Game from '../game';\nimport type Camera from '../renderer/camera';\n\nexport default class PointerController {\n    private camera: Camera;\n\n    private pointers: { [id: string]: Arrow } = {};\n\n    private container = $('#bubbles');\n\n    public constructor(private game: Game) {\n        this.camera = this.game.camera;\n    }\n\n    public create(id: string, type: Opcodes.Pointer, name?: string): void {\n        let { pointers, container } = this;\n\n        if (id in pointers) return;\n\n        switch (type) {\n            case Opcodes.Pointer.Button: {\n                pointers[id] = new Arrow(id, $(`#${name}`), type);\n\n                break;\n            }\n\n            default: {\n                let element = $(`<div id=\"${id}\" class=\"pointer\"></div>`);\n\n                this.setSize(element);\n\n                container.append(element);\n\n                pointers[id] = new Arrow(id, element, type);\n\n                break;\n            }\n        }\n    }\n\n    public resize(): void {\n        for (let { type, x, y, element } of Object.values(this.pointers))\n            switch (type) {\n                case Opcodes.Pointer.Relative: {\n                    let scale = this.getZoom(),\n                        offsetX = 0,\n                        offsetY = 0;\n\n                    element.css({\n                        left: `${x * scale - offsetX}px`,\n                        top: `${y * scale - offsetY}px`\n                    });\n\n                    break;\n                }\n            }\n    }\n\n    private setSize(element: JQuery): void {\n        let pointer = '/img/pointer.png';\n\n        element.css({\n            top: '30px',\n            width: '64px',\n            height: '64px',\n            margin: 'inherit',\n            marginTop: '-18px',\n            background: `url(\"${pointer}\") no-repeat -4px`\n        });\n    }\n\n    public clean(): void {\n        for (let pointer of Object.values(this.pointers)) pointer.destroy();\n\n        this.pointers = {};\n    }\n\n    private destroy(pointer: Arrow): void {\n        delete this.pointers[pointer.id];\n        pointer.destroy();\n    }\n\n    private set(pointer: Arrow, posX: number, posY: number): void {\n        let { camera, game } = this;\n\n        if (!camera) return;\n\n        let { element } = pointer,\n            { canvasWidth, canvasHeight } = game.renderer,\n            tileSize = game.map.tileSize * this.getZoom(), // 16 * scale\n            x = (posX - camera.x) * this.getZoom(),\n            width = parseInt(element.css('width')),\n            offset = width / 2 - tileSize / 2,\n            y = (posY - camera.y) * this.getZoom() - tileSize,\n            outX = x / canvasWidth,\n            outY = y / canvasHeight;\n\n        if (outX >= 1.5)\n            // Right\n            element.css({\n                left: '',\n                right: 0,\n                top: '50%',\n                bottom: '',\n                transform: 'rotate(-90deg)'\n            });\n        else if (outY >= 1.5)\n            // Bottom\n            element.css({\n                left: '50%',\n                right: '',\n                top: '',\n                bottom: 0,\n                transform: ''\n            });\n        else if (outX <= 0)\n            // Left\n            element.css({\n                left: 0,\n                right: '',\n                top: '50%',\n                bottom: '',\n                transform: 'rotate(90deg)'\n            });\n        else if (outY <= 0)\n            // Top\n            element.css({\n                left: '',\n                right: '50%',\n                top: 0,\n                bottom: '',\n                transform: 'rotate(180deg)'\n            });\n        else\n            element.css({\n                left: `${x - offset}px`,\n                right: '',\n                top: `${y}px`,\n                bottom: '',\n                transform: ''\n            });\n    }\n\n    public setToEntity(entity: Entity): void {\n        let pointer = this.get(entity.instance);\n\n        if (!pointer) return;\n\n        this.set(pointer, entity.x, entity.y);\n    }\n\n    public setToPosition(id: string, x: number, y: number): void {\n        let pointer = this.get(id);\n\n        if (!pointer) return;\n\n        pointer.setPosition(x, y);\n\n        this.set(pointer, x, y);\n    }\n\n    public setRelative(id: string, x: number, y: number): void {\n        let pointer = this.get(id);\n\n        if (!pointer) return;\n\n        let scale = this.getZoom(),\n            offsetX = 0,\n            offsetY = 0;\n\n        pointer.setPosition(x, y);\n\n        pointer.element.css({\n            left: `${x * scale - offsetX}px`,\n            top: `${y * scale - offsetY}px`\n        });\n    }\n\n    public update(): void {\n        for (let pointer of Object.values(this.pointers))\n            switch (pointer.type) {\n                case Opcodes.Pointer.Entity: {\n                    let entity = this.game.entities.get(pointer.id);\n\n                    if (entity) this.setToEntity(entity);\n                    else this.destroy(pointer);\n\n                    break;\n                }\n\n                case Opcodes.Pointer.Location: {\n                    if (pointer.x !== -1 && pointer.y !== -1)\n                        this.set(pointer, pointer.x, pointer.y);\n\n                    break;\n                }\n            }\n    }\n\n    private get(id: string): Arrow | null {\n        let { pointers } = this;\n\n        if (id in pointers) return pointers[id];\n\n        return null;\n    }\n\n    private getZoom(): number {\n        return this.game.camera.zoomFactor;\n    }\n}\n","import spriteData from '../../data/sprites.json';\nimport Animation from '../entity/animation';\nimport Sprite from '../entity/sprite';\nimport log from '../lib/log';\n\nimport type { SpriteData } from '../entity/sprite';\n\nexport default class SpritesController {\n    public sprites: { [id: string]: Sprite } = {};\n    public sparksAnimation: Animation = new Animation('idle_down', 6, 0, 16, 16);\n\n    public constructor() {\n        this.sparksAnimation.setSpeed(120);\n\n        this.load();\n    }\n\n    /**\n     * Iterates through all the sprites in the JSON file\n     * and initializes sprites based on their key and data.\n     */\n\n    public load(): void {\n        // TS doesn't like this for some reason.\n        for (let data of spriteData as SpriteData[]) {\n            let sprite = new Sprite(data);\n\n            this.sprites[data.id] = sprite;\n        }\n\n        log.debug('Finished loading sprite data...');\n\n        this.preloadSprites();\n    }\n\n    /**\n     * Hardcoded function that preloads necessary sprites off the bat.\n     * Things like the death animation has to be loaded as soon as possible.\n     */\n\n    public preloadSprites(): void {\n        this.get('death').load();\n    }\n\n    /**\n     * Grabs a sprite object based on the name string.\n     * @param name The string of the sprite we're attempting to grab.\n     * @returns A sprite object if found, otherwise undefined.\n     */\n\n    public get(name: string): Sprite {\n        return this.sprites[name];\n    }\n\n    /**\n     * @returns The death sprite used for when an entity\n     * dies or sometimes when a player teleports.\n     */\n\n    public getDeath(): Sprite {\n        return this.get('death');\n    }\n}\n","import { Modules } from '@kaetram/common/network';\n\n/**\n * Zoning controller keeps track of the current orientation.\n */\n\nexport default class ZoningController {\n    public direction!: Modules.Orientation | null;\n\n    public reset(): void {\n        this.direction = null;\n    }\n\n    public setUp(): void {\n        this.direction = Modules.Orientation.Up;\n    }\n\n    public setDown(): void {\n        this.direction = Modules.Orientation.Down;\n    }\n\n    public setRight(): void {\n        this.direction = Modules.Orientation.Right;\n    }\n\n    public setLeft(): void {\n        this.direction = Modules.Orientation.Left;\n    }\n\n    public getDirection(): Modules.Orientation {\n        return this.direction!;\n    }\n}\n","import CharacterHandler from '../handler';\n\nimport { Packets, Opcodes } from '@kaetram/common/network';\n\nimport type Map from '../../../map/map';\nimport type Player from './player';\nimport type Game from '../../../game';\nimport type EntitiesController from '../../../controllers/entities';\nimport type { TileIgnore } from '../../../utils/pathfinder';\n\nexport default class Handler extends CharacterHandler {\n    private map: Map;\n\n    private lastStepX = -1;\n    private lastStepY = -1;\n\n    protected override game: Game;\n    protected override entities: EntitiesController;\n\n    public constructor(player: Player) {\n        super(player);\n\n        this.map = player.game.map;\n\n        this.game = player.game;\n        this.entities = player.game.entities;\n    }\n\n    /**\n     * This subclass implementation is used for our current player (the one that we logged in with).\n     * Here we actually send the packets to the server and handle the real game logic.\n     * @param x The x grid coordinate of the tile the player clicked on.\n     * @param y The y grid coordinate of the tile the player clicked on.\n     * @returns The path to the new tile in a 2D array.\n     */\n\n    protected override handleRequestPath(x: number, y: number): number[][] {\n        // Prevent any calculations from being made if the player clicked on the tile they are already on.\n        if (this.character.gridX === x && this.character.gridY === y) return [];\n\n        // Prevent calculations from being made if the player is dead.\n        if (this.character.dead || this.character.frozen) return [];\n\n        // Prevent calculating pathing when we target a mob that is within range.\n        if (this.character.canAttackTarget() && !this.character.trading) return [];\n\n        let isObject = this.map.isObject(x, y);\n\n        // Ignore requests into colliding tiles but allow targetable objects.\n        if (this.map.isColliding(x, y) && !isObject) return [];\n\n        // Sends the packet to the server with the request.\n        this.game.socket.send(Packets.Movement, {\n            opcode: Opcodes.Movement.Request,\n            requestX: x,\n            requestY: y,\n            playerX: this.character.gridX,\n            playerY: this.character.gridY,\n            targetInstance: this.character.target?.instance,\n            following: this.character.following\n        });\n\n        let ignores: TileIgnore[] = [],\n            cursor = '';\n\n        // Treats an object as a character so we can path towards it.\n        if (isObject) {\n            ignores.push({ x, y });\n\n            cursor = this.map.getTileCursor(x, y);\n\n            // Little bit of a hack, but we ignore the tiles around the object for later.\n            if (cursor === 'fishing')\n                ignores.push({ x: x + 1, y }, { x: x - 1, y }, { x, y: y + 1 }, { x, y: y - 1 });\n        }\n\n        return this.game.findPath(this.character, x, y, ignores, cursor);\n    }\n\n    /**\n     * Updates the player's selected tile position and sends a packet to the server\n     * to inform it that the player has started moving.\n     * @param path Contains the array of tiles that the player will move through.\n     */\n\n    protected override handleStartPathing(path: number[][]): void {\n        // The selected tile is the last tile in the path.\n        [this.game.input.selectedX, this.game.input.selectedY] = path[path.length - 1];\n\n        this.character.moving = true;\n        this.game.input.selectedCellVisible = true;\n\n        this.game.socket.send(Packets.Movement, {\n            opcode: Opcodes.Movement.Started,\n            requestX: this.game.input.selectedX,\n            requestY: this.game.input.selectedY,\n            playerX: this.character.gridX,\n            playerY: this.character.gridY,\n            movementSpeed: this.character.movementSpeed,\n            targetInstance: this.character.target?.instance\n        });\n    }\n\n    /**\n     * Subclass implementation of the stop pathing handler. We update all the necessary\n     * information regarding input and player's actions here.\n     * @param x The x grid coordinate of the tile the player stopped on.\n     * @param y The y grid coordinate of the tile the player stopped on.\n     */\n\n    protected override handleStopPathing(x: number, y: number): void {\n        this.entities.registerPosition(this.character);\n\n        // Once stopped, remove the selected tile animation.\n        this.game.input.selectedCellVisible = false;\n\n        // Clipping the camera ensures it's always bound to the nearest tile.\n        this.game.camera.clip();\n\n        // Sends the stop pathing packet to the server\n        this.game.socket.send(Packets.Movement, {\n            opcode: Opcodes.Movement.Stop,\n            playerX: this.character.gridX,\n            playerY: this.character.gridY,\n            targetInstance:\n                this.character.target?.instance || this.game.getEntityAt(x, y)?.instance,\n            orientation: this.character.orientation\n        });\n\n        // TODO - Combine these two packets into the movement packet.\n\n        if (this.character.trading)\n            this.game.socket.send(Packets.Trade, {\n                opcode: Opcodes.Trade.Request,\n                instance: this.character.target?.instance\n            });\n\n        this.game.socket.send(Packets.Target, [\n            this.getTargetType(),\n            this.character.target?.instance || ''\n        ]);\n\n        // ---------------------------------------------------------\n\n        if (this.character.target) {\n            // Orient the player towards the target.\n            this.character.lookAt(this.character.target);\n\n            // Remove the target when we target objects.\n            if (this.character.target.isObject()) this.character.removeTarget();\n\n            // Disable keyboard movement until we let go.\n            (this.character as Player).disableAction = true;\n        }\n\n        this.game.input.setPassiveTarget();\n\n        // Save the player's orientation.\n        this.game.storage.setOrientation(this.character.orientation);\n\n        // Reset the animated tiles when we stop moving.\n        this.game.renderer.resetAnimatedTiles();\n\n        // Reset movement and trading variables\n        this.character.moving = false;\n        this.character.trading = false;\n    }\n\n    /**\n     * Called for every transition of the player from one tile to another. We synchronizew\n     * the camera and update the boundaries (if we don't use centred camera). We also send\n     * a packet to the server to inform it that the player has moved. Lastly we check\n     * if the player can initiate combat (if they targeted an entity).\n     */\n\n    protected override handleStep(): void {\n        // While we have tiles left in our pathing we register the character's position\n        if (this.character.hasNextStep()) this.entities.registerPosition(this.character);\n\n        // Check zoning boundaries if we're using a non-centered camera.\n        if (!this.game.camera.isCentered()) this.game.updateCameraBounds();\n\n        // Used to prevent sending double packets.\n        if (this.lastStepX === this.character.gridX && this.lastStepY === this.character.gridY)\n            return;\n\n        // Send the packet to the server to inform it that the player has moved.\n        this.game.socket.send(Packets.Movement, {\n            opcode: Opcodes.Movement.Step,\n            playerX: this.character.gridX,\n            playerY: this.character.gridY,\n            timestamp: Date.now()\n        });\n\n        // Update the last step coordinates.\n        this.lastStepX = this.character.gridX;\n        this.lastStepY = this.character.gridY;\n\n        // Check if we can initiate combat.\n        if (this.character.canAttackTarget() && !this.character.trading) this.character.stop(true);\n    }\n\n    /**\n     * Updates the animated tiles every second step to get them all\n     * synchronized with one another.\n     */\n\n    protected override handleSecondStep(): void {\n        this.game.renderer.updateAnimatedTiles();\n    }\n\n    /**\n     * Updates the camera position to center on the player.\n     */\n\n    protected override handleMove(): void {\n        if (!this.game.camera.isCentered()) return;\n\n        this.game.camera.centreOn(this.character);\n    }\n\n    /**\n     * This is a temporary function until we move unncessary packets to be handled by the\n     * server side and update the client-side targeting system. This essentially checks\n     * what type of interaction the player is doing.\n     * @returns The interaction type.\n     */\n\n    private getTargetType(): Opcodes.Target {\n        if (!this.character.target) return Opcodes.Target.None;\n\n        // Interaction type for npc and chests.\n        if (this.character.target.isNPC() || this.character.target.isChest())\n            return Opcodes.Target.Talk;\n\n        // Interaction type for objects.\n        if (this.character.target.isObject()) return Opcodes.Target.Object;\n\n        // Interaction for attacking\n        if (this.character.target.isMob() || (this.character.target.isPlayer() && this.game.pvp))\n            return Opcodes.Target.Attack;\n\n        return Opcodes.Target.None;\n    }\n}\n","import mapData from '../../data/maps/map.json';\nimport log from '../lib/log';\nimport Utils, { isInt } from '../utils/util';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type {\n    ProcessedAnimation,\n    ProcessedTileset,\n    RegionData,\n    RegionTile,\n    RegionTileData\n} from '@kaetram/common/types/map';\nimport type Game from '../game';\n\nexport interface CursorTiles {\n    [tileId: number]: string;\n}\n\n// An extension of image with tileset information attached.\ninterface TilesetInfo extends HTMLImageElement {\n    index: number;\n    path: string;\n    firstGid: number;\n    lastGid: number;\n    loaded: boolean;\n}\n\nexport default class Map {\n    public width = mapData.width;\n    public height = mapData.height;\n    public tileSize = mapData.tileSize;\n\n    // Map data\n    public data: RegionTile[] = [];\n    public grid: number[][] = []; // Two dimensional grid array for collisions/pathing\n\n    private high: number[] = mapData.high;\n    private objects: number[] = [];\n    private lights: number[] = [];\n\n    public tilesets: TilesetInfo[] = [];\n    private rawTilesets: ProcessedTileset[] = mapData.tilesets; // Key is tileset id, value is the firstGID\n    private cursorTiles: CursorTiles = {};\n    private animatedTiles: { [tileId: number]: ProcessedAnimation[] } = mapData.animations;\n\n    public mapLoaded = false;\n    public regionsLoaded = 0;\n    private tilesetsLoaded = false;\n\n    private readyCallback?(): void;\n\n    public constructor(private game: Game) {\n        this.load();\n    }\n\n    /**\n     * A simple loop that continuously checks if the map has loaded.\n     * Once it has, it sends a ready callback signal.\n     */\n\n    private ready(): void {\n        if (this.mapLoaded && this.tilesetsLoaded) this.readyCallback?.();\n        else window.setTimeout(() => this.ready(), 100);\n    }\n\n    /**\n     * Uses webworkers to create an empty data and collision\n     * grid based on the map's dimensions. This can be quite\n     * time consuming so we relay it to an external worker\n     * to speed up the task.\n     */\n\n    private load(): void {\n        log.debug('Parsing map with Web Workers...');\n\n        // Store tile size globally into the utils.\n        Utils.tileSize = this.tileSize;\n        Utils.sideLength = this.width / Modules.Constants.MAP_DIVISION_SIZE;\n        Utils.thirdTile = this.tileSize / 3;\n        Utils.tileAndAQuarter = this.tileSize * 1.25;\n\n        let worker = new Worker(new URL('mapworker.ts', import.meta.url), { type: 'classic' });\n\n        // Send the map's width and height to the webworker.\n        worker.postMessage([this.width, this.height]);\n\n        worker.addEventListener('message', (event) => {\n            if (event.data.data) this.data = event.data.data;\n            if (event.data.grid) this.grid = event.data.grid;\n\n            this.loadRegionData();\n\n            this.mapLoaded = true;\n        });\n\n        this.loadTilesets();\n\n        this.ready();\n    }\n\n    /**\n     * Iterates through every region in the data and stores the\n     * information from each region into our local instance.\n     * @param regionData Dictionary containing regionId as key and region data array as value.\n     */\n\n    public loadRegions(regionData: RegionData): void {\n        for (let region in regionData) this.loadRegion(regionData[region], parseInt(region));\n\n        // Save data after we finish parsing it.\n        this.saveMapData();\n\n        // Bind the tile layer textures after we finish parsing the map.\n        if (this.game.useWebGl) this.game.renderer.bindTileLayers();\n    }\n\n    /**\n     * Loads data from all the tiles in the specified region.\n     * Each tile contains the x and y grid coordinate, along with information\n     * about tileIds, collisions, cursor, and objects.\n     * @param data Array of RegionTileData containing the data to load.\n     */\n\n    public loadRegion(data: RegionTileData[], region: number): void {\n        for (let tile of data) {\n            let index = this.coordToIndex(tile.x, tile.y),\n                objectIndex = this.objects.indexOf(index);\n\n            // Store the tile data so that we can render it later.\n            this.data[index] = tile.data;\n\n            // Add collision if the tile is colliding and there's no collision.\n            if (tile.c && !this.isColliding(tile.x, tile.y)) this.grid[tile.y][tile.x] = 1;\n\n            // Remove collision if the tile is not colliding and there's a collision.\n            if (!tile.c && this.isColliding(tile.x, tile.y)) this.grid[tile.y][tile.x] = 0;\n\n            // If the tile has a cursor, we store it in our cursorTiles dictionary.\n            if (tile.cur) this.cursorTiles[index] = tile.cur;\n\n            // If the tile doesn't have a cursor but the index is in our cursorTiles dictionary, we remove it.\n            if (!tile.cur && index in this.cursorTiles) this.cursorTiles[index] = '';\n\n            // If the tile has an object, we store it in our objects array.\n            if (tile.o && objectIndex < 0) this.objects.push(index);\n\n            // If the tile doesn't have an object but the index is in our objects array, we remove it.\n            if (!tile.o && objectIndex > -1) this.objects.splice(objectIndex, 1);\n\n            // Add the tile information to the WebGL renderer if it's active.\n            if (this.game.useWebGl) this.game.renderer.setTile(index, tile.data);\n        }\n\n        // Store the region we just saved into our local storage.\n        this.game.storage.setRegionData(data, region);\n    }\n\n    /**\n     * Iterates through the raw tileset data from the map parser. The key\n     * of the raw tileset data is the tileset id, and the value is the\n     * firstGID. Because loading tilesets occurs asynchronously, we need\n     * to keep track of how many tilesets we've loaded. Once the tilesets\n     * loaded match the number of raw tilesets, we can then toggle the\n     * `tilesetsLoaded` flag so that the map can be loaded (see `ready` function).\n     */\n\n    private loadTilesets(): void {\n        for (let index in this.rawTilesets)\n            this.loadTileset(this.rawTilesets[index], parseInt(index), (tileset: TilesetInfo) => {\n                this.tilesets.push(tileset);\n\n                if (this.tilesets.length === this.rawTilesets.length) {\n                    // Sort tilesets by first gid.\n                    this.tilesets = this.tilesets.sort((a, b) => a.firstGid - b.firstGid);\n\n                    this.tilesetsLoaded = true;\n                }\n            });\n    }\n\n    /**\n     * Handles loading the image for a tileset. Once the image has been loaded\n     * we invoke the callbakc function with the information about the new tileset.\n     * @param tileset Raw tileset data parsed from the map.\n     * @param callback Parsed client tileset of type TilesetInfo.\n     */\n\n    private loadTileset(\n        tileset: ProcessedTileset,\n        index: number,\n        callback: (tileset: TilesetInfo) => void\n    ): void {\n        let tilesetInfo = new Image() as TilesetInfo,\n            path = `/img/tilesets/${tileset.path}`; // tileset path in the client.\n\n        tilesetInfo.crossOrigin = 'Anonymous';\n        tilesetInfo.path = path;\n        tilesetInfo.src = path;\n        tilesetInfo.index = index;\n        tilesetInfo.firstGid = tileset.firstGid;\n        tilesetInfo.lastGid = tileset.lastGid;\n\n        // Listener for when the image has finished loading. Equivalent of `image.onload`\n        tilesetInfo.addEventListener('load', () => {\n            // Prevent uneven tilemaps from loading.\n            if (tilesetInfo.width % this.tileSize > 0)\n                throw new Error(`The tile size is malformed in the tile set: ${tileset.path}`);\n\n            // Mark tileset as loaded.\n            tilesetInfo.loaded = true;\n\n            callback(tilesetInfo);\n        });\n\n        tilesetInfo.addEventListener('error', () => {\n            throw new Error(`Could not find tile set: ${tileset.path}`);\n        });\n\n        /**\n         * A fallback timeout in case the tileset image refuses to load. For some reason\n         * when we try to load tilesets, the callback is not initialzied properly. This\n         * causes the game to hang on the loading screen. Where it gets weirder is that\n         * as long as a `console.log` is present, the callback is initialized properly.\n         * This is a safety net that checks every 500ms if the tileset has loaded.\n         */\n\n        setTimeout(() => {\n            if (tilesetInfo.loaded) return;\n\n            // Recursively call this function until the tileset is loaded.\n            this.loadTileset(tileset, index, callback);\n\n            log.debug(`Retrying to load tileset: ${tileset.path}`);\n        }, 500);\n    }\n\n    /**\n     * Uses IndexedDB to retrieve the stored map data from the previous session(s).\n     * We either receive completed data or empty region information. Once we have\n     * parsed the data, we can then proceed with loading the rest of the game.\n     */\n\n    public loadRegionData(): void {\n        this.game.storage.getRegionData((data) => {\n            // Used for debugging purposes.\n            let keys = Object.keys(data.regionData);\n\n            if (keys.length > 0) {\n                try {\n                    this.loadRegions(data.regionData);\n                } catch {\n                    this.game.storage.clear();\n                }\n\n                this.objects = data.objects;\n                this.cursorTiles = data.cursorTiles;\n\n                this.regionsLoaded = keys.length;\n\n                log.info(`Preloaded map data with ${keys.length} regions.`);\n            }\n\n            // Used for WebGL to load map texture information.\n            this.game.renderer.load();\n        });\n    }\n\n    /**\n     * Saves and stores information about objects and cursor tiles into the local storage.\n     */\n\n    private saveMapData(): void {\n        this.game.storage.setMapData(this.objects, this.cursorTiles);\n    }\n\n    /**\n     * Converts a coordinate (x and y) into an array index.\n     * @returns Index position relative to a 1 dimensional array.\n     */\n\n    public coordToIndex(x: number, y: number): number {\n        return y * this.width + x;\n    }\n\n    /**\n     * Works in reverse to `coordToIndex`. Takes an index\n     * within a one dimensional array and returns the\n     * coordinate variant of that index.\n     * @param index The index of the coordinate\n     */\n\n    public indexToCoord(index: number): Position {\n        return {\n            x: index % this.width,\n            y: Math.floor(index / this.width)\n        };\n    }\n\n    /**\n     * Checks if a coordinate in the grid collision is\n     * marked as a collision.\n     * @param x The x grid coordinate.\n     * @param y The y grid coordinate.\n     * @returns Whether the x and y coordinates in the 2D grid are colliding.\n     */\n\n    public isColliding(x: number, y: number): boolean {\n        if (this.isOutOfBounds(x, y)) return true;\n        if ((this.data[this.coordToIndex(x, y)] as number) < 1) return true;\n\n        return this.grid[y][x] === 1;\n    }\n\n    /**\n     * Converts the x and y grid coordinate parameters into an index and checks\n     * whether that index is contained within our objects array.\n     * @param x The x grid coordinate we are checking.\n     * @param y The y grid coordinate we are checking.\n     * @returns Whether or not the x and y grid index is in our objects array.\n     */\n\n    public isObject(x: number, y: number): boolean {\n        let index = this.coordToIndex(x, y);\n\n        return this.objects.includes(index);\n    }\n\n    /**\n     * Converts the x and y grid coordinate into an index and checks\n     * our cursor tiles dictionary for an entry of the index. If it's not\n     * found, it returns undefined by default.\n     * @param x The x grid coordinate we are checking.\n     * @param y The y grid coordinate we are checking.\n     * @returns The name of the cursor at the tile index if exists, otherwise undefined.\n     */\n\n    public getTileCursor(x: number, y: number): string {\n        let index = this.coordToIndex(x, y);\n\n        return this.cursorTiles[index];\n    }\n\n    /**\n     * Checks if the tileId parameter is part of our high tiles array.\n     * @param tileId The tileId we are checking.\n     * @returns Whether the tileId is contained in our high tiles array.\n     */\n\n    public isHighTile(tileId: number): boolean {\n        return this.high.includes(tileId);\n    }\n\n    /**\n     * Checks if the tileId parameter is part of our lights array.\n     * @param tileId The tileId we are checking.\n     * @returns Whether or not the tileId is contained in our lights array.\n     */\n\n    public isLightTile(tileId: number): boolean {\n        return this.lights.includes(tileId);\n    }\n\n    /**\n     * Checks if there's an entry for the tileId in our animations dictionary.\n     * @param tileId The tileId we are checking animations of.\n     * @returns Whether the tileId is contained in our animations dictionary.\n     */\n\n    public isAnimatedTile(tileId: number): boolean {\n        return tileId in this.animatedTiles;\n    }\n\n    /**\n     * Cached data is represented by the amount of regions loaded.\n     * @returns Whether or not the amount of regions loaded is greater than 0.\n     */\n\n    public hasCachedDate(): boolean {\n        return this.regionsLoaded > 0;\n    }\n\n    /**\n     * Verifies if x and y are integers and whether or not they are within the bounds of\n     * the map. That is, whether x and y are not smaller than 0, and no greater than the\n     * width and height of the map respectively.\n     * @param x The x grid coordinate we are checking.\n     * @param y The y grid coordinate we are checking.\n     * @returns Whether or not the x and y grid coordinates are within the bounds of the map.\n     */\n\n    public isOutOfBounds(x: number, y: number): boolean {\n        return isInt(x) && isInt(y) && (x < 0 || x >= this.width || y < 0 || y >= this.height);\n    }\n\n    /**\n     * Grabs an array of animated tile information based on tileId.\n     * @param tileId THe tileId we are looking for.\n     * @returns A ProcessedAnimation object array from our animated tiles.\n     */\n\n    public getTileAnimation(tileId: number): ProcessedAnimation[] {\n        return this.animatedTiles[tileId];\n    }\n\n    /**\n     * Finds the tileset that the tileId belongs to.\n     * @param tileId The tileId we are trying to determine tileset of.\n     * @returns The tileset of the tileId if found or otherwise undefined.\n     */\n\n    public getTilesetFromId(tileId: number): TilesetInfo | undefined {\n        for (let tileset of this.tilesets)\n            if (tileId >= tileset.firstGid && tileId <= tileset.lastGid) return tileset;\n\n        return undefined;\n    }\n    /**\n     * Callback for when the map is ready to be used (preliminary data is loaded).\n     */\n\n    public onReady(callback: () => void): void {\n        this.readyCallback = callback;\n    }\n}\n","\n/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED$1               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN$1             = 2;\n\n/*============================================================================*/\n\n\nfunction zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH$1    = 3;\nconst MAX_MATCH$1    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES$1       = 30;\n/* number of distance codes */\n\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\n\nconst MAX_BITS$1      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES$1 + 2) * 2);\nzero$1(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES$1 * 2);\nzero$1(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero$1(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\nzero$1(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES$1);\nzero$1(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES$1);\nzero$1(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Tracev((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Tracev((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) => {\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n\n  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS$1; bits++) {\n    code = (code + bl_count[bits - 1]) << 1;\n    next_code[bits] = code;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES$1; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES$1; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.sym_next = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) => {\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) => {\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let sx = 0;         /* running index in sym_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.sym_next !== 0) {\n    do {\n      dist = s.pending_buf[s.sym_buf + sx++] & 0xff;\n      dist += (s.pending_buf[s.sym_buf + sx++] & 0xff) << 8;\n      lc = s.pending_buf[s.sym_buf + sx++];\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and sym_buf is ok: */\n      //Assert(s->pending < s->lit_bufsize + sx, \"pendingBuf overflow\");\n\n    } while (sx < s.sym_next);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE$1;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) => {\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"block list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"allow list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* block_mask is the bit mask of block-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let block_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"block-listed\") bytes. */\n  for (n = 0; n <= 31; n++, block_mask >>>= 1) {\n    if ((block_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"allow-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS$1; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"block-listed\" or \"allow-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init$1 = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  bi_windup(s);        /* align on byte boundary */\n  put_short(s, stored_len);\n  put_short(s, ~stored_len);\n  if (stored_len) {\n    s.pending_buf.set(s.window.subarray(buf, buf + stored_len), s.pending);\n  }\n  s.pending += stored_len;\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align$1 = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and write out the encoded block.\n */\nconst _tr_flush_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN$1) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->sym_next / 3));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block$1(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally$1 = (s, dist, lc) => {\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist;\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist >> 8;\n  s.pending_buf[s.sym_buf + s.sym_next++] = lc;\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n  return (s.sym_next === s.sym_end);\n};\n\nvar _tr_init_1  = _tr_init$1;\nvar _tr_stored_block_1 = _tr_stored_block$1;\nvar _tr_flush_block_1  = _tr_flush_block$1;\nvar _tr_tally_1 = _tr_tally$1;\nvar _tr_align_1 = _tr_align$1;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants$2 = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_UNKNOWN,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants$2;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE    =  42;    /* zlib header -> BUSY_STATE */\n//#ifdef GZIP\nconst GZIP_STATE    =  57;    /* gzip header -> BUSY_STATE | EXTRA_STATE */\n//#endif\nconst EXTRA_STATE   =  69;    /* gzip extra block -> NAME_STATE */\nconst NAME_STATE    =  73;    /* gzip file name -> COMMENT_STATE */\nconst COMMENT_STATE =  91;    /* gzip comment -> HCRC_STATE */\nconst HCRC_STATE    = 103;    /* gzip header CRC -> BUSY_STATE */\nconst BUSY_STATE    = 113;    /* deflate -> FINISH_STATE */\nconst FINISH_STATE  = 666;    /* stream complete */\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) * 2) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n/* ===========================================================================\n * Slide the hash table when sliding the window down (could be avoided with 32\n * bit values at the expense of memory usage). We slide even when level == 0 to\n * keep the hash table consistent if we switch back to level > 0 later.\n */\nconst slide_hash = (s) => {\n  let n, m;\n  let p;\n  let wsize = s.w_size;\n\n  n = s.hash_size;\n  p = n;\n  do {\n    m = s.head[--p];\n    s.head[p] = (m >= wsize ? m - wsize : 0);\n  } while (--n);\n  n = wsize;\n//#ifndef FASTEST\n  p = n;\n  do {\n    m = s.prev[--p];\n    s.prev[p] = (m >= wsize ? m - wsize : 0);\n    /* If n is not on any hash chain, prev[n] is garbage but\n     * its value will never be used.\n     */\n  } while (--n);\n//#endif\n};\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output, except for\n * some deflate_stored() output, goes through this function so some\n * applications may wish to modify it to avoid allocating a large\n * strm->next_out buffer and copying into it. (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out  += len;\n  s.pending_out  += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending      -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let n, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size - more), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n      if (s.insert > s.strstart) {\n        s.insert = s.strstart;\n      }\n      slide_hash(s);\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n *\n * In case deflateParams() is used to later switch to a non-zero compression\n * level, s->matches (otherwise unused when storing) keeps track of the number\n * of hash table slides to perform. If s->matches is 1, then one hash table\n * slide will be done when switching. If s->matches is 2, the maximum value\n * allowed here, then the hash table will be cleared, since two or more slides\n * is the same as a clear.\n *\n * deflate_stored() is written to minimize the number of times an input byte is\n * copied. It is most efficient with large input and output buffers, which\n * maximizes the opportunites to have a single copy from next_in to next_out.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Smallest worthy block size when not flushing or finishing. By default\n   * this is 32K. This can be as small as 507 bytes for memLevel == 1. For\n   * large input and output buffers, the stored block size will be larger.\n   */\n  let min_block = s.pending_buf_size - 5 > s.w_size ? s.w_size : s.pending_buf_size - 5;\n\n  /* Copy as many min_block or larger stored blocks directly to next_out as\n   * possible. If flushing, copy the remaining available input to next_out as\n   * stored blocks, if there is enough space.\n   */\n  let len, left, have, last = 0;\n  let used = s.strm.avail_in;\n  do {\n    /* Set len to the maximum size block that we can copy directly with the\n     * available input data and output space. Set left to how much of that\n     * would be copied from what's left in the window.\n     */\n    len = 65535/* MAX_STORED */;     /* maximum deflate stored block length */\n    have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    if (s.strm.avail_out < have) {         /* need room for header */\n      break;\n    }\n      /* maximum stored block length that will fit in avail_out: */\n    have = s.strm.avail_out - have;\n    left = s.strstart - s.block_start;  /* bytes left in window */\n    if (len > left + s.strm.avail_in) {\n      len = left + s.strm.avail_in;   /* limit len to the input */\n    }\n    if (len > have) {\n      len = have;             /* limit len to the output */\n    }\n\n    /* If the stored block would be less than min_block in length, or if\n     * unable to copy all of the available input when flushing, then try\n     * copying to the window and the pending buffer instead. Also don't\n     * write an empty block when flushing -- deflate() does that.\n     */\n    if (len < min_block && ((len === 0 && flush !== Z_FINISH$3) ||\n                        flush === Z_NO_FLUSH$2 ||\n                        len !== left + s.strm.avail_in)) {\n      break;\n    }\n\n    /* Make a dummy stored block in pending to get the header bytes,\n     * including any pending bits. This also updates the debugging counts.\n     */\n    last = flush === Z_FINISH$3 && len === left + s.strm.avail_in ? 1 : 0;\n    _tr_stored_block(s, 0, 0, last);\n\n    /* Replace the lengths in the dummy stored block with len. */\n    s.pending_buf[s.pending - 4] = len;\n    s.pending_buf[s.pending - 3] = len >> 8;\n    s.pending_buf[s.pending - 2] = ~len;\n    s.pending_buf[s.pending - 1] = ~len >> 8;\n\n    /* Write the stored block header bytes. */\n    flush_pending(s.strm);\n\n//#ifdef ZLIB_DEBUG\n//    /* Update debugging counts for the data about to be copied. */\n//    s->compressed_len += len << 3;\n//    s->bits_sent += len << 3;\n//#endif\n\n    /* Copy uncompressed bytes from the window to next_out. */\n    if (left) {\n      if (left > len) {\n        left = len;\n      }\n      //zmemcpy(s->strm->next_out, s->window + s->block_start, left);\n      s.strm.output.set(s.window.subarray(s.block_start, s.block_start + left), s.strm.next_out);\n      s.strm.next_out += left;\n      s.strm.avail_out -= left;\n      s.strm.total_out += left;\n      s.block_start += left;\n      len -= left;\n    }\n\n    /* Copy uncompressed bytes directly from next_in to next_out, updating\n     * the check value.\n     */\n    if (len) {\n      read_buf(s.strm, s.strm.output, s.strm.next_out, len);\n      s.strm.next_out += len;\n      s.strm.avail_out -= len;\n      s.strm.total_out += len;\n    }\n  } while (last === 0);\n\n  /* Update the sliding window with the last s->w_size bytes of the copied\n   * data, or append all of the copied data to the existing window if less\n   * than s->w_size bytes were copied. Also update the number of bytes to\n   * insert in the hash tables, in the event that deflateParams() switches to\n   * a non-zero compression level.\n   */\n  used -= s.strm.avail_in;    /* number of input bytes directly copied */\n  if (used) {\n    /* If any input was used, then no unused input remains in the window,\n     * therefore s->block_start == s->strstart.\n     */\n    if (used >= s.w_size) {  /* supplant the previous history */\n      s.matches = 2;     /* clear hash */\n      //zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - s.w_size, s.strm.next_in), 0);\n      s.strstart = s.w_size;\n      s.insert = s.strstart;\n    }\n    else {\n      if (s.window_size - s.strstart <= used) {\n        /* Slide the window down. */\n        s.strstart -= s.w_size;\n        //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n        s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n        if (s.matches < 2) {\n          s.matches++;   /* add a pending slide_hash() */\n        }\n        if (s.insert > s.strstart) {\n          s.insert = s.strstart;\n        }\n      }\n      //zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - used, s.strm.next_in), s.strstart);\n      s.strstart += used;\n      s.insert += used > s.w_size - s.insert ? s.w_size - s.insert : used;\n    }\n    s.block_start = s.strstart;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* If the last block was written to next_out, then done. */\n  if (last) {\n    return BS_FINISH_DONE;\n  }\n\n  /* If flushing and all input has been consumed, then done. */\n  if (flush !== Z_NO_FLUSH$2 && flush !== Z_FINISH$3 &&\n    s.strm.avail_in === 0 && s.strstart === s.block_start) {\n    return BS_BLOCK_DONE;\n  }\n\n  /* Fill the window with any remaining input. */\n  have = s.window_size - s.strstart;\n  if (s.strm.avail_in > have && s.block_start >= s.w_size) {\n    /* Slide the window down. */\n    s.block_start -= s.w_size;\n    s.strstart -= s.w_size;\n    //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n    s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n    if (s.matches < 2) {\n      s.matches++;       /* add a pending slide_hash() */\n    }\n    have += s.w_size;      /* more space now */\n    if (s.insert > s.strstart) {\n      s.insert = s.strstart;\n    }\n  }\n  if (have > s.strm.avail_in) {\n    have = s.strm.avail_in;\n  }\n  if (have) {\n    read_buf(s.strm, s.window, s.strstart, have);\n    s.strstart += have;\n    s.insert += have > s.w_size - s.insert ? s.w_size - s.insert : have;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* There was not enough avail_out to write a complete worthy or flushed\n   * stored block to next_out. Write a stored block to pending instead, if we\n   * have enough input for a worthy block, or if flushing and there is enough\n   * room for the remaining input as a stored block in the pending buffer.\n   */\n  have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    /* maximum stored block length that will fit in pending: */\n  have = s.pending_buf_size - have > 65535/* MAX_STORED */ ? 65535/* MAX_STORED */ : s.pending_buf_size - have;\n  min_block = have > s.w_size ? s.w_size : have;\n  left = s.strstart - s.block_start;\n  if (left >= min_block ||\n     ((left || flush === Z_FINISH$3) && flush !== Z_NO_FLUSH$2 &&\n     s.strm.avail_in === 0 && left <= have)) {\n    len = left > have ? have : left;\n    last = flush === Z_FINISH$3 && s.strm.avail_in === 0 &&\n         len === left ? 1 : 0;\n    _tr_stored_block(s, s.block_start, len, last);\n    s.block_start += len;\n    flush_pending(s.strm);\n  }\n\n  /* We've done all we can with the available input and output. */\n  return last ? BS_FINISH_STARTED : BS_NEED_MORE;\n};\n\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED$2; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.sym_buf = 0;        /* buffer for distances and literals/lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.sym_next = 0;      /* running index in sym_buf */\n  this.sym_end = 0;       /* symbol table full when sym_next reaches this */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\n/* =========================================================================\n * Check for a valid deflate stream state. Return 0 if ok, 1 if not.\n */\nconst deflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const s = strm.state;\n  if (!s || s.strm !== strm || (s.status !== INIT_STATE &&\n//#ifdef GZIP\n                                s.status !== GZIP_STATE &&\n//#endif\n                                s.status !== EXTRA_STATE &&\n                                s.status !== NAME_STATE &&\n                                s.status !== COMMENT_STATE &&\n                                s.status !== HCRC_STATE &&\n                                s.status !== BUSY_STATE &&\n                                s.status !== FINISH_STATE)) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status =\n//#ifdef GZIP\n    s.wrap === 2 ? GZIP_STATE :\n//#endif\n    s.wrap ? INIT_STATE : BUSY_STATE;\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = -2;\n  _tr_init(s);\n  return Z_OK$3;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK$3) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (deflateStateCheck(strm) || strm.state.wrap !== 2) {\n    return Z_STREAM_ERROR$2;\n  }\n  strm.state.gzhead = head;\n  return Z_OK$3;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR$2;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION$1) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED || (windowBits === 8 && wrap !== 1)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n  s.status = INIT_STATE;     /* to pass state test in deflateReset() */\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  /* We overlay pending_buf and sym_buf. This works since the average size\n   * for length/distance pairs over any compressed block is assured to be 31\n   * bits or less.\n   *\n   * Analysis: The longest fixed codes are a length code of 8 bits plus 5\n   * extra bits, for lengths 131 to 257. The longest fixed distance codes are\n   * 5 bits plus 13 extra bits, for distances 16385 to 32768. The longest\n   * possible fixed-codes length/distance pair is then 31 bits total.\n   *\n   * sym_buf starts one-fourth of the way into pending_buf. So there are\n   * three bytes in sym_buf for every four bytes in pending_buf. Each symbol\n   * in sym_buf is three bytes -- two for the distance and one for the\n   * literal/length. As each symbol is consumed, the pointer to the next\n   * sym_buf value to read moves forward three bytes. From that symbol, up to\n   * 31 bits are written to pending_buf. The closest the written pending_buf\n   * bits gets to the next sym_buf symbol to read is just before the last\n   * code is written. At that time, 31*(n-2) bits have been written, just\n   * after 24*(n-2) bits have been consumed from sym_buf. sym_buf starts at\n   * 8*n bits into pending_buf. (Note that the symbol buffer fills when n-1\n   * symbols are written.) The closest the writing gets to what is unread is\n   * then n+14 bits. Here n is lit_bufsize, which is 16384 by default, and\n   * can range from 128 to 32768.\n   *\n   * Therefore, at a minimum, there are 142 bits of space between what is\n   * written and what is read in the overlain buffers, so the symbols cannot\n   * be overwritten by the compressed data. That space is actually 139 bits,\n   * due to the three-bit fixed-code block header.\n   *\n   * That covers the case where either Z_FIXED is specified, forcing fixed\n   * codes, or when the use of fixed codes is chosen, because that choice\n   * results in a smaller compressed block than dynamic codes. That latter\n   * condition then assures that the above analysis also covers all dynamic\n   * blocks. A dynamic-code block will only be chosen to be emitted if it has\n   * fewer bits than a fixed-code block would for the same set of symbols.\n   * Therefore its average symbol length is assured to be less than 31. So\n   * the compressed data for a dynamic block also cannot overwrite the\n   * symbols from which it is being constructed.\n   */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->sym_buf = s->pending_buf + s->lit_bufsize;\n  s.sym_buf = s.lit_bufsize;\n\n  //s->sym_end = (s->lit_bufsize - 1) * 3;\n  s.sym_end = (s.lit_bufsize - 1) * 3;\n  /* We avoid equality with lit_bufsize*3 because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n};\n\n\n/* ========================================================================= */\nconst deflate$2 = (strm, flush) => {\n\n  if (deflateStateCheck(strm) || flush > Z_BLOCK$1 || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (strm.avail_in !== 0 && !strm.input) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n  }\n\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH$3) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* Write the header */\n  if (s.status === INIT_STATE && s.wrap === 0) {\n    s.status = BUSY_STATE;\n  }\n  if (s.status === INIT_STATE) {\n    /* zlib header */\n    let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;\n    let level_flags = -1;\n\n    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n      level_flags = 0;\n    } else if (s.level < 6) {\n      level_flags = 1;\n    } else if (s.level === 6) {\n      level_flags = 2;\n    } else {\n      level_flags = 3;\n    }\n    header |= (level_flags << 6);\n    if (s.strstart !== 0) { header |= PRESET_DICT; }\n    header += 31 - (header % 31);\n\n    putShortMSB(s, header);\n\n    /* Save the adler32 of the preset dictionary: */\n    if (s.strstart !== 0) {\n      putShortMSB(s, strm.adler >>> 16);\n      putShortMSB(s, strm.adler & 0xffff);\n    }\n    strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#ifdef GZIP\n  if (s.status === GZIP_STATE) {\n    /* gzip header */\n    strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n    put_byte(s, 31);\n    put_byte(s, 139);\n    put_byte(s, 8);\n    if (!s.gzhead) { // s->gzhead == Z_NULL\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, OS_CODE);\n      s.status = BUSY_STATE;\n\n      /* Compression must start with an empty pending buffer */\n      flush_pending(strm);\n      if (s.pending !== 0) {\n        s.last_flush = -1;\n        return Z_OK$3;\n      }\n    }\n    else {\n      put_byte(s, (s.gzhead.text ? 1 : 0) +\n                  (s.gzhead.hcrc ? 2 : 0) +\n                  (!s.gzhead.extra ? 0 : 4) +\n                  (!s.gzhead.name ? 0 : 8) +\n                  (!s.gzhead.comment ? 0 : 16)\n      );\n      put_byte(s, s.gzhead.time & 0xff);\n      put_byte(s, (s.gzhead.time >> 8) & 0xff);\n      put_byte(s, (s.gzhead.time >> 16) & 0xff);\n      put_byte(s, (s.gzhead.time >> 24) & 0xff);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, s.gzhead.os & 0xff);\n      if (s.gzhead.extra && s.gzhead.extra.length) {\n        put_byte(s, s.gzhead.extra.length & 0xff);\n        put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n      }\n      if (s.gzhead.hcrc) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n      }\n      s.gzindex = 0;\n      s.status = EXTRA_STATE;\n    }\n  }\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let left = (s.gzhead.extra.length & 0xffff) - s.gzindex;\n      while (s.pending + left > s.pending_buf_size) {\n        let copy = s.pending_buf_size - s.pending;\n        // zmemcpy(s.pending_buf + s.pending,\n        //    s.gzhead.extra + s.gzindex, copy);\n        s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex, s.gzindex + copy), s.pending);\n        s.pending = s.pending_buf_size;\n        //--- HCRC_UPDATE(beg) ---//\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n        //---//\n        s.gzindex += copy;\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n        beg = 0;\n        left -= copy;\n      }\n      // JS specific: s.gzhead.extra may be TypedArray or Array for backward compatibility\n      //              TypedArray.slice and TypedArray.from don't exist in IE10-IE11\n      let gzhead_extra = new Uint8Array(s.gzhead.extra);\n      // zmemcpy(s->pending_buf + s->pending,\n      //     s->gzhead->extra + s->gzindex, left);\n      s.pending_buf.set(gzhead_extra.subarray(s.gzindex, s.gzindex + left), s.pending);\n      s.pending += left;\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = NAME_STATE;\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = COMMENT_STATE;\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n    }\n    s.status = HCRC_STATE;\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n      }\n      put_byte(s, strm.adler & 0xff);\n      put_byte(s, (strm.adler >> 8) & 0xff);\n      strm.adler = 0; //crc32(0L, Z_NULL, 0);\n    }\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#endif\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {\n    let bstate = s.level === 0 ? deflate_stored(s, flush) :\n                 s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :\n                 s.strategy === Z_RLE ? deflate_rle(s, flush) :\n                 configuration_table[s.level].func(s, flush);\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK$3;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH$1) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK$3;\n      }\n    }\n  }\n\n  if (flush !== Z_FINISH$3) { return Z_OK$3; }\n  if (s.wrap <= 0) { return Z_STREAM_END$3; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const status = strm.state.status;\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK$3;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2$1 = deflate$2;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateGetDictionary = deflateGetDictionary;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1$2 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2$1,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate$1(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1$2.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$2) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1$2.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1$2.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$2) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1$2.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$2;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$2) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate$1(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip$1(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_2 = deflate$1;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar constants$1 = constants$2;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD$1 = 16209;       /* got a data error -- remain here until reset */\nconst TYPE$1 = 16191;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD$1;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD$1;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE$1;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD$1;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n//  let shoextra;    /* extra bits table to use */\n  let match;                  /* use base and extra for symbol >= match */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES$1) {\n    base = extra = work;    /* dummy value--not used */\n    match = 20;\n\n  } else if (type === LENS$1) {\n    base = lbase;\n    extra = lext;\n    match = 257;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    match = 0;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] + 1 < match) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] >= match) {\n      here_op = extra[work[sym] - match];\n      here_val = base[work[sym] - match];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,\n  Z_DEFLATED\n} = constants$2;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 16180;       /* i: waiting for magic header */\nconst    FLAGS = 16181;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 16182;       /* i: waiting for modification time (gzip) */\nconst    OS = 16183;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 16184;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 16185;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 16186;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 16187;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 16188;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 16189;    /* i: waiting for dictionary check value */\nconst    DICT = 16190;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 16192;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 16193;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 16194;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16195;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 16196;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 16197;   /* i: waiting for code length code lengths */\nconst        CODELENS = 16198;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 16199;      /* i: same as LEN below, but only first time in */\nconst            LEN = 16200;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 16201;    /* i: waiting for length extra bits */\nconst            DIST = 16202;      /* i: waiting for distance code */\nconst            DISTEXT = 16203;   /* i: waiting for distance extra bits */\nconst            MATCH = 16204;     /* o: waiting for output space to copy string */\nconst            LIT = 16205;       /* o: waiting for output space to write literal */\nconst    CHECK = 16206;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 16207;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 16208;      /* finished check, done -- remain here until reset */\nconst    BAD = 16209;       /* got a data error -- remain here until reset */\nconst    MEM = 16210;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 16211;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.strm = null;           /* pointer back to this zlib stream */\n  this.mode = 0;              /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip,\n                                 bit 2 true to validate check value */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib), or\n                                 -1 if raw or no header yet */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const state = strm.state;\n  if (!state || state.strm !== strm ||\n    state.mode < HEAD || state.mode > SYNC) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.flags = -1;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$1;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 5;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.strm = strm;\n  state.window = null/*Z_NULL*/;\n  state.mode = HEAD;     /* to pass state test in inflateReset2() */\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$1) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate$2 = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (inflateStateCheck(strm) || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$1;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          if (state.wbits === 0) {\n            state.wbits = 15;\n          }\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        if (len > 15 || len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        state.flags = 0;               /* indicate zlib header */\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if ((state.flags & 0x0200) && (state.wrap & 4)) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT$1;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if ((state.wrap & 4) && _out) {\n            strm.adler = state.check =\n                /*UPDATE_CHECK(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.wrap & 4) && (state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$1;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR$1;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH$1))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if ((state.wrap & 4) && _out) {\n    strm.adler = state.check = /*UPDATE_CHECK(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (inflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$1;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$1;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR$1;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$1;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2$1 = inflate$2;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCodesUsed = inflateCodesUsed;\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\nmodule.exports.inflateValidate = inflateValidate;\n*/\n\nvar inflate_1$2 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2$1,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate$1(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1$2.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1$2.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1$2.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1$2.inflateReset(strm);\n      status = inflate_1$2.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = inflate_1$2.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate$1(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1$1 = Inflate$1;\nvar inflate_2 = inflate$1;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip$1 = inflate$1;\nvar constants = constants$2;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1$1,\n\tinflate: inflate_2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip$1,\n\tconstants: constants\n};\n\nconst { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;\n\nconst { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;\n\n\n\nvar Deflate_1 = Deflate;\nvar deflate_1 = deflate;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar Inflate_1 = Inflate;\nvar inflate_1 = inflate;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip_1 = ungzip;\nvar constants_1 = constants$2;\n\nvar pako = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tInflate: Inflate_1,\n\tinflate: inflate_1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport { Deflate_1 as Deflate, Inflate_1 as Inflate, constants_1 as constants, pako as default, deflate_1 as deflate, deflateRaw_1 as deflateRaw, gzip_1 as gzip, inflate_1 as inflate, inflateRaw_1 as inflateRaw, ungzip_1 as ungzip };\n","import { inflate } from 'pako';\nimport { Packets, Opcodes, Modules } from '@kaetram/common/network';\n\nimport type Player from '../entity/character/player/player';\nimport type App from '../app';\nimport type Overlays from '../renderer/overlays';\nimport type InfoController from '../controllers/info';\nimport type Game from '../game';\nimport type Map from '../map/map';\nimport type Camera from '../renderer/camera';\nimport type Renderer from '../renderer/renderer';\nimport type InputController from '../controllers/input';\nimport type Socket from './socket';\nimport type PointerController from '../controllers/pointer';\nimport type AudioController from '../controllers/audio';\nimport type EntitiesController from '../controllers/entities';\nimport type BubbleController from '../controllers/bubble';\nimport type MenuController from '../controllers/menu';\nimport type SpritesController from '../controllers/sprites';\nimport type Messages from './messages';\nimport type Entity from '../entity/entity';\nimport type Item from '../entity/objects/item';\nimport type NPC from '../entity/npc/npc';\nimport type Character from '../entity/character/character';\nimport type { PlayerData } from '@kaetram/common/types/player';\nimport type { SerializedSkills, SkillData } from '@kaetram/common/types/skills';\nimport type { EquipmentData, SerializedEquipment } from '@kaetram/common/types/equipment';\nimport type { SerializedAbility, AbilityData } from '@kaetram/common/types/ability';\nimport type {\n    AbilityPacket,\n    AchievementPacket,\n    AnimationPacket,\n    BubblePacket,\n    ChatPacket,\n    CombatPacket,\n    CommandPacket,\n    ContainerPacket,\n    DespawnPacket,\n    EnchantPacket,\n    EquipmentPacket,\n    ExperiencePacket,\n    HealPacket,\n    MovementPacket,\n    NotificationPacket,\n    NPCPacket,\n    OverlayPacket,\n    PointerPacket,\n    PointsPacket,\n    PVPPacket,\n    QuestPacket,\n    RespawnPacket,\n    StorePacket,\n    TeleportPacket,\n    SkillPacket,\n    MinigamePacket,\n    EffectPacket,\n    FriendsPacket,\n    ListPacket,\n    TradePacket,\n    HandshakePacket,\n    GuildPacket,\n    CraftingPacket\n} from '@kaetram/common/types/messages/outgoing';\nimport type { EntityDisplayInfo } from '@kaetram/common/types/entity';\n\nexport default class Connection {\n    /**\n     * Keep all game objects as instances in this class\n     * in order to cut down on length of code when trying\n     * to access them.\n     */\n\n    private app: App;\n    private overlays: Overlays;\n    private info: InfoController;\n    private map: Map;\n    private camera: Camera;\n    private renderer: Renderer;\n    private input: InputController;\n    private socket: Socket;\n    private pointer: PointerController;\n    private audio: AudioController;\n    private entities: EntitiesController;\n    private bubble: BubbleController;\n    private menu: MenuController;\n    private sprites: SpritesController;\n    private messages: Messages;\n\n    private lastEntityListRequest = Date.now();\n\n    /**\n     * Connection controller keeps track of all the incoming packets\n     * and reroutes them to their specific function for organization purposes.\n     */\n\n    public constructor(private game: Game) {\n        this.app = game.app;\n        this.overlays = game.overlays;\n        this.info = game.info;\n        this.map = game.map;\n        this.camera = game.camera;\n        this.renderer = game.renderer;\n        this.input = game.input;\n        this.socket = game.socket;\n        this.pointer = game.pointer;\n        this.audio = game.audio;\n        this.entities = game.entities;\n        this.bubble = game.bubble;\n        this.menu = game.menu;\n        this.sprites = game.sprites;\n        this.messages = this.socket.messages;\n\n        this.app.onFocus(() => this.socket.send(Packets.Focus));\n\n        this.messages.onHandshake(this.handleHandshake.bind(this));\n        this.messages.onWelcome(this.handleWelcome.bind(this));\n        this.messages.onMap(this.handleMap.bind(this));\n        this.messages.onEquipment(this.handleEquipment.bind(this));\n        this.messages.onSpawn(this.entities.create.bind(this.entities));\n        this.messages.onEntityList(this.handleEntityList.bind(this));\n        this.messages.onSync(this.handleSync.bind(this));\n        this.messages.onMovement(this.handleMovement.bind(this));\n        this.messages.onTeleport(this.handleTeleport.bind(this));\n        this.messages.onDespawn(this.handleDespawn.bind(this));\n        this.messages.onCombat(this.handleCombat.bind(this));\n        this.messages.onAnimation(this.handleAnimation.bind(this));\n        this.messages.onPoints(this.handlePoints.bind(this));\n        this.messages.onNetwork(this.handleNetwork.bind(this));\n        this.messages.onChat(this.handleChat.bind(this));\n        this.messages.onCommand(this.handleCommand.bind(this));\n        this.messages.onContainer(this.handleContainer.bind(this));\n        this.messages.onAbility(this.handleAbility.bind(this));\n        this.messages.onQuest(this.handleQuest.bind(this));\n        this.messages.onAchievement(this.handleAchievement.bind(this));\n        this.messages.onNotification(this.handleNotification.bind(this));\n        this.messages.onBlink(this.handleBlink.bind(this));\n        this.messages.onHeal(this.handleHeal.bind(this));\n        this.messages.onExperience(this.handleExperience.bind(this));\n        this.messages.onDeath(this.handleDeath.bind(this));\n        this.messages.onMusic(this.handleMusic.bind(this));\n        this.messages.onNPC(this.handleNPC.bind(this));\n        this.messages.onRespawn(this.handleRespawn.bind(this));\n        this.messages.onTrade(this.handleTrade.bind(this));\n        this.messages.onEnchant(this.handleEnchant.bind(this));\n        this.messages.onGuild(this.handleGuild.bind(this));\n        this.messages.onPointer(this.handlePointer.bind(this));\n        this.messages.onPVP(this.handlePVP.bind(this));\n        this.messages.onPoison(this.handlePoison.bind(this));\n        this.messages.onStore(this.handleStore.bind(this));\n        this.messages.onOverlay(this.handleOverlay.bind(this));\n        this.messages.onCamera(this.handleCamera.bind(this));\n        this.messages.onBubble(this.handleBubble.bind(this));\n        this.messages.onSkill(this.handleSkill.bind(this));\n        this.messages.onUpdate(this.handleUpdate.bind(this));\n        this.messages.onMinigame(this.handleMinigame.bind(this));\n        this.messages.onEffect(this.handleEffect.bind(this));\n        this.messages.onFriends(this.handleFriends.bind(this));\n        this.messages.onRank(this.handleRank.bind(this));\n        this.messages.onCrafting(this.handleCrafting.bind(this));\n    }\n\n    /**\n     * Handles the handshake packet from the server. The handshake signals\n     * to the client that the connection is now established and the client\n     * must send the login packet (guest, registering, or login).\n     */\n\n    private handleHandshake(data: HandshakePacket): void {\n        this.app.updateLoader('Connecting to server');\n\n        // Set the server id and instance\n        this.game.player.instance = data.instance!;\n        this.game.player.serverId = data.serverId!;\n\n        // Guest login doesn't require any credentials, send the packet right away.\n        if (this.app.isGuest())\n            return this.socket.send(Packets.Login, { opcode: Opcodes.Login.Guest });\n\n        let username = this.app.getUsername(),\n            password = this.app.getPassword(),\n            email = this.app.getEmail();\n\n        // Assign username to palyer object (will get overriden after login is completed).\n        this.game.player.name = username.toLowerCase();\n\n        // Send register packet if the user is registering.\n        if (this.app.isRegistering())\n            return this.socket.send(Packets.Login, {\n                opcode: Opcodes.Login.Register,\n                username,\n                password,\n                email\n            });\n\n        // Send login packet if the user is logging in.\n        this.socket.send(Packets.Login, {\n            opcode: Opcodes.Login.Login,\n            username,\n            password\n        });\n    }\n\n    /**\n     * Receives the serialized player data from the server\n     * and begins loading the game instance of the player.\n     * @param data Serialized player data object.\n     */\n\n    private handleWelcome(data: PlayerData): void {\n        this.game.player.load(data);\n\n        this.game.start();\n        this.game.postLoad();\n    }\n\n    /**\n     * Receives the compressed map data from the server. Due to the size of\n     * the map data, we must compress when sending and decompress on the client's\n     * end. We ensure that this map region is saved in the client to prevent\n     * relying on the client always pulling map data.\n     * @param info Compressed region data of the map.\n     */\n\n    private handleMap(info: string): void {\n        let bufferData = window\n                .atob(info)\n                // eslint-disable-next-line unicorn/prefer-spread\n                .split('')\n                // eslint-disable-next-line unicorn/prefer-code-point\n                .map((char) => char.charCodeAt(0)),\n            inflatedString = inflate(new Uint8Array(bufferData), { to: 'string' }),\n            regions = JSON.parse(inflatedString);\n\n        this.map.loadRegions(regions);\n\n        // Used if the client uses low-power mode, forces redrawing of trees.\n        this.renderer.forceRendering = true;\n\n        // Update the animated tiles when we receive new map data.\n        this.renderer.updateAnimatedTiles();\n\n        if (!this.map.hasCachedDate()) this.app.fadeMenu();\n    }\n\n    /**\n     * Receives the equipment packet from the server. When we receive batch\n     * data from the server we update every equipment slot with the new data.\n     * A single equipment is accompanied by a type and serialized slot info.\n     * @param opcode Type of equipment packet we are working with.\n     * @param info Data containing equipment(s) information.\n     */\n\n    private handleEquipment(opcode: Opcodes.Equipment, info: EquipmentPacket): void {\n        switch (opcode) {\n            case Opcodes.Equipment.Batch: {\n                for (let equipment of (info.data as SerializedEquipment).equipments)\n                    this.game.player.equip(equipment);\n\n                break;\n            }\n\n            case Opcodes.Equipment.Equip: {\n                this.game.player.equip(info.data as EquipmentData);\n                break;\n            }\n\n            case Opcodes.Equipment.Unequip: {\n                this.game.player.unequip(info.type!, info.count);\n                break;\n            }\n\n            case Opcodes.Equipment.Style: {\n                this.game.player.setAttackStyle(info.attackStyle!);\n                this.game.player.attackRange = info.attackRange!;\n                break;\n            }\n        }\n\n        this.game.player.sync();\n    }\n\n    /**\n     * Compares the list of entities from the server and removes any enities that are spawned\n     * but no longer contained within the region. This occurs when the player goes from one\n     * region to another, and we are queueing up entities for depsawn.\n     * @param entities A list of strings that contains the instances of the entities in the region.\n     */\n\n    private handleEntityList(opcode: Opcodes.List, info: ListPacket): void {\n        switch (opcode) {\n            case Opcodes.List.Spawns: {\n                let ids = new Set(\n                        Object.values(this.entities.getAll()).map((entity) => entity.instance)\n                    ),\n                    known = new Set(info.entities!.filter((id) => ids.has(id))),\n                    newIds = info.entities!.filter((id) => !known.has(id));\n\n                // Prepare the entities ready for despawning.\n                this.entities.decrepit = Object.values(this.entities.getAll()).filter(\n                    (entity) =>\n                        !known.has(entity.instance) && entity.instance !== this.game.player.instance\n                );\n\n                // Clear the entities in the decrepit queue.\n                this.entities.clean();\n\n                // Send the new id list request to the server.\n                this.socket.send(Packets.Who, newIds);\n                break;\n            }\n\n            case Opcodes.List.Positions: {\n                // Look through all the positions of the entities and their instances.\n                for (let instance in info.positions!) {\n                    let position = info.positions[instance],\n                        entity = this.entities.get<Character>(instance);\n\n                    // No entity found, just skip.\n                    if (!entity || entity.moving || entity.hasPath()) return;\n\n                    /**\n                     * When we detect a mismatch in client-sided and server-sided\n                     * entity positions we teleport the entity to the correct position.\n                     */\n\n                    if (entity.gridX !== position.x || entity.gridY !== position.y)\n                        this.game.teleport(entity, position.x, position.y);\n                }\n            }\n        }\n    }\n\n    /**\n     * Handles the synchronization packet from the server. Synchronization\n     * is used when the player entity undergoes a change and that is\n     * relayed to the nearby players (level change, equipment change, etc.).\n     * @param data Player data object containing new information about the player entity.\n     */\n\n    private handleSync(data: PlayerData): void {\n        let player = this.entities.get<Player>(data.instance);\n\n        // Invalid instance, player not found/not spawned.\n        if (!player || player.teleporting || player.dead || !player.ready) return;\n\n        player.load(data, true);\n\n        player.setSprite(this.game.sprites.get(player.getSpriteName()));\n    }\n\n    /**\n     * Handles the movement packets. These can either be request to move to a position,\n     * a follow request, or a forcibly (optional) stop request. Freeze and stunned states\n     * also get sent alongside the movement packets.\n     * @param opcode The type of movement we are dealing with.\n     * @param info Information such as instance and coordinates of the entity that is moving.\n     */\n\n    private handleMovement(opcode: Opcodes.Movement, info: MovementPacket): void {\n        let entity = this.entities.get<Character>(info.instance),\n            target: Entity;\n\n        /**\n         * We are receiving movement for an entity that doesn't exist,\n         * we need to request an entity list update to the server.\n         */\n        if (!entity) {\n            // Ensures packets are not spammed to the server.\n            if (!this.canRequestEntityList()) return;\n\n            // Update the last entity list request time.\n            this.lastEntityListRequest = Date.now();\n\n            // Request an entity list update from the server.\n            return this.socket.send(Packets.List);\n        }\n\n        switch (opcode) {\n            case Opcodes.Movement.Move: {\n                if (info.forced) entity.stop(true);\n\n                entity.go(info.x!, info.y!, false, info.instance !== this.game.player.instance);\n                break;\n            }\n\n            case Opcodes.Movement.Follow: {\n                target = this.entities.get<Character>(info.target!);\n\n                if (target) {\n                    // Prevent following a target after we've clicked off of it.\n                    if (\n                        entity.instance === this.game.player.instance &&\n                        !this.game.player.hasTarget() &&\n                        !info.forced\n                    )\n                        return;\n\n                    entity.follow(target);\n                }\n\n                break;\n            }\n\n            case Opcodes.Movement.Stop: {\n                if (info.forced) entity.stop(true);\n                break;\n            }\n\n            case Opcodes.Movement.Speed: {\n                entity.movementSpeed = info.movementSpeed!;\n                break;\n            }\n        }\n    }\n\n    /**\n     * Handler for the teleportation packet. Used when a player entity\n     * teleports to a new location.\n     * @param info Instance of the entity, x and y coordinates, and whether to animate.\n     */\n\n    private handleTeleport(info: TeleportPacket): void {\n        let entity = this.entities.get<Character>(info.instance);\n\n        if (!entity?.isMob() && !entity?.isPlayer()) return;\n\n        this.input.selectedCellVisible = false;\n\n        // If the entity is the same as our main entity.\n        let currentPlayer = entity.instance === this.game.player.instance;\n\n        // Stop and freeze the player until teleprtation is complete.\n        entity.stop(true);\n        entity.frozen = true;\n\n        // Clears all bubbles when our main entity teleports.\n        if (currentPlayer) {\n            this.bubble.clean();\n\n            // Disable keyboard actions until teleportation is complete.\n            this.game.player.disableAction = true;\n        } else this.bubble.clear(entity.instance); // Clears bubble of teleporting entity.\n\n        // No animation, skip straight to teleporting.\n        if (!info.withAnimation) return this.game.teleport(entity, info.x, info.y);\n\n        // Copy the entity's sprite temporarily.\n        let entitySprite = entity.sprite.key;\n\n        // Prevent rendering of the sword.\n        entity.teleporting = true;\n\n        // Set the entity's sprite to the death animation sprite.\n        entity.setSprite(this.sprites.getDeath());\n\n        entity.animateDeath(() => {\n            this.game.teleport(entity, info.x, info.y);\n\n            // Reset the animation.\n            entity.animation = null;\n\n            // Restore the entity's sprite.\n            entity.setSprite(this.sprites.get(entitySprite));\n            entity.idle(entity.orientation, true);\n        }, 160);\n    }\n\n    /**\n     * Handler for when we want to despawn an entity.\n     * @param info Contains despawn packet information such as instance and list of regions to ignore.\n     */\n\n    private handleDespawn(info: DespawnPacket): void {\n        let entity = this.entities.get<Character>(info.instance);\n\n        // Could not find the entity.\n        if (!entity) return;\n\n        // If a list of regions is provided, we check the entity is in one of those regions.\n        if (info.regions && !info.regions.includes(entity.region)) return;\n\n        // Handle item despawn separately here.\n        if (entity.isItem()) return this.entities.removeItem(entity);\n\n        // Handle chest and animations here.\n        if (entity.isChest()) return this.entities.removeChest(entity);\n\n        // Handle npc despawn here.\n        if (entity.isNPC()) return this.entities.removeNPC(entity);\n\n        // Despawn the entity.\n        entity.despawn();\n\n        // Removes bubbles from the entity.\n        this.bubble.clear(entity.instance);\n\n        // Clears our client's target.\n        if (this.game.player.hasTarget(entity)) this.game.player.removeTarget();\n\n        // Plays a random kill sound.\n        this.audio.playKillSound(entity);\n\n        // Certain entities will have a special death animation, otherwise we use default.\n        if (!entity.sprite.hasDeathAnimation) entity.setSprite(this.sprites.getDeath());\n\n        // Animate the entity's death.\n        entity.animateDeath(() => this.entities.removeEntity(entity));\n    }\n\n    /**\n     * Combat packet handler. Primarily deals with displaying hit damages\n     * and creating infos on the screen.\n     * @param opcode Type of combat packet we're dealing with.\n     * @param info Contains attacker, target, and damage information.\n     */\n\n    private handleCombat(opcode: Opcodes.Combat, info: CombatPacket): void {\n        let attacker = this.entities.get<Character>(info.instance),\n            target = this.entities.get<Character>(info.target);\n\n        // Could not find the attacker or target.\n        if (!attacker || !target) return;\n\n        if (opcode !== Opcodes.Combat.Hit) return;\n\n        // Check if our client's player is the target or the attacker.\n        let currentPlayerTarget = target.instance === this.game.player.instance,\n            currentPlayerAttacker = attacker.instance === this.game.player.instance,\n            isPoison = info.hit.type === Modules.Hits.Poison,\n            isFreezing = info.hit.type === Modules.Hits.Freezing,\n            isBurning = info.hit.type === Modules.Hits.Burning;\n\n        // Set the terror effect onto the target.\n        if (isPoison) target.addEffect(Modules.Effects.Poisonball);\n\n        // Perform the critical effect onto the target.\n        if (info.hit.type === Modules.Hits.Critical) target.addEffect(Modules.Effects.Critical);\n\n        // Perform the attack animation if the damage type isn't from AOE or poison.\n        if (!info.hit.aoe && !isPoison && !isFreezing && !isBurning) {\n            attacker.lookAt(target);\n            attacker.performAction(attacker.orientation, Modules.Actions.Attack);\n        }\n\n        // If the game client player is the attacker, we play the hit sound effect.\n        if (currentPlayerAttacker && info.hit.damage > 0) this.audio.playHitSound(target);\n\n        // Play the hurt sound effect if the client player is the target.\n        if (currentPlayerTarget && info.hit.damage > 0) this.audio.playSound('hurt');\n\n        // Create the hit info to be displayed above the entity.\n        this.info.create(info.hit.type, info.hit.damage, target.x, target.y, currentPlayerTarget);\n\n        // Flash the target character when a hit occurs.\n        if (info.hit.damage > 0) target.toggleHurt();\n\n        // Show the health bar for both entities.\n        attacker.triggerHealthBar();\n        target.triggerHealthBar();\n    }\n\n    /**\n     * Animates a character based on the provided instance.\n     * @param info Contains instance and what animation to perform.\n     */\n\n    private handleAnimation(info: AnimationPacket): void {\n        let character = this.entities.get<Character>(info.instance);\n\n        if (!character) return;\n\n        character.performAction(character.orientation, info.action);\n    }\n\n    /**\n     * Handles the points packet. Used when a player is being hit\n     * or heals their hit points or mana.\n     * @param info Contains the player instance, hit points, and mana.\n     */\n\n    private handlePoints(info: PointsPacket): void {\n        let character = this.entities.get<Player>(info.instance);\n\n        if (!character || character.dead) return;\n\n        if (info.mana) character.setMana(info.mana, info.maxMana);\n\n        if (info.hitPoints) {\n            character.setHitPoints(info.hitPoints, info.maxHitPoints);\n            this.input.hud.updateCallback?.(info.instance, info.hitPoints);\n        }\n    }\n\n    /**\n     * Handler for the network packet. These are debugging methods such\n     * as latency tests that may be implemented in the future.\n     */\n\n    private handleNetwork(): void {\n        // Send a resposne to the ping back.\n        this.socket.send(Packets.Network, [Opcodes.Network.Pong]);\n    }\n\n    /**\n     * Chat packets can either be static or instance based. Those that are static\n     * are generally used for global messaging system, whereas the instance-based\n     * ones are for nearby players where we want to display a bubble.\n     * @param info Info contains source, message, colour, and whether\n     * or not to display a bubble. Instance is optional but may be contained\n     * when a player sends a chat.\n     */\n\n    private handleChat(info: ChatPacket): void {\n        // Messages with source are static, we add them directly to the chatbox.\n        if (info.source)\n            return this.input.chatHandler.add(info.source, info.message, info.colour, true);\n\n        let entity = this.entities.get<Player>(info.instance!);\n\n        if (!entity) return;\n\n        let { name, rank, x, y } = entity;\n\n        if (rank !== Modules.Ranks.None) name = `[${Modules.RankTitles[rank]}] ${name}`;\n\n        // Add to the chatbox, if global, we prefix it to the entity's name.\n        this.input.chatHandler.add(name, info.message, info.colour);\n\n        // Draw bubble and play audio.\n        if (info.withBubble) {\n            this.bubble.create(info.instance!, info.message);\n            this.bubble.setTo(info.instance!, x, y);\n\n            this.audio.playSound('npctalk', entity);\n        }\n    }\n\n    /**\n     * Hardcoded administrative commands built into the client. When a player\n     * types a special command, the server checks against the player's rank\n     * before sending this packet. These are merely debugging/graphical tests.\n     * @param info Packet contains the command string.\n     */\n\n    private handleCommand(info: CommandPacket): void {\n        if (info.command.includes('toggle') && this.game.player.hasActiveEffect())\n            return this.game.player.removeAllEffects();\n\n        switch (info.command) {\n            case 'debug': {\n                this.renderer.debugging = !this.renderer.debugging;\n                return;\n            }\n        }\n    }\n\n    /**\n     * Receives container information (bank or inventory for now) and updates it.\n     * @param opcode What type of container action we are working with.\n     * @param info Contains array of serialized slots, a single slot, and type of container.\n     */\n\n    private handleContainer(opcode: Opcodes.Container, info: ContainerPacket): void {\n        let container =\n            info.type === Modules.ContainerType.Inventory\n                ? this.menu.getInventory()\n                : this.menu.getBank();\n\n        switch (opcode) {\n            case Opcodes.Container.Batch: {\n                container.batch(info.data!.slots);\n                break;\n            }\n\n            case Opcodes.Container.Add: {\n                container.add(info.slot!);\n                break;\n            }\n\n            case Opcodes.Container.Remove: {\n                container.remove(info.slot!);\n                break;\n            }\n        }\n\n        // Synchronizes all the open menus that have containers.\n        this.menu.synchronize();\n    }\n\n    /**\n     * Handler for when we receive an ability packet. Ability packets contain\n     * batch data or a single ability undergoing a change (generally level).\n     * @param opcode The type of ability packet we are working with.\n     * @param info Contains information in batch about abilities or a single ability serialized information.\n     */\n\n    private handleAbility(opcode: Opcodes.Ability, info: AbilityPacket): void {\n        switch (opcode) {\n            case Opcodes.Ability.Batch: {\n                this.game.player.loadAbilities((info as SerializedAbility).abilities);\n                break;\n            }\n\n            // Update the ability data whenever we receive any information.\n            case Opcodes.Ability.Add:\n            case Opcodes.Ability.Update: {\n                info = info as AbilityData;\n                this.game.player.setAbility(info.key, info.level, info.type, info.quickSlot);\n                break;\n            }\n\n            case Opcodes.Ability.Toggle: {\n                this.game.player.toggleAbility((info as AbilityData).key);\n                break;\n            }\n        }\n\n        this.menu.synchronize('profile');\n    }\n\n    /**\n     * Quest packets are sent when the player logs in and performs\n     * the initial loading in a batch. This contains every quest along with the\n     * key, name, description, and stage. This packet may also receive individual\n     * quest information that updates the stage. Since the quests are already loaded\n     * the individual quest data only contains key, stage, and max stage.\n     * @param opcode What type of quest action we are working with.\n     * @param info Contains quest batch data or individual quest data.\n     */\n\n    private handleQuest(opcode: Opcodes.Quest, info: QuestPacket): void {\n        switch (opcode) {\n            case Opcodes.Quest.Batch: {\n                this.game.player.loadQuests(info.quests!);\n                break;\n            }\n\n            case Opcodes.Quest.Progress: {\n                this.game.player.setQuest(info.key!, info.stage!, info.subStage!);\n                break;\n            }\n        }\n\n        this.menu.getQuests().handle(opcode, info.key);\n    }\n\n    /**\n     * Packet received from the server containing information about the achievements. When\n     * we receive batch data, we relay that to the client. When we receive individual data,\n     * we only update the achievement associated with the provided key. After either of the\n     * aforementioned occurs, we synchronize the menu.\n     * @param opcode What type of action we're taking.\n     * @param info Contains individual achievement data or batch data.\n     */\n\n    private handleAchievement(opcode: Opcodes.Achievement, info: AchievementPacket): void {\n        switch (opcode) {\n            case Opcodes.Achievement.Batch: {\n                this.game.player.loadAchievements(info.achievements!);\n                break;\n            }\n\n            case Opcodes.Achievement.Progress: {\n                this.game.player.setAchievement(\n                    info.key!,\n                    info.stage!,\n                    info.name!,\n                    info.description!\n                );\n                break;\n            }\n        }\n\n        this.menu.getAchievements().handle(opcode, info.key);\n    }\n\n    /**\n     * Notifications are messages sent from the server that display only on the current\n     * player's end. These can either be popups, or chatbox information.\n     * @param opcode Tyhe type of the notification.\n     * @param info Contains message, title, and colour information.\n     */\n\n    private handleNotification(opcode: Opcodes.Notification, info: NotificationPacket): void {\n        switch (opcode) {\n            case Opcodes.Notification.Text: {\n                return this.input.chatHandler.add(\n                    info.source || 'WORLD',\n                    info.message,\n                    info.colour,\n                    true\n                );\n            }\n\n            case Opcodes.Notification.Popup: {\n                return this.menu.getNotification().show(info.title!, info.message, info.colour!);\n            }\n        }\n    }\n\n    /**\n     * Packet that signals to an item instance that it has to start blinking.\n     * The blinking is used to indicate that the item is about to despawn.\n     * @param instance Instance of the item we are trying to start blinking process.\n     */\n\n    private handleBlink(instance: string): void {\n        let item = this.entities.get<Item>(instance);\n\n        item?.blink();\n    }\n\n    /**\n     * The healing packet is called when the player heals their health\n     * or mana. It is used to update the HUD and also display the healing\n     * special effect.\n     * @param info Contains the instance, type of healing (mana or health), and amount.\n     */\n\n    private handleHeal(info: HealPacket): void {\n        let character = this.entities.get<Character>(info.instance);\n\n        if (!character) return;\n\n        switch (info.type) {\n            case 'hitpoints': {\n                this.info.create(Modules.Hits.Heal, info.amount, character.x, character.y);\n\n                character.addEffect(Modules.Effects.Healing);\n                break;\n            }\n\n            case 'mana': {\n                this.info.create(Modules.Hits.Mana, info.amount, character.x, character.y);\n                break;\n            }\n        }\n\n        character.triggerHealthBar();\n    }\n\n    /**\n     * Receives an experience packet from the server. This syncs up the client\n     * with the player's latest information and also displays an appropriate info\n     * depending on the type of experience (combat or skill).\n     * @param opcode The type of experience we are working with.\n     * @param info The amount of experience, level, previous/next experience required\n     * for levelling up. The experience values are used to display to the player how\n     * much experience they will require and calculate percentages.\n     */\n\n    private handleExperience(opcode: Opcodes.Experience, info: ExperiencePacket): void {\n        let player = this.entities.get<Player>(info.instance);\n\n        if (!player) return;\n\n        let isPlayer = player.instance === this.game.player.instance;\n\n        switch (opcode) {\n            case Opcodes.Experience.Sync: {\n                player.level = info.level!;\n                break;\n            }\n\n            case Opcodes.Experience.Skill: {\n                if (isPlayer)\n                    this.info.create(\n                        Modules.Hits.Profession,\n                        info.amount!,\n                        player.x,\n                        player.y,\n                        false,\n                        info.skill,\n                        true\n                    );\n\n                break;\n            }\n        }\n    }\n\n    /**\n     * Receives signal from the server to despawn the player and\n     * display the death scroll. This will get called for as long\n     * as the player doesn't press the respawn button, regardless\n     * of whether or not the player logs out and back in.\n     */\n\n    private handleDeath(): void {\n        // Stop player movement\n        this.game.player.stop(true);\n\n        // Clear all the statuses.\n        this.game.player.removeAllEffects();\n\n        // Remove the minigame interfaces.\n        this.game.minigame.reset();\n\n        // Stops the player from performing actions.\n        this.game.player.teleporting = true;\n\n        // Set the player's sprite to the death animation sprite.\n        this.game.player.setSprite(this.sprites.getDeath());\n\n        // Set health and mana to 0\n        this.game.player.setHitPoints(0);\n        this.game.player.setMana(0);\n\n        // Stop the music playing.\n        this.audio.stopMusic();\n\n        // Perform the death animation.\n        this.game.player.animateDeath(() => {\n            this.game.entities.unregisterPosition(this.game.player);\n\n            this.game.player.despawn();\n\n            this.app.body.classList.add('death');\n        });\n    }\n\n    /**\n     * Receives the new song to update the audio controller with.\n     * @param newSong String of the new song.\n     */\n\n    private handleMusic(newSong?: string): void {\n        this.audio.playMusic(newSong);\n    }\n\n    /**\n     * Receives NPC interaction information. In the most general case, this is about\n     * an NPC that is dispalying text bubbles to the player. Alternatively, this can\n     * be an NPC that shows an UI element (e.g. bank, shop, etc). This may be moved\n     * into a separate packet post-refactor.\n     * @param opcode They type of interaction we are working with.\n     * @param info Contains information about the NPC interaction.\n     */\n\n    private handleNPC(opcode: Opcodes.NPC, info: NPCPacket): void {\n        let npc, soundEffect;\n\n        switch (opcode) {\n            case Opcodes.NPC.Talk: {\n                npc = this.entities.get<NPC>(info.instance!);\n\n                if (!npc) return;\n\n                // Which sound effect to play depending on if conversation is over or not.\n                soundEffect = info.text ? 'npc' : 'npc-end';\n\n                this.audio.playSound(soundEffect, npc);\n\n                this.game.player.disableAction = true;\n\n                // Clear npc's bubbles once conversation is over.\n                if (!info.text) return this.bubble.clear(npc.instance);\n\n                // Create the bubble containing the text.\n                this.bubble.create(npc.instance, info.text);\n                this.bubble.setTo(npc.instance, npc.x, npc.y);\n\n                break;\n            }\n\n            case Opcodes.NPC.Bank: {\n                return this.menu.getBank().show(info.slots!);\n            }\n\n            case Opcodes.NPC.Enchant: {\n                this.menu.getEnchant().show();\n                break;\n            }\n        }\n    }\n\n    /**\n     * Restarts the game and reinitializes the player character during\n     * the respawning process.\n     * @param info Contains the grid x and y coordinates we are transporting\n     * the player to following the respawn.\n     */\n\n    private handleRespawn(info: RespawnPacket): void {\n        this.game.player.setGridPosition(info.x, info.y);\n\n        this.camera.centreOn(this.game.player);\n\n        this.game.player.animation = null;\n        this.game.player.setSprite(this.game.sprites.get(this.game.player.getSpriteName()));\n        this.game.player.idle();\n\n        this.entities.addEntity(this.game.player);\n\n        this.game.player.dead = false;\n        this.game.player.teleporting = false;\n    }\n\n    /**\n     * Handles the logic for trading between two players. Contains information\n     * about what is going on and what to do with the interface.\n     * @param opcode The type of trade action to perform.\n     * @param info Information about the trade.\n     */\n\n    private handleTrade(opcode: Opcodes.Trade, info: TradePacket): void {\n        switch (opcode) {\n            case Opcodes.Trade.Open: {\n                let otherPlayer = this.entities.get<Player>(info.instance!);\n\n                if (!otherPlayer) return;\n\n                return this.menu.getTrade().show(this.game.player, otherPlayer);\n            }\n\n            case Opcodes.Trade.Close: {\n                return this.menu.getTrade().hide(true);\n            }\n\n            case Opcodes.Trade.Add: {\n                return this.menu\n                    .getTrade()\n                    .add(\n                        info.index!,\n                        info.count!,\n                        info.key!,\n                        info.instance !== this.game.player.instance\n                    );\n            }\n\n            case Opcodes.Trade.Remove: {\n                return this.menu\n                    .getTrade()\n                    .remove(info.index!, info.instance !== this.game.player.instance);\n            }\n\n            case Opcodes.Trade.Accept: {\n                return this.menu.getTrade().accept(info.message);\n            }\n        }\n    }\n\n    /**\n     * Enchant packet used to update the user interface.\n     * @param opcode What type of action to perform on the user interface.\n     * @param info Contains index and type of item.\n     */\n\n    private handleEnchant(opcode: Opcodes.Enchant, info: EnchantPacket): void {\n        switch (opcode) {\n            case Opcodes.Enchant.Select: {\n                return this.menu.getEnchant().move(info.index, info.isShard);\n            }\n        }\n    }\n\n    /**\n     * Unimplemented guild packet.\n     */\n\n    private handleGuild(opcode: Opcodes.Guild, info: GuildPacket): void {\n        switch (opcode) {\n            case Opcodes.Guild.Login: {\n                this.game.player.setGuild(info);\n                break;\n            }\n\n            case Opcodes.Guild.Leave: {\n                this.game.player.setGuild();\n                break;\n            }\n        }\n\n        this.menu.getGuilds().handle(opcode, info);\n    }\n\n    /**\n     * Receives pointer information from the server. This can be a pointer at an\n     * entity location, or a static pointer. This function will be updated soon.\n     * @param opcode What type of pointer we are displaying.\n     * @param info Information such as location and instance of the pointer.\n     */\n\n    private handlePointer(opcode: Opcodes.Pointer, info: PointerPacket): void {\n        let entity;\n\n        switch (opcode) {\n            case Opcodes.Pointer.Entity: {\n                entity = this.entities.get(info.instance);\n\n                if (!entity) return;\n\n                this.pointer.create(entity.instance, opcode);\n                this.pointer.setToEntity(entity);\n\n                break;\n            }\n\n            case Opcodes.Pointer.Location: {\n                this.pointer.create(info.instance, opcode);\n                this.pointer.setToPosition(\n                    info.instance,\n                    info.x! * this.map.tileSize,\n                    info.y! * this.map.tileSize\n                );\n\n                break;\n            }\n\n            case Opcodes.Pointer.Relative: {\n                this.pointer.create(info.instance, opcode);\n                this.pointer.setRelative(info.instance, info.x!, info.y!);\n                break;\n            }\n\n            case Opcodes.Pointer.Remove: {\n                this.pointer.clean();\n                break;\n            }\n\n            case Opcodes.Pointer.Button: {\n                this.pointer.create(info.instance, opcode, info.button);\n                break;\n            }\n        }\n    }\n\n    /**\n     * Updates the pvp flag for our client. The actual PVP attacking is handled\n     * server-sided. This just allows the client to target another player.\n     * @param info Contains the instance and pvp status of an entity.\n     */\n\n    private handlePVP(info: PVPPacket): void {\n        this.game.pvp = info.state;\n    }\n\n    /**\n     * Updates the visual poison status of the player (changes the colour of the health bar).\n     * @param type Type of poison we are applying, if -1 then we remove poison status.\n     */\n\n    private handlePoison(type: number): void {\n        this.game.player.setPoison(type !== -1);\n    }\n\n    /**\n     * Opens a store with the data from the server. Stores can only be opened\n     * when there is data and the server validates that the player is next\n     * to the store to prevent cheating.\n     * @param opcode The type of action performed on the store.\n     * @param info Contains information such as store key and items to update.\n     */\n\n    private handleStore(opcode: Opcodes.Store, info: StorePacket): void {\n        switch (opcode) {\n            case Opcodes.Store.Open: {\n                return this.menu.getStore().show(info);\n            }\n\n            case Opcodes.Store.Update: {\n                return this.menu.getStore().update(info);\n            }\n\n            case Opcodes.Store.Select: {\n                return this.menu.getStore().move(info);\n            }\n        }\n    }\n\n    /**\n     *\n     * @param opcode\n     * @param info\n     */\n\n    private handleOverlay(opcode: Opcodes.Overlay, info: OverlayPacket): void {\n        switch (opcode) {\n            case Opcodes.Overlay.Set: {\n                this.overlays.update(info.image);\n                this.renderer.updateDarkMask(info.colour);\n                break;\n            }\n\n            case Opcodes.Overlay.Remove: {\n                this.renderer.removeAllLights();\n                this.overlays.update();\n                break;\n            }\n\n            case Opcodes.Overlay.Lamp: {\n                return this.renderer.addLight(info.light!);\n            }\n        }\n    }\n\n    /**\n     * Handles camera packets such as locking the camera.\n     * @param opcode The type of action we are performing with the camera.\n     */\n\n    private handleCamera(_opcode: Opcodes.Camera): void {\n        //\n    }\n\n    /**\n     * Contains a bubble packet to display. Bubble packets may be used for\n     * a specific entity (given the opcode) or may be assigned to a position\n     * to mock an entity. The latter is generally done when the player\n     * interacts with objects.\n     * @param opcode The type of bubble we are displaying (entity or position).\n     * @param info Contains information such as the text and position of the bubble.\n     */\n\n    private handleBubble(opcode: Opcodes.Bubble, info: BubblePacket): void {\n        if (!info.text) return this.bubble.clear(info.instance);\n\n        let entity = this.entities.get(info.instance);\n        // Check validity of the entity only when the bubble is attached to an entity.\n        if (opcode === Opcodes.Bubble.Entity && !entity) return;\n\n        /**\n         * This works as following: we create a position object if there is no entity found\n         * and we are setting the bubble to a static position. We pass this parameter when\n         * we create a blob so that we can mark it as static. We then determine whether\n         * to use the position object below given that it exists or not (see the ternary below).\n         */\n        let position = entity\n            ? undefined\n            : {\n                  x: info.x! * this.map.tileSize,\n                  y: info.y! * this.map.tileSize\n              };\n\n        // Create the bubble and assign its position.\n        this.bubble.create(info.instance, info.text, info.duration, position);\n        this.bubble.setTo(\n            info.instance,\n            position ? position.x : entity.x,\n            position ? position.y : entity.y\n        );\n    }\n\n    /**\n     * Updates the skills page with the data from the server.\n     * @param info Contains the skill batch data or a specific skill data.\n     */\n\n    private handleSkill(opcode: Opcodes.Skill, info: SkillPacket): void {\n        switch (opcode) {\n            case Opcodes.Skill.Batch: {\n                this.game.player.loadSkills((info as SerializedSkills).skills);\n                break;\n            }\n\n            case Opcodes.Skill.Update: {\n                this.game.player.setSkill(info as SkillData);\n                break;\n            }\n        }\n\n        this.game.menu.synchronize('profile');\n    }\n\n    /**\n     * Contains an array of entities that we are updating the appearance\n     * data of. This includes name colour, scale, and perhaps other things.\n     * @param info Array containing the instance and appearance data.\n     */\n\n    private handleUpdate(info: EntityDisplayInfo[]): void {\n        this.entities.cleanDisplayInfo();\n\n        for (let update of info) {\n            let entity = this.entities.get(update.instance);\n\n            if (!entity) continue;\n\n            if (update.colour) entity.nameColour = update.colour;\n            if (update.scale) entity.customScale = update.scale;\n        }\n    }\n\n    /**\n     * Minigame packets contain information about the kind of visuals to display\n     * onto the screen. For example, the TeamWar minigame requires the countdown\n     * to be displayed in the top of the screen during the lobby sequence, and\n     * in the actual game to display the score for both teams. We use this packet\n     * to signal to the game client what to display and when.\n     * @param info Contains information about the minigame status.\n     */\n\n    private handleMinigame(opcode: Opcodes.Minigame, info: MinigamePacket): void {\n        let { minigame, player } = this.game;\n\n        minigame.type = opcode;\n        minigame.started = !!info.started;\n\n        if (info.countdown) minigame.countdown = info.countdown;\n\n        switch (info.action) {\n            // Game starting packet.\n            case Opcodes.TeamWar.Score: {\n                if (!isNaN(info.redTeamKills!) && !isNaN(info.blueTeamKills!))\n                    minigame.setScore(info.redTeamKills!, info.blueTeamKills!);\n\n                return minigame.setStatus('ingame');\n            }\n\n            // Entering lobby packets\n            case Opcodes.TeamWar.End:\n            case Opcodes.TeamWar.Lobby: {\n                player.nameColour = '';\n                return minigame.setStatus('lobby');\n            }\n\n            // Exiting the entire minigame\n            case Opcodes.TeamWar.Exit: {\n                return minigame.reset();\n            }\n        }\n    }\n\n    /**\n     * Effects are special conditions that can be applied to a player or an entity.\n     * When a player uses the run ability, we may want to display a special effect on\n     * top of modifying their movement speed.\n     * @param opcode The type of effect we are applying.\n     * @param info Information about the entity we are applying the effect to.\n     */\n\n    private handleEffect(opcode: Opcodes.Effect, info: EffectPacket): void {\n        let entity =\n            info.instance === this.game.player.instance\n                ? this.game.player\n                : this.entities.get<Character>(info.instance);\n\n        if (!entity) return;\n\n        switch (opcode) {\n            case Opcodes.Effect.Add: {\n                return entity.addEffect(info.effect);\n            }\n\n            case Opcodes.Effect.Remove: {\n                return entity.removeEffect(info.effect);\n            }\n        }\n    }\n\n    /**\n     * Handles incoming packets relating to the friends list. This is how\n     * we update the client with the latest information about our friends.\n     * @param opcode What type of update we are performing.\n     * @param info Contains information about the packet we are handling.\n     */\n\n    private handleFriends(opcode: Opcodes.Friends, info: FriendsPacket): void {\n        switch (opcode) {\n            case Opcodes.Friends.List: {\n                this.game.player.loadFriends(info.list!);\n                break;\n            }\n\n            case Opcodes.Friends.Add: {\n                this.game.player.addFriend(info.username!, info.status!, info.serverId!);\n                break;\n            }\n\n            case Opcodes.Friends.Status: {\n                this.game.player.setFriendStatus(info.username!, info.status!, info.serverId!);\n                break;\n            }\n        }\n\n        this.menu.getFriends().handle(opcode, info.username, info.status, info.serverId);\n    }\n\n    /**\n     * Handles receiving information about crafting. This is used to synchronize the crafting\n     * user interface with the server. When a player selects an item to craft this\n     * @param opcode Contains the type of crafting action that we want to perform.\n     * @param info Contains the information about the crafting action.\n     */\n\n    private handleCrafting(opcode: Opcodes.Crafting, info: CraftingPacket): void {\n        this.menu.getCrafting().handle(opcode, info);\n    }\n\n    /**\n     * Updates the rank of the current player. Packet contains the new rank.\n     * @param rank The new rank we are updating the player to.\n     */\n\n    private handleRank(rank: Modules.Ranks): void {\n        this.game.player.setRank(rank);\n    }\n\n    /**\n     * Compares the epoch between the last entity list update request and current\n     * time. This is in order to prevent spams to the server and timeout.\n     */\n\n    private canRequestEntityList(): boolean {\n        return Date.now() - this.lastEntityListRequest > 5000; // every 2 seconds\n    }\n}\n","import { Packets } from '@kaetram/common/network';\n\nimport type {\n    AbilityCallback,\n    AchievementCallback,\n    AnimationCallback,\n    BlinkCallback,\n    BubbleCallback,\n    CameraCallback,\n    ChatCallback,\n    CombatCallback,\n    CommandCallback,\n    ContainerCallback,\n    CraftingCallback,\n    DeathCallback,\n    DespawnCallback,\n    EffectCallback,\n    EnchantCallback,\n    EntityListCallback,\n    EquipmentCallback,\n    ExperienceCallback,\n    FriendsCallback,\n    GuildCallback,\n    HandshakeCallback,\n    HealCallback,\n    MapCallback,\n    MinigameCallback,\n    MovementCallback,\n    MusicCallback,\n    NetworkCallback,\n    NotificationCallback,\n    NPCCallback,\n    OverlayCallback,\n    PointerCallback,\n    PointsCallback,\n    PoisonCallback,\n    PVPCallback,\n    QuestCallback,\n    RankCallback,\n    RespawnCallback,\n    SkillCallback,\n    SpawnCallback,\n    StoreCallback,\n    SyncCallback,\n    TeleportCallback,\n    TradeCallback,\n    UpdateCallback,\n    WelcomeCallback\n} from '@kaetram/common/types/messages/outgoing';\nimport type App from '../app';\n\nexport default class Messages {\n    private messages: (() => ((...data: never[]) => void) | undefined)[] = [];\n\n    private handshakeCallback?: HandshakeCallback;\n    private welcomeCallback?: WelcomeCallback;\n    private mapCallback?: MapCallback;\n    private spawnCallback?: SpawnCallback;\n    private equipmentCallback?: EquipmentCallback;\n    private entityListCallback?: EntityListCallback;\n    private syncCallback?: SyncCallback;\n    private movementCallback?: MovementCallback;\n    private teleportCallback?: TeleportCallback;\n    private despawnCallback?: DespawnCallback;\n    private combatCallback?: CombatCallback;\n    private animationCallback?: AnimationCallback;\n    private pointsCallback?: PointsCallback;\n    private networkCallback?: NetworkCallback;\n    private chatCallback?: ChatCallback;\n    private commandCallback?: CommandCallback;\n    private containerCallback?: ContainerCallback;\n    private abilityCallback?: AbilityCallback;\n    private questCallback?: QuestCallback;\n    private achievementCallback?: AchievementCallback;\n    private notificationCallback?: NotificationCallback;\n    private blinkCallback?: BlinkCallback;\n    private healCallback?: HealCallback;\n    private experienceCallback?: ExperienceCallback;\n    private deathCallback?: DeathCallback;\n    private musicCallback?: MusicCallback;\n    private npcCallback?: NPCCallback;\n    private respawnCallback?: RespawnCallback;\n    private tradeCallback?: TradeCallback;\n    private enchantCallback?: EnchantCallback;\n    private guildCallback?: GuildCallback;\n    private pointerCallback?: PointerCallback;\n    private pvpCallback?: PVPCallback;\n    private poisonCallback?: PoisonCallback;\n    private storeCallback?: StoreCallback;\n    private overlayCallback?: OverlayCallback;\n    private cameraCallback?: CameraCallback;\n    private bubbleCallback?: BubbleCallback;\n    private skillCallback?: SkillCallback;\n    private updateCallback?: UpdateCallback;\n    private minigameCallback?: MinigameCallback;\n    private effectCallback?: EffectCallback;\n    private friendsCallback?: FriendsCallback;\n    private rankCallback?: RankCallback;\n    private craftingCallback?: CraftingCallback;\n\n    /**\n     * Do not clutter up the Socket class with callbacks,\n     * have this class here until a better method arises in my head.\n     *\n     * This class should not have any complex functionality, its main\n     * role is to provide organization for packets and increase readability\n     *\n     * Please respect the order of the Packets Enum and arrange functions\n     * accordingly.\n     */\n    public constructor(private app: App) {\n        this.messages[Packets.Handshake] = () => this.handshakeCallback;\n        this.messages[Packets.Welcome] = () => this.welcomeCallback;\n        this.messages[Packets.Spawn] = () => this.spawnCallback;\n        this.messages[Packets.Equipment] = () => this.equipmentCallback;\n        this.messages[Packets.List] = () => this.entityListCallback;\n        this.messages[Packets.Sync] = () => this.syncCallback;\n        this.messages[Packets.Movement] = () => this.movementCallback;\n        this.messages[Packets.Teleport] = () => this.teleportCallback;\n        this.messages[Packets.Despawn] = () => this.despawnCallback;\n        this.messages[Packets.Combat] = () => this.combatCallback;\n        this.messages[Packets.Animation] = () => this.animationCallback;\n        this.messages[Packets.Points] = () => this.pointsCallback;\n        this.messages[Packets.Network] = () => this.networkCallback;\n        this.messages[Packets.Chat] = () => this.chatCallback;\n        this.messages[Packets.Command] = () => this.commandCallback;\n        this.messages[Packets.Container] = () => this.containerCallback;\n        this.messages[Packets.Ability] = () => this.abilityCallback;\n        this.messages[Packets.Quest] = () => this.questCallback;\n        this.messages[Packets.Achievement] = () => this.achievementCallback;\n        this.messages[Packets.Notification] = () => this.notificationCallback;\n        this.messages[Packets.Blink] = () => this.blinkCallback;\n        this.messages[Packets.Heal] = () => this.healCallback;\n        this.messages[Packets.Experience] = () => this.experienceCallback;\n        this.messages[Packets.Death] = () => this.deathCallback;\n        this.messages[Packets.Music] = () => this.musicCallback;\n        this.messages[Packets.NPC] = () => this.npcCallback;\n        this.messages[Packets.Respawn] = () => this.respawnCallback;\n        this.messages[Packets.Trade] = () => this.tradeCallback;\n        this.messages[Packets.Enchant] = () => this.enchantCallback;\n        this.messages[Packets.Guild] = () => this.guildCallback;\n        this.messages[Packets.Pointer] = () => this.pointerCallback;\n        this.messages[Packets.PVP] = () => this.pvpCallback;\n        this.messages[Packets.Poison] = () => this.poisonCallback;\n        this.messages[Packets.Store] = () => this.storeCallback;\n        this.messages[Packets.Map] = () => this.mapCallback;\n        this.messages[Packets.Overlay] = () => this.overlayCallback;\n        this.messages[Packets.Camera] = () => this.cameraCallback;\n        this.messages[Packets.Bubble] = () => this.bubbleCallback;\n        this.messages[Packets.Skill] = () => this.skillCallback;\n        this.messages[Packets.Update] = () => this.updateCallback;\n        this.messages[Packets.Minigame] = () => this.minigameCallback;\n        this.messages[Packets.Effect] = () => this.effectCallback;\n        this.messages[Packets.Friends] = () => this.friendsCallback;\n        this.messages[Packets.Rank] = () => this.rankCallback;\n        this.messages[Packets.Crafting] = () => this.craftingCallback;\n    }\n\n    /**\n     * Parses through the data and calls the appropriate callback.\n     * @param data Packet data containing packet opcode and data.\n     */\n\n    public handleData(data: [Packets, ...never[]]): void {\n        let packet = data.shift()!,\n            message = this.messages[packet]();\n\n        if (message && typeof message === 'function')\n            message.call(this, ...(data as unknown[] as never[]));\n    }\n\n    /**\n     * Packet data received in an array format calls `handleData`\n     * for each iteration of packet data.\n     * @param data Packet data array.\n     */\n\n    public handleBulkData(data: [Packets, ...never[]][]): void {\n        for (let info of data) this.handleData(info);\n    }\n\n    /**\n     * UTF8 messages handler. These are simple messages that are pure\n     * strings. These errors are displayed on the login page.\n     * @param message UTF8 message received from the server.\n     */\n\n    public handleUTF8(message: string): void {\n        this.app.toggleLogin(false);\n\n        switch (message) {\n            case 'worldfull': {\n                this.app.sendError('The servers are currently full!');\n                break;\n            }\n\n            case 'error': {\n                this.app.sendError('The server has responded with an error!');\n                break;\n            }\n\n            case 'development': {\n                this.app.sendError('The game is currently in development mode.');\n                break;\n            }\n\n            case 'disallowed': {\n                this.app.sendError('The server is currently not accepting connections!');\n                break;\n            }\n\n            case 'maintenance': {\n                this.app.sendError('Kaetram is currently under maintenance.');\n                break;\n            }\n\n            case 'userexists': {\n                this.app.sendError('The username you have entered already exists.');\n                break;\n            }\n\n            case 'emailexists': {\n                this.app.sendError('The email you have entered is not available.');\n                break;\n            }\n\n            case 'invalidinput': {\n                this.app.sendError(\n                    'The input you have entered is invalid. Please do not use special characters.'\n                );\n                break;\n            }\n\n            case 'loggedin': {\n                this.app.sendError('The player is already logged in!');\n                break;\n            }\n\n            case 'invalidlogin': {\n                this.app.sendError('You have entered the wrong username or password.');\n                break;\n            }\n\n            case 'toofast': {\n                this.app.sendError('You are trying to log in too fast from the same connection.');\n                break;\n            }\n\n            case 'timeout': {\n                this.app.sendError('You have been disconnected for being inactive for too long.');\n                break;\n            }\n\n            case 'updated': {\n                this.app.sendError('The game has been updated. Please clear your browser cache.');\n                break;\n            }\n\n            case 'cheating': {\n                this.app.sendError(`An error in client-server syncing has occurred.`);\n                break;\n            }\n\n            case 'lost': {\n                this.app.sendError('The connection to the server has been lost.');\n                break;\n            }\n\n            case 'toomany': {\n                this.app.sendError('Too many devices from your IP address are connected.');\n                break;\n            }\n\n            case 'ratelimit': {\n                this.app.sendError('You are sending packets too fast.');\n                break;\n            }\n\n            default: {\n                this.app.sendError('An unknown error has occurred, please submit a bug report.');\n                break;\n            }\n        }\n    }\n\n    /**\n     * Packet callbacks.\n     */\n\n    public onHandshake(callback: HandshakeCallback): void {\n        this.handshakeCallback = callback;\n    }\n\n    public onWelcome(callback: WelcomeCallback): void {\n        this.welcomeCallback = callback;\n    }\n\n    public onSpawn(callback: SpawnCallback): void {\n        this.spawnCallback = callback;\n    }\n\n    public onEquipment(callback: EquipmentCallback): void {\n        this.equipmentCallback = callback;\n    }\n\n    public onEntityList(callback: EntityListCallback): void {\n        this.entityListCallback = callback;\n    }\n\n    public onSync(callback: SyncCallback): void {\n        this.syncCallback = callback;\n    }\n\n    public onMovement(callback: MovementCallback): void {\n        this.movementCallback = callback;\n    }\n\n    public onTeleport(callback: TeleportCallback): void {\n        this.teleportCallback = callback;\n    }\n\n    public onDespawn(callback: DespawnCallback): void {\n        this.despawnCallback = callback;\n    }\n\n    public onCombat(callback: CombatCallback): void {\n        this.combatCallback = callback;\n    }\n\n    public onAnimation(callback: AnimationCallback): void {\n        this.animationCallback = callback;\n    }\n\n    public onPoints(callback: PointsCallback): void {\n        this.pointsCallback = callback;\n    }\n\n    public onNetwork(callback: NetworkCallback): void {\n        this.networkCallback = callback;\n    }\n\n    public onChat(callback: ChatCallback): void {\n        this.chatCallback = callback;\n    }\n\n    public onCommand(callback: CommandCallback): void {\n        this.commandCallback = callback;\n    }\n\n    public onContainer(callback: ContainerCallback): void {\n        this.containerCallback = callback;\n    }\n\n    public onAbility(callback: AbilityCallback): void {\n        this.abilityCallback = callback;\n    }\n\n    public onQuest(callback: QuestCallback): void {\n        this.questCallback = callback;\n    }\n\n    public onAchievement(callback: AchievementCallback): void {\n        this.achievementCallback = callback;\n    }\n\n    public onNotification(callback: NotificationCallback): void {\n        this.notificationCallback = callback;\n    }\n\n    public onBlink(callback: BlinkCallback): void {\n        this.blinkCallback = callback;\n    }\n\n    public onHeal(callback: HealCallback): void {\n        this.healCallback = callback;\n    }\n\n    public onExperience(callback: ExperienceCallback): void {\n        this.experienceCallback = callback;\n    }\n\n    public onDeath(callback: DeathCallback): void {\n        this.deathCallback = callback;\n    }\n\n    public onMusic(callback: MusicCallback): void {\n        this.musicCallback = callback;\n    }\n\n    public onNPC(callback: NPCCallback): void {\n        this.npcCallback = callback;\n    }\n\n    public onRespawn(callback: RespawnCallback): void {\n        this.respawnCallback = callback;\n    }\n\n    public onTrade(callback: TradeCallback): void {\n        this.tradeCallback = callback;\n    }\n\n    public onEnchant(callback: EnchantCallback): void {\n        this.enchantCallback = callback;\n    }\n\n    public onGuild(callback: GuildCallback): void {\n        this.guildCallback = callback;\n    }\n\n    public onPointer(callback: PointerCallback): void {\n        this.pointerCallback = callback;\n    }\n\n    public onPVP(callback: PVPCallback): void {\n        this.pvpCallback = callback;\n    }\n\n    public onPoison(callback: PoisonCallback): void {\n        this.poisonCallback = callback;\n    }\n\n    public onStore(callback: StoreCallback): void {\n        this.storeCallback = callback;\n    }\n\n    public onMap(callback: MapCallback): void {\n        this.mapCallback = callback;\n    }\n\n    public onOverlay(callback: OverlayCallback): void {\n        this.overlayCallback = callback;\n    }\n\n    public onCamera(callback: CameraCallback): void {\n        this.cameraCallback = callback;\n    }\n\n    public onBubble(callback: BubbleCallback): void {\n        this.bubbleCallback = callback;\n    }\n\n    public onSkill(callback: SkillCallback): void {\n        this.skillCallback = callback;\n    }\n\n    public onUpdate(callback: UpdateCallback): void {\n        this.updateCallback = callback;\n    }\n\n    public onMinigame(callback: MinigameCallback): void {\n        this.minigameCallback = callback;\n    }\n\n    public onEffect(callback: EffectCallback): void {\n        this.effectCallback = callback;\n    }\n\n    public onFriends(callback: FriendsCallback): void {\n        this.friendsCallback = callback;\n    }\n\n    public onRank(callback: RankCallback): void {\n        this.rankCallback = callback;\n    }\n\n    public onCrafting(callback: CraftingCallback): void {\n        this.craftingCallback = callback;\n    }\n}\n","import Messages from './messages';\n\nimport log from '../lib/log';\n\nimport { Packets } from '@kaetram/common/network';\n\nimport type Game from '../game';\nimport type { SerializedServer } from '@kaetram/common/types/api';\n\nexport default class Socket {\n    public messages;\n\n    private config;\n    private connection!: WebSocket;\n    private listening = false;\n\n    public constructor(private game: Game) {\n        this.config = game.app.config;\n        this.messages = new Messages(game.app);\n    }\n\n    /**\n     * Asks the hub for a server to connect to.\n     * The connection assumes it is a hub, if it's not,\n     * we default to normal server connection.\n     */\n\n    private async getServer(): Promise<SerializedServer | undefined> {\n        // Skip if hub is disabled in the config.\n        if (!this.config.hub) return;\n\n        // Attempt to get API data from the hub.\n        try {\n            let result = await fetch(`${this.config.hub}/server`);\n\n            return await result.json();\n        } catch {\n            return;\n        }\n    }\n\n    /**\n     * Creates a websocket connection to the server.\n     */\n\n    public async connect(server?: SerializedServer): Promise<void> {\n        let { host, port } = server || (await this.getServer()) || this.config,\n            url = this.config.ssl ? `wss://${host}` : `ws://${host}:${port}`;\n\n        // Create a websocket connection with the url generated.\n        this.connection = new WebSocket(url);\n\n        // Handler for when a connection is successfully established.\n        this.connection.addEventListener('open', this.handleConnection.bind(this));\n\n        // Handler for when a message is received.\n        this.connection.addEventListener('message', (event) => this.receive(event.data));\n\n        // Handler for when an error occurs.\n        this.connection.addEventListener('error', () => this.handleConnectionError(host, port));\n\n        // Handler for when a disconnection occurs.\n        this.connection.addEventListener('close', () => this.game.handleDisconnection());\n\n        /**\n         * The audio controller can only be properly initialized when the player interacts\n         * with the website. This is the best possible place to initialize it.\n         */\n\n        this.game.audio.createContext();\n    }\n\n    /**\n     * Parses a JSON string and passes the data onto the respective handlers\n     * @param message JSON string information to be parsed.\n     */\n\n    private receive(message: string): void {\n        if (!this.listening) return;\n\n        if (message.startsWith('[')) {\n            let data = JSON.parse(message);\n\n            if (data.length > 1) this.messages.handleBulkData(data);\n            else this.messages.handleData(data.shift());\n        } else this.messages.handleUTF8(message);\n    }\n\n    /**\n     * Sends a message through the socket to the server.\n     * @param packet The packet ID in number format (see common/network/packets.ts);\n     * @param data Packet data in an array format.\n     */\n\n    public send(packet: number, data?: unknown): void {\n        // Ensure the connection is open before sending.\n        if (this.connection?.readyState !== WebSocket.OPEN) return;\n\n        this.connection.send(JSON.stringify([packet, data]));\n    }\n\n    /**\n     * Handles successful connection and sends a handshake request signal.\n     */\n\n    private handleConnection(): void {\n        this.listening = true;\n\n        log.info('Connection established...');\n\n        this.game.app.updateLoader('Preparing handshake');\n\n        // Send the handshake with the game version.\n        this.send(Packets.Handshake, {\n            gVer: this.config.version\n        });\n    }\n\n    /**\n     * Handle connection error in the event websocket fails.\n     */\n\n    private handleConnectionError(host: string, port: number): void {\n        log.info(`Failed to connect to: ${host}`);\n\n        this.listening = false;\n\n        this.game.app.toggleLogin(false);\n\n        this.game.app.sendError(\n            window.config.debug\n                ? `Couldn't connect to ${host}:${port}`\n                : 'Could not connect to the game server.'\n        );\n    }\n}\n","import { Modules } from '@kaetram/common/network';\nimport $ from 'jquery';\n\nimport type Character from '../entity/character/character';\n\nconst MAXIMUM_ZOOM = 6,\n    DEFAULT_ZOOM = 3,\n    MAX_GRID_WIDTH = 52,\n    MAX_GRID_HEIGHT = 28;\n\nlet MINIMUM_ZOOM = 2.6;\n\nexport default class Camera {\n    // Border is used to determine the screen size of the website (not browser).\n    public border: JQuery = $('#border');\n\n    // x and y are absolute pixel coordinates\n    public x = 0;\n    public y = 0;\n\n    // Grid x and y are the absolute coordinates divided by tileSize.\n    public gridX = 0;\n    public gridY = 0;\n\n    // Grid width and height represent how many grids are visible horizontally and vertically.\n    public gridWidth = 0;\n    public gridHeight = 0;\n\n    // The maximum camera position for the bottom and right edges of the map.\n    private borderX = 0;\n    private borderY = 0;\n\n    // How zoomed in we are.\n    public zoomFactor = 3;\n\n    // Whether to centre the camera on a specific entity.\n    private centered = true;\n\n    // Whether to bound the camera horizontally or vertically.\n    public lockX = false;\n    public lockY = false;\n\n    public constructor(private width: number, private height: number, private tileSize: number) {\n        this.update();\n    }\n\n    /**\n     * Calculates the amount of tiles horizontally and vertically\n     * depending on the dimensions of the screen and the zoom factor.\n     * The border acts as a bounding box for when the camera approaches\n     * edges of the map.\n     */\n\n    public update(): void {\n        let borderWidth = this.border.width()!,\n            borderHeight = this.border.height()!;\n\n        /**\n         * The grid width and height are defined by how many tiles we can fit into\n         * the dimensions of the border. Note that the border is the size of the contents\n         * visible on the website itself, not the size of the browser window. The zoom\n         * factor is divided again to get the amount of grids are visible horizontally\n         * and vertically after the zoom.\n         */\n\n        this.gridWidth = Math.ceil(borderWidth / this.tileSize / this.zoomFactor);\n        this.gridHeight = Math.ceil(borderHeight / this.tileSize / this.zoomFactor);\n\n        this.clamp();\n\n        /**\n         * The border x and y are the boundaries of how far the map can go. The maximum\n         * camera position is from x = 0 and y = 0 (left/top edge of the map), to the maximum possible\n         * position defined by the map width/height minus one screen size. These are proportions\n         * used to bind the camera when we reach the right/bottom edge of the map.\n         */\n\n        this.borderX = (this.width - this.gridWidth) * this.tileSize;\n        this.borderY = (this.height - this.gridHeight) * this.tileSize;\n    }\n\n    /**\n     * Prevents the max grid width and height from exceeding the maximum proportions.\n     * This is used to prevent the camera from rendering too many tiles.\n     */\n\n    private clamp(): void {\n        if (this.gridWidth > MAX_GRID_WIDTH) this.gridWidth = MAX_GRID_WIDTH;\n        if (this.gridHeight > MAX_GRID_HEIGHT) this.gridHeight = MAX_GRID_HEIGHT;\n    }\n\n    /**\n     * Takes two grid coordinates and sets their position onto the camera.\n     * We then use the grid coordinates to calculate the absolute pixel\n     * coordinates by multiplying against the tileSize.\n     * @param gridX The x coordinate in the grid.\n     * @param gridY The y coordinate in the grid.\n     */\n\n    private setGridPosition(gridX: number, gridY: number): void {\n        this.gridX = gridX;\n        this.gridY = gridY;\n\n        this.x = gridX * this.tileSize;\n        this.y = gridY * this.tileSize;\n    }\n\n    /**\n     * Sets the zoom factor of the camera and clamps the limits.\n     * @param zoom The new zoom factor, defaults to DEFAULT_ZOOM value.\n     */\n\n    public setZoom(zoom = DEFAULT_ZOOM): void {\n        this.zoomFactor = zoom;\n\n        if (isNaN(this.zoomFactor)) this.zoomFactor = DEFAULT_ZOOM;\n\n        if (this.zoomFactor > MAXIMUM_ZOOM) this.zoomFactor = MAXIMUM_ZOOM;\n        if (this.zoomFactor < MINIMUM_ZOOM) this.zoomFactor = MINIMUM_ZOOM;\n    }\n\n    /**\n     * A clip takes place when we want to move the camera to the\n     * edges of the nearest tile. For example, if we decentre the\n     * camera while the player is moving, this will leave\n     * the camera in between tiles, we want to clip to the nearest\n     * tile to prevent any issues.\n     */\n\n    public clip(): void {\n        this.setGridPosition(\n            Math.round(this.x / this.tileSize),\n            Math.round(this.y / this.tileSize)\n        );\n    }\n\n    /**\n     * Toggles the centered state of the camera.\n     */\n\n    public center(): void {\n        this.centered = true;\n    }\n\n    /**\n     * Untoggle the camera centration state and clip\n     * the camera to the nearest tile.\n     */\n\n    public decenter(): void {\n        this.centered = false;\n\n        this.clip();\n    }\n\n    /**\n     * The camera is centered about the specified player character. This\n     * is generally the main character playing the game (unless cutscenes)\n     * will be implemented later.\n     * @param character The player entity we are centering the camera on.\n     */\n\n    public centreOn(character: Character): void {\n        let width = Math.floor(this.gridWidth / 2),\n            height = Math.floor(this.gridHeight / 2),\n            nextX = character.x - width * this.tileSize,\n            nextY = character.y - height * this.tileSize;\n\n        /**\n         * We check whether the x and y coordinates that are about\n         * to be calculated are within the boundaries of the map. If\n         * they are, then we update the camera position both horizontally\n         * and vertically.\n         */\n\n        if (nextX >= 0 && nextX <= this.borderX && !this.lockX) {\n            this.x = nextX;\n            this.gridX = Math.round(character.x / this.tileSize) - width;\n        } else this.offsetX(nextX); // Bind to the x edge.\n\n        if (nextY >= 0 && nextY <= this.borderY && !this.lockY) {\n            this.y = nextY;\n            this.gridY = Math.round(character.y / this.tileSize) - height;\n        } else this.offsetY(nextY); // Bind to the y edge.\n    }\n\n    /**\n     * Checks whether the camera is nearing the left or right edge of\n     * the map by comparing against a tileSize or the borderX. We use\n     * the `tileSize` in order to offset the camera binding to the left\n     * edge by one tile. Otherwise the player will see a black border\n     * alongside the left edge of the map. If the upcoming x coordinate\n     * exits the boundaries, we then continuously set the x camera position\n     * to either 0 (for left edge case) or the borderX (for right edge case).\n     * @param nextX The camera x coordinate we are testing against going out of bounds.\n     */\n\n    private offsetX(nextX: number): void {\n        if (nextX <= this.tileSize) {\n            // Left edge case\n            this.x = 0;\n            this.gridX = 0;\n        } else if (nextX >= this.borderX) {\n            // The right edge case\n            this.x = this.borderX;\n            this.gridX = Math.round(this.borderX / this.tileSize);\n        }\n    }\n\n    /**\n     * Similar to `offsetX`, we check against the top of the map and the\n     * bottom of the map and prevent the camera from going out of bounds.\n     * @param nextY The camera y coordinate we are testing against going out of bounds.\n     */\n\n    private offsetY(nextY: number): void {\n        if (nextY <= this.tileSize) {\n            this.y = 0;\n            this.gridY = 0;\n        } else if (nextY >= this.borderY) {\n            this.y = this.borderY;\n            this.gridY = Math.round(this.borderY / this.tileSize);\n        }\n    }\n\n    /**\n     * Shifts the map horizontally or vertically (depending on the direction)\n     * and updates the coordinates accordingly. The +- 3 are added in order\n     * to offset the camera by a few tiles. This is done because otherwise the\n     * player would get caught in a weird zoning loop where the zone that was\n     * just entered would immediately trigger movement to the zone we just left.\n     * @param direction The direction we are moving the camera in.\n     */\n\n    public zone(direction: Modules.Orientation): void {\n        switch (direction) {\n            case Modules.Orientation.Up: {\n                this.setGridPosition(this.gridX, this.gridY - this.gridHeight + 3);\n\n                break;\n            }\n\n            case Modules.Orientation.Down: {\n                this.setGridPosition(this.gridX, this.gridY + this.gridHeight - 3);\n\n                break;\n            }\n\n            case Modules.Orientation.Right: {\n                this.setGridPosition(this.gridX + this.gridWidth - 3, this.gridY);\n\n                break;\n            }\n\n            case Modules.Orientation.Left: {\n                this.setGridPosition(this.gridX - this.gridWidth + 3, this.gridY);\n\n                break;\n            }\n        }\n\n        this.zoneClip();\n    }\n\n    /**\n     * Clip the map to the boundaries of the map if\n     * we zone somewhere outside of the limitations.\n     */\n\n    private zoneClip(): void {\n        if (this.gridX < 0) this.setGridPosition(0, this.gridY);\n\n        if (this.gridX > this.width) this.setGridPosition(this.width, this.gridY);\n\n        if (this.gridY < 0) this.setGridPosition(this.gridX, 0);\n\n        if (this.gridY > this.height) this.setGridPosition(this.gridX, this.height);\n    }\n\n    /**\n     * Zooms in our out the camera. Depending on the zoomAmount, if it's negative\n     * we zoom out, if it's positive we zoom in.\n     * @param zoomAmount Float value we are zooming by.\n     */\n\n    public zoom(zoomAmount = 0): void {\n        let zoom = parseFloat((this.zoomFactor + zoomAmount).toFixed(1));\n\n        this.setZoom(zoom);\n    }\n\n    /**\n     * Updates the minimum zoom when the screen is resized. Mobiles devices\n     * have a smaller screen size so we allow more zooming out. Once the\n     * device returns to normal proportions, we limit the zoom again.\n     */\n\n    public updateMinimumZoom(mobile = false): void {\n        // Update the minimum zoom.\n        MINIMUM_ZOOM = mobile ? 2 : 2.6;\n\n        this.zoom();\n    }\n\n    /**\n     * @returns Whether or not the camera is centered.\n     */\n\n    public isCentered(): boolean {\n        return this.centered;\n    }\n\n    /**\n     * Checks whether the specified x and y coordinates are in the camera's view.\n     * @param x The x grid coordinate.\n     * @param y The y grid coordinate.\n     * @param offsetX How far to the right and left to check outside the bounds.\n     * @param offsetY How far down to check outside the y bounds.\n     * @returns Whether or not the coordinates are within the viewport.\n     */\n\n    public isVisible(x: number, y: number, offsetX: number, offsetY: number): boolean {\n        return (\n            x > this.gridX - offsetX &&\n            x < this.gridX + this.gridWidth &&\n            y > this.gridY - offsetX &&\n            y < this.gridY + this.gridHeight + offsetY\n        );\n    }\n\n    /**\n     * Iterates through every grid coordinate in the view port.\n     * @param callback Callback contains the grid coordinates being iterated in the view.\n     * @param offset How much to look outside the width and height of the viewport.\n     */\n\n    public forEachVisiblePosition(callback: (x: number, y: number) => void, offset = 1): void {\n        for (let y = this.gridY - offset, maxY = y + this.gridHeight + offset * 2; y < maxY; y++)\n            for (let x = this.gridX - offset, maxX = x + this.gridWidth + offset * 2; x < maxX; x++)\n                callback(x, y);\n    }\n}\n","/**\n * Represents the default class for minigame status. It's used by the game world\n * to update the player's status in the minigame.\n */\n\nimport type { Status } from '@kaetram/common/api/minigame';\n\nexport default class Minigame {\n    // TeamWar score variables.\n    public redTeamScore = 0;\n    public blueTeamScore = 0;\n    public started = false;\n\n    /**\n     * @param type Represents the type of minigame we are dealing with. (Opcodes.Minigame)\n     * @param status Whether the player is in-game or in the lobby.\n     * @param countdown Lobby/in-game countdown timer updated from the server.\n     */\n    public constructor(public type = -1, public status: Status = 'exit', public countdown = 180) {}\n\n    /**\n     * Resets the minigame status to default.\n     */\n\n    public reset(): void {\n        this.type = -1;\n        this.status = 'exit';\n        this.started = false;\n    }\n\n    /**\n     * Updates the minigame status.\n     * @param status The new status of the minigame.\n     */\n\n    public setStatus(status: Status): void {\n        this.status = status;\n    }\n\n    /**\n     * Updates the score for the TeamWar minigame.\n     * @param redTeam New red team score.\n     * @param blueTeam New blue team score.\n     */\n\n    public setScore(redTeam: number, blueTeam: number): void {\n        this.redTeamScore = redTeam;\n        this.blueTeamScore = blueTeam;\n    }\n\n    /**\n     * A minigame status exists if the type of minigame is greater than -1.\n     * @returns Whether ot not the type is greater than -1.\n     */\n\n    public exists(): boolean {\n        return this.type > -1;\n    }\n}\n","import log from '../lib/log';\n\nexport default class Overlay {\n    private currentOverlay = '';\n\n    private overlays: { [key: string]: HTMLImageElement } = {\n        fog: this.load('fog')\n    };\n\n    /**\n     * Loads an overlay based on the provided string.\n     * @param name File name of the overlay.\n     * @returns HTML image of the overlay if it exists.\n     */\n\n    private load(name: string): HTMLImageElement {\n        let overlay = new Image(),\n            image = `/img/overlays/${name}.png`;\n\n        overlay.crossOrigin = 'Anonymous';\n        overlay.src = image;\n\n        overlay.addEventListener('load', () => log.debug(`Loaded ${name}`));\n\n        return overlay;\n    }\n\n    /**\n     * @returns Whether or not overlay exists by checking if the string is empty.\n     */\n\n    public hasOverlay(): boolean {\n        return this.currentOverlay !== '';\n    }\n\n    /**\n     * Attempts to grab the current overlay.\n     * @returns The `currentOverlay` in our dictionary. If it\n     * doesn't exist, we just return undefined.\n     */\n\n    public get(): HTMLImageElement {\n        return this.overlays[this.currentOverlay];\n    }\n\n    /**\n     * Updates the `currentOverlay` to the provided string.\n     * @param overlay The new overlay to be set.\n     */\n\n    public update(overlay = ''): void {\n        this.currentOverlay = overlay;\n    }\n}\n","/**\n * Used for organization of WebGL information. We use this to\n * apply shaders and assign it to a WebGLProgram.\n */\n\nimport log from '../../lib/log';\n\ninterface Attributes {\n    [key: string]: number;\n}\n\ninterface UniformAttributes {\n    [key: string]: WebGLUniformLocation;\n}\n\n/**\n * Huge thanks to the creator of gl-tiled for providing this framework. It has\n * been modified by me to use more standard approaches.\n */\n\nexport default class ProgramData {\n    public id = '';\n\n    public program: WebGLProgram;\n\n    // The attributes for the program.\n    public attributes: Attributes = {};\n\n    // The uniform attributes for the program.\n    public uniforms: UniformAttributes = {};\n\n    public constructor(\n        context: WebGLRenderingContext,\n        vertexShader: string,\n        fragmentShader: string,\n        attributes: Attributes = {}\n    ) {\n        this.id = (context.canvas as HTMLCanvasElement).id;\n        this.program = this.compile(context, vertexShader, fragmentShader, attributes)!;\n\n        // Build attribute locations based on the created program.\n        let count = context.getProgramParameter(this.program, context.ACTIVE_ATTRIBUTES);\n\n        for (let i = 0; i < count; i++) {\n            let attribute = context.getActiveAttrib(this.program, i);\n\n            if (!attribute) continue;\n\n            this.attributes[attribute.name] = context.getAttribLocation(\n                this.program,\n                attribute.name\n            );\n        }\n\n        // Build the uniform locations based on the created program.\n        count = context.getProgramParameter(this.program, context.ACTIVE_UNIFORMS);\n\n        for (let i = 0; i < count; i++) {\n            let uniform = context.getActiveUniform(this.program, i);\n\n            // Skip if we cannot get the uniform.\n            if (!uniform) continue;\n\n            // We need to remove the array index from the name.\n            let name = uniform.name.replace('[0]', ''),\n                location = context.getUniformLocation(this.program, name);\n\n            // If the location is valid, add it to the uniforms.\n            if (location) this.uniforms[name] = location;\n        }\n    }\n\n    /**\n     * Used to attach shaders and attributes onto a WebGL rendering context.\n     * @param context The context we want to attach the program to.\n     * @param vertexShader The vertex shader we want to use.\n     * @param fragmentShader The fragment shader we want to use.\n     * @param attributes (Optional) The attributes we want to use.\n     */\n\n    private compile(\n        context: WebGLRenderingContext,\n        vertexShader: string,\n        fragmentShader: string,\n        attributes: Attributes = {}\n    ): WebGLProgram | undefined {\n        // Compile both the vertex and fragment shaders and store the results.\n        let glVertex = this.compileShader(context, context.VERTEX_SHADER, vertexShader),\n            glFragment = this.compileShader(context, context.FRAGMENT_SHADER, fragmentShader),\n            program = context.createProgram();\n\n        if (!program) {\n            log.error('Could not create WebGL program.');\n\n            return;\n        }\n\n        // Attach the shaders to the program.\n        context.attachShader(program, glVertex!);\n        context.attachShader(program, glFragment!);\n\n        // Iterate through the attributes and bind them to the program.\n        for (let key in attributes) context.bindAttribLocation(program, attributes[key], key);\n\n        // Link the program and check for errors.\n        context.linkProgram(program);\n\n        if (!context.getProgramParameter(program, context.LINK_STATUS)) {\n            log.error(`Could not link the WebGL program: ${context.getProgramInfoLog(program)}`);\n\n            context.deleteProgram(program);\n            context.deleteShader(glVertex!);\n            context.deleteShader(glFragment!);\n\n            return;\n        }\n\n        // Delete the shaders since we no longer need them.\n        context.deleteShader(glVertex!);\n        context.deleteShader(glFragment!);\n\n        return program;\n    }\n\n    /**\n     * Compiles the shader and returns it.\n     * @param context The context for which we want to compile the shader.\n     * @param type The type of shader we want to compile.\n     * @param source The source code for the shader.\n     * @returns The compiled shader object.\n     */\n\n    private compileShader(\n        context: WebGLRenderingContext,\n        type: number,\n        source: string\n    ): WebGLShader | undefined {\n        let shader = context.createShader(type);\n\n        // If we cannot create a shader, return undefined.\n        if (!shader) {\n            log.error(`Failed to create shader of type ${type}`);\n\n            return;\n        }\n\n        context.shaderSource(shader, source);\n        context.compileShader(shader);\n\n        // We could not compile the shader properly.\n        if (!context.getShaderParameter(shader, context.COMPILE_STATUS)) {\n            log.error(`Failed to compile shader: ${context.getShaderInfoLog(shader)}`);\n\n            return;\n        }\n\n        return shader;\n    }\n}\n","/**\n * Class object for organizing and storing information about tilesets. This contains\n * preliminary data for tilesets that shaders or WebGL contexts can use.\n */\n\nimport log from '../../lib/log';\n\nimport type Map from '../../map/map';\n\nexport default class Tileset {\n    public textures: WebGLTexture[] = [];\n\n    public constructor(private map: Map, private context: WebGLRenderingContext) {\n        // Create the textures for each tileset.\n        for (let tileset of this.map.tilesets) this.createTexture(tileset);\n    }\n\n    /**\n     * Creates a tileset texture and binds it to class specified WebGL context. Since we are using\n     * two contexts (one for background and one for foreground), this will be called for each\n     * respective context.\n     * @param context The context that we want to bind the texture information to.\n     * @param image The image that we want to use for the texture.\n     */\n\n    public createTexture(image: HTMLImageElement): void {\n        let texture = this.context.createTexture();\n\n        // Verify that the texture was created.\n        if (!texture || !image)\n            return log.error(`Failed to create texture for tileset: ${image.src}`);\n\n        // Bind and apply the texture to the context\n        this.context.bindTexture(this.context.TEXTURE_2D, texture);\n        this.context.texImage2D(\n            this.context.TEXTURE_2D,\n            0,\n            this.context.RGBA,\n            this.context.RGBA,\n            this.context.UNSIGNED_BYTE,\n            image\n        );\n\n        // Apply the texture parameters to the context.\n        this.context.texParameteri(\n            this.context.TEXTURE_2D,\n            this.context.TEXTURE_MAG_FILTER,\n            this.context.NEAREST\n        );\n        this.context.texParameteri(\n            this.context.TEXTURE_2D,\n            this.context.TEXTURE_MIN_FILTER,\n            this.context.NEAREST\n        );\n        this.context.texParameteri(\n            this.context.TEXTURE_2D,\n            this.context.TEXTURE_WRAP_S,\n            this.context.CLAMP_TO_EDGE\n        );\n        this.context.texParameteri(\n            this.context.TEXTURE_2D,\n            this.context.TEXTURE_WRAP_T,\n            this.context.CLAMP_TO_EDGE\n        );\n\n        // Append the texture to the list of textures.\n        this.textures.push(texture);\n\n        log.debug(`Created texture for tileset: ${image.src}`);\n    }\n\n    /**\n     * Iterates through all the textures.\n     */\n\n    public forEachTexture(callback: (texture: WebGLTexture, index: number) => void): void {\n        for (let i = 0; i < this.textures.length; i++) callback(this.textures[i], i);\n    }\n}\n","import type { RotatedTile } from '@kaetram/common/types/map';\nimport type Map from '../../map/map';\n\n/**\n * A layer is a class object that corresponds with a layer in the map data. This is used to\n * structure the tile map data and organize it into layers. Layers are generated on the go,\n * which means that if the area of the map contains 2 layers, then 2 layers will be generated.\n * If the player steps into an area that contains 3 layers, another layer object will be created\n * and added to the map.\n */\n\nenum FlipFlags {\n    FlippedAntiDiagonal = 0x20_00_00_00,\n    FlippedVertical = 0x40_00_00_00,\n    FlippedHorizontal = 0x80_00_00_00\n}\n\nexport default class Layer {\n    /**\n     * The background texture is for the normal tiles that are rendered on top of each other.\n     * The foreground layer are tiles that are rendered on top of the background layer and that\n     * the player is behind. Since I am still experimenting with WebGL I might be able to incorporate\n     * all of the rendering in one canvas in the nearby future. Please have patience.\n     */\n\n    // The texture data for each index in the layer.\n    public backgroundData: Uint8Array;\n    public foregroundData: Uint8Array;\n\n    // The texture object for foreground and background.\n    public backgroundTexture!: WebGLTexture;\n    public foregroundTexture!: WebGLTexture;\n\n    public constructor(private map: Map) {\n        this.backgroundData = new Uint8Array(this.map.width * this.map.height * 4);\n        this.foregroundData = new Uint8Array(this.map.width * this.map.height * 4);\n\n        // Fill the texture data with 255's\n        this.backgroundData.fill(255);\n        this.foregroundData.fill(255);\n    }\n\n    /**\n     * Binds the texture to the WebGL context. The foreground flag determines which texture\n     * data we want to bind to the context.\n     * @param context The context that we want to bind the texture to.\n     * @param program The shader program that we want to bind the texture to.\n     * @param foreground Whether we want to bind the foreground or background texture.\n     */\n\n    public bindTexture(\n        context: WebGLRenderingContext,\n        program: WebGLProgram,\n        foreground = false\n    ): void {\n        // Create the textures if they do not exist.\n        if (!this.backgroundTexture && !foreground)\n            this.backgroundTexture = context.createTexture()!;\n        if (!this.foregroundTexture && foreground)\n            this.foregroundTexture = context.createTexture()!;\n\n        context.bindTexture(\n            context.TEXTURE_2D,\n            foreground ? this.foregroundTexture : this.backgroundTexture\n        );\n\n        context.texParameteri(context.TEXTURE_2D, context.TEXTURE_MAG_FILTER, context.NEAREST);\n        context.texParameteri(context.TEXTURE_2D, context.TEXTURE_MIN_FILTER, context.NEAREST);\n\n        context.texParameteri(context.TEXTURE_2D, context.TEXTURE_WRAP_S, context.CLAMP_TO_EDGE);\n        context.texParameteri(context.TEXTURE_2D, context.TEXTURE_WRAP_T, context.CLAMP_TO_EDGE);\n\n        // Use the background program to draw the map.\n        context.useProgram(program);\n\n        // Upload the texture data to the GPU.\n        context.texImage2D(\n            context.TEXTURE_2D,\n            0,\n            context.RGBA,\n            this.map.width,\n            this.map.height,\n            0,\n            context.RGBA,\n            context.UNSIGNED_BYTE,\n            foreground ? this.foregroundData : this.backgroundData\n        );\n    }\n\n    /**\n     * Clears a tile from the texture data at a provided index.\n     * @param index The index at which we want to clear the tile.\n     */\n\n    public clear(index: number): void {\n        // Increase the index.\n        index *= 4;\n\n        this.backgroundData[index] =\n            this.backgroundData[index + 1] =\n            this.backgroundData[index + 2] =\n            this.backgroundData[index + 3] =\n                255;\n\n        this.foregroundData[index] =\n            this.foregroundData[index + 1] =\n            this.foregroundData[index + 2] =\n            this.foregroundData[index + 3] =\n                255;\n    }\n\n    /**\n     * We add a tile to the specific texture data based on the provided index and value.\n     * @param index Represents the index at which the tile will be added (index * 4 for the buffer.)\n     * @param tile Contains information about the tile, this can be a flat tile (number value) or a rotated\n     * tile with flags applied to it. Depending on the context we extract the information and apply it to the\n     * texture data.\n     * @param foreground Whether we want to add the tile to the foreground or background texture data.\n     */\n\n    public addTile(index: number, tile: number | RotatedTile, flipped = false): void {\n        // Grab the index in the respective texture data array.\n        let tileId = flipped ? (tile as RotatedTile).tileId : (tile as number),\n            textureData = this.map.isHighTile(tileId) ? this.foregroundData : this.backgroundData,\n            dataIndex = index * 4;\n\n        // If the tileId is 0 or invalid it means it's an empty tile, so we just update the texture data with 255.\n        if (!tileId) {\n            textureData[dataIndex] =\n                textureData[dataIndex + 1] =\n                textureData[dataIndex + 2] =\n                textureData[dataIndex + 3] =\n                    255;\n            return;\n        }\n\n        // Extract the information from the tileset and apply it to the texture data.\n        let tileset = this.map.getTilesetFromId(tileId)!;\n\n        // If the tileset is invalid, then we just return.\n        if (!tileset) return;\n\n        let relativeId = tileId - tileset.firstGid - 1,\n            tilesWidth = tileset.width / this.map.tileSize;\n\n        // Write the texture information to the texture data array.\n        textureData[dataIndex] = relativeId % tilesWidth; // tile's x coordinate in the tileset\n        textureData[dataIndex + 1] = Math.floor(relativeId / tilesWidth); // tile's y coordinate in the tileset\n        textureData[dataIndex + 2] = tileset.index; // tileset index\n        textureData[dataIndex + 3] = flipped ? this.getFlippedFlag(tile as RotatedTile) : 0; // tile flags\n    }\n\n    /**\n     * Calcualtes the flip flags for rendering rotated tiles.\n     * @param flag The rotated tile that contains the flags.\n     * @returns The bit flag after applying all transformations.\n     */\n\n    private getFlippedFlag(tile: RotatedTile): number {\n        return (\n            (tile.h ? FlipFlags.FlippedHorizontal >> 28 : 0) |\n            (tile.v ? FlipFlags.FlippedVertical >> 28 : 0) |\n            (tile.d ? FlipFlags.FlippedAntiDiagonal >> 28 : 0)\n        );\n    }\n}\n","import type { ProcessedAnimation } from '@kaetram/common/types/map';\n\nexport default class Tile {\n    public animationIndex = 0;\n    private lastTime = 0;\n\n    public constructor(\n        public id: number, // The tileId\n        public index: number, // Index position of the tile.\n        public animationInfo: ProcessedAnimation[],\n        public isFlipped = false\n    ) {}\n\n    /**\n     * Animates a tile when the time elapsed since the last update is\n     * greater than the duration of the animation. We change the tileId\n     * when this update occurs and increment the animationIndex. Once\n     * we exhaust all the animations in the tile, we reset the animationIndex.\n     * @param time The current time in milliseconds (sent from the client updater).\n     */\n\n    public animate(time: number): void {\n        if (time - this.lastTime > this.animationInfo[this.animationIndex].duration) {\n            this.id = this.animationInfo[this.animationIndex].tileId;\n\n            this.lastTime = time;\n\n            if (this.animationIndex >= Object.keys(this.animationInfo).length - 1)\n                this.animationIndex = 0;\n            else this.animationIndex++;\n        }\n    }\n}\n","class t{constructor(t=0,e=0){this.x=t,this.y=e}copy(){return new t(this.x,this.y)}dot(t){return t.x*this.x+t.y*this.y}sub(e){return new t(this.x-e.x,this.y-e.y)}add(e){return new t(this.x+e.x,this.y+e.y)}mul(e){return new t(this.x*e,this.y*e)}inv(){return this.mul(-1)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}normalize(){var e=Math.sqrt(this.length2());return new t(this.x/e||0,this.y/e||0)}length2(){return this.x**2+this.y**2}toString(){return`${this.x},${this.y}`}inBound(t,e){return t.x<this.x&&this.x<e.x&&t.y<this.y&&this.y<e.y}}function e(t,e,a){var r=`illuminated-${t}`,s=document.querySelector(`#${r}`);s||((s=document.createElement(\"canvas\")).id=r,s.width=e,s.height=a,s.style.display=\"none\",document.body.append(s));var i=s.getContext(\"2d\");return i.clearRect(0,0,s.width,s.height),s.width=e,s.height=a,{canvas:s,ctx:i,w:e,h:a}}function a(t,e,a){var[r]=e;if(!r)throw new Error(\"There are no points to draw a path of.\");t.moveTo(r.x,r.y);for(var s=1,i=e.length;s<i;++s)r=e[s],t.lineTo(r.x,r.y);!a&&e.length>2&&([r]=e,t.lineTo(r.x,r.y))}var r=(()=>{var t=document.createElement(\"canvas\");t.width=1,t.height=1;var e=t.getContext(\"2d\");return(t,a=1)=>{e.clearRect(0,0,1,1),e.fillStyle=t,e.fillRect(0,0,1,1);var[r,s,i]=e.getImageData(0,0,1,1).data;return`rgba(${[r,s,i,a]})`}})(),s=(()=>{var t=document.createElement(\"canvas\");t.width=1,t.height=1;var e=t.getContext(\"2d\");function a(t){var e=t.toString(16);return 1===e.length&&(e=`0${e}`),e}return t=>{e.clearRect(0,0,1,1),e.fillStyle=t,e.fillRect(0,0,1,1);var[r,s,i,n]=e.getImageData(0,0,1,1).data;return{color:`#${a(r)}${a(s)}${a(i)}`,alpha:Math.round(1e3*n/255)/1e3}}})();function i(e,a,r){var s,i,n,h,o=1e-6,l=[];\"number\"==typeof a?n=(s=a)*s+(i=r||0)*i:(s=a.x,i=a.y,n=a.length2());var c=i*Math.sqrt(n-e*e),d=Math.acos((-e*s+c)/n),u=Math.acos((-e*s-c)/n),v=e*Math.cos(d),f=e*Math.sin(d),p=e*Math.cos(u),g=e*Math.sin(u);h=new t(s+p,i+g),l.push(h);var m=h.length2();h=new t(s+v,i-f),l.push(h);var y=h.length2();if(Math.abs(m-y)<o)return l;h=new t(s+p,i-g),l.push(h);var w=h.length2();if(Math.abs(y-w)<o)return[h,l[1]];if(Math.abs(m-w)<o)return[l[0],h];h=new t(s+v,i+f),l.push(h);var x=h.length2();return Math.abs(w-x)<o?[l[2],h]:Math.abs(y-x)<o?[l[1],h]:Math.abs(m-x)<o?[l[0],h]:l}var n,h=(t,e,a)=>{if(!e.has(t))throw TypeError(\"Cannot \"+a)},o=(t,e,a)=>(h(t,e,\"read from private field\"),a?a.call(t):e.get(t));class l{constructor(t={}){((t,e,a)=>{if(e.has(t))throw TypeError(\"Cannot add the same private member more than once\");e instanceof WeakSet?e.add(t):e.set(t,a)})(this,n,void 0);var{lights:e,color:a}=t;this.lights=null!=e?e:[],this.color=null!=a?a:\"rgba(0,0,0,0.9)\"}compute(t,a){var r,s,i,l;o(this,n)&&o(this,n).w===t&&o(this,n).h===a||(r=this,s=n,i=e(\"dm\",t,a),h(r,s,\"write to private field\"),l?l.call(r,i):s.set(r,i));var{ctx:c}=o(this,n);for(var d of(c.save(),c.clearRect(0,0,t,a),c.fillStyle=this.color,c.fillRect(0,0,t,a),c.globalCompositeOperation=\"destination-out\",this.lights))d.mask(c);c.restore()}render(t){t.drawImage(o(this,n).canvas,0,0)}getCanvas(){return o(this,n).canvas}}n=new WeakMap;var c=Math.PI*(3-Math.sqrt(5)),d=2*Math.PI;class u{constructor(t={}){this.uniqueId=0;var{diffuse:e}=t;this.diffuse=null!=e?e:.8}bounds(){return{topLeft:new t,bottomRight:new t}}cast(t,e,a){}path(t){}contains(t){return!1}}class v extends u{constructor(e={}){super(e);var{center:a,radius:r}=e;this.center=null!=a?a:new t,this.radius=null!=r?r:20}cast(t,e,r){var{center:s,radius:n}=this,h=s.sub(e),o=i(n,h),[l,c]=o,d=l.add(e),u=c.add(e),{bottomRight:v,topLeft:f}=r,p=(v.x-f.x+(v.y-f.y))/2;h=h.normalize().mul(p),l=l.normalize().mul(p),c=c.normalize().mul(p);var g=d.add(h),m=u.add(h),y=d.add(l),w=u.add(c),x=Math.atan2(h.x,-h.y);t.beginPath(),a(t,[u,w,m,g,y,d],!0),t.arc(s.x,s.y,n,x,x+Math.PI),t.fill()}path(t){var{center:e,radius:a}=this;t.arc(e.x,e.y,a,0,d)}bounds(){var{center:e,radius:a}=this;return{topLeft:new t(e.x-a,e.y-a),bottomRight:new t(e.x+a,e.y+a)}}contains(t){var{center:e,radius:a}=this;return t.dist2(e)<a*a}}var f,p,g=(t,e,a)=>{if(!e.has(t))throw TypeError(\"Cannot \"+a)},m=(t,e,a)=>(g(t,e,\"read from private field\"),a?a.call(t):e.get(t)),y=(t,e,a)=>{if(e.has(t))throw TypeError(\"Cannot add the same private member more than once\");e instanceof WeakSet?e.add(t):e.set(t,a)},w=(t,e,a,r)=>(g(t,e,\"write to private field\"),r?r.call(t,a):e.set(t,a),a);class x{constructor(e={}){y(this,f,void 0),y(this,p,void 0);var{position:a,distance:r,diffuse:s}=e;this.position=null!=a?a:new t,this.distance=null!=r?r:100,this.diffuse=null!=s?s:.8}render(t){}mask(t){var e=this.getVisibleMaskCache(),{x:a,y:r}=this.position;t.drawImage(e.canvas,Math.round(a-e.w/2),Math.round(r-e.h/2))}bounds(){var{position:e,distance:a}=this,{x:r,y:s}=e;return{topLeft:new t(r-a,s-a),bottomRight:new t(r+a,s+a)}}center(){var{distance:e}=this;return new t(e,e)}forEachSample(t){t(this.position)}getVisibleMaskCache(){var t=Math.floor(1.4*this.distance),a=`${t}`;if(m(this,f)!==a){w(this,f,a),w(this,p,e(`vm${this.id}`,2*t,2*t));var{ctx:r,w:s,h:i}=m(this,p),n=r.createRadialGradient(t,t,0,t,t,t);n.addColorStop(0,\"rgba(0,0,0,1)\"),n.addColorStop(1,\"rgba(0,0,0,0)\"),r.fillStyle=n,r.fillRect(0,0,s,i)}return m(this,p)}getHashCache(){return[this.distance,this.diffuse].toString()}}f=new WeakMap,p=new WeakMap;var b,M,C,R=(t,e,a)=>{if(!e.has(t))throw TypeError(\"Cannot \"+a)},S=(t,e,a)=>(R(t,e,\"read from private field\"),a?a.call(t):e.get(t)),E=(t,e,a)=>{if(e.has(t))throw TypeError(\"Cannot add the same private member more than once\");e instanceof WeakSet?e.add(t):e.set(t,a)},k=(t,e,a,r)=>(R(t,e,\"write to private field\"),r?r.call(t,a):e.set(t,a),a);class T extends x{constructor(t={}){super(t),E(this,b,0),E(this,M,void 0),E(this,C,void 0);var e,a,r,s,{id:i,color:n,radius:h,samples:o,angle:l,roughness:c}=t;this.id=null!=i?i:0,this.color=null!=n?n:\"rgba(250,220,150,0.8)\",this.radius=null!=h?h:0,this.samples=null!=o?o:1,this.angle=null!=l?l:0,this.roughness=null!=c?c:0,0===this.id&&(this.id=++(e=this,a=b,{set _(t){k(e,a,t,r)},get _(){return S(e,a,s)}})._)}getHashCache(){return[this.color,this.distance,this.diffuse,this.angle,this.roughness,this.samples,this.radius].toString()}center(){var{angle:e,roughness:a,distance:r}=this;return new t((1-Math.cos(e)*a)*r,(1+Math.sin(e)*a)*r)}bounds(){var{angle:e,roughness:a,distance:r,position:s}=this,{x:i,y:n}=new t(Math.cos(e),-Math.sin(e)).mul(a*r);return{topLeft:new t(s.x+i-r,s.y+n-r),bottomRight:new t(s.x+i+r,s.y+n+r)}}mask(e){var{angle:a,roughness:r,distance:s,position:i}=this,{canvas:n,w:h,h:o}=this.getVisibleMaskCache(),{x:l,y:c}=new t(Math.cos(a),-Math.sin(a)).mul(r*s);e.drawImage(n,Math.round(i.x+l-h/2),Math.round(i.y+c-o/2))}getGradientCache(t){var a=this.getHashCache();if(S(this,M)===a)return S(this,C);k(this,M,a);var{distance:s,id:i,radius:n,color:h}=this,o=Math.round(s),l=2*o,c=e(`gc${i}`,l,l),{ctx:d,w:u,h:v}=c,f=d.createRadialGradient(t.x,t.y,0,o,o,o);return f.addColorStop(Math.min(1,n/s),h),f.addColorStop(1,r(h,0)),d.fillStyle=f,d.fillRect(0,0,u,v),k(this,C,c),c}render(t){var{x:e,y:a}=this.position,r=this.center(),{canvas:s}=this.getGradientCache(r);t.drawImage(s,Math.round(e-r.x),Math.round(a-r.y))}forEachSample(e){for(var{samples:a,radius:r,position:s}=this,i=0,n=a;i<n;++i){var h=i*c,o=Math.sqrt(i/a)*r,l=new t(Math.cos(h)*o,Math.sin(h)*o);e(s.add(l))}}}b=new WeakMap,M=new WeakMap,C=new WeakMap;var $,I,L=(t,e,a)=>{if(!e.has(t))throw TypeError(\"Cannot \"+a)},W=(t,e,a)=>(L(t,e,\"read from private field\"),a?a.call(t):e.get(t)),z=(t,e,a)=>{if(e.has(t))throw TypeError(\"Cannot add the same private member more than once\");e instanceof WeakSet?e.add(t):e.set(t,a)},q=(t,e,a,r)=>(L(t,e,\"write to private field\"),r?r.call(t,a):e.set(t,a),a);class B{constructor(t={}){z(this,$,void 0),z(this,I,void 0);var{light:e,objects:a}=t;this.light=null!=e?e:new x,this.objects=null!=a?a:[]}createCache(t,a){q(this,$,e(\"lc\",t,a)),q(this,I,e(\"lcc\",t,a))}compute(t,e){W(this,$)&&W(this,$).w===t&&W(this,$).h===e||this.createCache(t,e);var{ctx:a}=W(this,$);a.save(),a.clearRect(0,0,a.canvas.width,a.canvas.height),this.light.render(a),a.globalCompositeOperation=\"destination-out\",this.cast(a),a.restore()}cast(t){var{ctx:e,w:a,h:r,canvas:s}=W(this,I),{light:i}=this,n=i.samples;e.clearRect(0,0,a,r),e.fillStyle=`rgba(0,0,0,${Math.round(100/n)/100})`;var h=i.bounds(),{topLeft:o,bottomRight:l}=h,{objects:c}=this;for(var d of(i.forEachSample((t=>{for(var a=0,r=c.length;a<r;++a)if(c[a].contains(t))return void e.fillRect(o.x,o.y,l.x-o.x,l.y-o.y);for(var s of c)s.cast(e,t,h)})),c)){var{diffuse:u}=d;u*=i.diffuse,e.fillStyle=`rgba(0,0,0,${1-u})`,e.beginPath(),d.path(e),e.fill()}t.drawImage(s,0,0)}render(t){t.drawImage(W(this,$).canvas,0,0)}getCanvas(){return W(this,$).canvas}}$=new WeakMap,I=new WeakMap;class P extends u{constructor(t={}){super(t);var{points:e}=t;this.points=null!=e?e:[]}bounds(){var[t]=this.points;if(!t)throw new Error(\"There are no points to calculate the boundaries of.\");for(var e=t.copy(),a=e.copy(),r=1,s=this.points.length;r<s;++r){var{x:i,y:n}=this.points[r];i>a.x&&(a.x=i),n>a.y&&(a.y=n),i<e.x&&(e.x=i),n<e.y&&(e.y=n)}return{topLeft:e,bottomRight:a}}contains(t){for(var{points:e}=this,{length:a}=e,r=a-1,{x:s,y:i}=t,n=!1,h=0;h<a;h++){var{x:o,y:l}=e[r],{x:c,y:d}=e[h];(d<i&&l>=i||l<i&&d>=i)&&(c<=s||o<=s)&&c+(i-d)/(l-d)*(o-c)<s&&(n=!n),r=h}return n}path(t){a(t,this.points)}cast(t,e,r){var{bottomRight:s,topLeft:i}=r,n=(s.x-i.x+(s.y-i.y))/2;this.forEachVisibleEdges(e,r,((r,s,i,h,o)=>{var l=i.inv().dot(o)/o.length2(),c=(l<0?r:l>1?s:r.add(o.mul(l))).sub(e);c=c.normalize().mul(n);var d=r.add(c),u=s.add(c),v=r.add(i.normalize().mul(n)),f=s.add(h.normalize().mul(n));t.beginPath(),a(t,[r,s,f,u,d,v]),t.fill()}))}forEachVisibleEdges(e,a,r){for(var s,{points:i}=this,n=i[i.length-1],h=0,o=i.length;h<o;++h,n=s)if(s=i[h],n.inBound(a.topLeft,a.bottomRight)){var l=n.sub(e),c=s.sub(e),d=s.sub(n);new t(d.y,-d.x).dot(l)<0&&r(n,s,l,c,d)}}}class V extends P{constructor(e={}){super(e);var{a:a,b:r}=e;this.a=null!=a?a:new t,this.b=null!=r?r:new t,this.syncFromAB()}syncFromAB(){this.points=[this.a,this.b]}}class F extends P{constructor(e={}){super(e);var{topLeft:a,bottomRight:r}=e;this.topLeft=null!=a?a:new t,this.bottomRight=null!=r?r:new t,this.syncFromTopleftBottomright()}syncFromTopleftBottomright(){var{topLeft:e,bottomRight:a}=this,r=new t(a.x,e.y),s=new t(e.x,a.y);this.points=[e,r,a,s]}fill(t){var[{x:e,y:a},,{x:r,y:s}]=this.points;t.rect(e,a,r-e,s-a)}}export{l as DarkMask,v as DiscObject,c as GOLDEN_ANGLE,T as Lamp,x as Light,B as Lighting,V as LineObject,u as OpaqueObject,P as PolygonObject,F as RectangleObject,t as Vec2,d as _2PI,e as createCanvasAnd2dContext,s as extractColorAndAlpha,r as getRGBA,i as getTan2,a as path};\n//# sourceMappingURL=illuminated.mjs.map\n","import Tile from './tile';\n\nimport Utils from '../utils/util';\nimport Character from '../entity/character/character';\nimport { isMobile, isTablet } from '../utils/detect';\n\nimport { Modules } from '@kaetram/common/network';\nimport { DarkMask, Vec2, Lamp, Lighting } from 'illuminated';\n\nimport type Game from '../game';\nimport type Map from '../map/map';\nimport type Camera from './camera';\nimport type Splat from './infos/splat';\nimport type Entity from '../entity/entity';\nimport type Sprite from '../entity/sprite';\nimport type Item from '../entity/objects/item';\nimport type Player from '../entity/character/player/player';\nimport type { SerializedLight } from '@kaetram/common/types/light';\nimport type { RegionTile, RotatedTile } from '@kaetram/common/types/map';\n\ninterface RendererLight {\n    origX: number;\n    origY: number;\n    diff: number;\n    relative: boolean;\n    computed: boolean;\n}\n\ntype RendererLamp = RendererLight & Lamp;\n\nexport type ContextType = '2d' | 'webgl';\nexport interface RendererLighting extends RendererLight, Lighting {\n    light: RendererLamp;\n}\n\nexport type ContextCallback = (context: CanvasRenderingContext2D) => void;\n\nexport default class Renderer {\n    public background = document.querySelector<HTMLCanvasElement>('#background')!;\n    protected foreground = document.querySelector<HTMLCanvasElement>('#foreground')!;\n    protected overlay = document.querySelector<HTMLCanvasElement>('#overlay')!;\n    protected textCanvas = document.querySelector<HTMLCanvasElement>('#text-canvas')!;\n    protected entities = document.querySelector<HTMLCanvasElement>('#entities')!;\n    protected cursor = document.querySelector<HTMLCanvasElement>('#cursor')!;\n\n    // Store all canvases for easy iteration\n    protected canvases: HTMLCanvasElement[] = [\n        this.background,\n        this.foreground,\n        this.overlay,\n        this.textCanvas,\n        this.entities,\n        this.cursor\n    ];\n\n    // Create the contexts based on the canvases.\n    protected entitiesContext: CanvasRenderingContext2D = this.entities.getContext('2d')!;\n    protected overlayContext: CanvasRenderingContext2D = this.overlay.getContext('2d')!;\n    protected textContext: CanvasRenderingContext2D = this.textCanvas.getContext('2d')!;\n    protected cursorContext: CanvasRenderingContext2D = this.cursor.getContext('2d')!;\n\n    protected allContexts = [\n        this.entitiesContext,\n        this.overlayContext,\n        this.textContext,\n        this.cursorContext\n    ];\n\n    // We split contexts into two arrays, one for tilemap rendering and one for the rest.\n    protected contexts = [this.entitiesContext, this.textContext, this.overlayContext];\n\n    // Zooming buttons\n    private zoomIn: HTMLElement = document.querySelector('#zoom-in')!;\n    private zoomOut: HTMLElement = document.querySelector('#zoom-out')!;\n\n    protected map: Map;\n    protected camera: Camera;\n\n    // Variables used for calculating multiple things\n    public tileSize = Utils.tileSize;\n    public actualTileSize = Utils.tileSize;\n\n    // Screen dimensions\n    public screenWidth = 0;\n    public screenHeight = 0;\n\n    // Canvas dimensions\n    public canvasWidth = 0;\n    public canvasHeight = 0;\n\n    // Animated tiles\n    public animateTiles = true;\n    protected animatedTiles: { [index: number]: Tile } = {};\n\n    // Lighting\n    protected lightings: RendererLighting[] = [];\n    protected darkMask: DarkMask = new DarkMask({\n        lights: [],\n        color: 'rgba(0, 0, 0, 0.84)'\n    });\n\n    // Toggles for rendering\n    public debugging = false;\n    public stopRendering = false;\n    public forceRendering = false;\n    public drawNames = true;\n    public drawLevels = true;\n\n    // Default values\n    public fontSize = 10;\n\n    // Detect functions\n    public mobile = isMobile();\n    public tablet = isTablet();\n\n    // FPS variables\n    protected time = Date.now();\n    protected fps = 0;\n    protected frameCount = 0;\n\n    // Static sprites\n    protected shadowSprite!: Sprite;\n    protected sparksSprite!: Sprite;\n    protected silverMedal!: Sprite;\n    protected goldMedal!: Sprite;\n    protected crownArtist!: Sprite;\n    protected crownTier1!: Sprite;\n    protected crownTier2!: Sprite;\n    protected crownTier3!: Sprite;\n    protected crownTier4!: Sprite;\n    protected crownTier5!: Sprite;\n    protected crownTier6!: Sprite;\n    protected crownTier7!: Sprite;\n\n    public constructor(protected game: Game) {\n        this.map = game.map;\n        this.camera = game.camera;\n\n        this.tileSize = game.map.tileSize;\n        this.actualTileSize = this.tileSize * this.camera.zoomFactor;\n\n        // Load the sizes of the canvases\n        this.loadSizes();\n\n        // Load the static sprites\n        this.loadStaticSprites();\n\n        // Event listeners for zooming in and out\n        this.zoomIn.addEventListener('click', () => this.game.zoom(0.2));\n        this.zoomOut.addEventListener('click', () => this.game.zoom(-0.2));\n    }\n\n    /**\n     * Superclass implementation for the WebGL renderer. We start loading\n     * textures after the map has completed loading the tilesets.\n     */\n\n    public load(): void {\n        //\n    }\n\n    /**\n     * The screen width/height are calculated according to the dimensions\n     * obtained from the camera. The canvas sizes are calculated according\n     * to the screen width and height with the zoom factor applied. After\n     * calculating the canvas size, we apply that onto each of the canvases.\n     */\n\n    private loadSizes(): void {\n        // Actual tile size is the tile size times the zoom factor.\n        this.actualTileSize = this.tileSize * this.camera.zoomFactor;\n\n        // Screen width in pixels is the amount of grid spaces times the tile size.\n        this.screenWidth = this.camera.gridWidth * this.tileSize;\n        this.screenHeight = this.camera.gridHeight * this.tileSize;\n\n        // Canvas width is the screen width multiplied by the zoom factor.\n        this.canvasWidth = this.screenWidth * this.camera.zoomFactor;\n        this.canvasHeight = this.screenHeight * this.camera.zoomFactor;\n\n        // Update the dark mask sizes\n        this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n\n        // Iterate through the canvases and apply the new size.\n        this.forEachCanvas((canvas: HTMLCanvasElement) => {\n            canvas.width = this.canvasWidth;\n            canvas.height = this.canvasHeight;\n        });\n    }\n\n    /**\n     * Loads statically used sprites that are only necessary\n     * in the renderer. The shadow gets displayed under each\n     * entity, and the sparks are displayed around items.\n     */\n\n    public loadStaticSprites(): void {\n        this.shadowSprite = this.game.sprites.get('shadow16')!;\n\n        if (!this.shadowSprite.loaded) this.shadowSprite.load();\n\n        this.sparksSprite = this.game.sprites.get('sparks')!;\n\n        if (!this.sparksSprite.loaded) this.sparksSprite.load();\n\n        this.silverMedal = this.game.sprites.get('silvermedal')!;\n\n        if (!this.silverMedal.loaded) this.silverMedal.load();\n\n        this.goldMedal = this.game.sprites.get('goldmedal')!;\n\n        if (!this.goldMedal.loaded) this.goldMedal.load();\n\n        this.crownArtist = this.game.sprites.get('crown-artist')!;\n\n        if (!this.crownArtist.loaded) this.crownArtist.load();\n\n        this.crownTier1 = this.game.sprites.get('crown-tier1')!;\n\n        if (!this.crownTier1.loaded) this.crownTier1.load();\n\n        this.crownTier2 = this.game.sprites.get('crown-tier2')!;\n\n        if (!this.crownTier2.loaded) this.crownTier2.load();\n\n        this.crownTier3 = this.game.sprites.get('crown-tier3')!;\n\n        if (!this.crownTier3.loaded) this.crownTier3.load();\n\n        this.crownTier4 = this.game.sprites.get('crown-tier4')!;\n\n        if (!this.crownTier4.loaded) this.crownTier4.load();\n\n        this.crownTier5 = this.game.sprites.get('crown-tier5')!;\n\n        if (!this.crownTier5.loaded) this.crownTier5.load();\n\n        this.crownTier6 = this.game.sprites.get('crown-tier6')!;\n\n        if (!this.crownTier6.loaded) this.crownTier6.load();\n\n        this.crownTier7 = this.game.sprites.get('crown-tier7')!;\n\n        if (!this.crownTier7.loaded) this.crownTier7.load();\n    }\n\n    /**\n     * Prepares the renderer for screen resizing. This is automatically\n     * called through a HTML5 callback for when the screen undergoes a change.\n     * We recalculate all the dimensions and positions of the canvas elements.\n     * We also request that all cells are redrawn by clearing the cache.\n     */\n\n    public resize(): void {\n        // Always check if we are on mobile on resizing.\n        this.mobile = isMobile();\n\n        // Update camera grid width and height.\n        this.camera.update();\n\n        // Update the camera minimum zoom limits.\n        this.camera.updateMinimumZoom(this.mobile);\n\n        // Recalculate canvas sizes.\n        this.loadSizes();\n\n        // Re-calculate visible animated tiles.\n        this.updateAnimatedTiles();\n\n        // Dimensions may mess with centration, so we force it.\n        this.camera.centreOn(this.game.player);\n\n        // Prevents blank screen flickers when resizing.\n        this.forceRendering = true;\n\n        // Cursor may get stuck on when resizing from desktop to mobile proportions.\n        this.clearScreen(this.cursorContext);\n    }\n\n    /**\n     * Rendering function is implemented by each subclass implementation of the\n     * renderer class. This is called by the game loop to render the game.\n     */\n\n    public render(): void {\n        this.clear();\n        this.save();\n\n        this.removeSmoothing();\n\n        this.drawDebugging();\n\n        this.drawOverlays();\n\n        this.drawHoveringCell();\n\n        this.drawSelectedCell();\n\n        this.drawEntities();\n\n        this.drawInfos();\n\n        this.drawCursor();\n\n        this.drawMinigameGUI();\n\n        this.restore();\n    }\n\n    // -------------- Drawing Functions --------------\n\n    /**\n     * Draws the debugging menu when the global variable\n     * `debugging` is set to true.\n     */\n\n    private drawDebugging(): void {\n        if (!this.debugging) return;\n\n        this.drawFPS();\n        this.drawPathing();\n\n        if (this.mobile) return;\n\n        // No need to debug this on mobile.\n        this.drawPosition();\n        this.drawCollisions();\n    }\n\n    /**\n     * Overlays are images drawn on top of the game. They are generally\n     * used in conjunction with the lighting system to give a shadow\n     * effect or dark room effect. When overlays are present, the light\n     * system is enabled.\n     */\n\n    private drawOverlays(): void {\n        // Overlay image cold not be found.\n        if (!this.game.overlays.hasOverlay()) return;\n\n        let image = this.game.overlays.get();\n\n        // Draw only if there is an overlay image.\n        if (image) this.overlayContext.drawImage(image, 0, 0, this.canvasWidth, this.canvasHeight);\n\n        this.overlayContext.globalCompositeOperation = 'lighter';\n\n        // Draw each lighting\n        this.forEachLighting((lighting) => {\n            if (this.inRadius(lighting)) this.drawLighting(lighting);\n        });\n\n        // Essentially makes the overlay be drawn on top of everything.\n        this.overlayContext.globalCompositeOperation = 'source-over';\n        this.darkMask.render(this.overlayContext);\n    }\n\n    /**\n     * Draws the currently highlighted tile cell that the mouse\n     * is hovering over. This is feedback to the player so they\n     * know what cell will be selected.\n     */\n\n    private drawHoveringCell(): void {\n        if (this.mobile) return;\n\n        let { input } = this.game,\n            location = input.getCoords();\n\n        if (this.isSelectedCell(location.gridX, location.gridY)) return;\n\n        let isColliding = this.map.isColliding(location.gridX, location.gridY);\n\n        this.drawCellHighlight(\n            location.gridX,\n            location.gridY,\n            isColliding ? 'rgba(230, 0, 0, 0.7)' : input.targetColour\n        );\n    }\n\n    /**\n     * Highlights a cell at the selected x and y grid\n     * coordinates. This is the green or red spinning\n     * target animation.\n     */\n\n    private drawSelectedCell(): void {\n        if (!this.game.input.selectedCellVisible || this.game.input.keyMovement) return;\n\n        // let posX = this.game.input.selectedX,\n        //     posY = this.game.input.selectedY,\n        let targetData = this.game.input.getTargetData(); // target data\n\n        if (targetData) {\n            this.entitiesContext.save();\n            this.setCameraView(this.entitiesContext);\n\n            this.entitiesContext.drawImage(\n                targetData.sprite.image,\n                targetData.x,\n                targetData.y,\n                targetData.width,\n                targetData.height,\n                targetData.dx,\n                targetData.dy,\n                targetData.dw,\n                targetData.dh\n            );\n\n            this.entitiesContext.restore();\n        }\n    }\n\n    /**\n     * Iterates through all the visible entities and\n     * draws them.\n     */\n\n    private drawEntities(): void {\n        // Stop drawing entities when dead.\n        if (this.game.player.dead) return;\n\n        this.setCameraView(this.entitiesContext);\n\n        this.forEachVisibleEntity((entity: Entity) => {\n            // Skip entities that aren't properly loaded or are invisible.\n            if (!entity.sprite?.loaded || !entity.animation || !entity.isVisible()) return;\n\n            this.drawEntity(entity);\n        });\n    }\n\n    /**\n     * Infos are drawn when a player is in combat and the hitsplat\n     * displays on top of it or the targeted entity. They are also\n     * used for healing, exp gain, and poison. These are floating\n     * pieces of text that slowly fade as time passes.\n     */\n\n    private drawInfos(): void {\n        if (this.game.info.isEmpty()) return;\n\n        this.game.info.forEachInfo((info: Splat) => {\n            this.textContext.save();\n            this.setCameraView(this.textContext);\n            this.textContext.globalAlpha = info.opacity;\n            this.drawText(\n                `${info.getText()}`,\n                Math.floor(info.x + 8),\n                Math.floor(info.y),\n                true,\n                info.fill,\n                info.stroke,\n                26\n            );\n            this.textContext.restore();\n        });\n    }\n\n    /**\n     * Draws the cursor at the coordinates extracted from the input\n     * controller. The mouse coordinates represent the absolute position\n     *  on the screen, not the position relative to the camera.\n     */\n\n    private drawCursor(): void {\n        if (this.tablet || this.mobile || this.game.input.isMouseRendered()) return;\n\n        let { cursor, mouse } = this.game.input;\n\n        if (!cursor || !mouse) return;\n\n        // Prepare the context for drawing.\n        this.clearScreen(this.cursorContext);\n        this.cursorContext.save();\n\n        if (cursor.loaded)\n            this.cursorContext.drawImage(\n                cursor.image,\n                0,\n                0,\n                this.tileSize,\n                this.tileSize,\n                mouse.x,\n                mouse.y,\n                this.actualTileSize,\n                this.actualTileSize\n            );\n        // Load the mouse if it doesn't exist.\n        else cursor.load();\n\n        this.cursorContext.restore();\n\n        this.game.input.saveMouse();\n    }\n\n    /**\n     * Calculates the FPS and draws it on the top-left of the screen.\n     */\n\n    private drawFPS(): void {\n        this.calculateFPS();\n        this.drawText(`FPS: ${this.fps}`, 10, 61, false, 'white');\n    }\n\n    /**\n     * Calculates the number of frames that have accrued\n     * in one second. We compare the current epoch against\n     * the last recorded epoch and measure the amount of\n     * frames that pass within a 1 second difference.\n     */\n\n    private calculateFPS(): void {\n        let currentTime = Date.now(),\n            timeDiff = currentTime - this.time;\n\n        // Reset frame count every 1 second and store that as fps.\n        if (timeDiff >= 1000) {\n            this.fps = this.frameCount;\n            this.frameCount = 0;\n            this.time = currentTime;\n        }\n\n        // Increment the frame count.\n        this.frameCount++;\n    }\n\n    /**\n     * Draws debugging inforamtion such as the current grid coordinate,\n     * as well as the index of that coordinate. If the player is hovering\n     * over an entity, it displays that entity's coordinates and indexes\n     * as well as their instance and attack range (if present).\n     */\n\n    private drawPosition(): void {\n        let { player, input } = this.game;\n\n        // Draw our current player's grid coordinates and tile index.\n        this.drawText(\n            `x: ${player.gridX} y: ${player.gridY} tileIndex: ${this.map.coordToIndex(\n                player.gridX,\n                player.gridY\n            )} movementSpeed: ${player.movementSpeed}`,\n            10,\n            81,\n            false,\n            'white'\n        );\n\n        this.drawText(`zoomFactor: ${this.camera.zoomFactor}`, 10, 141, false, 'white');\n\n        // Draw information about the entity we're hovering over.\n        if (input.hovering && input.entity) {\n            // Draw the entity's grid coordinates and tile index.\n            this.drawText(\n                `x: ${input.entity.gridX} y: ${input.entity.gridY} instance: ${input.entity.instance}`,\n                10,\n                101,\n                false,\n                'white'\n            );\n\n            // Draw the entity's attack range.\n            if (input.entity.attackRange)\n                this.drawText(`att range: ${input.entity.attackRange}`, 10, 121, false, 'white');\n        }\n    }\n\n    /**\n     * Draws a highlight around every tile cell that is colliding.\n     */\n\n    private drawCollisions(): void {\n        /**\n         * Iterate through each visible position within boundaries of the map\n         * and determine if the tile is within the map's collision grid.\n         */\n\n        this.camera.forEachVisiblePosition((x, y) => {\n            if (this.map.isOutOfBounds(x, y)) return;\n\n            // Only draw tiles in the collision grid that are marked as colliding.\n            if (this.map.grid[y][x] !== 0) this.drawCellHighlight(x, y, 'rgba(50, 50, 255, 0.5)');\n        });\n    }\n\n    /**\n     * Draws the currently calculated path that the player will\n     * be taking. Highlights the upcoming tile cells in the path.\n     */\n\n    private drawPathing(): void {\n        if (!this.game.player.hasPath()) return;\n\n        for (let path of this.game.player.path!)\n            this.drawCellHighlight(path[0], path[1], 'rgba(50, 255, 50, 0.5)');\n    }\n\n    /**\n     * Renders an entity according to the grid position, and zoom factor.\n     * @param entity The entity we are drawing.\n     */\n\n    private drawEntity(entity: Entity): void {\n        let frame = entity.animation?.frame,\n            dx = entity.x * this.camera.zoomFactor,\n            dy = entity.y * this.camera.zoomFactor,\n            flipX = dx + this.actualTileSize,\n            flipY = dy + entity.sprite.height;\n\n        this.entitiesContext.save();\n\n        if (entity.angled && !entity.isProjectile()) entity.angle *= Math.PI / 180;\n\n        // Update the entity fading onto the context.\n        if (entity.fading) this.entitiesContext.globalAlpha = entity.fadingAlpha;\n\n        // Handle flipping since we use the same sprite for right/left.\n        if (entity.spriteFlipX) {\n            this.entitiesContext.translate(flipX, dy);\n            this.entitiesContext.scale(-1, 1);\n        } else if (entity.spriteFlipY) {\n            this.entitiesContext.translate(dx, flipY);\n            this.entitiesContext.scale(1, -1);\n        } else this.entitiesContext.translate(dx, dy);\n\n        // Scale the entity to the current zoom factor.\n        this.entitiesContext.scale(this.camera.zoomFactor, this.camera.zoomFactor);\n\n        // Scale the entity again if it has a custom scaling associated with it.\n        if (entity.customScale) this.entitiesContext.scale(entity.customScale, entity.customScale);\n\n        // Rotate using the entity's angle.\n        if (entity.angled) this.entitiesContext.rotate(entity.getAngle());\n\n        // Draw the entity shadowf\n        if (entity.hasShadow()) {\n            this.entitiesContext.globalCompositeOperation = 'source-over';\n\n            this.entitiesContext.drawImage(\n                this.shadowSprite.image,\n                0,\n                0,\n                this.shadowSprite.width,\n                this.shadowSprite.height,\n                0,\n                entity.shadowOffsetY,\n                this.shadowSprite.width,\n                this.shadowSprite.height\n            );\n        }\n\n        this.entitiesContext.drawImage(\n            entity.sprite.image,\n            frame!.x,\n            frame!.y,\n            entity.sprite.width,\n            entity.sprite.height,\n            entity.sprite.offsetX,\n            entity.sprite.offsetY,\n            entity.sprite.width,\n            entity.sprite.height\n        );\n\n        this.drawEntityFore(entity);\n\n        this.entitiesContext.restore();\n\n        this.drawHealth(entity as Character);\n\n        if (!this.game.overlays.hasOverlay()) this.drawName(entity as Player & Item);\n    }\n\n    /**\n     * This function is responsible for drawing special effects\n     * on top of the entity (after rendering). It will primarily\n     * be used for the paper-doll effect of drawing weapon and\n     * armour sprites on top of the player characters.\n     */\n\n    private drawEntityFore(entity: Entity): void {\n        if (entity.isItem()) return this.drawSparks();\n\n        if (!(entity instanceof Character)) return;\n\n        if (entity.isPlayer()) this.drawWeapon(entity as Player);\n        if (entity.hasActiveEffect()) this.drawEffects(entity);\n    }\n\n    /**\n     * Draws the weapon sprite on top of the player entity. We skip\n     * this function if there is no weapon, the player is dead, or\n     * they are teleporting.\n     * @param player The player we are drawing the weapon for.\n     */\n\n    private drawWeapon(player: Player): void {\n        if (!player.hasWeapon() || player.dead || player.teleporting) return;\n\n        let weapon = this.game.sprites.get(player.getWeaponSpriteName());\n\n        if (!weapon) return;\n\n        if (!weapon.loaded) weapon.load();\n\n        let animation = player.animation!,\n            weaponAnimations = weapon.animations[animation.name];\n\n        if (!weaponAnimations) return;\n\n        let { frame, row } = animation,\n            index =\n                frame.index < weaponAnimations.length\n                    ? frame.index\n                    : frame.index % weaponAnimations.length,\n            weaponX = weapon.width * index,\n            weaponY = weapon.height * row,\n            weaponWidth = weapon.width,\n            weaponHeight = weapon.height;\n\n        this.entitiesContext.drawImage(\n            weapon.image,\n            weaponX,\n            weaponY,\n            weaponWidth,\n            weaponHeight,\n            weapon.offsetX,\n            weapon.offsetY,\n            weaponWidth,\n            weaponHeight\n        );\n    }\n\n    /**\n     * Goes through all the status effects and draws them on top of the character.\n     * @param character The character we are drawing the effect of.\n     */\n\n    private drawEffects(character: Character): void {\n        for (let key of character.statusEffects) {\n            // Do not draw the freezing effect if the character has a snow potion effect.\n            if (key === Modules.Effects.Freezing && character.hasEffect(Modules.Effects.SnowPotion))\n                continue;\n\n            // Do not draw the burning effect if the character has a fire potion effect.\n            if (key === Modules.Effects.Burning && character.hasEffect(Modules.Effects.FirePotion))\n                continue;\n\n            let effect = character.getEffect(key);\n\n            if (!effect) continue;\n\n            let sprite = this.game.sprites.get(effect.key);\n\n            if (!sprite.loaded) sprite.load();\n\n            let { animation } = effect,\n                { index } = animation.frame,\n                x = sprite.width * index,\n                y = sprite.height * animation.row;\n\n            this.entitiesContext.drawImage(\n                sprite.image,\n                x,\n                y,\n                sprite.width,\n                sprite.height,\n                sprite.offsetX,\n                sprite.offsetY,\n                sprite.width,\n                sprite.height\n            );\n\n            animation.update(this.game.time);\n        }\n    }\n\n    /**\n     * Draws the sprites sparks on top of items\n     * to give them the sparkle effect.\n     */\n\n    private drawSparks(): void {\n        let { sparksAnimation } = this.game.entities.sprites,\n            sparksFrame = sparksAnimation.frame;\n\n        this.entitiesContext.drawImage(\n            this.sparksSprite.image,\n            this.sparksSprite.width * sparksFrame.index,\n            this.sparksSprite.height * sparksAnimation.row,\n            this.sparksSprite.width,\n            this.sparksSprite.height,\n            0,\n            0,\n            this.sparksSprite.width,\n            this.sparksSprite.height\n        );\n    }\n\n    /**\n     * Draws a special medal above the player's name.\n     * @param key The key of the medal we are drawing.\n     * @param x The x coordinate on the screen we are drawing at.\n     * @param y The y coordinate on the screen we are drawing at.\n     */\n\n    private drawMedal(key: string, x: number, y: number): void {\n        let medal = this.getMedal(key);\n\n        if (!medal) return;\n\n        this.textContext.drawImage(\n            medal.image,\n            0,\n            0,\n            medal.width,\n            medal.height,\n            (x - 5) * this.camera.zoomFactor,\n            (y - 17) * this.camera.zoomFactor,\n            medal.width * 2,\n            medal.height * 2\n        );\n    }\n\n    /**\n     * Draws the health bar above the entity character provided.\n     * @param entity The character we are drawing the health bar for.\n     */\n\n    private drawHealth(entity: Character): void {\n        if (!entity.hitPoints || entity.hitPoints < 0 || !entity.healthBarVisible) return;\n\n        let barLength = this.tileSize,\n            healthX = entity.x * this.camera.zoomFactor - barLength / 2 + 8,\n            healthY = (entity.y - entity.sprite.height / 4) * this.camera.zoomFactor,\n            healthWidth = Math.round(\n                (entity.hitPoints / entity.maxHitPoints) * barLength * this.camera.zoomFactor\n            ),\n            healthHeight = 2 * this.camera.zoomFactor;\n\n        this.textContext.save();\n        this.setCameraView(this.textContext);\n        this.textContext.strokeStyle = 'rbga(0, 0, 0, 1)';\n        this.textContext.lineWidth = 1;\n        this.textContext.strokeRect(\n            healthX,\n            healthY,\n            barLength * this.camera.zoomFactor,\n            healthHeight\n        );\n        this.textContext.fillStyle = 'rgba(253, 0, 0, 1)';\n        this.textContext.fillRect(healthX, healthY, healthWidth, healthHeight);\n        this.textContext.restore();\n    }\n\n    /**\n     * Draws an itme name for a player or item entity.\n     * @param entity The entity we're drawing the name for.\n     */\n\n    private drawName(entity: Player & Item): void {\n        if (\n            entity.hidden ||\n            entity.healthBarVisible ||\n            !entity.level ||\n            !entity.drawNames() ||\n            (!this.drawNames && !this.drawLevels)\n        )\n            return;\n\n        let colour = entity.wanted ? 'red' : 'white';\n\n        // If entity has any rank aside from default then we use their colour.\n        if (entity.rank !== Modules.Ranks.None) colour = Modules.RankColours[entity.rank];\n\n        // Draw the yellow name above the entity if it's the same entity as our current player.\n        if (entity.instance === this.game.player.instance) colour = 'rgba(252,218,92, 1)';\n\n        if (entity.nameColour) colour = entity.nameColour;\n\n        this.textContext.save();\n        this.setCameraView(this.textContext);\n        this.textContext.font = '11px AdvoCut';\n\n        if (entity.hasCounter) {\n            // TODO - Move this countdown elsewhere.\n            if (this.game.time - entity.countdownTime > 1000) {\n                entity.countdownTime = this.game.time;\n                entity.counter--;\n            }\n\n            if (entity.counter <= 0) entity.hasCounter = false;\n\n            this.drawText(entity.counter.toString(), entity.x + 8, entity.y - 10, true, colour);\n        } else {\n            let x = entity.x + 8,\n                y = entity.y - Math.floor(entity.sprite.height / 5);\n\n            if (this.drawNames && entity instanceof Character) {\n                let nameY = this.drawLevels && !entity.isNPC() ? y - 7 : y - 4;\n\n                this.drawText(entity.name, x, nameY, true, colour, 'rbga(0, 0, 0, 1)');\n\n                // Draw the medal if the entity has one.\n                if (entity.hasMedal()) this.drawMedal(entity.getMedalKey(), x, nameY);\n            }\n\n            if (this.drawLevels && (entity.isMob() || entity.isPlayer()))\n                this.drawText(`Level ${entity.level}`, x, y, true, colour, 'rbga(0, 0, 0, 1)');\n\n            if (entity.isItem() && entity.count > 1)\n                this.drawText(entity.count.toString(), x, y, true, colour);\n        }\n\n        this.textContext.restore();\n    }\n\n    private drawMinigameGUI(): void {\n        if (!this.game.minigame.exists()) return;\n\n        switch (this.game.minigame.status) {\n            case 'lobby': {\n                this.drawText(\n                    this.game.minigame.started\n                        ? `There is a game in progress: ${this.game.minigame.countdown} seconds`\n                        : `Game starts in ${this.game.minigame.countdown} seconds`,\n                    this.textCanvas.width / 6,\n                    30,\n                    true,\n                    'white'\n                );\n                return;\n            }\n\n            case 'ingame': {\n                this.drawText(\n                    `Red: ${this.game.minigame.redTeamScore}`,\n                    this.textCanvas.width / 6 - 20,\n                    30,\n                    true,\n                    'red'\n                );\n\n                this.drawText(\n                    `Blue: ${this.game.minigame.blueTeamScore}`,\n                    this.textCanvas.width / 6 + 20,\n                    30,\n                    true,\n                    'blue'\n                );\n\n                this.drawText(\n                    `Time left: ${this.game.minigame.countdown} seconds`,\n                    this.textCanvas.width / 6,\n                    50,\n                    true,\n                    'white'\n                );\n\n                return;\n            }\n        }\n    }\n\n    protected drawLighting(lighting: RendererLighting): void {\n        if (lighting.relative) {\n            let lightX =\n                    (lighting.light.origX - this.camera.x / this.tileSize) * this.actualTileSize,\n                lightY =\n                    (lighting.light.origY - this.camera.y / this.tileSize) * this.actualTileSize;\n\n            lighting.light.position = new Vec2(lightX, lightY);\n            lighting.compute(this.canvasWidth, this.canvasHeight);\n            this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n        } else if (!lighting.computed) {\n            lighting.compute(this.canvasWidth, this.canvasHeight);\n            lighting.computed = true;\n        }\n\n        lighting.render(this.overlayContext);\n    }\n\n    // -------------- Drawing Methods --------------\n\n    /**\n     * Draws a highlight about a cell.\n     * @param x The x grid coordinate of the cell.\n     * @param y The y grid coordinate of the cell.\n     * @param colour The colour in rgba format.\n     */\n\n    private drawCellHighlight(x: number, y: number, colour: string): void {\n        this.drawCellRect(x * this.actualTileSize, y * this.actualTileSize, colour);\n    }\n\n    /**\n     * Drawns a cell rectangle at a specified position (relative to the zooming.).\n     * @param x The x coordinate of the cell.\n     * @param y The y coordinate of the cell.\n     * @param colour The colour in rgba format.\n     */\n\n    private drawCellRect(x: number, y: number, colour: string): void {\n        this.entitiesContext.save();\n        this.setCameraView(this.entitiesContext);\n\n        this.entitiesContext.lineWidth = 2 * this.camera.zoomFactor;\n\n        this.entitiesContext.translate(x + 4, y + 2);\n\n        this.entitiesContext.strokeStyle = colour;\n        this.entitiesContext.strokeRect(0, 0, this.actualTileSize - 8, this.actualTileSize - 8);\n\n        this.entitiesContext.restore();\n    }\n\n    /**\n     * Draws text at a specified position (relative to the zooming.).\n     * @param text The string text to draw.\n     * @param x The x coordinate of the text.\n     * @param y The y coordinate of the text.\n     * @param centered Whether or not we want the text to be centered.\n     * @param colour The colour of the text in rgba format.\n     * @param strokeColour The colour of the stroke in rgba format.\n     * @param fontSize (Optional) The font size of the text.\n     */\n\n    private drawText(\n        text: string,\n        x: number,\n        y: number,\n        centered: boolean,\n        colour: string,\n        strokeColour?: string,\n        fontSize: number = this.fontSize\n    ): void {\n        let strokeSize = 3,\n            context = this.textContext;\n\n        context.save();\n\n        if (centered) context.textAlign = 'center';\n\n        // Decrease font size relative to zoom out.\n        fontSize += this.camera.zoomFactor * 2;\n\n        context.strokeStyle = strokeColour || 'rgba(55, 55, 55, 1)';\n        context.lineWidth = strokeSize;\n        context.font = `${fontSize}px AdvoCut`;\n        context.strokeText(text, x * this.camera.zoomFactor, y * this.camera.zoomFactor);\n        context.fillStyle = colour || 'white';\n        context.fillText(text, x * this.camera.zoomFactor, y * this.camera.zoomFactor);\n\n        context.restore();\n    }\n\n    // -------------- Light Management --------------\n\n    /**\n     * Calculates the dark mask effect for the overlay.\n     * @param color What colour we want the overlay to have, generally this is\n     * a black rgb(0,0,0) with an alpha to give the effect of darkness.\n     */\n\n    public updateDarkMask(color = 'rgba(0, 0, 0, 0.5)'): void {\n        this.darkMask.color = color;\n        this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n    }\n\n    /**\n     * Adds a new light to the rendering screen.\n     * @param info Contains information about the light we are adding.\n     */\n\n    public addLight(info: SerializedLight): void {\n        let light = new Lamp(\n                this.getLightData(info.x, info.y, info.distance, info.diffuse, info.colour)\n            ) as RendererLamp,\n            lighting = new Lighting({\n                light\n                // diffuse: light.diffuse\n            }) as RendererLighting;\n\n        light.origX = light.position.x;\n        light.origY = light.position.y;\n\n        light.diff = Math.round(light.distance / this.tileSize);\n\n        if (this.hasLighting(lighting)) return;\n\n        lighting.relative = true;\n\n        this.lightings.push(lighting);\n        this.darkMask.lights.push(light);\n\n        this.drawLighting(lighting);\n        this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n    }\n\n    public removeAllLights(): void {\n        this.lightings = [];\n        this.darkMask.lights = [];\n\n        this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n    }\n\n    public removeNonRelativeLights(): void {\n        for (let i in this.lightings)\n            if (!this.lightings[i].light.relative) {\n                let index = parseInt(i);\n\n                this.lightings.splice(index, 1);\n                this.darkMask.lights.splice(index, 1);\n            }\n\n        this.darkMask.compute(this.canvasWidth, this.canvasHeight);\n    }\n\n    private hasLighting(lighting: RendererLighting): boolean {\n        for (let { light } of this.lightings)\n            if (\n                lighting.light.origX === light.origX &&\n                lighting.light.origY === light.origY &&\n                lighting.light.distance === light.distance\n            )\n                return true;\n\n        return false;\n    }\n\n    // -------------- Context Management --------------\n\n    /**\n     * Image smoothing is automatically applied to a 2D\n     * rendering canvas. We must manually disable it for\n     * each time we draw onto the context.\n     */\n\n    private removeSmoothing(): void {\n        this.forAllContexts((context) => {\n            context.imageSmoothingQuality = 'low';\n            context.imageSmoothingEnabled = false;\n        });\n    }\n\n    /**\n     * Iterates through each context and clears the entire frame.\n     */\n\n    private clear(): void {\n        this.forEachContext(this.clearScreen);\n    }\n\n    /**\n     * Clears the screen given a specified context.\n     * @param context The context that we want to clear the contents of.\n     */\n\n    protected clearScreen(context: CanvasRenderingContext2D): void {\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n    }\n\n    /**\n     * Iterates through each context and saves the current state.\n     */\n\n    private save(): void {\n        this.forEachContext((context: CanvasRenderingContext2D) => context.save());\n    }\n\n    /**\n     * Restores all contexts to their previous values (to when we last saved).\n     */\n\n    private restore(): void {\n        this.forEachContext((context: CanvasRenderingContext2D) => context.restore());\n    }\n\n    // -------------- Setters --------------\n\n    /**\n     * Changes the brightness at a canvas style level for each canvas available.\n     * @param level The level of the brightness.\n     */\n\n    public setBrightness(level: number): void {\n        if (level < 0 || level > 100) return;\n\n        this.forEachCanvas((canvas: HTMLCanvasElement) => {\n            canvas.style.background = `rgba(0,0,0,${0.25 - level / 200})`;\n        });\n    }\n\n    /**\n     * Synchronizes the camera view onto the a specified context. This translates\n     * the context relative to where the camera is currently positioned.\n     * @param context The context that we are setting the camera view for.\n     */\n\n    protected setCameraView(context: CanvasRenderingContext2D): void {\n        // Stop if we are not rendering or if there is no camera.\n        if (!this.camera || this.stopRendering) return;\n\n        context.translate(\n            -this.camera.x * this.camera.zoomFactor,\n            -this.camera.y * this.camera.zoomFactor\n        );\n    }\n\n    // -------------- Getters and Checkers --------------\n\n    protected getX(index: number, width: number): number {\n        if (index === 0) return 0;\n\n        return index % width === 0 ? width - 1 : (index % width) - 1;\n    }\n\n    /**\n     * Checks whether a light source is in the radius of the camera.\n     * @param lighting The light source we are checking for.\n     * @returns Whether or not the light source is in the camera radius.\n     */\n\n    private inRadius(lighting: RendererLighting): boolean {\n        let position = {\n            x: lighting.light.origX,\n            y: lighting.light.origY,\n            diff: lighting.light.diff\n        };\n\n        return (\n            position.x > this.camera.gridX - position.diff &&\n            position.x < this.camera.gridX + this.camera.gridWidth + position.diff &&\n            position.y > this.camera.gridY - position.diff &&\n            position.y < this.camera.gridY + this.camera.gridHeight + position.diff\n        );\n    }\n\n    /**\n     * A flipped tile is any tile that contains a flip\n     * flag or transpose flag.\n     * @param tileInfo Tile data received from the server.\n     * @returns Whether or not the tile contains and flip flags.\n     */\n\n    protected isFlipped(tileInfo: RotatedTile): boolean {\n        if (!tileInfo) return false;\n\n        return tileInfo.v || tileInfo.h || tileInfo.d;\n    }\n\n    /**\n     * Low power mode is activated when both the camera centration and\n     * animated tiles are turned off. This is for devices that cannot\n     * sustain the constant re-drawing of the frame every second.\n     */\n\n    protected isLowPowerMode(): boolean {\n        return !this.camera.isCentered() && !this.animateTiles;\n    }\n\n    /**\n     * Checks if the currently request coordinates are that of a cell\n     * that was already selected (has the animation onto it). We want\n     * to prevent drawing a target cell onto a cell that's being selected.\n     * @param x The x grid coordinate we are checking.\n     * @param y The y grid coordinate we are checking.\n     * @returns Whether the x and y coordinates are the same as the input\n     * selected x and y coordinates.\n     */\n\n    private isSelectedCell(x: number, y: number): boolean {\n        return this.game.input.selectedX === x && this.game.input.selectedY === y;\n    }\n\n    /**\n     * Given a key we return the sprite associated with the medal.\n     * @param key The key of the medal.\n     * @returns A sprite element or undefined if the key is invalid.\n     */\n\n    protected getMedal(key: string): Sprite | undefined {\n        switch (key) {\n            case 'goldmedal': {\n                return this.goldMedal;\n            }\n\n            case 'silvermedal': {\n                return this.silverMedal;\n            }\n\n            case 'crown-artist': {\n                return this.crownArtist;\n            }\n\n            case 'crown-tier1': {\n                return this.crownTier1;\n            }\n\n            case 'crown-tier2': {\n                return this.crownTier2;\n            }\n\n            case 'crown-tier3': {\n                return this.crownTier3;\n            }\n\n            case 'crown-tier4': {\n                return this.crownTier4;\n            }\n\n            case 'crown-tier5': {\n                return this.crownTier5;\n            }\n\n            case 'crown-tier6': {\n                return this.crownTier6;\n            }\n\n            case 'crown-tier7': {\n                return this.crownTier7;\n            }\n        }\n    }\n\n    /**\n     * Creates a partial lamp object given the specified data.\n     * @param x The x grid position of the light.\n     * @param y The y grid position of the light.\n     * @param distance How far the light can reach.\n     * @param diffuse How much the light can diffuse.\n     * @param color The color of the light.\n     * @returns A partial lamp object.\n     */\n\n    private getLightData(\n        x: number,\n        y: number,\n        distance: number,\n        diffuse: number,\n        color: string\n    ): Partial<Lamp> {\n        return {\n            position: new Vec2(x, y),\n            distance,\n            diffuse,\n            color,\n            radius: 0,\n            samples: 2,\n            roughness: 0,\n            angle: 0\n        };\n    }\n\n    // -------------- Update functions --------------\n\n    /**\n     * Used for synchronization of all animated tiles when the player\n     * stops moving or every couple of steps.\n     */\n\n    public resetAnimatedTiles(): void {\n        // Reset the animation frame index for each animated tile.\n        for (let tile in this.animatedTiles) this.animatedTiles[tile].animationIndex = 0;\n    }\n\n    /**\n     * Iterates through all the currently visible tiles and appends tiles\n     * that are animated to our list of animated tiles. This function ensures\n     * that animated tiles are initialzied only once and stored for the\n     * duration of the client's session.\n     */\n\n    public updateAnimatedTiles(): void {\n        if (!this.animateTiles) return;\n\n        this.forEachVisibleTile((tile: RegionTile, index: number) => {\n            let isFlipped = this.isFlipped(tile as RotatedTile);\n\n            if (isFlipped) tile = (tile as RotatedTile).tileId;\n\n            /**\n             * We don't want to reinitialize animated tiles that already exist\n             * and are within the visible camera proportions. This way we can parse\n             * it every time the tile moves slightly.\n             */\n\n            if (!this.map.isAnimatedTile(tile as number)) return;\n\n            /**\n             * Push the pre-existing tiles.\n             */\n\n            if (!(index in this.animatedTiles))\n                this.animatedTiles[index] = new Tile(\n                    tile as number,\n                    index,\n                    this.map.getTileAnimation(tile as number),\n                    isFlipped\n                );\n        }, 2);\n    }\n\n    /**\n     * Superclass implementation for updating the tile at a specified\n     * index. This is implemented by the WebGL renderer to update the\n     * tile in the buffer.\n     * @param index The index at which to update the tile.\n     * @param data The data with which to update the tile.\n     */\n\n    public setTile(index: number, data: RegionTile): void {\n        // unimplemented\n    }\n\n    /**\n     * Superclass implementation used by the WebGL renderer when we\n     * want to update the texture information. This is used for\n     * updating the tile layer texture for each layer.\n     */\n\n    public bindTileLayers(): void {\n        //\n    }\n\n    /**\n     * Iterates through each of the animated tiles.\n     * @param callback Returns the tile object for that animated tile.\n     */\n\n    protected forEachAnimatedTile(callback: (tile: Tile) => void): void {\n        for (let tile in this.animatedTiles) callback(this.animatedTiles[tile]);\n    }\n\n    /**\n     * Iterates through all the indexes in the current camera view. The offset\n     * is used to look `offset` amount of tiles outside the camera view.\n     * @param callback The current index that is being parsed in the view.\n     * @param offset How much to look outside the boundaries of the map.\n     */\n\n    protected forEachVisibleIndex(callback: (index: number) => void, offset?: number): void {\n        this.camera.forEachVisiblePosition((x, y) => {\n            if (!this.map.isOutOfBounds(x, y)) callback(this.map.coordToIndex(x, y));\n        }, offset);\n    }\n\n    /**\n     * Iterates through all the indexes and extracts the tile data at that\n     * specified index by iterating through each tile array (if present) or\n     * returning the tile data from the map.\n     * @param callback Returns a region tile object containing rendering information\n     * such as tileId, x, y, and flip flags. The index is the positioning in the map.\n     * @param offset How much to look outside the visible camera proportions.\n     */\n\n    protected forEachVisibleTile(\n        callback: (data: RegionTile, index: number) => void,\n        offset?: number\n    ): void {\n        if (!this.map?.mapLoaded) return;\n\n        this.forEachVisibleIndex((index) => {\n            let indexData = this.map.data[index];\n\n            if (Array.isArray(indexData)) for (let data of indexData) callback(data, index);\n            else if (this.map.data[index]) callback(this.map.data[index], index);\n        }, offset);\n    }\n\n    /**\n     * Iterates through each visible entity in the map boundaries and that\n     * is present on the rendering grid.\n     * @param callback The entity object currently being iterated.\n     */\n\n    protected forEachVisibleEntity(callback: (entity: Entity) => void): void {\n        let { grids } = this.game.entities;\n\n        this.camera.forEachVisiblePosition((x, y) => {\n            if (!this.map.isOutOfBounds(x, y) && grids.renderingGrid[y][x])\n                for (let entity of Object.values(grids.renderingGrid[y][x])) callback(entity);\n        });\n    }\n\n    /**\n     * Iterates through each light currently loaded.\n     * @param callback The light currently being iterated.\n     */\n\n    private forEachLighting(callback: (lighting: RendererLighting) => void): void {\n        for (let lighting in this.lightings) callback(this.lightings[lighting]);\n    }\n\n    /**\n     * Iterates through all of the canvases available. Generally used for\n     * updating dimensions.\n     * @param callback Canvas currently being iterated.\n     */\n\n    protected forEachCanvas(callback: (canvas: HTMLCanvasElement) => void): void {\n        for (let canvas in this.canvases) callback(this.canvases[canvas]);\n    }\n\n    /**\n     * Iterates through all of the drawing contexts available.\n     * We cast `CanvasRenderingContext2D` because this is the subclass implementation\n     * that will use those variants of the contexts.\n     * @param callback The context being iterated.\n     */\n\n    private forAllContexts(callback: ContextCallback): void {\n        for (let context in this.allContexts)\n            callback(this.allContexts[context] as CanvasRenderingContext2D);\n    }\n\n    /**\n     * Iterates through all of the contexts used for drawing mouse, entities, and text.\n     * @param callback The context being iterated.\n     */\n\n    private forEachContext(callback: ContextCallback): void {\n        for (let context in this.contexts)\n            callback(this.contexts[context] as CanvasRenderingContext2D);\n    }\n}\n","import ProgramData from './shader';\nimport Tileset from './tileset';\nimport Layer from './layer';\n\nimport Renderer from '../renderer';\nimport LayerVertex from '../shaders/layer.vert';\nimport LayerFragment from '../shaders/layer.frag';\n\nimport type Game from '../../game';\nimport type { RegionTile, RotatedTile } from '@kaetram/common/types/map';\n\n/**\n * Huge thanks to the developer of `gl-tiled` for the point of reference in\n * creating a WebGL 2D tilemap renderer.\n * GitHub Repository: https://github.com/englercj/gl-tiled\n */\n\ninterface BlendMode {\n    func: number[];\n    equation: number;\n}\n\nexport default class WebGL extends Renderer {\n    // Override for context types and use webgl\n    private backContext: WebGLRenderingContext = this.background.getContext('webgl')!;\n    private foreContext: WebGLRenderingContext = this.foreground.getContext('webgl')!;\n\n    // Drawing contexts, where we load tileset textures and draw the map.\n    private drawingContexts = [this.backContext, this.foreContext];\n\n    // Program data that contains the shader information for tiling.\n    private backShader!: ProgramData;\n    private foreShader!: ProgramData;\n\n    // Storage for tileset textures and layer information.\n    private tilesets: { [canvas: string]: Tileset } = {};\n    private layers: Layer[] = [];\n\n    // Vertices, indices, buffers...\n    private tilesetIndices: Int32Array = new Int32Array();\n    private tilesetTileSizeBuffer: Float32Array = new Float32Array();\n    private tilesetOffsetBuffer: Float32Array = new Float32Array();\n    private inverseTilesetTextureSizeBuffer: Float32Array = new Float32Array();\n\n    private inverseTileCount: Float32Array = new Float32Array(2);\n\n    private backQuadBuffer: WebGLBuffer = this.backContext.createBuffer()!;\n    private foreQuadBuffer: WebGLBuffer = this.foreContext.createBuffer()!;\n\n    private quadVertices = new Float32Array([\n        //x  y  u  v\n        // eslint-disable-next-line prettier/prettier\n        -1, -1, 0, 1,\n         1, -1, 1, 1,\n         1,  1, 1, 0,\n        -1, -1, 0, 1,\n         1,  1, 1, 0,\n        -1,  1, 0, 0,\n    ]);\n\n    private attributeIndices = {\n        aPosition: 0,\n        aTexture: 1\n    };\n\n    // Blending\n    private blendMode: BlendMode = {\n        func: [WebGLRenderingContext.SRC_ALPHA, WebGLRenderingContext.ONE_MINUS_SRC_ALPHA],\n        equation: WebGLRenderingContext.FUNC_ADD\n    };\n\n    public constructor(game: Game) {\n        super(game);\n    }\n\n    /**\n     * Loads the tileset texture information for each rendering context. The back\n     * and the front are used to separate high tiles from low tiles to give the\n     * effect of z-index in a 2D environment.\n     */\n\n    public override load(): void {\n        let tilesetCount = this.map.tilesets.length;\n\n        // Initialize the shaders and format the fragment shader.\n        this.backShader = new ProgramData(\n            this.backContext,\n            LayerVertex,\n            this.getFragmentShader(tilesetCount)\n        );\n        this.foreShader = new ProgramData(\n            this.foreContext,\n            LayerVertex,\n            this.getFragmentShader(tilesetCount)\n        );\n\n        // Set the tileset texture indices.\n        this.tilesetIndices = new Int32Array(tilesetCount);\n        this.tilesetTileSizeBuffer = new Float32Array(tilesetCount * 2);\n        this.tilesetOffsetBuffer = new Float32Array(tilesetCount * 2);\n        this.inverseTilesetTextureSizeBuffer = new Float32Array(tilesetCount * 2);\n\n        // Initialize the tileset buffers\n        for (let i = 0; i < tilesetCount; i++) {\n            // Sets the index starting from 1 for the tileset texture.\n            this.tilesetIndices[i] = i + 1;\n\n            this.tilesetTileSizeBuffer[i * 2] = this.map.tileSize;\n            this.tilesetTileSizeBuffer[i * 2 + 1] = this.map.tileSize;\n\n            /**\n             * These are used for tile spacing and margin that Tiled provides. I'm\n             * adding these since I just want the gl-tiled renderer to work.\n             */\n\n            this.tilesetOffsetBuffer[i * 2] = 0;\n            this.tilesetOffsetBuffer[i * 2 + 1] = 0;\n\n            // Apply inverse width and height of the tileset texture.\n            this.inverseTilesetTextureSizeBuffer[i * 2] = 1 / this.map.tilesets[i].width;\n            this.inverseTilesetTextureSizeBuffer[i * 2 + 1] = 1 / this.map.tilesets[i].height;\n        }\n\n        // Set the inverse tile count.\n        this.inverseTileCount[0] = 1 / this.map.width;\n        this.inverseTileCount[1] = 1 / this.map.height;\n\n        // Load the buffer data...\n        this.forEachDrawingContext((context: WebGLRenderingContext) => {\n            this.tilesets[(context.canvas as HTMLCanvasElement).id] = new Tileset(\n                this.map,\n                context\n            );\n\n            // Create the buffer for each context\n            this.bindBuffer(context);\n\n            // Bind the tileset textures to the context.\n            this.bindTexture(context);\n\n            // Bind the tile shaders to the context.\n            this.bindTileShaders(context);\n        });\n    }\n\n    /**\n     * The `setTile` function handles information from the map to update a tile\n     * at a specific index. We do this so that we are always in sync with the\n     * information we receive from the server. Instead of loading the entire map\n     * as a batch, we can load the map in chunks and update the map as we receive\n     * information from the server.\n     * @param index The index at which we want to update the tile.\n     * @param data The data we want to update the tile with, may be an array or a number.\n     */\n\n    public override setTile(index: number, data: RegionTile): void {\n        // Clear all the tiles of every layer at the specified index.\n        this.clearTile(index);\n\n        // Add the tile if it is not an array\n        if (!Array.isArray(data)) return this.addTile(index, data);\n\n        // If we find an array tile then we need to iterate through the array and pass the data to the layers.\n        for (let tileIndex in data) this.addTile(index, data[tileIndex], parseInt(tileIndex));\n    }\n\n    /**\n     * Creates the quad buffer for the specified context.\n     * @param context The context we are creating the buffer for.\n     */\n\n    private bindBuffer(context: WebGLRenderingContext): void {\n        context.bindBuffer(context.ARRAY_BUFFER, this.getQuadBuffer(context));\n        context.bufferData(context.ARRAY_BUFFER, this.quadVertices, context.STATIC_DRAW);\n    }\n\n    /**\n     * Binds the texture of the tile layer to the specified context.\n     * @param context The context we are binding the texture to.\n     */\n\n    private bindTexture(context: WebGLRenderingContext): void {\n        for (let layer of this.layers)\n            layer.bindTexture(\n                context,\n                this.getShader(context).program,\n                !this.isBackgroundContext(context)\n            );\n    }\n\n    /**\n     * Binds the tile layer shaders to the context for drawing tile data.\n     * @param context The context we are binding the shaders to.\n     */\n\n    public bindTileShaders(context: WebGLRenderingContext): void {\n        let shader = this.getShader(context);\n\n        context.useProgram(shader.program);\n\n        let inverseTileSize: Float32Array = new Float32Array([\n            1 / this.map.tileSize,\n            1 / this.map.tileSize\n        ]);\n\n        context.uniform1i(shader.uniforms.uLayer, 0);\n        context.uniform2fv(shader.uniforms.uInverseLayerTileSize!, inverseTileSize);\n\n        for (let index = 0; index < this.tilesetIndices.length; index++)\n            context.uniform1i(\n                context.getUniformLocation(shader.program, `uTilesets[${index}]`),\n                this.tilesetIndices[index]\n            );\n\n        context.uniform2fv(shader.uniforms.uTilesetTileSize!, this.tilesetTileSizeBuffer);\n        context.uniform2fv(shader.uniforms.uTilesetTileOffset!, this.tilesetOffsetBuffer);\n        context.uniform2fv(\n            shader.uniforms.uInverseTilesetTextureSize!,\n            this.inverseTilesetTextureSizeBuffer\n        );\n    }\n\n    /**\n     * Override for the `bindTileLayers` function. We use this function after we\n     * finish loading regions to signal to the drawing contexts that we need to\n     * re-bind the tile layers with the new texture data.\n     */\n\n    public override bindTileLayers(): void {\n        this.forEachDrawingContext((context: WebGLRenderingContext) => this.bindTexture(context));\n    }\n\n    /**\n     * Override for the canvas resizing so that it handles view port\n     * for WebGL contexts.\n     */\n\n    public override resize(): void {\n        super.resize();\n\n        this.forEachDrawingContext((context: WebGLRenderingContext) => {\n            // Scaling and viewport\n            let viewPort = new Float32Array([this.screenWidth, this.screenHeight]),\n                shader = this.getShader(context);\n\n            context.viewport(0, 0, context.canvas.width, context.canvas.height);\n\n            context.uniform2fv(shader.uniforms.uViewportSize, viewPort);\n            context.uniform1f(shader.uniforms.uInverseTileScale, 1 / this.camera.zoomFactor);\n        });\n    }\n\n    /**\n     * Override for rendering tiles.\n     */\n\n    public override render(): void {\n        this.draw();\n\n        super.render();\n    }\n\n    /**\n     * Draws the triangles responsible for rendering the map texture.\n     * @param x Optional parameter to draw at a specific x coordinate.\n     * @param y Optional parameter to draw at a specific y coordinate.\n     */\n\n    private draw(x = this.camera.x, y = this.camera.y): void {\n        this.forEachDrawingContext((context: WebGLRenderingContext) => {\n            context.enable(context.BLEND);\n            context.blendEquation(this.blendMode.equation);\n            context.blendFunc(this.blendMode.func[0], this.blendMode.func[1]);\n\n            // Bindings\n            context.bindBuffer(context.ARRAY_BUFFER, this.getQuadBuffer(context));\n            context.enableVertexAttribArray(this.attributeIndices.aPosition);\n            context.enableVertexAttribArray(this.attributeIndices.aTexture);\n            context.vertexAttribPointer(\n                this.attributeIndices.aPosition,\n                2,\n                context.FLOAT,\n                false,\n                16,\n                0\n            );\n            context.vertexAttribPointer(\n                this.attributeIndices.aTexture,\n                2,\n                context.FLOAT,\n                false,\n                16,\n                8\n            );\n\n            this.tilesets[(context.canvas as HTMLCanvasElement).id].forEachTexture(\n                (texture: WebGLTexture, index: number) => {\n                    context.activeTexture(context.TEXTURE1 + index);\n                    context.bindTexture(context.TEXTURE_2D, texture);\n                }\n            );\n\n            context.activeTexture(context.TEXTURE0);\n\n            let shader = this.getShader(context);\n\n            // Bind the tile layer shaders to the context.\n            context.useProgram(shader.program);\n\n            // Uniforms for the tile shader layer... move these later\n            context.uniform1f(shader.uniforms.uAlpha, 1);\n            context.uniform1i(shader.uniforms.uRepeatTiles, 1);\n            context.uniform2fv(shader.uniforms.uInverseLayerTileCount, this.inverseTileCount);\n\n            context.uniform2f(shader.uniforms.uOffset, x, y);\n\n            // Do the actual drawing.\n            for (let layer of this.layers) {\n                context.bindTexture(\n                    context.TEXTURE_2D,\n                    this.isBackgroundContext(context)\n                        ? layer.backgroundTexture\n                        : layer.foregroundTexture\n                );\n                context.drawArrays(context.TRIANGLES, 0, 6);\n            }\n        });\n    }\n\n    /**\n     * Handles the creation and applying of tiles to the layers. If the layer doesn't\n     * exist then we create it. This ensures that we only create the layers that are\n     * actually used.\n     * @param index The index of the tile (in the tilemap).\n     * @param tileId The value of the tileId.\n     * @param layerIndex Which layer index we are drawing to.\n     */\n\n    private addTile(index: number, tile: number | RotatedTile, layerIndex = 0): void {\n        if (!this.layers[layerIndex]) this.layers[layerIndex] = new Layer(this.map);\n\n        this.layers[layerIndex].addTile(index, tile, this.isFlipped(tile as RotatedTile));\n    }\n\n    /**\n     * Used for clearing a tile from all the layers when we want to dynamically\n     * update a piece of the map.\n     * @param index The index at which we are clearing the tile.\n     */\n\n    private clearTile(index: number): void {\n        for (let layer of this.layers) layer.clear(index);\n    }\n\n    /**\n     * Checks whether or not the context is the background context.\n     * @param context The context that we are checking.\n     * @returns Whether or not the context is the background context.\n     */\n\n    private isBackgroundContext(context: WebGLRenderingContext): boolean {\n        return (context.canvas as HTMLCanvasElement).id === 'background';\n    }\n\n    /**\n     * Grabs the appropriate shader based on the context specified.\n     * @param context The context we are grabbing the shader for.\n     * @returns The shader program data for the context.\n     */\n\n    private getShader(context: WebGLRenderingContext): ProgramData {\n        return this.isBackgroundContext(context) ? this.backShader : this.foreShader;\n    }\n\n    /**\n     * Grabs the buffer based on the provided context parameter.\n     * @param context The context we are grabbing the buffer for.\n     * @returns The WebGL buffer that is associated with the context.\n     */\n\n    private getQuadBuffer(context: WebGLRenderingContext): WebGLBuffer {\n        return this.isBackgroundContext(context) ? this.backQuadBuffer : this.foreQuadBuffer;\n    }\n\n    /**\n     * Since we do not support dynamically allocating array sizes in the fragment shader\n     * we need to do some hacking and manually update the constant value.\n     * @param count The number of tilesets that we are using.\n     * @returns The formatted string of the fragment shader.\n     */\n\n    private getFragmentShader(count: number): string {\n        return LayerFragment.replace('TILESET_COUNT', count.toString());\n    }\n\n    /**\n     * Iterates through all the drawing contexts (backContext and foreContext).\n     * @param callback The context being iterated.\n     */\n\n    private forEachDrawingContext(callback: (context: WebGLRenderingContext) => void): void {\n        for (let context in this.drawingContexts) callback(this.drawingContexts[context]);\n    }\n}\n","import Renderer from './renderer';\n\nimport type Game from '../game';\nimport type { ContextCallback } from './renderer';\nimport type { RegionTile, RotatedTile } from '@kaetram/common/types/map';\n\nenum TileFlip {\n    Horizontal,\n    Vertical,\n    Diagonal\n}\n\ninterface RendererTile {\n    relativeTileId: number;\n    setWidth: number;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\ninterface RendererCell {\n    dx: number;\n    dy: number;\n    width: number;\n    height: number;\n}\n\nexport default class Canvas extends Renderer {\n    private renderedFrame = [-1, -1];\n\n    // Used for storing and caching tile information.\n    private tiles: { [id: string]: RendererTile } = {};\n    private cells: { [id: number]: RendererCell } = {};\n\n    // Override for the context types\n    private backContext: CanvasRenderingContext2D = this.background.getContext('2d')!;\n    private foreContext: CanvasRenderingContext2D = this.foreground.getContext('2d')!;\n\n    private drawingContexts = [this.backContext, this.foreContext];\n\n    public constructor(game: Game) {\n        super(game);\n\n        this.allContexts.push(this.backContext, this.foreContext);\n    }\n\n    /**\n     * Override for the resizing function where we also\n     * handle clearing up the canvases and tiling.\n     */\n\n    public override resize(): void {\n        super.resize();\n\n        // Clear all the cells so they're redrawn.\n        this.cells = {};\n    }\n\n    /**\n     * Override for the rendering function. We do our Canvas2D rendering here.\n     */\n\n    public override render(): void {\n        if (this.stopRendering) return;\n\n        super.render();\n\n        this.draw();\n    }\n\n    // ---------- Drawing Functions ----------\n\n    /**\n     * Background and foreground drawing function. Here we iterate\n     * through all the tile visibles (every tile in the camera's view)\n     * and draw them onto the foreground and background canvases depending\n     * on the tileId's property (we compare to see if the tile id is that\n     * of a high tile in the map).\n     */\n\n    private draw(): void {\n        if (this.hasRenderedFrame()) return;\n\n        this.clearDrawing();\n        this.saveDrawing();\n\n        // Draw the default background colour\n        this.backContext.fillStyle = 'rgba(9, 10, 20, 1)';\n        this.backContext.fillRect(0, 0, this.background.width, this.background.height);\n\n        // Sets the view according to the camera.\n        this.updateDrawingView();\n\n        this.forEachVisibleTile((tile: RegionTile, index: number) => {\n            let flips: number[] = this.getFlipped(tile as RotatedTile);\n\n            // Extract the tileId from the animated region tile.\n            if (flips.length > 0) tile = (tile as RotatedTile).tileId;\n\n            // Determine the layer of the tile depending on if it is a high tile or not.\n            let isHighTile = this.map.isHighTile(tile as number),\n                context = (\n                    isHighTile ? this.foreContext : this.backContext\n                ) as CanvasRenderingContext2D;\n\n            // Only do the lighting logic if there is an overlay.\n            if (this.game.overlays.hasOverlay()) {\n                let isLightTile = this.map.isLightTile(tile as number);\n\n                context = isLightTile ? (this.overlayContext as CanvasRenderingContext2D) : context;\n            }\n\n            /**\n             * Draws the animated tiles first so they display behind potential\n             * high tiles. We check if the current index contains an animated tile\n             * and if we are currently animating tiles before proceeding.\n             */\n            if (index in this.animatedTiles && this.animateTiles) {\n                // Advance the timing of the animated tiles with the current epoch.\n                this.animatedTiles[index].animate(this.game.time);\n\n                // Prevent double draws when drawing flipped animated tiles.\n                if (flips.length === 0 && this.animatedTiles[index].isFlipped) return;\n\n                this.drawTile(\n                    context,\n                    this.animatedTiles[index].id,\n                    this.animatedTiles[index].index,\n                    flips\n                );\n            }\n\n            // Skip animated tiles unless we disable animations, then just draw the tile once.\n            if (!this.map.isAnimatedTile(tile as number) || !this.animateTiles)\n                this.drawTile(context, (tile as number) - 1, index, flips);\n        });\n\n        this.saveFrame();\n        this.restoreDrawing();\n    }\n\n    // ---------- Primitive Drawing Functions ----------\n\n    /**\n     * Draws a tile with a specified tileId, at a specified index. The flips\n     * represent an array of transformations that the tile can undergo. If the\n     * array is empty, then there are no transformations.\n     * @param context The canvas that we are drawing the tile on.\n     * @param tileId The tile id is used to extract the tile from the tileset.\n     * @param cellId The cell id is the index of the tile in the map.\n     * @param flips An array containing transformations the tile will undergo.\n     */\n\n    private drawTile(\n        context: CanvasRenderingContext2D,\n        tileId: number,\n        index: number,\n        flips: number[] = []\n    ): void {\n        if (tileId < 0) return;\n\n        let tileset = this.map.getTilesetFromId(tileId);\n\n        if (!tileset) return;\n\n        /**\n         * To prevent redrawing and reculating the same tile, we\n         * cache the tileId in our list of tiles. These are heavy\n         * calculations that we attempt to prevent from occurring\n         * every frame. The same applies for the cells below.\n         */\n\n        if (!(tileId in this.tiles)) {\n            let setWidth = tileset.width / this.tileSize,\n                relativeTileId = tileId - tileset.firstGid;\n\n            this.tiles[tileId] = {\n                relativeTileId,\n                setWidth,\n                x: this.getX(relativeTileId + 1, setWidth) * this.tileSize,\n                y: Math.floor(relativeTileId / setWidth) * this.tileSize,\n                width: this.tileSize,\n                height: this.tileSize\n            };\n        }\n\n        /**\n         * Cell cache stores data about every index coordinate the player\n         * has explored. This may create overhead in terms of memory usage,\n         * but it is a necessary optimization.\n         */\n\n        if (!(index in this.cells) || flips.length > 0)\n            this.cells[index] = {\n                dx: this.getX(index + 1, this.map.width) * this.actualTileSize,\n                dy: Math.floor(index / this.map.width) * this.actualTileSize,\n                width: this.actualTileSize,\n                height: this.actualTileSize\n            };\n\n        this.drawImage(context, tileset, this.tiles[tileId], this.cells[index], flips);\n    }\n\n    /**\n     * Responsible for drawing an image at a specified tile index.\n     * @param context The Canvas2D context we are drawing the image on.\n     * @param image The image source to draw from (tileset).\n     * @param tile The renderer tile containing information such as x, y, width, height, etc.\n     * @param cell The renderer cell containing information such as dx, dy, width, height, flips.\n     */\n\n    private drawImage(\n        context: CanvasRenderingContext2D,\n        image: CanvasImageSource,\n        tile: RendererTile,\n        cell: RendererCell,\n        flips: number[] = []\n    ): void {\n        let dx = 0,\n            dy = 0,\n            isFlipped = flips.length > 0;\n\n        /**\n         * A tile rotation or flip is a combination of horizontal\n         * and vertical flips, with a transpose that rotates the tile\n         * 90 degrees. A transpose in our case is a rotation, followed by\n         * a horizontal flip. When a tile undergoes any transformation,\n         * we use these combinations to change its drawing.\n         */\n\n        if (isFlipped) {\n            ({ dx, dy } = cell);\n\n            // Save the context when we begin tile translations.\n            context.save();\n\n            // Store our delta x if we need to transpose.\n            let tempX = dx;\n\n            // Iterate through every type of flip in our array.\n            for (let index = 0; index < flips.length; index++)\n                switch (flips[index]) {\n                    case TileFlip.Horizontal: {\n                        // Flip the context2d horizontally\n                        dx = -dx - cell.width;\n                        context.scale(-1, 1);\n\n                        break;\n                    }\n\n                    case TileFlip.Vertical: {\n                        // Flip the context2d vertically\n                        dy = -dy - cell.height;\n                        context.scale(1, -1);\n\n                        break;\n                    }\n\n                    case TileFlip.Diagonal: {\n                        // A diagonal flip is actually a transpose of 90deg clockwise.\n                        context.rotate(Math.PI / 2);\n                        context.translate(0, -cell.height);\n\n                        (dx = dy), (dy = -tempX);\n\n                        /**\n                         * Explanation: After we perform a diagonal permutation (that is, we rotate the tile\n                         * 90 degrees to the right, the horizontal and vertical flags become inverted). That is,\n                         * performing a horizontal flip after rotating performs a vertical flip when observed\n                         * in the rendering context. The following ensures that a horizontal flip is performed only\n                         * when the next available flip is horizontal (essentially performing two horizontals in a row.)\n                         */\n\n                        if (flips[index + 1] === TileFlip.Horizontal)\n                            flips.push(TileFlip.Horizontal);\n                        else flips.push(TileFlip.Vertical);\n\n                        break;\n                    }\n                }\n        }\n\n        context.drawImage(\n            image,\n            tile.x, // Source X\n            tile.y, // Source Y\n            tile.width, // Source Width\n            tile.height, // Source Height\n            dx || cell.dx, // Destination X\n            dy || cell.dy, // Destination Y\n            cell.width, // Destination Width\n            cell.height // Destination Height\n        );\n\n        if (isFlipped) context.restore();\n    }\n\n    // ---------- Rendering Functions ----------\n\n    /**\n     * Checks whether or not the current frame has already been rendererd in order\n     * to prevent drawing when there is no movement during low power mode.\n     * @returns Whether or not the current frame has been rendered.\n     */\n\n    private hasRenderedFrame(): boolean {\n        if (this.forceRendering || !this.isLowPowerMode()) return false;\n\n        if (this.stopRendering) return true;\n\n        return this.renderedFrame[0] === this.camera.x && this.renderedFrame[1] === this.camera.y;\n    }\n\n    // ---------- Context Manipulation Functions ----------\n\n    /**\n     * Iterates through the drawing contexts (low and high tiles) and clears the entire frame.\n     */\n\n    private clearDrawing(): void {\n        this.forEachDrawingContext(this.clearScreen);\n    }\n\n    /**\n     * Iterates through just the drawing contexts (low and high tiles) and saves the current state.\n     */\n\n    private saveDrawing(): void {\n        this.forEachDrawingContext((context: CanvasRenderingContext2D) => context.save());\n    }\n\n    /**\n     * Saves the currently rendered frame in order to prevent unnecessary redraws\n     * during low power mode.\n     */\n\n    private saveFrame(): void {\n        if (!this.isLowPowerMode()) return;\n\n        this.renderedFrame[0] = this.camera.x;\n        this.renderedFrame[1] = this.camera.y;\n\n        this.forceRendering = false;\n    }\n\n    /**\n     * Iterates through just the drawing contexts (low and high tiles) and restores them.\n     */\n\n    private restoreDrawing(): void {\n        this.forEachDrawingContext((context: CanvasRenderingContext2D) => context.restore());\n    }\n\n    /**\n     * Iterates through the drawing contexts (used for tiling) and sets the camera position.\n     */\n\n    private updateDrawingView(): void {\n        this.forEachDrawingContext((context: CanvasRenderingContext2D) =>\n            this.setCameraView(context)\n        );\n    }\n\n    // ---------- Getters and Checkers ----------\n\n    /**\n     * Checks if a tile is a flipped tile and extracts\n     * all the flags based on the tile data. Returns an\n     * array containing all the flip flags.\n     * @param tile The region tile we are checking.\n     * @returns An array containing all flip flags in order.\n     */\n\n    public getFlipped(tile: RotatedTile): number[] {\n        let flips: number[] = [];\n\n        // Return empty if tile doesn't contain flip flags.\n        if (!this.isFlipped(tile)) return flips;\n\n        if (tile.v) flips.push(TileFlip.Vertical);\n        if (tile.d) flips.push(TileFlip.Diagonal);\n        if (tile.h) flips.push(TileFlip.Horizontal);\n\n        return flips;\n    }\n\n    // ---------- Iterative Functions ----------\n\n    /**\n     * Iterates through all the drawing contexts (backContext and foreContext).\n     * @param callback The context being iterated.\n     */\n\n    private forEachDrawingContext(callback: ContextCallback): void {\n        for (let context in this.drawingContexts)\n            callback(this.drawingContexts[context] as CanvasRenderingContext2D);\n    }\n}\n","import Character from '../entity/character/character';\nimport Projectile from '../entity/objects/projectile';\n\nimport { Modules } from '@kaetram/common/network';\n\nimport type SpritesController from '../controllers/sprites';\nimport type Entity from '../entity/entity';\nimport type Game from '../game';\n\nexport default class Updater {\n    private tileSize: number;\n\n    private sprites: SpritesController;\n\n    public constructor(private game: Game) {\n        this.tileSize = game.map.tileSize;\n\n        this.sprites = game.sprites;\n    }\n\n    public update(): void {\n        // Stop updating\n        if (this.game.player.dead) return;\n\n        this.updateEntities();\n        this.updateKeyboard();\n        this.updateAnimations();\n        this.updateInfos();\n        this.updateBubbles();\n        this.updateSounds();\n    }\n\n    /**\n     * Iterates through all the entities and updates their animation data.\n     * If an entity is moving, we process that movement and update the entity's position.\n     */\n\n    private updateEntities(): void {\n        this.game.entities.forEachEntity((entity: Entity) => {\n            // Nothing to render if no sprite is loaded.\n            if (!entity.sprite?.loaded) return;\n\n            this.updateFading(entity);\n\n            entity.animation?.update(this.game.time);\n\n            // Handle projectile instances separately.\n            if (entity instanceof Projectile) {\n                let mDistance = entity.speed * entity.getTimeDiff(),\n                    dx = entity.target.x - entity.x, // delta x current position to target\n                    dy = entity.target.y - entity.y, // delta y current position to target\n                    tDistance = Math.sqrt(dx * dx + dy * dy), // pythagorean theorem uwu\n                    amount = mDistance / tDistance;\n\n                // Always angle the projectile towards the target.\n                entity.updateAngle();\n\n                if (amount > 1) amount = 1;\n\n                // Increment the projectile's position.\n                entity.x += dx * amount;\n                entity.y += dy * amount;\n\n                if (tDistance < 5) entity.impact();\n\n                entity.lastUpdate = this.game.time;\n\n                return;\n            }\n\n            // Only characters receive pathing/movement updates.\n            if (!(entity instanceof Character)) return;\n\n            // If a movement transition is in progress, we just update that transition.\n            if (entity.movement.inProgress) return entity.movement.step(this.game.time);\n\n            // Do not update if no pathing is in progress.\n            if (!entity.hasPath()) return;\n\n            // Check if the type of movement is on the x or y axis.\n            let isHorizontal =\n                    entity.orientation === Modules.Orientation.Left ||\n                    entity.orientation === Modules.Orientation.Right,\n                isVertical =\n                    entity.orientation === Modules.Orientation.Up ||\n                    entity.orientation === Modules.Orientation.Down,\n                isLeft,\n                isUp;\n\n            // Determine the specific direction for the movement.\n            if (isHorizontal) isLeft = entity.orientation === Modules.Orientation.Left;\n            if (isVertical) isUp = entity.orientation === Modules.Orientation.Up;\n\n            /**\n             * Here we essentially start a transition update loop for an entity. Depending\n             * on the entity's movement speed, we increment the entity's x/y position by a\n             * single pixel. We proceed to do this for the length of the tile size. For example\n             * for a movement speed of 100, the entity will traverse a tile of size 16x16 pixels\n             * in 100 milliseconds.\n             */\n\n            entity.movement.start(\n                this.game.time,\n                isHorizontal ? entity.x + (isLeft ? -1 : 1) : entity.y + (isUp ? -1 : 1),\n                isHorizontal\n                    ? entity.x + (isLeft ? -this.tileSize : this.tileSize)\n                    : entity.y + (isUp ? -this.tileSize : this.tileSize),\n                entity.movementSpeed,\n                (value) => {\n                    if (isHorizontal) entity.x = value;\n                    if (isVertical) entity.y = value;\n\n                    // Callback for when an entity has moved.\n                    entity.moved();\n                },\n                () => {\n                    if (isHorizontal) entity.x = entity.movement.endValue;\n                    if (isVertical) entity.y = entity.movement.endValue;\n\n                    // Callback for an entity movement.\n                    entity.moved();\n                    entity.nextStep();\n                }\n            );\n        });\n    }\n\n    /**\n     * Fading occurs when an entity first spawns into\n     * the world. It essentially gradually increases the\n     * alpha of the entity until it is fully visible\n     * when it first spawns into the world.\n     * @param entity The entity we are fading in for.\n     */\n\n    private updateFading(entity: Entity): void {\n        if (!entity.fading) return;\n\n        let { time } = this.game,\n            dt = time - entity.fadingTime;\n\n        if (dt > entity.fadingDuration) {\n            entity.fading = false;\n            entity.fadingAlpha = 1;\n        } else entity.fadingAlpha = dt / entity.fadingDuration;\n    }\n\n    /**\n     * Updater for key input. When we toggle an arrow key\n     * or WSAD key, we monitor the status of the move conditionals\n     * within the player character. Depending on which one is active,\n     * we change the player's current position and let the input\n     * controller handle the movement itself.\n     */\n\n    private updateKeyboard(): void {\n        let { player, input } = this.game,\n            position = {\n                x: -1,\n                y: -1,\n                gridX: player.gridX,\n                gridY: player.gridY\n            };\n\n        /**\n         * Disables updating when the player is already moving as to not spam\n         * packets. If the player is frozen the input is ignored.\n         */\n        if (player.moving || player.teleporting || player.frozen || !player.hasKeyboardMovement())\n            return;\n\n        if (player.moveUp) position.gridY--;\n        else if (player.moveDown) position.gridY++;\n        else if (player.moveRight) position.gridX++;\n        else if (player.moveLeft) position.gridX--;\n\n        input.keyMove(position);\n    }\n\n    /**\n     * Updates the target animation (spinning tile selected animation) and\n     * the sparks animation displayed around items.\n     */\n\n    private updateAnimations(): void {\n        let target = this.game.input.targetAnimation;\n\n        if (target && this.game.input.selectedCellVisible) target.update(this.game.time);\n\n        if (!this.sprites) return;\n\n        let sparks = this.sprites.sparksAnimation;\n\n        sparks?.update(this.game.time);\n    }\n\n    /**\n     * Runs the info update with the current game time.\n     */\n\n    private updateInfos(): void {\n        this.game.info.update(this.game.time);\n    }\n\n    /**\n     * Updates the bubbles displayed around entities\n     * and posts the current game time.\n     */\n\n    private updateBubbles(): void {\n        this.game.bubble?.update(this.game.time);\n\n        this.game.pointer?.update();\n    }\n\n    /**\n     * Updates the music controller's directional audio.\n     */\n\n    private updateSounds() {\n        this.game.audio.updatePlayerListener();\n    }\n}\n","export type PosTuple = [x: number, y: number];\n\nexport type FunctionTypes = 'Diagonal' | 'Euclidean' | 'DiagonalFree' | 'EuclideanFree' | 'DEFAULT';\n\ninterface Result {\n    x: number;\n    y: number;\n    f?: number;\n    g?: number;\n    v?: number;\n    p?: Result;\n}\n\ntype Successor = (\n    $N: boolean,\n    $S: boolean,\n    $E: boolean,\n    $W: boolean,\n    N: number,\n    S: number,\n    E: number,\n    W: number,\n    grid: number[][],\n    rows: number,\n    cols: number,\n    result: Result[],\n    i: number\n) => Result[];\n\ntype MathFunction = (\n    start: Position,\n    end: Position,\n    f1: (...values: number[]) => number,\n    f2: (...values: number[]) => number\n) => number;\n\n/**\n * A* (A-Star) algorithm for a path finder\n * @author  Andrea Giammarchi\n * @license Mit Style License\n */\n\nfunction AStar(\n    grid: number[][],\n    start: [number, number],\n    end: [number, number],\n    f: FunctionTypes\n): number[][] {\n    let cols = grid[0].length,\n        rows = grid.length,\n        limit = cols * rows,\n        f2 = Math.max,\n        list: { [key: number]: number } = {},\n        result: [x: number, y: number][] = [],\n        open: Result[] = [\n            {\n                x: start[0],\n                y: start[1],\n                f: 0,\n                g: 0,\n                v: start[0] + start[1] * cols\n            }\n        ],\n        length = 1,\n        distance: MathFunction,\n        find: Successor,\n        current: Result,\n        next: Result[],\n        endPos = { x: end[0], y: end[1], v: end[0] + end[1] * cols };\n\n    switch (f) {\n        case 'Diagonal':\n        case 'Euclidean': {\n            find = diagonalSuccessors;\n        }\n        case 'DiagonalFree': {\n            distance = diagonal;\n            break;\n        }\n\n        case 'EuclideanFree': {\n            f2 = Math.sqrt;\n            distance = euclidean;\n            break;\n        }\n\n        default: {\n            distance = manhattan;\n            find = nothingToDo;\n            break;\n        }\n    }\n\n    find ||= diagonalSuccessorsFree;\n\n    do {\n        if (length > 100)\n            // Don't let it get too crazy.\n            return [];\n\n        let max = limit,\n            min = 0;\n\n        for (let i = 0; i < length; ++i) {\n            let openF = open[i].f!;\n\n            if (openF < max) {\n                max = openF;\n                min = i;\n            }\n        }\n\n        [current] = open.splice(min, 1);\n        if (current.v === endPos.v) {\n            let i = (length = 0);\n\n            do result[i++] = [current.x, current.y];\n            while ((current = current.p!));\n\n            result.reverse();\n        } else {\n            --length;\n            next = successors(find, current.x, current.y, grid, rows, cols);\n\n            for (let i = 0, j = next.length; i < j; ++i) {\n                let adj = next[i];\n\n                adj.p = current;\n                adj.f = adj.g = 0;\n                adj.v = adj.x + adj.y * cols;\n\n                if (!(adj.v in list)) {\n                    adj.f =\n                        (adj.g = current.g! + distance(adj, current, Math.abs, f2)) +\n                        distance(adj, endPos, Math.abs, f2);\n\n                    open[length++] = adj;\n                    list[adj.v] = 1;\n                }\n            }\n        }\n    } while (length);\n\n    return result;\n}\n\nlet diagonalSuccessors: Successor = ($N, $S, $E, $W, N, S, E, W, grid, _rows, _cols, result, i) => {\n        if ($N) {\n            $E && !grid[N][E] && (result[i++] = { x: E, y: N });\n            $W && !grid[N][W] && (result[i++] = { x: W, y: N });\n        }\n        if ($S) {\n            $E && !grid[S][E] && (result[i++] = { x: E, y: S });\n            $W && !grid[S][W] && (result[i++] = { x: W, y: S });\n        }\n\n        return result;\n    },\n    diagonalSuccessorsFree: Successor = (\n        $N,\n        $S,\n        $E,\n        $W,\n        N,\n        S,\n        E,\n        W,\n        grid,\n        rows,\n        cols,\n        result,\n        i\n    ) => {\n        $N = N > -1;\n        $S = S < rows;\n        $E = E < cols;\n        $W = W > -1;\n\n        if ($E) {\n            $N && !grid[N][E] && (result[i++] = { x: E, y: N });\n            $S && !grid[S][E] && (result[i++] = { x: E, y: S });\n        }\n        if ($W) {\n            $N && !grid[N][W] && (result[i++] = { x: W, y: N });\n            $S && !grid[S][W] && (result[i++] = { x: W, y: S });\n        }\n\n        return result;\n    },\n    nothingToDo: Successor = (_$N, _$S, _$E, _$W, _N, _S, _E, _W, _grid, _rows, _cols, result) =>\n        result;\n\nfunction successors(\n    find: Successor,\n    x: number,\n    y: number,\n    grid: number[][],\n    rows: number,\n    cols: number\n) {\n    let N = y - 1,\n        S = y + 1,\n        E = x + 1,\n        W = x - 1,\n        $N = N > -1 && !grid[N][x],\n        $S = S < rows && !grid[S][x],\n        $E = E < cols && !grid[y][E],\n        $W = W > -1 && !grid[y][W],\n        result = [],\n        i = 0;\n\n    $N && (result[i++] = { x, y: N });\n    $E && (result[i++] = { x: E, y });\n    $S && (result[i++] = { x, y: S });\n    $W && (result[i++] = { x: W, y });\n\n    return find($N, $S, $E, $W, N, S, E, W, grid, rows, cols, result, i);\n}\n\nlet diagonal: MathFunction = (start, end, f1, f2) => f2(f1(start.x - end.x), f1(start.y - end.y)),\n    euclidean: MathFunction = (start, end, _f1, f2) => {\n        let x = start.x - end.x,\n            y = start.y - end.y;\n\n        return f2(x * x + y * y);\n    },\n    manhattan: MathFunction = (start, end, f1) => f1(start.x - end.x) + f1(start.y - end.y);\n\nexport default AStar;\n","import AStar from '../lib/astar';\n\nimport type { FunctionTypes } from '../lib/astar';\n\n/**\n * A* pathfinder implementation. We essentially use the grid from the map\n * to calculate pathfinding within the game. The ignores work by temporarily\n * ignoring a collision tile in the grid (removing it) and re-adding it once\n * the pathinding is calculated (re-adding it using `clearIgnores`).\n */\n\nexport interface TileIgnore {\n    x: number;\n    y: number;\n    fake?: boolean;\n}\nexport default class PathFinder {\n    private mode: FunctionTypes = 'DEFAULT';\n\n    /**\n     * Finds and returns a pathing from the startX and startY (representing\n     * grid coordinates) to the endX and endY. We use the collision grid\n     * directly from the map to find the path.\n     * @param grid Collision grid from the map object (updated based on region data).\n     * @param startX Starting grid X coordinate.\n     * @param startY Starting grid Y coordinate.\n     * @param endX Ending grid X coordinate.\n     * @param endY Ending grid Y coordinate.\n     * @returns An 2D array of grid coordinates representing the path. Each entry\n     * contains an array of [x, y] coordinates.\n     */\n\n    public find(\n        grid: number[][],\n        startX: number,\n        startY: number,\n        endX: number,\n        endY: number,\n        ignores: TileIgnore[] = []\n    ): number[][] {\n        // Parse through the ignores and remove collision from the grid.\n        this.handleIgnore(grid, ignores, true);\n\n        // Store the result as a variable so we can re-add collision to the grid.\n        let result = AStar(grid, [startX, startY], [endX, endY], this.mode);\n\n        // Parse through the ignores and re-add collision to the grid.\n        this.handleIgnore(grid, ignores);\n\n        return result;\n    }\n\n    /**\n     * Responsible for handling the ignore based on the state parameter\n     * provided. When we need to ignore, we remove collision from the map grid,\n     * and when we need to unignore, we add collision back to the map grid.\n     * @param grid Collision grid from the map object.\n     * @param ignored Whether or not to remove or add collision to the grid.\n     */\n\n    private handleIgnore(grid: number[][], ignores: TileIgnore[], ignored = false): void {\n        for (let ignore of ignores) {\n            // Skip invalid ignores.\n            if (ignore.x < 0 || ignore.y < 0) continue;\n\n            /**\n             * This functionally essentially marks colliding tile as non-colliding so that the pathfinder\n             * can find a path to said tile. There are instances however, where we want to mark nearby\n             * tiles as non-colliding, which also includes non-colliding tiles. What happens is that when\n             * we re-add collision to the grid, we re-add collision to the non-colliding tiles as well.\n             * We mark these tiles as `fake` so that we can ignore them when re-adding collision to the grid.\n             */\n\n            if (ignore.fake) continue;\n\n            if (grid[ignore.y][ignore.x] === 0) ignore.fake = true;\n\n            grid[ignore.y][ignore.x] = ignored ? 0 : 1;\n        }\n    }\n}\n","import AudioController from './controllers/audio';\nimport BubbleController from './controllers/bubble';\nimport EntitiesController from './controllers/entities';\nimport InfoController from './controllers/info';\nimport InputController from './controllers/input';\nimport MenuController from './controllers/menu';\nimport Pointer from './controllers/pointer';\nimport SpritesController from './controllers/sprites';\nimport Zoning from './controllers/zoning';\nimport Player from './entity/character/player/player';\nimport Handler from './entity/character/player/handler';\nimport Map from './map/map';\nimport Connection from './network/connection';\nimport Socket from './network/socket';\nimport Camera from './renderer/camera';\nimport Minigame from './renderer/minigame';\nimport Overlays from './renderer/overlays';\nimport WebGL from './renderer/webgl/webgl';\nimport Canvas from './renderer/canvas';\nimport Updater from './renderer/updater';\nimport Pathfinder from './utils/pathfinder';\nimport { agent } from './utils/detect';\n\nimport { Packets } from '@kaetram/common/network';\n\nimport type App from './app';\nimport type Entity from './entity/entity';\nimport type Storage from './utils/storage';\nimport type Character from './entity/character/character';\nimport type { TileIgnore } from './utils/pathfinder';\n\nexport default class Game {\n    public player: Player;\n    public storage: Storage;\n\n    public map: Map;\n    public camera: Camera;\n\n    public zoning: Zoning = new Zoning();\n    public overlays: Overlays = new Overlays();\n    public pathfinder: Pathfinder = new Pathfinder();\n\n    public info: InfoController = new InfoController();\n    public sprites: SpritesController;\n\n    public minigame: Minigame = new Minigame();\n\n    public renderer: WebGL | Canvas;\n    public input: InputController;\n\n    public socket: Socket;\n    public pointer: Pointer;\n    public updater: Updater;\n    public audio: AudioController;\n    public entities: EntitiesController;\n    public bubble: BubbleController;\n    public menu: MenuController;\n\n    public connection: Connection;\n\n    public time = Date.now();\n    public lastTime = Date.now();\n\n    public started = false;\n    public ready = false;\n    public pvp = false;\n    public useWebGl = false;\n\n    public constructor(public app: App) {\n        this.storage = app.storage;\n\n        this.player = new Player('', this);\n\n        this.map = new Map(this);\n        this.camera = new Camera(this.map.width, this.map.height, this.map.tileSize);\n        this.sprites = new SpritesController();\n\n        this.renderer = this.useWebGl ? new WebGL(this) : new Canvas(this);\n        this.menu = new MenuController(this);\n        this.input = new InputController(this);\n        this.socket = new Socket(this);\n        this.pointer = new Pointer(this);\n        this.updater = new Updater(this);\n        this.audio = new AudioController(this);\n        this.entities = new EntitiesController(this);\n        this.bubble = new BubbleController(this);\n        this.connection = new Connection(this);\n\n        app.sendStatus('Loading game');\n\n        this.map.onReady(() => app.ready());\n\n        app.onLogin(this.socket.connect.bind(this.socket));\n        app.onResize(this.resize.bind(this));\n        app.onRespawn(this.respawn.bind(this));\n\n        this.player.onSync(this.handlePlayerSync.bind(this));\n    }\n\n    /**\n     * Starts the game by fading the main menu out\n     * and beginning the game loop `tick()`.\n     */\n\n    public start(): void {\n        if (this.started) return;\n\n        this.started = true;\n\n        this.tick();\n    }\n\n    /**\n     * Tick is a recursive function that calls for as long as the\n     * game is running. We use `requestAnimationFrame` to get the\n     * browser to call us back at the next available opportunity.\n     */\n\n    private tick(): void {\n        this.time = Date.now();\n\n        this.renderer.render();\n        this.updater.update();\n\n        if (this.started) requestAnimationFrame(() => this.tick());\n    }\n\n    /**\n     * This method is responsible for handling sudden\n     * disconnects of a player whilst in the game, not\n     * menu-based errors.\n     */\n\n    public handleDisconnection(): void {\n        if (!this.app.isMenuHidden()) return;\n\n        location.reload();\n    }\n\n    /**\n     * Handles synchronization for the player client-sided.\n     * This is called whenever the player undergoes a change\n     * in experience, level, equipment, etc. Note that this\n     * synchronization is different from the Sync packet\n     * that is received in `connection.ts.` That packet\n     * is synchronization of other player characters, this one\n     * involves our current client's player character.\n     */\n\n    private handlePlayerSync(): void {\n        this.menu.synchronize();\n\n        // Update sprite\n        this.player.setSprite(this.sprites.get(this.player.getSpriteName()));\n    }\n\n    /**\n     * Call this after the player has been welcomed\n     * by the server and the client received the connection.\n     */\n    public postLoad(): void {\n        this.entities.addEntity(this.player);\n\n        this.player.setSprite(this.sprites.get(this.player.getSpriteName()));\n        this.player.idle();\n\n        if (this.storage) {\n            this.player.setOrientation(this.storage.data.player.orientation);\n            this.camera.setZoom(this.storage.data.player.zoom);\n\n            this.renderer.resize();\n        }\n\n        this.camera.centreOn(this.player);\n\n        this.player.handler = new Handler(this.player);\n\n        this.renderer.updateAnimatedTiles();\n\n        this.socket.send(Packets.Ready, {\n            regionsLoaded: this.map.regionsLoaded,\n            userAgent: agent\n        });\n\n        if (this.storage.data.new) {\n            this.storage.data.new = false;\n            this.storage.save();\n        }\n\n        if (this.map.hasCachedDate()) this.app.fadeMenu();\n    }\n\n    /**\n     * Determines a path from the character's current position to the\n     * specified `x` and `y` grid coordinate parameters.\n     * @param character The character we are finding the path for.\n     * @param x The destination x grid coordinate.\n     * @param y The destination y grid coordinate.\n     * @param ignores The list of character objects that we are ignoring.\n     * @returns A 2D array of grid coordinates that represent the path.\n     */\n\n    public findPath(\n        character: Character,\n        x: number,\n        y: number,\n        ignores: TileIgnore[] = [],\n        cursor = ''\n    ): number[][] {\n        let path: number[][] = [];\n\n        path = this.pathfinder.find(this.map.grid, character.gridX, character.gridY, x, y, ignores);\n\n        // Stop if there is no path.\n        if (path.length === 0) return path;\n\n        // Special case for fishing where we remove the last path if it is colliding.\n        if (cursor === 'fishing') {\n            let last = path[path.length - 2];\n\n            // Remove if there is a collision  at the last path only (to allow fishing from a distance).\n            if (this.map.isColliding(last[0], last[1])) path.pop();\n        }\n\n        return path;\n    }\n\n    /**\n     * Used for when the player has selected low power mode and we do not\n     * actively centre the camera on the character. We check the boundaries\n     * of the camera and if the character approaches them we move the camera\n     * in the next quadrant.\n     */\n\n    public updateCameraBounds(): void {\n        // We are not using non-centred camera, so skip.\n        if (!this.zoning) return;\n\n        // Difference between the player and the camera, indicates which boundary we are approaching.\n        let x = this.player.gridX - this.camera.gridX,\n            y = this.player.gridY - this.camera.gridY;\n\n        // Left boundary\n        if (x === 0) this.zoning.setLeft();\n        // Right boundary\n        else if (x === this.camera.gridWidth - 2) this.zoning.setRight();\n        // Top boundary\n        else if (y === 0) this.zoning.setUp();\n        // Bottom boundary\n        else if (y === this.camera.gridHeight - 2) this.zoning.setDown();\n\n        // No zoning has occured, so stop here.\n        if (this.zoning.direction === null) return;\n\n        // Synchronize the camera and reset the zoning directions.\n        this.camera.zone(this.zoning.getDirection());\n\n        // Update the animated tiles.\n        this.renderer.updateAnimatedTiles();\n\n        // Reset the zoning directions.\n        this.zoning.reset();\n    }\n\n    /**\n     * Plays the reviving sound effect and removes the death class.\n     * We send a packet to the server to signal for respawn.\n     */\n\n    public respawn(): void {\n        this.audio.playSound('revive');\n        this.app.body.classList.remove('death');\n\n        this.socket.send(Packets.Respawn, []);\n    }\n\n    /**\n     * Calls all the resize functions in the controllers\n     * that require resizing.\n     */\n\n    public resize(): void {\n        this.renderer.resize();\n\n        this.pointer.resize();\n\n        this.menu.resize();\n    }\n\n    /**\n     * Determines an entity at a specific grid coordinate.\n     * @param x The x grid coordinate we are checking.\n     * @param y The y grid coordinate we are checking.\n     * @returns The first entity in the list that is at the grid coordinate.\n     */\n\n    public getEntityAt(x: number, y: number): Entity | undefined {\n        if (!this.entities) return;\n\n        let entities = this.entities.grids.renderingGrid[y][x],\n            keys = Object.keys(entities),\n            index = keys.indexOf(this.player.instance);\n\n        // Remove player instance from the keys of entities.\n        if (index !== -1) keys.splice(index, 1);\n\n        // Returns entity if there is a key, otherwise just undefined.\n        return entities[keys[0]];\n    }\n\n    /**\n     * Looks through the entity rendering grid within the specified radius to find\n     * any entities that are within the boundaries of the position provided.\n     * @param position The position we are checking around (usually the mouse position).\n     * @param radius How many tiles away from the position we are checking.\n     * @returns An entity if found, otherwise undefined.\n     */\n\n    public searchForEntityAt(position: Position, radius = 2): Entity | undefined {\n        let entities = this.entities.grids.getEntitiesAround(\n            position.gridX!,\n            position.gridY!,\n            radius\n        );\n\n        // Look through all the entities we found and determine which one is closest to the mouse.\n        for (let entity of entities)\n            if (\n                position.x >= entity.x + entity.sprite.offsetX &&\n                position.x <= entity.x + entity.sprite.offsetX + entity.sprite.width &&\n                position.y >= entity.y + entity.sprite.offsetY &&\n                position.y <= entity.y + entity.sprite.offsetY + entity.sprite.height\n            )\n                return entity;\n\n        return undefined;\n    }\n\n    /**\n     * Handles the teleportation for a player character.\n     * If this player is our game client's player, then\n     * we must clear some of the user interfaces and begin\n     * preparing the renderer for the new location.\n     * @param character The character we are teleporting.\n     * @param gridX The x grid coordinate we are teleporting to.\n     * @param gridY The y grid coordinate we are teleporting to.\n     */\n\n    public teleport(character: Character, gridX: number, gridY: number): void {\n        this.entities.unregisterPosition(character);\n\n        character.setGridPosition(gridX, gridY);\n\n        this.entities.registerPosition(character);\n\n        character.frozen = false;\n        character.teleporting = false;\n\n        if (character.instance === this.player.instance) {\n            character.clearHealthBar();\n\n            this.player.moving = false;\n            this.player.disableAction = false;\n            this.camera.centreOn(this.player);\n            this.renderer.updateAnimatedTiles();\n        }\n    }\n\n    /**\n     * Zooms out the game and updates the camera.\n     * @param amount Amount to zoom in or out by.\n     */\n\n    public zoom(amount: number): void {\n        this.camera.zoom(amount);\n        this.storage.setZoom(this.camera.zoomFactor);\n\n        this.renderer.resize();\n    }\n}\n","// eslint-disable-next-line @typescript-eslint/unbound-method\nconst objectToString = Object.prototype.toString;\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isError(wat) {\n  switch (objectToString.call(wat)) {\n    case '[object Error]':\n    case '[object Exception]':\n    case '[object DOMException]':\n      return true;\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n/**\n * Checks whether given value is an instance of the given built-in class.\n *\n * @param wat The value to be checked\n * @param className\n * @returns A boolean representing the result.\n */\nfunction isBuiltin(wat, className) {\n  return objectToString.call(wat) === `[object ${className}]`;\n}\n\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isErrorEvent(wat) {\n  return isBuiltin(wat, 'ErrorEvent');\n}\n\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMError(wat) {\n  return isBuiltin(wat, 'DOMError');\n}\n\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMException(wat) {\n  return isBuiltin(wat, 'DOMException');\n}\n\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isString(wat) {\n  return isBuiltin(wat, 'String');\n}\n\n/**\n * Checks whether given value is a primitive (undefined, null, number, boolean, string, bigint, symbol)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPrimitive(wat) {\n  return wat === null || (typeof wat !== 'object' && typeof wat !== 'function');\n}\n\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPlainObject(wat) {\n  return isBuiltin(wat, 'Object');\n}\n\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isEvent(wat) {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isElement(wat) {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isRegExp(wat) {\n  return isBuiltin(wat, 'RegExp');\n}\n\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\nfunction isThenable(wat) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isSyntheticEvent(wat) {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n\n/**\n * Checks whether given value is NaN\n * {@link isNaN}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isNaN(wat) {\n  return typeof wat === 'number' && wat !== wat;\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\nfunction isInstanceOf(wat, base) {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}\n\nexport { isDOMError, isDOMException, isElement, isError, isErrorEvent, isEvent, isInstanceOf, isNaN, isPlainObject, isPrimitive, isRegExp, isString, isSyntheticEvent, isThenable };\n//# sourceMappingURL=is.js.map\n","/** Internal global with common properties and Sentry extensions  */\n\n// The code below for 'isGlobalObj' and 'GLOBAL_OBJ' was copied from core-js before modification\n// https://github.com/zloirock/core-js/blob/1b944df55282cdc99c90db5f49eb0b6eda2cc0a3/packages/core-js/internals/global.js\n// core-js has the following licence:\n//\n// Copyright (c) 2014-2022 Denis Pushkarev\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/** Returns 'obj' if it's the global object, otherwise returns undefined */\nfunction isGlobalObj(obj) {\n  return obj && obj.Math == Math ? obj : undefined;\n}\n\n/** Get's the global object for the current JavaScript runtime */\nconst GLOBAL_OBJ =\n  (typeof globalThis == 'object' && isGlobalObj(globalThis)) ||\n  // eslint-disable-next-line no-restricted-globals\n  (typeof window == 'object' && isGlobalObj(window)) ||\n  (typeof self == 'object' && isGlobalObj(self)) ||\n  (typeof global == 'object' && isGlobalObj(global)) ||\n  (function () {\n    return this;\n  })() ||\n  {};\n\n/**\n * @deprecated Use GLOBAL_OBJ instead or WINDOW from @sentry/browser. This will be removed in v8\n */\nfunction getGlobalObject() {\n  return GLOBAL_OBJ ;\n}\n\n/**\n * Returns a global singleton contained in the global `__SENTRY__` object.\n *\n * If the singleton doesn't already exist in `__SENTRY__`, it will be created using the given factory\n * function and added to the `__SENTRY__` object.\n *\n * @param name name of the global singleton on __SENTRY__\n * @param creator creator Factory function to create the singleton if it doesn't already exist on `__SENTRY__`\n * @param obj (Optional) The global object on which to look for `__SENTRY__`, if not `GLOBAL_OBJ`'s return value\n * @returns the singleton\n */\nfunction getGlobalSingleton(name, creator, obj) {\n  const gbl = (obj || GLOBAL_OBJ) ;\n  const __SENTRY__ = (gbl.__SENTRY__ = gbl.__SENTRY__ || {});\n  const singleton = __SENTRY__[name] || (__SENTRY__[name] = creator());\n  return singleton;\n}\n\nexport { GLOBAL_OBJ, getGlobalObject, getGlobalSingleton };\n//# sourceMappingURL=worldwide.js.map\n","import { getGlobalSingleton, GLOBAL_OBJ } from './worldwide.js';\n\n/** Prefix for logging strings */\nconst PREFIX = 'Sentry Logger ';\n\nconst CONSOLE_LEVELS = ['debug', 'info', 'warn', 'error', 'log', 'assert', 'trace'] ;\n\n/**\n * Temporarily disable sentry console instrumentations.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\nfunction consoleSandbox(callback) {\n  if (!('console' in GLOBAL_OBJ)) {\n    return callback();\n  }\n\n  const originalConsole = GLOBAL_OBJ.console ;\n  const wrappedLevels = {};\n\n  // Restore all wrapped console methods\n  CONSOLE_LEVELS.forEach(level => {\n    // TODO(v7): Remove this check as it's only needed for Node 6\n    const originalWrappedFunc =\n      originalConsole[level] && (originalConsole[level] ).__sentry_original__;\n    if (level in originalConsole && originalWrappedFunc) {\n      wrappedLevels[level] = originalConsole[level] ;\n      originalConsole[level] = originalWrappedFunc ;\n    }\n  });\n\n  try {\n    return callback();\n  } finally {\n    // Revert restoration to wrapped state\n    Object.keys(wrappedLevels).forEach(level => {\n      originalConsole[level] = wrappedLevels[level ];\n    });\n  }\n}\n\nfunction makeLogger() {\n  let enabled = false;\n  const logger = {\n    enable: () => {\n      enabled = true;\n    },\n    disable: () => {\n      enabled = false;\n    },\n  };\n\n  if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    CONSOLE_LEVELS.forEach(name => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      logger[name] = (...args) => {\n        if (enabled) {\n          consoleSandbox(() => {\n            GLOBAL_OBJ.console[name](`${PREFIX}[${name}]:`, ...args);\n          });\n        }\n      };\n    });\n  } else {\n    CONSOLE_LEVELS.forEach(name => {\n      logger[name] = () => undefined;\n    });\n  }\n\n  return logger ;\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nlet logger;\nif ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n  logger = getGlobalSingleton('logger', makeLogger);\n} else {\n  logger = makeLogger();\n}\n\nexport { CONSOLE_LEVELS, consoleSandbox, logger };\n//# sourceMappingURL=logger.js.map\n","import { htmlTreeAsString } from './browser.js';\nimport { isError, isEvent, isInstanceOf, isElement, isPlainObject, isPrimitive } from './is.js';\nimport { truncate } from './string.js';\n\n/**\n * Replace a method in an object with a wrapped version of itself.\n *\n * @param source An object that contains a method to be wrapped.\n * @param name The name of the method to be wrapped.\n * @param replacementFactory A higher-order function that takes the original version of the given method and returns a\n * wrapped version. Note: The function returned by `replacementFactory` needs to be a non-arrow function, in order to\n * preserve the correct value of `this`, and the original method must be called using `origMethod.call(this, <other\n * args>)` or `origMethod.apply(this, [<other args>])` (rather than being called directly), again to preserve `this`.\n * @returns void\n */\nfunction fill(source, name, replacementFactory) {\n  if (!(name in source)) {\n    return;\n  }\n\n  const original = source[name] ;\n  const wrapped = replacementFactory(original) ;\n\n  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n  if (typeof wrapped === 'function') {\n    try {\n      markFunctionWrapped(wrapped, original);\n    } catch (_Oo) {\n      // This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n\n/**\n * Defines a non-enumerable property on the given object.\n *\n * @param obj The object on which to set the property\n * @param name The name of the property to be set\n * @param value The value to which to set the property\n */\nfunction addNonEnumerableProperty(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it\n    value: value,\n    writable: true,\n    configurable: true,\n  });\n}\n\n/**\n * Remembers the original function on the wrapped function and\n * patches up the prototype.\n *\n * @param wrapped the wrapper function\n * @param original the original function that gets wrapped\n */\nfunction markFunctionWrapped(wrapped, original) {\n  const proto = original.prototype || {};\n  wrapped.prototype = original.prototype = proto;\n  addNonEnumerableProperty(wrapped, '__sentry_original__', original);\n}\n\n/**\n * This extracts the original function if available.  See\n * `markFunctionWrapped` for more information.\n *\n * @param func the function to unwrap\n * @returns the unwrapped version of the function if available.\n */\nfunction getOriginalFunction(func) {\n  return func.__sentry_original__;\n}\n\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\nfunction urlEncode(object) {\n  return Object.keys(object)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)\n    .join('&');\n}\n\n/**\n * Transforms any `Error` or `Event` into a plain object with all of their enumerable properties, and some of their\n * non-enumerable properties attached.\n *\n * @param value Initial source that we have to transform in order for it to be usable by the serializer\n * @returns An Event or Error turned into an object - or the value argurment itself, when value is neither an Event nor\n *  an Error.\n */\nfunction convertToPlainObject(value)\n\n {\n  if (isError(value)) {\n    return {\n      message: value.message,\n      name: value.name,\n      stack: value.stack,\n      ...getOwnProperties(value),\n    };\n  } else if (isEvent(value)) {\n    const newObj\n\n = {\n      type: value.type,\n      target: serializeEventTarget(value.target),\n      currentTarget: serializeEventTarget(value.currentTarget),\n      ...getOwnProperties(value),\n    };\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      newObj.detail = value.detail;\n    }\n\n    return newObj;\n  } else {\n    return value;\n  }\n}\n\n/** Creates a string representation of the target of an `Event` object */\nfunction serializeEventTarget(target) {\n  try {\n    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/** Filters out all but an object's own properties */\nfunction getOwnProperties(obj) {\n  if (typeof obj === 'object' && obj !== null) {\n    const extractedProps = {};\n    for (const property in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, property)) {\n        extractedProps[property] = (obj )[property];\n      }\n    }\n    return extractedProps;\n  } else {\n    return {};\n  }\n}\n\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\nfunction extractExceptionKeysForMessage(exception, maxLength = 40) {\n  const keys = Object.keys(convertToPlainObject(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    const serialized = keys.slice(0, includedKeys).join(', ');\n    if (serialized.length > maxLength) {\n      continue;\n    }\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n\n/**\n * Given any object, return a new object having removed all fields whose value was `undefined`.\n * Works recursively on objects and arrays.\n *\n * Attention: This function keeps circular references in the returned object.\n */\nfunction dropUndefinedKeys(inputValue) {\n  // This map keeps track of what already visited nodes map to.\n  // Our Set - based memoBuilder doesn't work here because we want to the output object to have the same circular\n  // references as the input object.\n  const memoizationMap = new Map();\n\n  // This function just proxies `_dropUndefinedKeys` to keep the `memoBuilder` out of this function's API\n  return _dropUndefinedKeys(inputValue, memoizationMap);\n}\n\nfunction _dropUndefinedKeys(inputValue, memoizationMap) {\n  if (isPlainObject(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the object it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = {};\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    for (const key of Object.keys(inputValue)) {\n      if (typeof inputValue[key] !== 'undefined') {\n        returnValue[key] = _dropUndefinedKeys(inputValue[key], memoizationMap);\n      }\n    }\n\n    return returnValue ;\n  }\n\n  if (Array.isArray(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the array it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = [];\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    inputValue.forEach((item) => {\n      returnValue.push(_dropUndefinedKeys(item, memoizationMap));\n    });\n\n    return returnValue ;\n  }\n\n  return inputValue;\n}\n\n/**\n * Ensure that something is an object.\n *\n * Turns `undefined` and `null` into `String`s and all other primitives into instances of their respective wrapper\n * classes (String, Boolean, Number, etc.). Acts as the identity function on non-primitives.\n *\n * @param wat The subject of the objectification\n * @returns A version of `wat` which can safely be used with `Object` class methods\n */\nfunction objectify(wat) {\n  let objectified;\n  switch (true) {\n    case wat === undefined || wat === null:\n      objectified = new String(wat);\n      break;\n\n    // Though symbols and bigints do have wrapper classes (`Symbol` and `BigInt`, respectively), for whatever reason\n    // those classes don't have constructors which can be used with the `new` keyword. We therefore need to cast each as\n    // an object in order to wrap it.\n    case typeof wat === 'symbol' || typeof wat === 'bigint':\n      objectified = Object(wat);\n      break;\n\n    // this will catch the remaining primitives: `String`, `Number`, and `Boolean`\n    case isPrimitive(wat):\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      objectified = new (wat ).constructor(wat);\n      break;\n\n    // by process of elimination, at this point we know that `wat` must already be an object\n    default:\n      objectified = wat;\n      break;\n  }\n  return objectified;\n}\n\nexport { addNonEnumerableProperty, convertToPlainObject, dropUndefinedKeys, extractExceptionKeysForMessage, fill, getOriginalFunction, markFunctionWrapped, objectify, urlEncode };\n//# sourceMappingURL=object.js.map\n","const STACKTRACE_FRAME_LIMIT = 50;\n// Used to sanitize webpack (error: *) wrapped stack errors\nconst WEBPACK_ERROR_REGEXP = /\\(error: (.*)\\)/;\n\n/**\n * Creates a stack parser with the supplied line parsers\n *\n * StackFrames are returned in the correct order for Sentry Exception\n * frames and with Sentry SDK internal frames removed from the top and bottom\n *\n */\nfunction createStackParser(...parsers) {\n  const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n\n  return (stack, skipFirst = 0) => {\n    const frames = [];\n    const lines = stack.split('\\n');\n\n    for (let i = skipFirst; i < lines.length; i++) {\n      const line = lines[i];\n      // Ignore lines over 1kb as they are unlikely to be stack frames.\n      // Many of the regular expressions use backtracking which results in run time that increases exponentially with\n      // input size. Huge strings can result in hangs/Denial of Service:\n      // https://github.com/getsentry/sentry-javascript/issues/2286\n      if (line.length > 1024) {\n        continue;\n      }\n\n      // https://github.com/getsentry/sentry-javascript/issues/5459\n      // Remove webpack (error: *) wrappers\n      const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, '$1') : line;\n\n      for (const parser of sortedParsers) {\n        const frame = parser(cleanedLine);\n\n        if (frame) {\n          frames.push(frame);\n          break;\n        }\n      }\n\n      if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n        break;\n      }\n    }\n\n    return stripSentryFramesAndReverse(frames);\n  };\n}\n\n/**\n * Gets a stack parser implementation from Options.stackParser\n * @see Options\n *\n * If options contains an array of line parsers, it is converted into a parser\n */\nfunction stackParserFromStackParserOptions(stackParser) {\n  if (Array.isArray(stackParser)) {\n    return createStackParser(...stackParser);\n  }\n  return stackParser;\n}\n\n/**\n * Removes Sentry frames from the top and bottom of the stack if present and enforces a limit of max number of frames.\n * Assumes stack input is ordered from top to bottom and returns the reverse representation so call site of the\n * function that caused the crash is the last frame in the array.\n * @hidden\n */\nfunction stripSentryFramesAndReverse(stack) {\n  if (!stack.length) {\n    return [];\n  }\n\n  const localStack = stack.slice(0, STACKTRACE_FRAME_LIMIT);\n\n  const lastFrameFunction = localStack[localStack.length - 1].function;\n  // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n  if (lastFrameFunction && /sentryWrapped/.test(lastFrameFunction)) {\n    localStack.pop();\n  }\n\n  // Reversing in the middle of the procedure allows us to just pop the values off the stack\n  localStack.reverse();\n\n  const firstFrameFunction = localStack[localStack.length - 1].function;\n  // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n  if (firstFrameFunction && /captureMessage|captureException/.test(firstFrameFunction)) {\n    localStack.pop();\n  }\n\n  return localStack.map(frame => ({\n    ...frame,\n    filename: frame.filename || localStack[localStack.length - 1].filename,\n    function: frame.function || '?',\n  }));\n}\n\nconst defaultFunctionName = '<anonymous>';\n\n/**\n * Safely extract function name from itself\n */\nfunction getFunctionName(fn) {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n\n// eslint-disable-next-line complexity\nfunction node(getModule) {\n  const FILENAME_MATCH = /^\\s*[-]{4,}$/;\n  const FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\n\n  // eslint-disable-next-line complexity\n  return (line) => {\n    const lineMatch = line.match(FULL_MATCH);\n\n    if (lineMatch) {\n      let object;\n      let method;\n      let functionName;\n      let typeName;\n      let methodName;\n\n      if (lineMatch[1]) {\n        functionName = lineMatch[1];\n\n        let methodStart = functionName.lastIndexOf('.');\n        if (functionName[methodStart - 1] === '.') {\n          methodStart--;\n        }\n\n        if (methodStart > 0) {\n          object = functionName.slice(0, methodStart);\n          method = functionName.slice(methodStart + 1);\n          const objectEnd = object.indexOf('.Module');\n          if (objectEnd > 0) {\n            functionName = functionName.slice(objectEnd + 1);\n            object = object.slice(0, objectEnd);\n          }\n        }\n        typeName = undefined;\n      }\n\n      if (method) {\n        typeName = object;\n        methodName = method;\n      }\n\n      if (method === '<anonymous>') {\n        methodName = undefined;\n        functionName = undefined;\n      }\n\n      if (functionName === undefined) {\n        methodName = methodName || '<anonymous>';\n        functionName = typeName ? `${typeName}.${methodName}` : methodName;\n      }\n\n      let filename = lineMatch[2] && lineMatch[2].startsWith('file://') ? lineMatch[2].slice(7) : lineMatch[2];\n      const isNative = lineMatch[5] === 'native';\n\n      if (!filename && lineMatch[5] && !isNative) {\n        filename = lineMatch[5];\n      }\n\n      const isInternal =\n        isNative || (filename && !filename.startsWith('/') && !filename.startsWith('.') && !filename.includes(':\\\\'));\n\n      // in_app is all that's not an internal Node function or a module within node_modules\n      // note that isNative appears to return true even for node core libraries\n      // see https://github.com/getsentry/raven-node/issues/176\n\n      const in_app = !isInternal && filename !== undefined && !filename.includes('node_modules/');\n\n      return {\n        filename,\n        module: getModule ? getModule(filename) : undefined,\n        function: functionName,\n        lineno: parseInt(lineMatch[3], 10) || undefined,\n        colno: parseInt(lineMatch[4], 10) || undefined,\n        in_app,\n      };\n    }\n\n    if (line.match(FILENAME_MATCH)) {\n      return {\n        filename: line,\n      };\n    }\n\n    return undefined;\n  };\n}\n\n/**\n * Node.js stack line parser\n *\n * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n */\nfunction nodeStackLineParser(getModule) {\n  return [90, node(getModule)];\n}\n\nexport { createStackParser, getFunctionName, nodeStackLineParser, stackParserFromStackParserOptions, stripSentryFramesAndReverse };\n//# sourceMappingURL=stacktrace.js.map\n","import { logger } from './logger.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Tells whether current environment supports ErrorEvent objects\n * {@link supportsErrorEvent}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMError objects\n * {@link supportsDOMError}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMError() {\n  try {\n    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':\n    // 1 argument required, but only 0 present.\n    // @ts-ignore It really needs 1 argument, not 0.\n    new DOMError('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMException objects\n * {@link supportsDOMException}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMException() {\n  try {\n    new DOMException('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports Fetch API\n * {@link supportsFetch}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsFetch() {\n  if (!('fetch' in WINDOW)) {\n    return false;\n  }\n\n  try {\n    new Headers();\n    new Request('http://www.example.com');\n    new Response();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * isNativeFetch checks if the given function is a native implementation of fetch()\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isNativeFetch(func) {\n  return func && /^function fetch\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(func.toString());\n}\n\n/**\n * Tells whether current environment supports Fetch API natively\n * {@link supportsNativeFetch}.\n *\n * @returns true if `window.fetch` is natively implemented, false otherwise\n */\nfunction supportsNativeFetch() {\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  // Fast path to avoid DOM I/O\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  if (isNativeFetch(WINDOW.fetch)) {\n    return true;\n  }\n\n  // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)\n  // so create a \"pure\" iframe to see if that has native fetch\n  let result = false;\n  const doc = WINDOW.document;\n  // eslint-disable-next-line deprecation/deprecation\n  if (doc && typeof (doc.createElement ) === 'function') {\n    try {\n      const sandbox = doc.createElement('iframe');\n      sandbox.hidden = true;\n      doc.head.appendChild(sandbox);\n      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        result = isNativeFetch(sandbox.contentWindow.fetch);\n      }\n      doc.head.removeChild(sandbox);\n    } catch (err) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Tells whether current environment supports ReportingObserver API\n * {@link supportsReportingObserver}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReportingObserver() {\n  return 'ReportingObserver' in WINDOW;\n}\n\n/**\n * Tells whether current environment supports Referrer Policy API\n * {@link supportsReferrerPolicy}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReferrerPolicy() {\n  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default'\n  // (see https://caniuse.com/#feat=referrer-policy),\n  // it doesn't. And it throws an exception instead of ignoring this parameter...\n  // REF: https://github.com/getsentry/raven-js/issues/1233\n\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  try {\n    new Request('_', {\n      referrerPolicy: 'origin' ,\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports History API\n * {@link supportsHistory}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const chrome = (WINDOW ).chrome;\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  const hasHistoryApi = 'history' in WINDOW && !!WINDOW.history.pushState && !!WINDOW.history.replaceState;\n\n  return !isChromePackagedApp && hasHistoryApi;\n}\n\nexport { isNativeFetch, supportsDOMError, supportsDOMException, supportsErrorEvent, supportsFetch, supportsHistory, supportsNativeFetch, supportsReferrerPolicy, supportsReportingObserver };\n//# sourceMappingURL=supports.js.map\n","import { isInstanceOf, isString } from './is.js';\nimport { logger, CONSOLE_LEVELS } from './logger.js';\nimport { fill } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\nimport { supportsNativeFetch, supportsHistory } from './supports.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Instrument native APIs to call handlers that can be used to create breadcrumbs, APM spans etc.\n *  - Console API\n *  - Fetch API\n *  - XHR API\n *  - History API\n *  - DOM API (click/typing)\n *  - Error API\n *  - UnhandledRejection API\n */\n\nconst handlers = {};\nconst instrumented = {};\n\n/** Instruments given API */\nfunction instrument(type) {\n  if (instrumented[type]) {\n    return;\n  }\n\n  instrumented[type] = true;\n\n  switch (type) {\n    case 'console':\n      instrumentConsole();\n      break;\n    case 'dom':\n      instrumentDOM();\n      break;\n    case 'xhr':\n      instrumentXHR();\n      break;\n    case 'fetch':\n      instrumentFetch();\n      break;\n    case 'history':\n      instrumentHistory();\n      break;\n    case 'error':\n      instrumentError();\n      break;\n    case 'unhandledrejection':\n      instrumentUnhandledRejection();\n      break;\n    default:\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('unknown instrumentation type:', type);\n      return;\n  }\n}\n\n/**\n * Add handler that will be called when given type of instrumentation triggers.\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\nfunction addInstrumentationHandler(type, callback) {\n  handlers[type] = handlers[type] || [];\n  (handlers[type] ).push(callback);\n  instrument(type);\n}\n\n/** JSDoc */\nfunction triggerHandlers(type, data) {\n  if (!type || !handlers[type]) {\n    return;\n  }\n\n  for (const handler of handlers[type] || []) {\n    try {\n      handler(data);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.error(\n          `Error while triggering instrumentation handler.\\nType: ${type}\\nName: ${getFunctionName(handler)}\\nError:`,\n          e,\n        );\n    }\n  }\n}\n\n/** JSDoc */\nfunction instrumentConsole() {\n  if (!('console' in WINDOW)) {\n    return;\n  }\n\n  CONSOLE_LEVELS.forEach(function (level) {\n    if (!(level in WINDOW.console)) {\n      return;\n    }\n\n    fill(WINDOW.console, level, function (originalConsoleMethod) {\n      return function (...args) {\n        triggerHandlers('console', { args, level });\n\n        // this fails for some browsers. :(\n        if (originalConsoleMethod) {\n          originalConsoleMethod.apply(WINDOW.console, args);\n        }\n      };\n    });\n  });\n}\n\n/** JSDoc */\nfunction instrumentFetch() {\n  if (!supportsNativeFetch()) {\n    return;\n  }\n\n  fill(WINDOW, 'fetch', function (originalFetch) {\n    return function (...args) {\n      const handlerData = {\n        args,\n        fetchData: {\n          method: getFetchMethod(args),\n          url: getFetchUrl(args),\n        },\n        startTimestamp: Date.now(),\n      };\n\n      triggerHandlers('fetch', {\n        ...handlerData,\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      return originalFetch.apply(WINDOW, args).then(\n        (response) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            response,\n          });\n          return response;\n        },\n        (error) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            error,\n          });\n          // NOTE: If you are a Sentry user, and you are seeing this stack frame,\n          //       it means the sentry.javascript SDK caught an error invoking your application code.\n          //       This is expected behavior and NOT indicative of a bug with sentry.javascript.\n          throw error;\n        },\n      );\n    };\n  });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/** Extract `method` from fetch call arguments */\nfunction getFetchMethod(fetchArgs = []) {\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request) && fetchArgs[0].method) {\n    return String(fetchArgs[0].method).toUpperCase();\n  }\n  if (fetchArgs[1] && fetchArgs[1].method) {\n    return String(fetchArgs[1].method).toUpperCase();\n  }\n  return 'GET';\n}\n\n/** Extract `url` from fetch call arguments */\nfunction getFetchUrl(fetchArgs = []) {\n  if (typeof fetchArgs[0] === 'string') {\n    return fetchArgs[0];\n  }\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request)) {\n    return fetchArgs[0].url;\n  }\n  return String(fetchArgs[0]);\n}\n/* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\nfunction instrumentXHR() {\n  if (!('XMLHttpRequest' in WINDOW)) {\n    return;\n  }\n\n  const xhrproto = XMLHttpRequest.prototype;\n\n  fill(xhrproto, 'open', function (originalOpen) {\n    return function ( ...args) {\n      const url = args[1];\n      const xhrInfo = (this.__sentry_xhr__ = {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        method: isString(args[0]) ? args[0].toUpperCase() : args[0],\n        url: args[1],\n      });\n\n      // if Sentry key appears in URL, don't capture it as a request\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if (isString(url) && xhrInfo.method === 'POST' && url.match(/sentry_key/)) {\n        this.__sentry_own_request__ = true;\n      }\n\n      const onreadystatechangeHandler = () => {\n        // For whatever reason, this is not the same instance here as from the outer method\n        const xhrInfo = this.__sentry_xhr__;\n\n        if (!xhrInfo) {\n          return;\n        }\n\n        if (this.readyState === 4) {\n          try {\n            // touching statusCode in some platforms throws\n            // an exception\n            xhrInfo.status_code = this.status;\n          } catch (e) {\n            /* do nothing */\n          }\n\n          triggerHandlers('xhr', {\n            args: args ,\n            endTimestamp: Date.now(),\n            startTimestamp: Date.now(),\n            xhr: this,\n          } );\n        }\n      };\n\n      if ('onreadystatechange' in this && typeof this.onreadystatechange === 'function') {\n        fill(this, 'onreadystatechange', function (original) {\n          return function ( ...readyStateArgs) {\n            onreadystatechangeHandler();\n            return original.apply(this, readyStateArgs);\n          };\n        });\n      } else {\n        this.addEventListener('readystatechange', onreadystatechangeHandler);\n      }\n\n      return originalOpen.apply(this, args);\n    };\n  });\n\n  fill(xhrproto, 'send', function (originalSend) {\n    return function ( ...args) {\n      if (this.__sentry_xhr__ && args[0] !== undefined) {\n        this.__sentry_xhr__.body = args[0];\n      }\n\n      triggerHandlers('xhr', {\n        args,\n        startTimestamp: Date.now(),\n        xhr: this,\n      });\n\n      return originalSend.apply(this, args);\n    };\n  });\n}\n\nlet lastHref;\n\n/** JSDoc */\nfunction instrumentHistory() {\n  if (!supportsHistory()) {\n    return;\n  }\n\n  const oldOnPopState = WINDOW.onpopstate;\n  WINDOW.onpopstate = function ( ...args) {\n    const to = WINDOW.location.href;\n    // keep track of the current URL state, as we always receive only the updated state\n    const from = lastHref;\n    lastHref = to;\n    triggerHandlers('history', {\n      from,\n      to,\n    });\n    if (oldOnPopState) {\n      // Apparently this can throw in Firefox when incorrectly implemented plugin is installed.\n      // https://github.com/getsentry/sentry-javascript/issues/3344\n      // https://github.com/bugsnag/bugsnag-js/issues/469\n      try {\n        return oldOnPopState.apply(this, args);\n      } catch (_oO) {\n        // no-empty\n      }\n    }\n  };\n\n  /** @hidden */\n  function historyReplacementFunction(originalHistoryFunction) {\n    return function ( ...args) {\n      const url = args.length > 2 ? args[2] : undefined;\n      if (url) {\n        // coerce to string (this is what pushState does)\n        const from = lastHref;\n        const to = String(url);\n        // keep track of the current URL state, as we always receive only the updated state\n        lastHref = to;\n        triggerHandlers('history', {\n          from,\n          to,\n        });\n      }\n      return originalHistoryFunction.apply(this, args);\n    };\n  }\n\n  fill(WINDOW.history, 'pushState', historyReplacementFunction);\n  fill(WINDOW.history, 'replaceState', historyReplacementFunction);\n}\n\nconst debounceDuration = 1000;\nlet debounceTimerID;\nlet lastCapturedEvent;\n\n/**\n * Decide whether the current event should finish the debounce of previously captured one.\n * @param previous previously captured event\n * @param current event to be captured\n */\nfunction shouldShortcircuitPreviousDebounce(previous, current) {\n  // If there was no previous event, it should always be swapped for the new one.\n  if (!previous) {\n    return true;\n  }\n\n  // If both events have different type, then user definitely performed two separate actions. e.g. click + keypress.\n  if (previous.type !== current.type) {\n    return true;\n  }\n\n  try {\n    // If both events have the same type, it's still possible that actions were performed on different targets.\n    // e.g. 2 clicks on different buttons.\n    if (previous.target !== current.target) {\n      return true;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  // If both events have the same type _and_ same `target` (an element which triggered an event, _not necessarily_\n  // to which an event listener was attached), we treat them as the same action, as we want to capture\n  // only one breadcrumb. e.g. multiple clicks on the same button, or typing inside a user input box.\n  return false;\n}\n\n/**\n * Decide whether an event should be captured.\n * @param event event to be captured\n */\nfunction shouldSkipDOMEvent(event) {\n  // We are only interested in filtering `keypress` events for now.\n  if (event.type !== 'keypress') {\n    return false;\n  }\n\n  try {\n    const target = event.target ;\n\n    if (!target || !target.tagName) {\n      return true;\n    }\n\n    // Only consider keypress events on actual input elements. This will disregard keypresses targeting body\n    // e.g.tabbing through elements, hotkeys, etc.\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n      return false;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  return true;\n}\n\n/**\n * Wraps addEventListener to capture UI breadcrumbs\n * @param handler function that will be triggered\n * @param globalListener indicates whether event was captured by the global event listener\n * @returns wrapped breadcrumb events handler\n * @hidden\n */\nfunction makeDOMEventHandler(handler, globalListener = false) {\n  return (event) => {\n    // It's possible this handler might trigger multiple times for the same\n    // event (e.g. event propagation through node ancestors).\n    // Ignore if we've already captured that event.\n    if (!event || lastCapturedEvent === event) {\n      return;\n    }\n\n    // We always want to skip _some_ events.\n    if (shouldSkipDOMEvent(event)) {\n      return;\n    }\n\n    const name = event.type === 'keypress' ? 'input' : event.type;\n\n    // If there is no debounce timer, it means that we can safely capture the new event and store it for future comparisons.\n    if (debounceTimerID === undefined) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n    // If there is a debounce awaiting, see if the new event is different enough to treat it as a unique one.\n    // If that's the case, emit the previous event and store locally the newly-captured DOM event.\n    else if (shouldShortcircuitPreviousDebounce(lastCapturedEvent, event)) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n\n    // Start a new debounce timer that will prevent us from capturing multiple events that should be grouped together.\n    clearTimeout(debounceTimerID);\n    debounceTimerID = WINDOW.setTimeout(() => {\n      debounceTimerID = undefined;\n    }, debounceDuration);\n  };\n}\n\n/** JSDoc */\nfunction instrumentDOM() {\n  if (!('document' in WINDOW)) {\n    return;\n  }\n\n  // Make it so that any click or keypress that is unhandled / bubbled up all the way to the document triggers our dom\n  // handlers. (Normally we have only one, which captures a breadcrumb for each click or keypress.) Do this before\n  // we instrument `addEventListener` so that we don't end up attaching this handler twice.\n  const triggerDOMHandler = triggerHandlers.bind(null, 'dom');\n  const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);\n  WINDOW.document.addEventListener('click', globalDOMEventHandler, false);\n  WINDOW.document.addEventListener('keypress', globalDOMEventHandler, false);\n\n  // After hooking into click and keypress events bubbled up to `document`, we also hook into user-handled\n  // clicks & keypresses, by adding an event listener of our own to any element to which they add a listener. That\n  // way, whenever one of their handlers is triggered, ours will be, too. (This is needed because their handler\n  // could potentially prevent the event from bubbling up to our global listeners. This way, our handler are still\n  // guaranteed to fire at least once.)\n  ['EventTarget', 'Node'].forEach((target) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const proto = (WINDOW )[target] && (WINDOW )[target].prototype;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-prototype-builtins\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n\n    fill(proto, 'addEventListener', function (originalAddEventListener) {\n      return function (\n\n        type,\n        listener,\n        options,\n      ) {\n        if (type === 'click' || type == 'keypress') {\n          try {\n            const el = this ;\n            const handlers = (el.__sentry_instrumentation_handlers__ = el.__sentry_instrumentation_handlers__ || {});\n            const handlerForType = (handlers[type] = handlers[type] || { refCount: 0 });\n\n            if (!handlerForType.handler) {\n              const handler = makeDOMEventHandler(triggerDOMHandler);\n              handlerForType.handler = handler;\n              originalAddEventListener.call(this, type, handler, options);\n            }\n\n            handlerForType.refCount++;\n          } catch (e) {\n            // Accessing dom properties is always fragile.\n            // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n          }\n        }\n\n        return originalAddEventListener.call(this, type, listener, options);\n      };\n    });\n\n    fill(\n      proto,\n      'removeEventListener',\n      function (originalRemoveEventListener) {\n        return function (\n\n          type,\n          listener,\n          options,\n        ) {\n          if (type === 'click' || type == 'keypress') {\n            try {\n              const el = this ;\n              const handlers = el.__sentry_instrumentation_handlers__ || {};\n              const handlerForType = handlers[type];\n\n              if (handlerForType) {\n                handlerForType.refCount--;\n                // If there are no longer any custom handlers of the current type on this element, we can remove ours, too.\n                if (handlerForType.refCount <= 0) {\n                  originalRemoveEventListener.call(this, type, handlerForType.handler, options);\n                  handlerForType.handler = undefined;\n                  delete handlers[type]; // eslint-disable-line @typescript-eslint/no-dynamic-delete\n                }\n\n                // If there are no longer any custom handlers of any type on this element, cleanup everything.\n                if (Object.keys(handlers).length === 0) {\n                  delete el.__sentry_instrumentation_handlers__;\n                }\n              }\n            } catch (e) {\n              // Accessing dom properties is always fragile.\n              // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n            }\n          }\n\n          return originalRemoveEventListener.call(this, type, listener, options);\n        };\n      },\n    );\n  });\n}\n\nlet _oldOnErrorHandler = null;\n/** JSDoc */\nfunction instrumentError() {\n  _oldOnErrorHandler = WINDOW.onerror;\n\n  WINDOW.onerror = function (msg, url, line, column, error) {\n    triggerHandlers('error', {\n      column,\n      error,\n      line,\n      msg,\n      url,\n    });\n\n    if (_oldOnErrorHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnErrorHandler.apply(this, arguments);\n    }\n\n    return false;\n  };\n}\n\nlet _oldOnUnhandledRejectionHandler = null;\n/** JSDoc */\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = WINDOW.onunhandledrejection;\n\n  WINDOW.onunhandledrejection = function (e) {\n    triggerHandlers('unhandledrejection', e);\n\n    if (_oldOnUnhandledRejectionHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n}\n\nexport { addInstrumentationHandler };\n//# sourceMappingURL=instrument.js.map\n","import { addNonEnumerableProperty } from './object.js';\nimport { snipLine } from './string.js';\nimport { GLOBAL_OBJ } from './worldwide.js';\n\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\nfunction uuid4() {\n  const gbl = GLOBAL_OBJ ;\n  const crypto = gbl.crypto || gbl.msCrypto;\n\n  if (crypto && crypto.randomUUID) {\n    return crypto.randomUUID().replace(/-/g, '');\n  }\n\n  const getRandomByte =\n    crypto && crypto.getRandomValues ? () => crypto.getRandomValues(new Uint8Array(1))[0] : () => Math.random() * 16;\n\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n  // Concatenating the following numbers as strings results in '10000000100040008000100000000000'\n  return (([1e7] ) + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, c =>\n    // eslint-disable-next-line no-bitwise\n    ((c ) ^ ((getRandomByte() & 15) >> ((c ) / 4))).toString(16),\n  );\n}\n\nfunction getFirstException(event) {\n  return event.exception && event.exception.values ? event.exception.values[0] : undefined;\n}\n\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\nfunction getEventDescription(event) {\n  const { message, event_id: eventId } = event;\n  if (message) {\n    return message;\n  }\n\n  const firstException = getFirstException(event);\n  if (firstException) {\n    if (firstException.type && firstException.value) {\n      return `${firstException.type}: ${firstException.value}`;\n    }\n    return firstException.type || firstException.value || eventId || '<unknown>';\n  }\n  return eventId || '<unknown>';\n}\n\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\nfunction addExceptionTypeValue(event, value, type) {\n  const exception = (event.exception = event.exception || {});\n  const values = (exception.values = exception.values || []);\n  const firstException = (values[0] = values[0] || {});\n  if (!firstException.value) {\n    firstException.value = value || '';\n  }\n  if (!firstException.type) {\n    firstException.type = type || 'Error';\n  }\n}\n\n/**\n * Adds exception mechanism data to a given event. Uses defaults if the second parameter is not passed.\n *\n * @param event The event to modify.\n * @param newMechanism Mechanism data to add to the event.\n * @hidden\n */\nfunction addExceptionMechanism(event, newMechanism) {\n  const firstException = getFirstException(event);\n  if (!firstException) {\n    return;\n  }\n\n  const defaultMechanism = { type: 'generic', handled: true };\n  const currentMechanism = firstException.mechanism;\n  firstException.mechanism = { ...defaultMechanism, ...currentMechanism, ...newMechanism };\n\n  if (newMechanism && 'data' in newMechanism) {\n    const mergedData = { ...(currentMechanism && currentMechanism.data), ...newMechanism.data };\n    firstException.mechanism.data = mergedData;\n  }\n}\n\n// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\nconst SEMVER_REGEXP =\n  /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\n/**\n * Represents Semantic Versioning object\n */\n\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\nfunction parseSemver(input) {\n  const match = input.match(SEMVER_REGEXP) || [];\n  const major = parseInt(match[1], 10);\n  const minor = parseInt(match[2], 10);\n  const patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4],\n  };\n}\n\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\nfunction addContextToFrame(lines, frame, linesOfContext = 5) {\n  // When there is no line number in the frame, attaching context is nonsensical and will even break grouping\n  if (frame.lineno === undefined) {\n    return;\n  }\n\n  const maxLines = lines.length;\n  const sourceLine = Math.max(Math.min(maxLines, frame.lineno - 1), 0);\n\n  frame.pre_context = lines\n    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)\n    .map((line) => snipLine(line, 0));\n\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n\n  frame.post_context = lines\n    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)\n    .map((line) => snipLine(line, 0));\n}\n\n/**\n * Checks whether or not we've already captured the given exception (note: not an identical exception - the very object\n * in question), and marks it captured if not.\n *\n * This is useful because it's possible for an error to get captured by more than one mechanism. After we intercept and\n * record an error, we rethrow it (assuming we've intercepted it before it's reached the top-level global handlers), so\n * that we don't interfere with whatever effects the error might have had were the SDK not there. At that point, because\n * the error has been rethrown, it's possible for it to bubble up to some other code we've instrumented. If it's not\n * caught after that, it will bubble all the way up to the global handlers (which of course we also instrument). This\n * function helps us ensure that even if we encounter the same error more than once, we only record it the first time we\n * see it.\n *\n * Note: It will ignore primitives (always return `false` and not mark them as seen), as properties can't be set on\n * them. {@link: Object.objectify} can be used on exceptions to convert any that are primitives into their equivalent\n * object wrapper forms so that this check will always work. However, because we need to flag the exact object which\n * will get rethrown, and because that rethrowing happens outside of the event processing pipeline, the objectification\n * must be done before the exception captured.\n *\n * @param A thrown exception to check or flag as having been seen\n * @returns `true` if the exception has already been captured, `false` if not (with the side effect of marking it seen)\n */\nfunction checkOrSetAlreadyCaught(exception) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (exception && (exception ).__sentry_captured__) {\n    return true;\n  }\n\n  try {\n    // set it this way rather than by assignment so that it's not ennumerable and therefore isn't recorded by the\n    // `ExtraErrorData` integration\n    addNonEnumerableProperty(exception , '__sentry_captured__', true);\n  } catch (err) {\n    // `exception` is a primitive, so we can't mark it seen\n  }\n\n  return false;\n}\n\n/**\n * Checks whether the given input is already an array, and if it isn't, wraps it in one.\n *\n * @param maybeArray Input to turn into an array, if necessary\n * @returns The input, if already an array, or an array with the input as the only element, if not\n */\nfunction arrayify(maybeArray) {\n  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n}\n\nexport { addContextToFrame, addExceptionMechanism, addExceptionTypeValue, arrayify, checkOrSetAlreadyCaught, getEventDescription, parseSemver, uuid4 };\n//# sourceMappingURL=misc.js.map\n","/*\n * This module exists for optimizations in the build process through rollup and terser.  We define some global\n * constants, which can be overridden during build. By guarding certain pieces of code with functions that return these\n * constants, we can control whether or not they appear in the final bundle. (Any code guarded by a false condition will\n * never run, and will hence be dropped during treeshaking.) The two primary uses for this are stripping out calls to\n * `logger` and preventing node-related code from appearing in browser bundles.\n *\n * Attention:\n * This file should not be used to define constants/flags that are intended to be used for tree-shaking conducted by\n * users. These flags should live in their respective packages, as we identified user tooling (specifically webpack)\n * having issues tree-shaking these constants across package boundaries.\n * An example for this is the __SENTRY_DEBUG__ constant. It is declared in each package individually because we want\n * users to be able to shake away expressions that it guards.\n */\n\n/**\n * Figures out if we're building a browser bundle.\n *\n * @returns true if this is a browser bundle build.\n */\nfunction isBrowserBundle() {\n  return typeof __SENTRY_BROWSER_BUNDLE__ !== 'undefined' && !!__SENTRY_BROWSER_BUNDLE__;\n}\n\n/**\n * Get source of SDK.\n */\nfunction getSDKSource() {\n  // @ts-ignore \"npm\" is injected by rollup during build process\n  return \"npm\";\n}\n\nexport { getSDKSource, isBrowserBundle };\n//# sourceMappingURL=env.js.map\n","import { isBrowserBundle } from './env.js';\n\n/**\n * NOTE: In order to avoid circular dependencies, if you add a function to this module and it needs to print something,\n * you must either a) use `console.log` rather than the logger, or b) put your function elsewhere.\n */\n\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nfunction isNodeEnv() {\n  // explicitly check for browser bundles as those can be optimized statically\n  // by terser/rollup.\n  return (\n    !isBrowserBundle() &&\n    Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]'\n  );\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\nfunction dynamicRequire(mod, request) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n\n/**\n * Helper for dynamically loading module that should work with linked dependencies.\n * The problem is that we _should_ be using `require(require.resolve(moduleName, { paths: [cwd()] }))`\n * However it's _not possible_ to do that with Webpack, as it has to know all the dependencies during\n * build time. `require.resolve` is also not available in any other way, so we cannot create,\n * a fake helper like we do with `dynamicRequire`.\n *\n * We always prefer to use local package, thus the value is not returned early from each `try/catch` block.\n * That is to mimic the behavior of `require.resolve` exactly.\n *\n * @param moduleName module name to require\n * @returns possibly required module\n */\nfunction loadModule(moduleName) {\n  let mod;\n\n  try {\n    mod = dynamicRequire(module, moduleName);\n  } catch (e) {\n    // no-empty\n  }\n\n  try {\n    const { cwd } = dynamicRequire(module, 'process');\n    mod = dynamicRequire(module, `${cwd()}/node_modules/${moduleName}`) ;\n  } catch (e) {\n    // no-empty\n  }\n\n  return mod;\n}\n\nexport { dynamicRequire, isNodeEnv, loadModule };\n//# sourceMappingURL=node.js.map\n","import { isThenable } from './is.js';\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/** SyncPromise internal states */\nvar States; (function (States) {\n  /** Pending */\n  const PENDING = 0; States[States[\"PENDING\"] = PENDING] = \"PENDING\";\n  /** Resolved / OK */\n  const RESOLVED = 1; States[States[\"RESOLVED\"] = RESOLVED] = \"RESOLVED\";\n  /** Rejected / Error */\n  const REJECTED = 2; States[States[\"REJECTED\"] = REJECTED] = \"REJECTED\";\n})(States || (States = {}));\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nfunction resolvedSyncPromise(value) {\n  return new SyncPromise(resolve => {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nfunction rejectedSyncPromise(reason) {\n  return new SyncPromise((_, reject) => {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise {\n   __init() {this._state = States.PENDING;}\n   __init2() {this._handlers = [];}\n\n   constructor(\n    executor,\n  ) {SyncPromise.prototype.__init.call(this);SyncPromise.prototype.__init2.call(this);SyncPromise.prototype.__init3.call(this);SyncPromise.prototype.__init4.call(this);SyncPromise.prototype.__init5.call(this);SyncPromise.prototype.__init6.call(this);\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n   then(\n    onfulfilled,\n    onrejected,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      this._handlers.push([\n        false,\n        result => {\n          if (!onfulfilled) {\n            // TODO: \\_()_/\n            // TODO: FIXME\n            resolve(result );\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n        reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n      ]);\n      this._executeHandlers();\n    });\n  }\n\n  /** JSDoc */\n   catch(\n    onrejected,\n  ) {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n   finally(onfinally) {\n    return new SyncPromise((resolve, reject) => {\n      let val;\n      let isRejected;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val );\n      });\n    });\n  }\n\n  /** JSDoc */\n    __init3() {this._resolve = (value) => {\n    this._setResult(States.RESOLVED, value);\n  };}\n\n  /** JSDoc */\n    __init4() {this._reject = (reason) => {\n    this._setResult(States.REJECTED, reason);\n  };}\n\n  /** JSDoc */\n    __init5() {this._setResult = (state, value) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      void (value ).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };}\n\n  /** JSDoc */\n    __init6() {this._executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    const cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler[0]) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        handler[1](this._value );\n      }\n\n      if (this._state === States.REJECTED) {\n        handler[2](this._value);\n      }\n\n      handler[0] = true;\n    });\n  };}\n}\n\nexport { SyncPromise, rejectedSyncPromise, resolvedSyncPromise };\n//# sourceMappingURL=syncpromise.js.map\n","/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\nfunction parseUrl(url)\n\n {\n  if (!url) {\n    return {};\n  }\n\n  const match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  }\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  const query = match[6] || '';\n  const fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\n\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\nfunction stripUrlQueryAndFragment(urlPath) {\n  // eslint-disable-next-line no-useless-escape\n  return urlPath.split(/[\\?#]/, 1)[0];\n}\n\n/**\n * Returns number of URL segments of a passed string URL.\n */\nfunction getNumberOfUrlSegments(url) {\n  // split at '/' or at '\\/' to split regex urls correctly\n  return url.split(/\\\\?\\//).filter(s => s.length > 0 && s !== ',').length;\n}\n\nexport { getNumberOfUrlSegments, parseUrl, stripUrlQueryAndFragment };\n//# sourceMappingURL=url.js.map\n","import { isString, isPlainObject } from './is.js';\nimport { normalize } from './normalize.js';\nimport { stripUrlQueryAndFragment } from './url.js';\n\nconst DEFAULT_INCLUDES = {\n  ip: false,\n  request: true,\n  transaction: true,\n  user: true,\n};\nconst DEFAULT_REQUEST_INCLUDES = ['cookies', 'data', 'headers', 'method', 'query_string', 'url'];\nconst DEFAULT_USER_INCLUDES = ['id', 'username', 'email'];\n\n/**\n * Sets parameterized route as transaction name e.g.: `GET /users/:id`\n * Also adds more context data on the transaction from the request\n */\nfunction addRequestDataToTransaction(\n  transaction,\n  req,\n  deps,\n) {\n  if (!transaction) return;\n  if (!transaction.metadata.source || transaction.metadata.source === 'url') {\n    // Attempt to grab a parameterized route off of the request\n    transaction.setName(...extractPathForTransaction(req, { path: true, method: true }));\n  }\n  transaction.setData('url', req.originalUrl || req.url);\n  if (req.baseUrl) {\n    transaction.setData('baseUrl', req.baseUrl);\n  }\n  transaction.setData('query', extractQueryParams(req, deps));\n}\n\n/**\n * Extracts a complete and parameterized path from the request object and uses it to construct transaction name.\n * If the parameterized transaction name cannot be extracted, we fall back to the raw URL.\n *\n * Additionally, this function determines and returns the transaction name source\n *\n * eg. GET /mountpoint/user/:id\n *\n * @param req A request object\n * @param options What to include in the transaction name (method, path, or a custom route name to be\n *                used instead of the request's route)\n *\n * @returns A tuple of the fully constructed transaction name [0] and its source [1] (can be either 'route' or 'url')\n */\nfunction extractPathForTransaction(\n  req,\n  options = {},\n) {\n  const method = req.method && req.method.toUpperCase();\n\n  let path = '';\n  let source = 'url';\n\n  // Check to see if there's a parameterized route we can use (as there is in Express)\n  if (options.customRoute || req.route) {\n    path = options.customRoute || `${req.baseUrl || ''}${req.route && req.route.path}`;\n    source = 'route';\n  }\n\n  // Otherwise, just take the original URL\n  else if (req.originalUrl || req.url) {\n    path = stripUrlQueryAndFragment(req.originalUrl || req.url || '');\n  }\n\n  let name = '';\n  if (options.method && method) {\n    name += method;\n  }\n  if (options.method && options.path) {\n    name += ' ';\n  }\n  if (options.path && path) {\n    name += path;\n  }\n\n  return [name, source];\n}\n\n/** JSDoc */\nfunction extractTransaction(req, type) {\n  switch (type) {\n    case 'path': {\n      return extractPathForTransaction(req, { path: true })[0];\n    }\n    case 'handler': {\n      return (req.route && req.route.stack && req.route.stack[0] && req.route.stack[0].name) || '<anonymous>';\n    }\n    case 'methodPath':\n    default: {\n      return extractPathForTransaction(req, { path: true, method: true })[0];\n    }\n  }\n}\n\n/** JSDoc */\nfunction extractUserData(\n  user\n\n,\n  keys,\n) {\n  const extractedUser = {};\n  const attributes = Array.isArray(keys) ? keys : DEFAULT_USER_INCLUDES;\n\n  attributes.forEach(key => {\n    if (user && key in user) {\n      extractedUser[key] = user[key];\n    }\n  });\n\n  return extractedUser;\n}\n\n/**\n * Normalize data from the request object, accounting for framework differences.\n *\n * @param req The request object from which to extract data\n * @param options.include An optional array of keys to include in the normalized data. Defaults to\n * DEFAULT_REQUEST_INCLUDES if not provided.\n * @param options.deps Injected, platform-specific dependencies\n * @returns An object containing normalized request data\n */\nfunction extractRequestData(\n  req,\n  options\n\n,\n) {\n  const { include = DEFAULT_REQUEST_INCLUDES, deps } = options || {};\n  const requestData = {};\n\n  // headers:\n  //   node, express, koa, nextjs: req.headers\n  const headers = (req.headers || {})\n\n;\n  // method:\n  //   node, express, koa, nextjs: req.method\n  const method = req.method;\n  // host:\n  //   express: req.hostname in > 4 and req.host in < 4\n  //   koa: req.host\n  //   node, nextjs: req.headers.host\n  const host = req.hostname || req.host || headers.host || '<no host>';\n  // protocol:\n  //   node, nextjs: <n/a>\n  //   express, koa: req.protocol\n  const protocol = req.protocol === 'https' || (req.socket && req.socket.encrypted) ? 'https' : 'http';\n  // url (including path and query string):\n  //   node, express: req.originalUrl\n  //   koa, nextjs: req.url\n  const originalUrl = req.originalUrl || req.url || '';\n  // absolute url\n  const absoluteUrl = `${protocol}://${host}${originalUrl}`;\n  include.forEach(key => {\n    switch (key) {\n      case 'headers': {\n        requestData.headers = headers;\n        break;\n      }\n      case 'method': {\n        requestData.method = method;\n        break;\n      }\n      case 'url': {\n        requestData.url = absoluteUrl;\n        break;\n      }\n      case 'cookies': {\n        // cookies:\n        //   node, express, koa: req.headers.cookie\n        //   vercel, sails.js, express (w/ cookie middleware), nextjs: req.cookies\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.cookies =\n          // TODO (v8 / #5257): We're only sending the empty object for backwards compatibility, so the last bit can\n          // come off in v8\n          req.cookies || (headers.cookie && deps && deps.cookie && deps.cookie.parse(headers.cookie)) || {};\n        break;\n      }\n      case 'query_string': {\n        // query string:\n        //   node: req.url (raw)\n        //   express, koa, nextjs: req.query\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.query_string = extractQueryParams(req, deps);\n        break;\n      }\n      case 'data': {\n        if (method === 'GET' || method === 'HEAD') {\n          break;\n        }\n        // body data:\n        //   express, koa, nextjs: req.body\n        //\n        //   when using node by itself, you have to read the incoming stream(see\n        //   https://nodejs.dev/learn/get-http-request-body-data-using-nodejs); if a user is doing that, we can't know\n        //   where they're going to store the final result, so they'll have to capture this data themselves\n        if (req.body !== undefined) {\n          requestData.data = isString(req.body) ? req.body : JSON.stringify(normalize(req.body));\n        }\n        break;\n      }\n      default: {\n        if ({}.hasOwnProperty.call(req, key)) {\n          requestData[key] = (req )[key];\n        }\n      }\n    }\n  });\n\n  return requestData;\n}\n\n/**\n * Options deciding what parts of the request to use when enhancing an event\n */\n\n/**\n * Add data from the given request to the given event\n *\n * @param event The event to which the request data will be added\n * @param req Request object\n * @param options.include Flags to control what data is included\n * @param options.deps Injected platform-specific dependencies\n * @hidden\n */\nfunction addRequestDataToEvent(\n  event,\n  req,\n  options,\n) {\n  const include = {\n    ...DEFAULT_INCLUDES,\n    ...(options && options.include),\n  };\n\n  if (include.request) {\n    const extractedRequestData = Array.isArray(include.request)\n      ? extractRequestData(req, { include: include.request, deps: options && options.deps })\n      : extractRequestData(req, { deps: options && options.deps });\n\n    event.request = {\n      ...event.request,\n      ...extractedRequestData,\n    };\n  }\n\n  if (include.user) {\n    const extractedUser = req.user && isPlainObject(req.user) ? extractUserData(req.user, include.user) : {};\n\n    if (Object.keys(extractedUser).length) {\n      event.user = {\n        ...event.user,\n        ...extractedUser,\n      };\n    }\n  }\n\n  // client ip:\n  //   node, nextjs: req.socket.remoteAddress\n  //   express, koa: req.ip\n  if (include.ip) {\n    const ip = req.ip || (req.socket && req.socket.remoteAddress);\n    if (ip) {\n      event.user = {\n        ...event.user,\n        ip_address: ip,\n      };\n    }\n  }\n\n  if (include.transaction && !event.transaction) {\n    // TODO do we even need this anymore?\n    // TODO make this work for nextjs\n    event.transaction = extractTransaction(req, include.transaction);\n  }\n\n  return event;\n}\n\nfunction extractQueryParams(\n  req,\n  deps,\n) {\n  // url (including path and query string):\n  //   node, express: req.originalUrl\n  //   koa, nextjs: req.url\n  let originalUrl = req.originalUrl || req.url || '';\n\n  if (!originalUrl) {\n    return;\n  }\n\n  // The `URL` constructor can't handle internal URLs of the form `/some/path/here`, so stick a dummy protocol and\n  // hostname on the beginning. Since the point here is just to grab the query string, it doesn't matter what we use.\n  if (originalUrl.startsWith('/')) {\n    originalUrl = `http://dogs.are.great${originalUrl}`;\n  }\n\n  return (\n    req.query ||\n    (typeof URL !== undefined && new URL(originalUrl).search.replace('?', '')) ||\n    // In Node 8, `URL` isn't in the global scope, so we have to use the built-in module from Node\n    (deps && deps.url && deps.url.parse(originalUrl).query) ||\n    undefined\n  );\n}\n\nexport { addRequestDataToEvent, addRequestDataToTransaction, extractPathForTransaction, extractRequestData };\n//# sourceMappingURL=requestdata.js.map\n","import { isNodeEnv, dynamicRequire } from './node.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * An object that can return the current timestamp in seconds since the UNIX epoch.\n */\n\n/**\n * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n *\n * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n */\nconst dateTimestampSource = {\n  nowSeconds: () => Date.now() / 1000,\n};\n\n/**\n * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n * for accessing a high-resolution monotonic clock.\n */\n\n/**\n * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n * support the API.\n *\n * Wrapping the native API works around differences in behavior from different browsers.\n */\nfunction getBrowserPerformance() {\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    return undefined;\n  }\n\n  // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n  //\n  // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n  // performance.now() gives a date arbitrarily in the past.\n  //\n  // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n  // undefined.\n  //\n  // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n  // interact with data coming out of performance entries.\n  //\n  // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n  // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n  // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n  // observed skews that can be as long as days, weeks or months.\n  //\n  // See https://github.com/getsentry/sentry-javascript/issues/2590.\n  //\n  // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n  // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n  // transactions of long-lived web pages.\n  const timeOrigin = Date.now() - performance.now();\n\n  return {\n    now: () => performance.now(),\n    timeOrigin,\n  };\n}\n\n/**\n * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n * implement the API.\n */\nfunction getNodePerformance() {\n  try {\n    const perfHooks = dynamicRequire(module, 'perf_hooks') ;\n    return perfHooks.performance;\n  } catch (_) {\n    return undefined;\n  }\n}\n\n/**\n * The Performance API implementation for the current platform, if available.\n */\nconst platformPerformance = isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n\nconst timestampSource =\n  platformPerformance === undefined\n    ? dateTimestampSource\n    : {\n        nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000,\n      };\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n */\nconst dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n * availability of the Performance API.\n *\n * See `usingPerformanceAPI` to test whether the Performance API is used.\n *\n * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n * skew can grow to arbitrary amounts like days, weeks or months.\n * See https://github.com/getsentry/sentry-javascript/issues/2590.\n */\nconst timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n// Re-exported with an old name for backwards-compatibility.\nconst timestampWithMs = timestampInSeconds;\n\n/**\n * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n */\nconst usingPerformanceAPI = platformPerformance !== undefined;\n\n/**\n * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n */\nlet _browserPerformanceTimeOriginMode;\n\n/**\n * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n * performance API is available.\n */\nconst browserPerformanceTimeOrigin = (() => {\n  // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n  // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n  // data as reliable if they are within a reasonable threshold of the current time.\n\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    _browserPerformanceTimeOriginMode = 'none';\n    return undefined;\n  }\n\n  const threshold = 3600 * 1000;\n  const performanceNow = performance.now();\n  const dateNow = Date.now();\n\n  // if timeOrigin isn't available set delta to threshold so it isn't used\n  const timeOriginDelta = performance.timeOrigin\n    ? Math.abs(performance.timeOrigin + performanceNow - dateNow)\n    : threshold;\n  const timeOriginIsReliable = timeOriginDelta < threshold;\n\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n  // Date API.\n  // eslint-disable-next-line deprecation/deprecation\n  const navigationStart = performance.timing && performance.timing.navigationStart;\n  const hasNavigationStart = typeof navigationStart === 'number';\n  // if navigationStart isn't available set delta to threshold so it isn't used\n  const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n  const navigationStartIsReliable = navigationStartDelta < threshold;\n\n  if (timeOriginIsReliable || navigationStartIsReliable) {\n    // Use the more reliable time origin\n    if (timeOriginDelta <= navigationStartDelta) {\n      _browserPerformanceTimeOriginMode = 'timeOrigin';\n      return performance.timeOrigin;\n    } else {\n      _browserPerformanceTimeOriginMode = 'navigationStart';\n      return navigationStart;\n    }\n  }\n\n  // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n  _browserPerformanceTimeOriginMode = 'dateNow';\n  return dateNow;\n})();\n\nexport { _browserPerformanceTimeOriginMode, browserPerformanceTimeOrigin, dateTimestampInSeconds, timestampInSeconds, timestampWithMs, usingPerformanceAPI };\n//# sourceMappingURL=time.js.map\n","const DEFAULT_ENVIRONMENT = 'production';\n\nexport { DEFAULT_ENVIRONMENT };\n//# sourceMappingURL=constants.js.map\n","import { timestampInSeconds, uuid4, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Creates a new `Session` object by setting certain default parameters. If optional @param context\n * is passed, the passed properties are applied to the session object.\n *\n * @param context (optional) additional properties to be applied to the returned session object\n *\n * @returns a new `Session` object\n */\nfunction makeSession(context) {\n  // Both timestamp and started are in seconds since the UNIX epoch.\n  const startingTime = timestampInSeconds();\n\n  const session = {\n    sid: uuid4(),\n    init: true,\n    timestamp: startingTime,\n    started: startingTime,\n    duration: 0,\n    status: 'ok',\n    errors: 0,\n    ignoreDuration: false,\n    toJSON: () => sessionToJSON(session),\n  };\n\n  if (context) {\n    updateSession(session, context);\n  }\n\n  return session;\n}\n\n/**\n * Updates a session object with the properties passed in the context.\n *\n * Note that this function mutates the passed object and returns void.\n * (Had to do this instead of returning a new and updated session because closing and sending a session\n * makes an update to the session after it was passed to the sending logic.\n * @see BaseClient.captureSession )\n *\n * @param session the `Session` to update\n * @param context the `SessionContext` holding the properties that should be updated in @param session\n */\n// eslint-disable-next-line complexity\nfunction updateSession(session, context = {}) {\n  if (context.user) {\n    if (!session.ipAddress && context.user.ip_address) {\n      session.ipAddress = context.user.ip_address;\n    }\n\n    if (!session.did && !context.did) {\n      session.did = context.user.id || context.user.email || context.user.username;\n    }\n  }\n\n  session.timestamp = context.timestamp || timestampInSeconds();\n\n  if (context.ignoreDuration) {\n    session.ignoreDuration = context.ignoreDuration;\n  }\n  if (context.sid) {\n    // Good enough uuid validation.  Kamil\n    session.sid = context.sid.length === 32 ? context.sid : uuid4();\n  }\n  if (context.init !== undefined) {\n    session.init = context.init;\n  }\n  if (!session.did && context.did) {\n    session.did = `${context.did}`;\n  }\n  if (typeof context.started === 'number') {\n    session.started = context.started;\n  }\n  if (session.ignoreDuration) {\n    session.duration = undefined;\n  } else if (typeof context.duration === 'number') {\n    session.duration = context.duration;\n  } else {\n    const duration = session.timestamp - session.started;\n    session.duration = duration >= 0 ? duration : 0;\n  }\n  if (context.release) {\n    session.release = context.release;\n  }\n  if (context.environment) {\n    session.environment = context.environment;\n  }\n  if (!session.ipAddress && context.ipAddress) {\n    session.ipAddress = context.ipAddress;\n  }\n  if (!session.userAgent && context.userAgent) {\n    session.userAgent = context.userAgent;\n  }\n  if (typeof context.errors === 'number') {\n    session.errors = context.errors;\n  }\n  if (context.status) {\n    session.status = context.status;\n  }\n}\n\n/**\n * Closes a session by setting its status and updating the session object with it.\n * Internally calls `updateSession` to update the passed session object.\n *\n * Note that this function mutates the passed session (@see updateSession for explanation).\n *\n * @param session the `Session` object to be closed\n * @param status the `SessionStatus` with which the session was closed. If you don't pass a status,\n *               this function will keep the previously set status, unless it was `'ok'` in which case\n *               it is changed to `'exited'`.\n */\nfunction closeSession(session, status) {\n  let context = {};\n  if (status) {\n    context = { status };\n  } else if (session.status === 'ok') {\n    context = { status: 'exited' };\n  }\n\n  updateSession(session, context);\n}\n\n/**\n * Serializes a passed session object to a JSON object with a slightly different structure.\n * This is necessary because the Sentry backend requires a slightly different schema of a session\n * than the one the JS SDKs use internally.\n *\n * @param session the session to be converted\n *\n * @returns a JSON object of the passed session\n */\nfunction sessionToJSON(session) {\n  return dropUndefinedKeys({\n    sid: `${session.sid}`,\n    init: session.init,\n    // Make sure that sec is converted to ms for date constructor\n    started: new Date(session.started * 1000).toISOString(),\n    timestamp: new Date(session.timestamp * 1000).toISOString(),\n    status: session.status,\n    errors: session.errors,\n    did: typeof session.did === 'number' || typeof session.did === 'string' ? `${session.did}` : undefined,\n    duration: session.duration,\n    attrs: {\n      release: session.release,\n      environment: session.environment,\n      ip_address: session.ipAddress,\n      user_agent: session.userAgent,\n    },\n  });\n}\n\nexport { closeSession, makeSession, updateSession };\n//# sourceMappingURL=session.js.map\n","import { isPlainObject, dateTimestampInSeconds, SyncPromise, logger, isThenable, arrayify, getGlobalSingleton } from '@sentry/utils';\nimport { updateSession } from './session.js';\n\n/**\n * Default value for maximum number of breadcrumbs added to an event.\n */\nconst DEFAULT_MAX_BREADCRUMBS = 100;\n\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\nclass Scope  {\n  /** Flag if notifying is happening. */\n\n  /** Callback for client to receive scope changes. */\n\n  /** Callback list that will be called after {@link applyToEvent}. */\n\n  /** Array of breadcrumbs. */\n\n  /** User */\n\n  /** Tags */\n\n  /** Extra */\n\n  /** Contexts */\n\n  /** Attachments */\n\n  /**\n   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get\n   * sent to Sentry\n   */\n\n  /** Fingerprint */\n\n  /** Severity */\n  // eslint-disable-next-line deprecation/deprecation\n\n  /** Transaction Name */\n\n  /** Span */\n\n  /** Session */\n\n  /** Request Mode Session Status */\n\n  // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.\n\n   constructor() {\n    this._notifyingListeners = false;\n    this._scopeListeners = [];\n    this._eventProcessors = [];\n    this._breadcrumbs = [];\n    this._attachments = [];\n    this._user = {};\n    this._tags = {};\n    this._extra = {};\n    this._contexts = {};\n    this._sdkProcessingMetadata = {};\n  }\n\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n   static clone(scope) {\n    const newScope = new Scope();\n    if (scope) {\n      newScope._breadcrumbs = [...scope._breadcrumbs];\n      newScope._tags = { ...scope._tags };\n      newScope._extra = { ...scope._extra };\n      newScope._contexts = { ...scope._contexts };\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._session = scope._session;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = [...scope._eventProcessors];\n      newScope._requestSession = scope._requestSession;\n      newScope._attachments = [...scope._attachments];\n      newScope._sdkProcessingMetadata = { ...scope._sdkProcessingMetadata };\n    }\n    return newScope;\n  }\n\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n   addScopeListener(callback) {\n    this._scopeListeners.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addEventProcessor(callback) {\n    this._eventProcessors.push(callback);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    this._user = user || {};\n    if (this._session) {\n      updateSession(this._session, { user });\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getUser() {\n    return this._user;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getRequestSession() {\n    return this._requestSession;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setRequestSession(requestSession) {\n    this._requestSession = requestSession;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    this._tags = {\n      ...this._tags,\n      ...tags,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this._tags = { ...this._tags, [key]: value };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    this._extra = {\n      ...this._extra,\n      ...extras,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    this._extra = { ...this._extra, [key]: extra };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setFingerprint(fingerprint) {\n    this._fingerprint = fingerprint;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setLevel(\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n  ) {\n    this._level = level;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTransactionName(name) {\n    this._transactionName = name;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts[key] = context;\n    }\n\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSpan(span) {\n    this._span = span;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSpan() {\n    return this._span;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransaction() {\n    // Often, this span (if it exists at all) will be a transaction, but it's not guaranteed to be. Regardless, it will\n    // have a pointer to the currently-active transaction.\n    const span = this.getSpan();\n    return span && span.transaction;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSession(session) {\n    if (!session) {\n      delete this._session;\n    } else {\n      this._session = session;\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSession() {\n    return this._session;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   update(captureContext) {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      const updatedScope = (captureContext )(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = { ...this._tags, ...captureContext._tags };\n      this._extra = { ...this._extra, ...captureContext._extra };\n      this._contexts = { ...this._contexts, ...captureContext._contexts };\n      if (captureContext._user && Object.keys(captureContext._user).length) {\n        this._user = captureContext._user;\n      }\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n      if (captureContext._requestSession) {\n        this._requestSession = captureContext._requestSession;\n      }\n    } else if (isPlainObject(captureContext)) {\n      // eslint-disable-next-line no-param-reassign\n      captureContext = captureContext ;\n      this._tags = { ...this._tags, ...captureContext.tags };\n      this._extra = { ...this._extra, ...captureContext.extra };\n      this._contexts = { ...this._contexts, ...captureContext.contexts };\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n      if (captureContext.requestSession) {\n        this._requestSession = captureContext.requestSession;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clear() {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._requestSession = undefined;\n    this._span = undefined;\n    this._session = undefined;\n    this._notifyScopeListeners();\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, maxBreadcrumbs) {\n    const maxCrumbs = typeof maxBreadcrumbs === 'number' ? maxBreadcrumbs : DEFAULT_MAX_BREADCRUMBS;\n\n    // No data has been changed, so don't notify scope listeners\n    if (maxCrumbs <= 0) {\n      return this;\n    }\n\n    const mergedBreadcrumb = {\n      timestamp: dateTimestampInSeconds(),\n      ...breadcrumb,\n    };\n    this._breadcrumbs = [...this._breadcrumbs, mergedBreadcrumb].slice(-maxCrumbs);\n    this._notifyScopeListeners();\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getLastBreadcrumb() {\n    return this._breadcrumbs[this._breadcrumbs.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearBreadcrumbs() {\n    this._breadcrumbs = [];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addAttachment(attachment) {\n    this._attachments.push(attachment);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getAttachments() {\n    return this._attachments;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearAttachments() {\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * Applies data from the scope to the event and runs all event processors on it.\n   *\n   * @param event Event\n   * @param hint Object containing additional information about the original exception, for use by the event processors.\n   * @hidden\n   */\n   applyToEvent(event, hint = {}) {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = { ...this._extra, ...event.extra };\n    }\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = { ...this._tags, ...event.tags };\n    }\n    if (this._user && Object.keys(this._user).length) {\n      event.user = { ...this._user, ...event.user };\n    }\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = { ...this._contexts, ...event.contexts };\n    }\n    if (this._level) {\n      event.level = this._level;\n    }\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    }\n\n    // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relies on that.\n    if (this._span) {\n      event.contexts = { trace: this._span.getTraceContext(), ...event.contexts };\n      const transactionName = this._span.transaction && this._span.transaction.name;\n      if (transactionName) {\n        event.tags = { transaction: transactionName, ...event.tags };\n      }\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = [...(event.breadcrumbs || []), ...this._breadcrumbs];\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n\n    event.sdkProcessingMetadata = { ...event.sdkProcessingMetadata, ...this._sdkProcessingMetadata };\n\n    return this._notifyEventProcessors([...getGlobalEventProcessors(), ...this._eventProcessors], event, hint);\n  }\n\n  /**\n   * Add data which will be accessible during event processing but won't get sent to Sentry\n   */\n   setSDKProcessingMetadata(newData) {\n    this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...newData };\n\n    return this;\n  }\n\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n   _notifyEventProcessors(\n    processors,\n    event,\n    hint,\n    index = 0,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      const processor = processors[index];\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        const result = processor({ ...event }, hint) ;\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          processor.id &&\n          result === null &&\n          logger.log(`Event processor \"${processor.id}\" dropped event`);\n\n        if (isThenable(result)) {\n          void result\n            .then(final => this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve))\n            .then(null, reject);\n        } else {\n          void this._notifyEventProcessors(processors, result, hint, index + 1)\n            .then(resolve)\n            .then(null, reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will be called on every set call.\n   */\n   _notifyScopeListeners() {\n    // We need this check for this._notifyingListeners to be able to work on scope during updates\n    // If this check is not here we'll produce endless recursion when something is done with the scope\n    // during the callback.\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      this._scopeListeners.forEach(callback => {\n        callback(this);\n      });\n      this._notifyingListeners = false;\n    }\n  }\n\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n   _applyFingerprint(event) {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint ? arrayify(event.fingerprint) : [];\n\n    // If we have something on the scope, then merge it with event\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    }\n\n    // If we have no data at all, remove empty array default\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  }\n}\n\n/**\n * Returns the global event processors.\n */\nfunction getGlobalEventProcessors() {\n  return getGlobalSingleton('globalEventProcessors', () => []);\n}\n\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\nfunction addGlobalEventProcessor(callback) {\n  getGlobalEventProcessors().push(callback);\n}\n\nexport { Scope, addGlobalEventProcessor };\n//# sourceMappingURL=scope.js.map\n","import { uuid4, dateTimestampInSeconds, consoleSandbox, logger, GLOBAL_OBJ, isNodeEnv, getGlobalSingleton } from '@sentry/utils';\nimport { DEFAULT_ENVIRONMENT } from './constants.js';\nimport { Scope } from './scope.js';\nimport { closeSession, makeSession, updateSession } from './session.js';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nconst API_VERSION = 4;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nconst DEFAULT_BREADCRUMBS = 100;\n\n/**\n * A layer in the process stack.\n * @hidden\n */\n\n/**\n * @inheritDoc\n */\nclass Hub  {\n  /** Is a {@link Layer}[] containing the client and scope */\n\n  /** Contains the last event id of a captured event.  */\n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n   constructor(client, scope = new Scope(),   _version = API_VERSION) {this._version = _version;\n    this._stack = [{ scope }];\n    if (client) {\n      this.bindClient(client);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isOlderThan(version) {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   bindClient(client) {\n    const top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   pushScope() {\n    // We want to clone the content of prev scope\n    const scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   popScope() {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   withScope(callback) {\n    const scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getClient() {\n    return this.getStackTop().client ;\n  }\n\n  /** Returns the scope of the top stack. */\n   getScope() {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n   getStack() {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n   getStackTop() {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureException(exception, hint) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error('Sentry syntheticException');\n    this._withClient((client, scope) => {\n      client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n  ) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error(message);\n    this._withClient((client, scope) => {\n      client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint) {\n    const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n    if (!event.type) {\n      this._lastEventId = eventId;\n    }\n\n    this._withClient((client, scope) => {\n      client.captureEvent(event, { ...hint, event_id: eventId }, scope);\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   lastEventId() {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, hint) {\n    const { scope, client } = this.getStackTop();\n\n    if (!client) return;\n\n    const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    const timestamp = dateTimestampInSeconds();\n    const mergedBreadcrumb = { timestamp, ...breadcrumb };\n    const finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    if (client.emit) {\n      client.emit('beforeAddBreadcrumb', finalBreadcrumb, hint);\n    }\n\n    scope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    this.getScope().setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    this.getScope().setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    this.getScope().setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this.getScope().setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    this.getScope().setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   setContext(name, context) {\n    this.getScope().setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   configureScope(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   run(callback) {\n    const oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    const client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startTransaction(context, customSamplingContext) {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   traceHeaders() {\n    return this._callExtensionMethod('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(endSession = false) {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   endSession() {\n    const layer = this.getStackTop();\n    const scope = layer.scope;\n    const session = scope.getSession();\n    if (session) {\n      closeSession(session);\n    }\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    scope.setSession();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startSession(context) {\n    const { scope, client } = this.getStackTop();\n    const { release, environment = DEFAULT_ENVIRONMENT } = (client && client.getOptions()) || {};\n\n    // Will fetch userAgent if called from browser sdk\n    const { userAgent } = GLOBAL_OBJ.navigator || {};\n\n    const session = makeSession({\n      release,\n      environment,\n      user: scope.getUser(),\n      ...(userAgent && { userAgent }),\n      ...context,\n    });\n\n    // End existing session if there's one\n    const currentSession = scope.getSession && scope.getSession();\n    if (currentSession && currentSession.status === 'ok') {\n      updateSession(currentSession, { status: 'exited' });\n    }\n    this.endSession();\n\n    // Afterwards we set the new session on the scope\n    scope.setSession(session);\n\n    return session;\n  }\n\n  /**\n   * Returns if default PII should be sent to Sentry and propagated in ourgoing requests\n   * when Tracing is used.\n   */\n   shouldSendDefaultPii() {\n    const client = this.getClient();\n    const options = client && client.getOptions();\n    return Boolean(options && options.sendDefaultPii);\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n   _sendSessionUpdate() {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    const session = scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n   _withClient(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(client, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   _callExtensionMethod(method, ...args) {\n    const carrier = getMainCarrier();\n    const sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/**\n * Returns the global shim registry.\n *\n * FIXME: This function is problematic, because despite always returning a valid Carrier,\n * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check\n * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.\n **/\nfunction getMainCarrier() {\n  GLOBAL_OBJ.__SENTRY__ = GLOBAL_OBJ.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return GLOBAL_OBJ;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nfunction makeMain(hub) {\n  const registry = getMainCarrier();\n  const oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nfunction getCurrentHub() {\n  // Get main carrier (global for every environment)\n  const registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry) {\n  try {\n    const sentry = getMainCarrier().__SENTRY__;\n    const activeDomain = sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      const registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier) {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nfunction getHubFromCarrier(carrier) {\n  return getGlobalSingleton('hub', () => new Hub(), carrier);\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nfunction setHubOnCarrier(carrier, hub) {\n  if (!carrier) return false;\n  const __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});\n  __SENTRY__.hub = hub;\n  return true;\n}\n\nexport { API_VERSION, Hub, getCurrentHub, getHubFromCarrier, getMainCarrier, makeMain, setHubOnCarrier };\n//# sourceMappingURL=hub.js.map\n","import { getCurrentHub } from '../hub.js';\n\n// Treeshakable guard to remove all code related to tracing\n\n/**\n * Determines if tracing is currently enabled.\n *\n * Tracing is enabled when at least one of `tracesSampleRate` and `tracesSampler` is defined in the SDK config.\n */\nfunction hasTracingEnabled(\n  maybeOptions,\n) {\n  if (typeof __SENTRY_TRACING__ === 'boolean' && !__SENTRY_TRACING__) {\n    return false;\n  }\n\n  const client = getCurrentHub().getClient();\n  const options = maybeOptions || (client && client.getOptions());\n  return !!options && (options.enableTracing || 'tracesSampleRate' in options || 'tracesSampler' in options);\n}\n\nexport { hasTracingEnabled };\n//# sourceMappingURL=hasTracingEnabled.js.map\n","import { getCurrentHub } from '../hub.js';\nexport { TRACEPARENT_REGEXP, extractTraceparentData, stripUrlQueryAndFragment } from '@sentry/utils';\n\n/** Grabs active transaction off scope, if any */\nfunction getActiveTransaction(maybeHub) {\n  const hub = maybeHub || getCurrentHub();\n  const scope = hub.getScope();\n  return scope.getTransaction() ;\n}\n\nexport { getActiveTransaction };\n//# sourceMappingURL=utils.js.map\n","import { addInstrumentationHandler, logger } from '@sentry/utils';\nimport { getActiveTransaction } from './utils.js';\n\nlet errorsInstrumented = false;\n\n/**\n * Configures global error listeners\n */\nfunction registerErrorInstrumentation() {\n  if (errorsInstrumented) {\n    return;\n  }\n\n  errorsInstrumented = true;\n  addInstrumentationHandler('error', errorCallback);\n  addInstrumentationHandler('unhandledrejection', errorCallback);\n}\n\n/**\n * If an error or unhandled promise occurs, we mark the active transaction as failed\n */\nfunction errorCallback() {\n  const activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    const status = 'internal_error';\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Transaction: ${status} -> Global error occured`);\n    activeTransaction.setStatus(status);\n  }\n}\n\n// The function name will be lost when bundling but we need to be able to identify this listener later to maintain the\n// node.js default exit behaviour\nerrorCallback.tag = 'sentry_tracingErrorCallback';\n\nexport { registerErrorInstrumentation };\n//# sourceMappingURL=errors.js.map\n","import { uuid4, timestampWithMs, logger, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Keeps track of finished spans for a given transaction\n * @internal\n * @hideconstructor\n * @hidden\n */\nclass SpanRecorder {\n   __init() {this.spans = [];}\n\n   constructor(maxlen = 1000) {SpanRecorder.prototype.__init.call(this);\n    this._maxlen = maxlen;\n  }\n\n  /**\n   * This is just so that we don't run out of memory while recording a lot\n   * of spans. At some point we just stop and flush out the start of the\n   * trace tree (i.e.the first n spans with the smallest\n   * start_timestamp).\n   */\n   add(span) {\n    if (this.spans.length > this._maxlen) {\n      span.spanRecorder = undefined;\n    } else {\n      this.spans.push(span);\n    }\n  }\n}\n\n/**\n * Span contains all data about a span\n */\nclass Span  {\n  /**\n   * @inheritDoc\n   */\n   __init2() {this.traceId = uuid4();}\n\n  /**\n   * @inheritDoc\n   */\n   __init3() {this.spanId = uuid4().substring(16);}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * Internal keeper of the status\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * Timestamp in seconds when the span was created.\n   */\n   __init4() {this.startTimestamp = timestampWithMs();}\n\n  /**\n   * Timestamp in seconds when the span ended.\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   __init5() {this.tags = {};}\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   __init6() {this.data = {};}\n\n  /**\n   * List of spans that were finalized\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * The instrumenter that created this span.\n   */\n   __init7() {this.instrumenter = 'sentry';}\n\n  /**\n   * You should never call the constructor manually, always use `Sentry.startTransaction()`\n   * or call `startChild()` on an existing span.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(spanContext) {Span.prototype.__init2.call(this);Span.prototype.__init3.call(this);Span.prototype.__init4.call(this);Span.prototype.__init5.call(this);Span.prototype.__init6.call(this);Span.prototype.__init7.call(this);\n    if (!spanContext) {\n      return this;\n    }\n    if (spanContext.traceId) {\n      this.traceId = spanContext.traceId;\n    }\n    if (spanContext.spanId) {\n      this.spanId = spanContext.spanId;\n    }\n    if (spanContext.parentSpanId) {\n      this.parentSpanId = spanContext.parentSpanId;\n    }\n    // We want to include booleans as well here\n    if ('sampled' in spanContext) {\n      this.sampled = spanContext.sampled;\n    }\n    if (spanContext.op) {\n      this.op = spanContext.op;\n    }\n    if (spanContext.description) {\n      this.description = spanContext.description;\n    }\n    if (spanContext.data) {\n      this.data = spanContext.data;\n    }\n    if (spanContext.tags) {\n      this.tags = spanContext.tags;\n    }\n    if (spanContext.status) {\n      this.status = spanContext.status;\n    }\n    if (spanContext.startTimestamp) {\n      this.startTimestamp = spanContext.startTimestamp;\n    }\n    if (spanContext.endTimestamp) {\n      this.endTimestamp = spanContext.endTimestamp;\n    }\n    if (spanContext.instrumenter) {\n      this.instrumenter = spanContext.instrumenter;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startChild(\n    spanContext,\n  ) {\n    const childSpan = new Span({\n      ...spanContext,\n      parentSpanId: this.spanId,\n      sampled: this.sampled,\n      traceId: this.traceId,\n    });\n\n    childSpan.spanRecorder = this.spanRecorder;\n    if (childSpan.spanRecorder) {\n      childSpan.spanRecorder.add(childSpan);\n    }\n\n    childSpan.transaction = this.transaction;\n\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && childSpan.transaction) {\n      const opStr = (spanContext && spanContext.op) || '< unknown op >';\n      const nameStr = childSpan.transaction.name || '< unknown name >';\n      const idStr = childSpan.transaction.spanId;\n\n      const logMessage = `[Tracing] Starting '${opStr}' span on transaction '${nameStr}' (${idStr}).`;\n      childSpan.transaction.metadata.spanMetadata[childSpan.spanId] = { logMessage };\n      logger.log(logMessage);\n    }\n\n    return childSpan;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this.tags = { ...this.tags, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   setData(key, value) {\n    this.data = { ...this.data, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setStatus(value) {\n    this.status = value;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setHttpStatus(httpStatus) {\n    this.setTag('http.status_code', String(httpStatus));\n    const spanStatus = spanStatusfromHttpCode(httpStatus);\n    if (spanStatus !== 'unknown_error') {\n      this.setStatus(spanStatus);\n    }\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isSuccess() {\n    return this.status === 'ok';\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    if (\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      // Don't call this for transactions\n      this.transaction &&\n      this.transaction.spanId !== this.spanId\n    ) {\n      const { logMessage } = this.transaction.metadata.spanMetadata[this.spanId];\n      if (logMessage) {\n        logger.log((logMessage ).replace('Starting', 'Finishing'));\n      }\n    }\n\n    this.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toTraceparent() {\n    let sampledString = '';\n    if (this.sampled !== undefined) {\n      sampledString = this.sampled ? '-1' : '-0';\n    }\n    return `${this.traceId}-${this.spanId}${sampledString}`;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    return dropUndefinedKeys({\n      data: this.data,\n      description: this.description,\n      endTimestamp: this.endTimestamp,\n      op: this.op,\n      parentSpanId: this.parentSpanId,\n      sampled: this.sampled,\n      spanId: this.spanId,\n      startTimestamp: this.startTimestamp,\n      status: this.status,\n      tags: this.tags,\n      traceId: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(spanContext) {\n    this.data = spanContext.data || {};\n    this.description = spanContext.description;\n    this.endTimestamp = spanContext.endTimestamp;\n    this.op = spanContext.op;\n    this.parentSpanId = spanContext.parentSpanId;\n    this.sampled = spanContext.sampled;\n    this.spanId = spanContext.spanId || this.spanId;\n    this.startTimestamp = spanContext.startTimestamp || this.startTimestamp;\n    this.status = spanContext.status;\n    this.tags = spanContext.tags || {};\n    this.traceId = spanContext.traceId || this.traceId;\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTraceContext() {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      trace_id: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toJSON()\n\n {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      start_timestamp: this.startTimestamp,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      timestamp: this.endTimestamp,\n      trace_id: this.traceId,\n    });\n  }\n}\n\n/**\n * Converts a HTTP status code into a {@link SpanStatusType}.\n *\n * @param httpStatus The HTTP response status code.\n * @returns The span status or unknown_error.\n */\nfunction spanStatusfromHttpCode(httpStatus) {\n  if (httpStatus < 400 && httpStatus >= 100) {\n    return 'ok';\n  }\n\n  if (httpStatus >= 400 && httpStatus < 500) {\n    switch (httpStatus) {\n      case 401:\n        return 'unauthenticated';\n      case 403:\n        return 'permission_denied';\n      case 404:\n        return 'not_found';\n      case 409:\n        return 'already_exists';\n      case 413:\n        return 'failed_precondition';\n      case 429:\n        return 'resource_exhausted';\n      default:\n        return 'invalid_argument';\n    }\n  }\n\n  if (httpStatus >= 500 && httpStatus < 600) {\n    switch (httpStatus) {\n      case 501:\n        return 'unimplemented';\n      case 503:\n        return 'unavailable';\n      case 504:\n        return 'deadline_exceeded';\n      default:\n        return 'internal_error';\n    }\n  }\n\n  return 'unknown_error';\n}\n\nexport { Span, SpanRecorder, spanStatusfromHttpCode };\n//# sourceMappingURL=span.js.map\n","import { logger, dropUndefinedKeys } from '@sentry/utils';\nimport { DEFAULT_ENVIRONMENT } from '../constants.js';\nimport { getCurrentHub } from '../hub.js';\nimport { Span, SpanRecorder } from './span.js';\n\n/** JSDoc */\nclass Transaction extends Span  {\n\n  /**\n   * The reference to the current hub.\n   */\n\n   __init() {this._measurements = {};}\n\n   __init2() {this._contexts = {};}\n\n   __init3() {this._frozenDynamicSamplingContext = undefined;}\n\n  /**\n   * This constructor should never be called manually. Those instrumenting tracing should use\n   * `Sentry.startTransaction()`, and internal methods should use `hub.startTransaction()`.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(transactionContext, hub) {\n    super(transactionContext);Transaction.prototype.__init.call(this);Transaction.prototype.__init2.call(this);Transaction.prototype.__init3.call(this);\n    this._hub = hub || getCurrentHub();\n\n    this._name = transactionContext.name || '';\n\n    this.metadata = {\n      source: 'custom',\n      ...transactionContext.metadata,\n      spanMetadata: {},\n    };\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    // this is because transactions are also spans, and spans have a transaction pointer\n    this.transaction = this;\n\n    // If Dynamic Sampling Context is provided during the creation of the transaction, we freeze it as it usually means\n    // there is incoming Dynamic Sampling Context. (Either through an incoming request, a baggage meta-tag, or other means)\n    const incomingDynamicSamplingContext = this.metadata.dynamicSamplingContext;\n    if (incomingDynamicSamplingContext) {\n      // We shallow copy this in case anything writes to the original reference of the passed in `dynamicSamplingContext`\n      this._frozenDynamicSamplingContext = { ...incomingDynamicSamplingContext };\n    }\n  }\n\n  /** Getter for `name` property */\n   get name() {\n    return this._name;\n  }\n\n  /** Setter for `name` property, which also sets `source` as custom */\n   set name(newName) {\n    this.setName(newName);\n  }\n\n  /**\n   * JSDoc\n   */\n   setName(name, source = 'custom') {\n    this._name = name;\n    this.metadata.source = source;\n  }\n\n  /**\n   * Attaches SpanRecorder to the span itself\n   * @param maxlen maximum number of spans that can be recorded\n   */\n   initSpanRecorder(maxlen = 1000) {\n    if (!this.spanRecorder) {\n      this.spanRecorder = new SpanRecorder(maxlen);\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts[key] = context;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMeasurement(name, value, unit = '') {\n    this._measurements[name] = { value, unit };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMetadata(newMetadata) {\n    this.metadata = { ...this.metadata, ...newMetadata };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    // This transaction is already finished, so we should not flush it again.\n    if (this.endTimestamp !== undefined) {\n      return undefined;\n    }\n\n    if (!this.name) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Transaction has no name, falling back to `<unlabeled transaction>`.');\n      this.name = '<unlabeled transaction>';\n    }\n\n    // just sets the end timestamp\n    super.finish(endTimestamp);\n\n    const client = this._hub.getClient();\n    if (client && client.emit) {\n      client.emit('finishTransaction', this);\n    }\n\n    if (this.sampled !== true) {\n      // At this point if `sampled !== true` we want to discard the transaction.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Discarding transaction because its trace was not chosen to be sampled.');\n\n      if (client) {\n        client.recordDroppedEvent('sample_rate', 'transaction');\n      }\n\n      return undefined;\n    }\n\n    const finishedSpans = this.spanRecorder ? this.spanRecorder.spans.filter(s => s !== this && s.endTimestamp) : [];\n\n    if (this._trimEnd && finishedSpans.length > 0) {\n      this.endTimestamp = finishedSpans.reduce((prev, current) => {\n        if (prev.endTimestamp && current.endTimestamp) {\n          return prev.endTimestamp > current.endTimestamp ? prev : current;\n        }\n        return prev;\n      }).endTimestamp;\n    }\n\n    const metadata = this.metadata;\n\n    const transaction = {\n      contexts: {\n        ...this._contexts,\n        // We don't want to override trace context\n        trace: this.getTraceContext(),\n      },\n      spans: finishedSpans,\n      start_timestamp: this.startTimestamp,\n      tags: this.tags,\n      timestamp: this.endTimestamp,\n      transaction: this.name,\n      type: 'transaction',\n      sdkProcessingMetadata: {\n        ...metadata,\n        dynamicSamplingContext: this.getDynamicSamplingContext(),\n      },\n      ...(metadata.source && {\n        transaction_info: {\n          source: metadata.source,\n        },\n      }),\n    };\n\n    const hasMeasurements = Object.keys(this._measurements).length > 0;\n\n    if (hasMeasurements) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(\n          '[Measurements] Adding measurements to transaction',\n          JSON.stringify(this._measurements, undefined, 2),\n        );\n      transaction.measurements = this._measurements;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`);\n\n    return this._hub.captureEvent(transaction);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    const spanContext = super.toContext();\n\n    return dropUndefinedKeys({\n      ...spanContext,\n      name: this.name,\n      trimEnd: this._trimEnd,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(transactionContext) {\n    super.updateWithContext(transactionContext);\n\n    this.name = transactionContext.name || '';\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    return this;\n  }\n\n  /**\n   * @inheritdoc\n   *\n   * @experimental\n   */\n   getDynamicSamplingContext() {\n    if (this._frozenDynamicSamplingContext) {\n      return this._frozenDynamicSamplingContext;\n    }\n\n    const hub = this._hub || getCurrentHub();\n    const client = hub && hub.getClient();\n\n    if (!client) return {};\n\n    const { environment, release } = client.getOptions() || {};\n    const { publicKey: public_key } = client.getDsn() || {};\n\n    const maybeSampleRate = this.metadata.sampleRate;\n    const sample_rate = maybeSampleRate !== undefined ? maybeSampleRate.toString() : undefined;\n\n    const { segment: user_segment } = hub.getScope().getUser() || {};\n\n    const source = this.metadata.source;\n\n    // We don't want to have a transaction name in the DSC if the source is \"url\" because URLs might contain PII\n    const transaction = source && source !== 'url' ? this.name : undefined;\n\n    const dsc = dropUndefinedKeys({\n      environment: environment || DEFAULT_ENVIRONMENT,\n      release,\n      transaction,\n      user_segment,\n      public_key,\n      trace_id: this.traceId,\n      sample_rate,\n    });\n\n    // Uncomment if we want to make DSC immutable\n    // this._frozenDynamicSamplingContext = dsc;\n\n    client.emit && client.emit('createDsc', dsc);\n\n    return dsc;\n  }\n\n  /**\n   * Override the current hub with a new one.\n   * Used if you want another hub to finish the transaction.\n   *\n   * @internal\n   */\n   setHub(hub) {\n    this._hub = hub;\n  }\n}\n\nexport { Transaction };\n//# sourceMappingURL=transaction.js.map\n","import { logger, timestampWithMs } from '@sentry/utils';\nimport { SpanRecorder } from './span.js';\nimport { Transaction } from './transaction.js';\n\nconst TRACING_DEFAULTS = {\n  idleTimeout: 1000,\n  finalTimeout: 30000,\n  heartbeatInterval: 5000,\n};\n\nconst FINISH_REASON_TAG = 'finishReason';\n\nconst IDLE_TRANSACTION_FINISH_REASONS = [\n  'heartbeatFailed',\n  'idleTimeout',\n  'documentHidden',\n  'finalTimeout',\n  'externalFinish',\n  'cancelled',\n];\n\n/**\n * @inheritDoc\n */\nclass IdleTransactionSpanRecorder extends SpanRecorder {\n   constructor(\n      _pushActivity,\n      _popActivity,\n     transactionSpanId,\n    maxlen,\n  ) {\n    super(maxlen);this._pushActivity = _pushActivity;this._popActivity = _popActivity;this.transactionSpanId = transactionSpanId;  }\n\n  /**\n   * @inheritDoc\n   */\n   add(span) {\n    // We should make sure we do not push and pop activities for\n    // the transaction that this span recorder belongs to.\n    if (span.spanId !== this.transactionSpanId) {\n      // We patch span.finish() to pop an activity after setting an endTimestamp.\n      span.finish = (endTimestamp) => {\n        span.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n        this._popActivity(span.spanId);\n      };\n\n      // We should only push new activities if the span does not have an end timestamp.\n      if (span.endTimestamp === undefined) {\n        this._pushActivity(span.spanId);\n      }\n    }\n\n    super.add(span);\n  }\n}\n\n/**\n * An IdleTransaction is a transaction that automatically finishes. It does this by tracking child spans as activities.\n * You can have multiple IdleTransactions active, but if the `onScope` option is specified, the idle transaction will\n * put itself on the scope on creation.\n */\nclass IdleTransaction extends Transaction {\n  // Activities store a list of active spans\n   __init() {this.activities = {};}\n\n  // Track state of activities in previous heartbeat\n\n  // Amount of times heartbeat has counted. Will cause transaction to finish after 3 beats.\n   __init2() {this._heartbeatCounter = 0;}\n\n  // We should not use heartbeat if we finished a transaction\n   __init3() {this._finished = false;}\n\n  // Idle timeout was canceled and we should finish the transaction with the last span end.\n   __init4() {this._idleTimeoutCanceledPermanently = false;}\n\n    __init5() {this._beforeFinishCallbacks = [];}\n\n  /**\n   * Timer that tracks Transaction idleTimeout\n   */\n\n   __init6() {this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[4];}\n\n   constructor(\n    transactionContext,\n      _idleHub,\n    /**\n     * The time to wait in ms until the idle transaction will be finished. This timer is started each time\n     * there are no active spans on this transaction.\n     */\n      _idleTimeout = TRACING_DEFAULTS.idleTimeout,\n    /**\n     * The final value in ms that a transaction cannot exceed\n     */\n      _finalTimeout = TRACING_DEFAULTS.finalTimeout,\n      _heartbeatInterval = TRACING_DEFAULTS.heartbeatInterval,\n    // Whether or not the transaction should put itself on the scope when it starts and pop itself off when it ends\n      _onScope = false,\n  ) {\n    super(transactionContext, _idleHub);this._idleHub = _idleHub;this._idleTimeout = _idleTimeout;this._finalTimeout = _finalTimeout;this._heartbeatInterval = _heartbeatInterval;this._onScope = _onScope;IdleTransaction.prototype.__init.call(this);IdleTransaction.prototype.__init2.call(this);IdleTransaction.prototype.__init3.call(this);IdleTransaction.prototype.__init4.call(this);IdleTransaction.prototype.__init5.call(this);IdleTransaction.prototype.__init6.call(this);\n    if (_onScope) {\n      // There should only be one active transaction on the scope\n      clearActiveTransaction(_idleHub);\n\n      // We set the transaction here on the scope so error events pick up the trace\n      // context and attach it to the error.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`);\n      _idleHub.configureScope(scope => scope.setSpan(this));\n    }\n\n    this._restartIdleTimeout();\n    setTimeout(() => {\n      if (!this._finished) {\n        this.setStatus('deadline_exceeded');\n        this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[3];\n        this.finish();\n      }\n    }, this._finalTimeout);\n  }\n\n  /** {@inheritDoc} */\n   finish(endTimestamp = timestampWithMs()) {\n    this._finished = true;\n    this.activities = {};\n\n    if (this.op === 'ui.action.click') {\n      this.setTag(FINISH_REASON_TAG, this._finishReason);\n    }\n\n    if (this.spanRecorder) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log('[Tracing] finishing IdleTransaction', new Date(endTimestamp * 1000).toISOString(), this.op);\n\n      for (const callback of this._beforeFinishCallbacks) {\n        callback(this, endTimestamp);\n      }\n\n      this.spanRecorder.spans = this.spanRecorder.spans.filter((span) => {\n        // If we are dealing with the transaction itself, we just return it\n        if (span.spanId === this.spanId) {\n          return true;\n        }\n\n        // We cancel all pending spans with status \"cancelled\" to indicate the idle transaction was finished early\n        if (!span.endTimestamp) {\n          span.endTimestamp = endTimestamp;\n          span.setStatus('cancelled');\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log('[Tracing] cancelling span since transaction ended early', JSON.stringify(span, undefined, 2));\n        }\n\n        const keepSpan = span.startTimestamp < endTimestamp;\n        if (!keepSpan) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log(\n              '[Tracing] discarding Span since it happened after Transaction was finished',\n              JSON.stringify(span, undefined, 2),\n            );\n        }\n        return keepSpan;\n      });\n\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] flushing IdleTransaction');\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] No active IdleTransaction');\n    }\n\n    // if `this._onScope` is `true`, the transaction put itself on the scope when it started\n    if (this._onScope) {\n      clearActiveTransaction(this._idleHub);\n    }\n\n    return super.finish(endTimestamp);\n  }\n\n  /**\n   * Register a callback function that gets excecuted before the transaction finishes.\n   * Useful for cleanup or if you want to add any additional spans based on current context.\n   *\n   * This is exposed because users have no other way of running something before an idle transaction\n   * finishes.\n   */\n   registerBeforeFinishCallback(callback) {\n    this._beforeFinishCallbacks.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   initSpanRecorder(maxlen) {\n    if (!this.spanRecorder) {\n      const pushActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._pushActivity(id);\n      };\n      const popActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._popActivity(id);\n      };\n\n      this.spanRecorder = new IdleTransactionSpanRecorder(pushActivity, popActivity, this.spanId, maxlen);\n\n      // Start heartbeat so that transactions do not run forever.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Starting heartbeat');\n      this._pingHeartbeat();\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * Cancels the existing idle timeout, if there is one.\n   * @param restartOnChildSpanChange Default is `true`.\n   *                                 If set to false the transaction will end\n   *                                 with the last child span.\n   */\n   cancelIdleTimeout(\n    endTimestamp,\n    {\n      restartOnChildSpanChange,\n    }\n\n = {\n      restartOnChildSpanChange: true,\n    },\n  ) {\n    this._idleTimeoutCanceledPermanently = restartOnChildSpanChange === false;\n    if (this._idleTimeoutID) {\n      clearTimeout(this._idleTimeoutID);\n      this._idleTimeoutID = undefined;\n\n      if (Object.keys(this.activities).length === 0 && this._idleTimeoutCanceledPermanently) {\n        this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[5];\n        this.finish(endTimestamp);\n      }\n    }\n  }\n\n  /**\n   * Restarts idle timeout, if there is no running idle timeout it will start one.\n   */\n   _restartIdleTimeout(endTimestamp) {\n    this.cancelIdleTimeout();\n    this._idleTimeoutID = setTimeout(() => {\n      if (!this._finished && Object.keys(this.activities).length === 0) {\n        this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[1];\n        this.finish(endTimestamp);\n      }\n    }, this._idleTimeout);\n  }\n\n  /**\n   * Start tracking a specific activity.\n   * @param spanId The span id that represents the activity\n   */\n   _pushActivity(spanId) {\n    this.cancelIdleTimeout(undefined, { restartOnChildSpanChange: !this._idleTimeoutCanceledPermanently });\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] pushActivity: ${spanId}`);\n    this.activities[spanId] = true;\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n  }\n\n  /**\n   * Remove an activity from usage\n   * @param spanId The span id that represents the activity\n   */\n   _popActivity(spanId) {\n    if (this.activities[spanId]) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] popActivity ${spanId}`);\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this.activities[spanId];\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n    }\n\n    if (Object.keys(this.activities).length === 0) {\n      const endTimestamp = timestampWithMs();\n      if (this._idleTimeoutCanceledPermanently) {\n        this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[5];\n        this.finish(endTimestamp);\n      } else {\n        // We need to add the timeout here to have the real endtimestamp of the transaction\n        // Remember timestampWithMs is in seconds, timeout is in ms\n        this._restartIdleTimeout(endTimestamp + this._idleTimeout / 1000);\n      }\n    }\n  }\n\n  /**\n   * Checks when entries of this.activities are not changing for 3 beats.\n   * If this occurs we finish the transaction.\n   */\n   _beat() {\n    // We should not be running heartbeat if the idle transaction is finished.\n    if (this._finished) {\n      return;\n    }\n\n    const heartbeatString = Object.keys(this.activities).join('');\n\n    if (heartbeatString === this._prevHeartbeatString) {\n      this._heartbeatCounter++;\n    } else {\n      this._heartbeatCounter = 1;\n    }\n\n    this._prevHeartbeatString = heartbeatString;\n\n    if (this._heartbeatCounter >= 3) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Transaction finished because of no change for 3 heart beats');\n      this.setStatus('deadline_exceeded');\n      this._finishReason = IDLE_TRANSACTION_FINISH_REASONS[0];\n      this.finish();\n    } else {\n      this._pingHeartbeat();\n    }\n  }\n\n  /**\n   * Pings the heartbeat\n   */\n   _pingHeartbeat() {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`);\n    setTimeout(() => {\n      this._beat();\n    }, this._heartbeatInterval);\n  }\n}\n\n/**\n * Reset transaction on scope to `undefined`\n */\nfunction clearActiveTransaction(hub) {\n  const scope = hub.getScope();\n  if (scope.getTransaction()) {\n    scope.setSpan(undefined);\n  }\n}\n\nexport { IdleTransaction, IdleTransactionSpanRecorder, TRACING_DEFAULTS };\n//# sourceMappingURL=idletransaction.js.map\n","import { logger, isNaN } from '@sentry/utils';\nimport { getMainCarrier } from '../hub.js';\nimport { hasTracingEnabled } from '../utils/hasTracingEnabled.js';\nimport { registerErrorInstrumentation } from './errors.js';\nimport { IdleTransaction } from './idletransaction.js';\nimport { Transaction } from './transaction.js';\n\n/** Returns all trace headers that are currently on the top scope. */\nfunction traceHeaders() {\n  const scope = this.getScope();\n  const span = scope.getSpan();\n\n  return span\n    ? {\n        'sentry-trace': span.toTraceparent(),\n      }\n    : {};\n}\n\n/**\n * Makes a sampling decision for the given transaction and stores it on the transaction.\n *\n * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n * sent to Sentry.\n *\n * @param transaction: The transaction needing a sampling decision\n * @param options: The current client's options, so we can access `tracesSampleRate` and/or `tracesSampler`\n * @param samplingContext: Default and user-provided data which may be used to help make the decision\n *\n * @returns The given transaction with its `sampled` value set\n */\nfunction sample(\n  transaction,\n  options,\n  samplingContext,\n) {\n  // nothing to do if tracing is not enabled\n  if (!hasTracingEnabled(options)) {\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n  if (transaction.sampled !== undefined) {\n    transaction.setMetadata({\n      sampleRate: Number(transaction.sampled),\n    });\n    return transaction;\n  }\n\n  // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` nor `enableTracing` were defined, so one of these should\n  // work; prefer the hook if so\n  let sampleRate;\n  if (typeof options.tracesSampler === 'function') {\n    sampleRate = options.tracesSampler(samplingContext);\n    transaction.setMetadata({\n      sampleRate: Number(sampleRate),\n    });\n  } else if (samplingContext.parentSampled !== undefined) {\n    sampleRate = samplingContext.parentSampled;\n  } else if (typeof options.tracesSampleRate !== 'undefined') {\n    sampleRate = options.tracesSampleRate;\n    transaction.setMetadata({\n      sampleRate: Number(sampleRate),\n    });\n  } else {\n    // When `enableTracing === true`, we use a sample rate of 100%\n    sampleRate = 1;\n    transaction.setMetadata({\n      sampleRate,\n    });\n  }\n\n  // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n  // only valid values are booleans or numbers between 0 and 1.)\n  if (!isValidSampleRate(sampleRate)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('[Tracing] Discarding transaction because of invalid sample rate.');\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it's a sign the transaction should be dropped\n  if (!sampleRate) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because ${\n          typeof options.tracesSampler === 'function'\n            ? 'tracesSampler returned 0 or false'\n            : 'a negative sampling decision was inherited or tracesSampleRate is set to 0'\n        }`,\n      );\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n  // a boolean, the < comparison will cause it to be automatically cast to 1 if it's true and 0 if it's false.\n  transaction.sampled = Math.random() < (sampleRate );\n\n  // if we're not going to keep it, we're done\n  if (!transaction.sampled) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(\n          sampleRate,\n        )})`,\n      );\n    return transaction;\n  }\n\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`);\n  return transaction;\n}\n\n/**\n * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n */\nfunction isValidSampleRate(rate) {\n  // we need to check NaN explicitly because it's of type 'number' and therefore wouldn't get caught by this typecheck\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if (isNaN(rate) || !(typeof rate === 'number' || typeof rate === 'boolean')) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(\n          rate,\n        )} of type ${JSON.stringify(typeof rate)}.`,\n      );\n    return false;\n  }\n\n  // in case sampleRate is a boolean, it will get automatically cast to 1 if it's true and 0 if it's false\n  if (rate < 0 || rate > 1) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`);\n    return false;\n  }\n  return true;\n}\n\n/**\n * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n *\n * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n * \"extension method.\"\n *\n * @param this: The Hub starting the transaction\n * @param transactionContext: Data used to configure the transaction\n * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n *\n * @returns The new transaction\n *\n * @see {@link Hub.startTransaction}\n */\nfunction _startTransaction(\n\n  transactionContext,\n  customSamplingContext,\n) {\n  const client = this.getClient();\n  const options = (client && client.getOptions()) || {};\n\n  const configInstrumenter = options.instrumenter || 'sentry';\n  const transactionInstrumenter = transactionContext.instrumenter || 'sentry';\n\n  if (configInstrumenter !== transactionInstrumenter) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.error(\n        `A transaction was started with instrumenter=\\`${transactionInstrumenter}\\`, but the SDK is configured with the \\`${configInstrumenter}\\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`,\n      );\n\n    transactionContext.sampled = false;\n  }\n\n  let transaction = new Transaction(transactionContext, this);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  if (client && client.emit) {\n    client.emit('startTransaction', transaction);\n  }\n  return transaction;\n}\n\n/**\n * Create new idle transaction.\n */\nfunction startIdleTransaction(\n  hub,\n  transactionContext,\n  idleTimeout,\n  finalTimeout,\n  onScope,\n  customSamplingContext,\n  heartbeatInterval,\n) {\n  const client = hub.getClient();\n  const options = (client && client.getOptions()) || {};\n\n  let transaction = new IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, heartbeatInterval, onScope);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  if (client && client.emit) {\n    client.emit('startTransaction', transaction);\n  }\n  return transaction;\n}\n\n/**\n * Adds tracing extensions to the global hub.\n */\nfunction addTracingExtensions() {\n  const carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n  carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n  if (!carrier.__SENTRY__.extensions.startTransaction) {\n    carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n  }\n  if (!carrier.__SENTRY__.extensions.traceHeaders) {\n    carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n  }\n\n  registerErrorInstrumentation();\n}\n\nexport { addTracingExtensions, startIdleTransaction };\n//# sourceMappingURL=hubextensions.js.map\n","/**\n * Polyfill for the optional chain operator, `?.`, given previous conversion of the expression into an array of values,\n * descriptors, and functions.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n * See https://github.com/alangpierce/sucrase/blob/265887868966917f3b924ce38dfad01fbab1329f/src/transformers/OptionalChainingNullishTransformer.ts#L15\n *\n * @param ops Array result of expression conversion\n * @returns The value of the expression\n */\nfunction _optionalChain(ops) {\n  let lastAccessLHS = undefined;\n  let value = ops[0];\n  let i = 1;\n  while (i < ops.length) {\n    const op = ops[i] ;\n    const fn = ops[i + 1] ;\n    i += 2;\n    // by checking for loose equality to `null`, we catch both `null` and `undefined`\n    if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n      // really we're meaning to return `undefined` as an actual value here, but it saves bytes not to write it\n      return;\n    }\n    if (op === 'access' || op === 'optionalAccess') {\n      lastAccessLHS = value;\n      value = fn(value);\n    } else if (op === 'call' || op === 'optionalCall') {\n      value = fn((...args) => (value ).call(lastAccessLHS, ...args));\n      lastAccessLHS = undefined;\n    }\n  }\n  return value;\n}\n\n// Sucrase version\n// function _optionalChain(ops) {\n//   let lastAccessLHS = undefined;\n//   let value = ops[0];\n//   let i = 1;\n//   while (i < ops.length) {\n//     const op = ops[i];\n//     const fn = ops[i + 1];\n//     i += 2;\n//     if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n//       return undefined;\n//     }\n//     if (op === 'access' || op === 'optionalAccess') {\n//       lastAccessLHS = value;\n//       value = fn(value);\n//     } else if (op === 'call' || op === 'optionalCall') {\n//       value = fn((...args) => value.call(lastAccessLHS, ...args));\n//       lastAccessLHS = undefined;\n//     }\n//   }\n//   return value;\n// }\n\nexport { _optionalChain };\n//# sourceMappingURL=_optionalChain.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\n\n/**\n * Check if Sentry auto-instrumentation should be disabled.\n *\n * @param getCurrentHub A method to fetch the current hub\n * @returns boolean\n */\nfunction shouldDisableAutoInstrumentation(getCurrentHub) {\n  const clientOptions = _optionalChain([getCurrentHub, 'call', _ => _(), 'access', _2 => _2.getClient, 'call', _3 => _3(), 'optionalAccess', _4 => _4.getOptions, 'call', _5 => _5()]);\n  const instrumenter = _optionalChain([clientOptions, 'optionalAccess', _6 => _6.instrumenter]) || 'sentry';\n\n  return instrumenter !== 'sentry';\n}\n\nexport { shouldDisableAutoInstrumentation };\n//# sourceMappingURL=node-utils.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, getNumberOfUrlSegments, extractPathForTransaction, isRegExp } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n/**\n * Express integration\n *\n * Provides an request and error handler for Express framework as well as tracing capabilities\n */\nclass Express  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Express';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Express.id;}\n\n  /**\n   * Express App instance\n   */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {Express.prototype.__init.call(this);\n    this._router = options.router || options.app;\n    this._methods = (Array.isArray(options.methods) ? options.methods : []).concat('use');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (!this._router) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('ExpressIntegration is missing an Express instance');\n      return;\n    }\n\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Express Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    instrumentMiddlewares(this._router, this._methods);\n    instrumentRouter(this._router );\n  }\n}Express.__initStatic();\n\n/**\n * Wraps original middleware function in a tracing call, which stores the info about the call as a span,\n * and finishes it once the middleware is done invoking.\n *\n * Express middlewares have 3 various forms, thus we have to take care of all of them:\n * // sync\n * app.use(function (req, res) { ... })\n * // async\n * app.use(function (req, res, next) { ... })\n * // error handler\n * app.use(function (err, req, res, next) { ... })\n *\n * They all internally delegate to the `router[method]` of the given application instance.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/no-explicit-any\nfunction wrap(fn, method) {\n  const arity = fn.length;\n\n  switch (arity) {\n    case 2: {\n      return function ( req, res) {\n        const transaction = res.__sentry_transaction;\n        if (transaction) {\n          const span = transaction.startChild({\n            description: fn.name,\n            op: `middleware.express.${method}`,\n          });\n          res.once('finish', () => {\n            span.finish();\n          });\n        }\n        return fn.call(this, req, res);\n      };\n    }\n    case 3: {\n      return function (\n\n        req,\n        res,\n        next,\n      ) {\n        const transaction = res.__sentry_transaction;\n        const span = _optionalChain([transaction, 'optionalAccess', _2 => _2.startChild, 'call', _3 => _3({\n          description: fn.name,\n          op: `middleware.express.${method}`,\n        })]);\n        fn.call(this, req, res, function ( ...args) {\n          _optionalChain([span, 'optionalAccess', _4 => _4.finish, 'call', _5 => _5()]);\n          next.call(this, ...args);\n        });\n      };\n    }\n    case 4: {\n      return function (\n\n        err,\n        req,\n        res,\n        next,\n      ) {\n        const transaction = res.__sentry_transaction;\n        const span = _optionalChain([transaction, 'optionalAccess', _6 => _6.startChild, 'call', _7 => _7({\n          description: fn.name,\n          op: `middleware.express.${method}`,\n        })]);\n        fn.call(this, err, req, res, function ( ...args) {\n          _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n          next.call(this, ...args);\n        });\n      };\n    }\n    default: {\n      throw new Error(`Express middleware takes 2-4 arguments. Got: ${arity}`);\n    }\n  }\n}\n\n/**\n * Takes all the function arguments passed to the original `app` or `router` method, eg. `app.use` or `router.use`\n * and wraps every function, as well as array of functions with a call to our `wrap` method.\n * We have to take care of the arrays as well as iterate over all of the arguments,\n * as `app.use` can accept middlewares in few various forms.\n *\n * app.use([<path>], <fn>)\n * app.use([<path>], <fn>, ...<fn>)\n * app.use([<path>], ...<fn>[])\n */\nfunction wrapMiddlewareArgs(args, method) {\n  return args.map((arg) => {\n    if (typeof arg === 'function') {\n      return wrap(arg, method);\n    }\n\n    if (Array.isArray(arg)) {\n      return arg.map((a) => {\n        if (typeof a === 'function') {\n          return wrap(a, method);\n        }\n        return a;\n      });\n    }\n\n    return arg;\n  });\n}\n\n/**\n * Patches original router to utilize our tracing functionality\n */\nfunction patchMiddleware(router, method) {\n  const originalCallback = router[method];\n\n  router[method] = function (...args) {\n    return originalCallback.call(this, ...wrapMiddlewareArgs(args, method));\n  };\n\n  return router;\n}\n\n/**\n * Patches original router methods\n */\nfunction instrumentMiddlewares(router, methods = []) {\n  methods.forEach((method) => patchMiddleware(router, method));\n}\n\n/**\n * Patches the prototype of Express.Router to accumulate the resolved route\n * if a layer instance's `match` function was called and it returned a successful match.\n *\n * @see https://github.com/expressjs/express/blob/master/lib/router/index.js\n *\n * @param appOrRouter the router instance which can either be an app (i.e. top-level) or a (nested) router.\n */\nfunction instrumentRouter(appOrRouter) {\n  // This is how we can distinguish between app and routers\n  const isApp = 'settings' in appOrRouter;\n\n  // In case the app's top-level router hasn't been initialized yet, we have to do it now\n  if (isApp && appOrRouter._router === undefined && appOrRouter.lazyrouter) {\n    appOrRouter.lazyrouter();\n  }\n\n  const router = isApp ? appOrRouter._router : appOrRouter;\n\n  if (!router) {\n    /*\n    If we end up here, this means likely that this integration is used with Express 3 or Express 5.\n    For now, we don't support these versions (3 is very old and 5 is still in beta). To support Express 5,\n    we'd need to make more changes to the routing instrumentation because the router is no longer part of\n    the Express core package but maintained in its own package. The new router has different function\n    signatures and works slightly differently, demanding more changes than just taking the router from\n    `app.router` instead of `app._router`.\n    @see https://github.com/pillarjs/router\n\n    TODO: Proper Express 5 support\n    */\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.debug('Cannot instrument router for URL Parameterization (did not find a valid router).');\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.debug('Routing instrumentation is currently only supported in Express 4.');\n    return;\n  }\n\n  const routerProto = Object.getPrototypeOf(router) ;\n\n  const originalProcessParams = routerProto.process_params;\n  routerProto.process_params = function process_params(\n    layer,\n    called,\n    req,\n    res,\n    done,\n  ) {\n    // Base case: We're in the first part of the URL (thus we start with the root '/')\n    if (!req._reconstructedRoute) {\n      req._reconstructedRoute = '';\n    }\n\n    // If the layer's partial route has params, is a regex or an array, the route is stored in layer.route.\n    const { layerRoutePath, isRegex, isArray, numExtraSegments } = getLayerRoutePathInfo(layer);\n\n    if (layerRoutePath || isRegex || isArray) {\n      req._hasParameters = true;\n    }\n\n    // Otherwise, the hardcoded path (i.e. a partial route without params) is stored in layer.path\n    const partialRoute = layerRoutePath || layer.path || '';\n\n    // Normalize the partial route so that it doesn't contain leading or trailing slashes\n    // and exclude empty or '*' wildcard routes.\n    // The exclusion of '*' routes is our best effort to not \"pollute\" the transaction name\n    // with interim handlers (e.g. ones that check authentication or do other middleware stuff).\n    // We want to end up with the parameterized URL of the incoming request without any extraneous path segments.\n    const finalPartialRoute = partialRoute\n      .split('/')\n      .filter(segment => segment.length > 0 && (isRegex || isArray || !segment.includes('*')))\n      .join('/');\n\n    // If we found a valid partial URL, we append it to the reconstructed route\n    if (finalPartialRoute && finalPartialRoute.length > 0) {\n      // If the partial route is from a regex route, we append a '/' to close the regex\n      req._reconstructedRoute += `/${finalPartialRoute}${isRegex ? '/' : ''}`;\n    }\n\n    // Now we check if we are in the \"last\" part of the route. We determine this by comparing the\n    // number of URL segments from the original URL to that of our reconstructed parameterized URL.\n    // If we've reached our final destination, we update the transaction name.\n    const urlLength = getNumberOfUrlSegments(req.originalUrl || '') + numExtraSegments;\n    const routeLength = getNumberOfUrlSegments(req._reconstructedRoute);\n\n    if (urlLength === routeLength) {\n      if (!req._hasParameters) {\n        if (req._reconstructedRoute !== req.originalUrl) {\n          req._reconstructedRoute = req.originalUrl;\n        }\n      }\n\n      const transaction = res.__sentry_transaction;\n      if (transaction && transaction.metadata.source !== 'custom') {\n        // If the request URL is '/' or empty, the reconstructed route will be empty.\n        // Therefore, we fall back to setting the final route to '/' in this case.\n        const finalRoute = req._reconstructedRoute || '/';\n\n        transaction.setName(...extractPathForTransaction(req, { path: true, method: true, customRoute: finalRoute }));\n      }\n    }\n\n    return originalProcessParams.call(this, layer, called, req, res, done);\n  };\n}\n\n/**\n * Extracts and stringifies the layer's route which can either be a string with parameters (`users/:id`),\n * a RegEx (`/test/`) or an array of strings and regexes (`['/path1', /\\/path[2-5]/, /path/:id]`). Additionally\n * returns extra information about the route, such as if the route is defined as regex or as an array.\n *\n * @param layer the layer to extract the stringified route from\n *\n * @returns an object containing the stringified route, a flag determining if the route was a regex\n *          and the number of extra segments to the matched path that are additionally in the route,\n *          if the route was an array (defaults to 0).\n */\nfunction getLayerRoutePathInfo(layer) {\n  const lrp = _optionalChain([layer, 'access', _10 => _10.route, 'optionalAccess', _11 => _11.path]);\n\n  const isRegex = isRegExp(lrp);\n  const isArray = Array.isArray(lrp);\n\n  if (!lrp) {\n    return { isRegex, isArray, numExtraSegments: 0 };\n  }\n\n  const numExtraSegments = isArray\n    ? Math.max(getNumberOfArrayUrlSegments(lrp ) - getNumberOfUrlSegments(layer.path || ''), 0)\n    : 0;\n\n  const layerRoutePath = getLayerRoutePathString(isArray, lrp);\n\n  return { layerRoutePath, isRegex, isArray, numExtraSegments };\n}\n\n/**\n * Returns the number of URL segments in an array of routes\n *\n * Example: ['/api/test', /\\/api\\/post[0-9]/, '/users/:id/details`] -> 7\n */\nfunction getNumberOfArrayUrlSegments(routesArray) {\n  return routesArray.reduce((accNumSegments, currentRoute) => {\n    // array members can be a RegEx -> convert them toString\n    return accNumSegments + getNumberOfUrlSegments(currentRoute.toString());\n  }, 0);\n}\n\n/**\n * Extracts and returns the stringified version of the layers route path\n * Handles route arrays (by joining the paths together) as well as RegExp and normal\n * string values (in the latter case the toString conversion is technically unnecessary but\n * it doesn't hurt us either).\n */\nfunction getLayerRoutePathString(isArray, lrp) {\n  if (isArray) {\n    return (lrp ).map(r => r.toString()).join(',');\n  }\n  return lrp && lrp.toString();\n}\n\nexport { Express };\n//# sourceMappingURL=express.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, loadModule, fill, isThenable } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n/** Tracing integration for node-postgres package */\nclass Postgres  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Postgres';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Postgres.id;}\n\n   constructor(options = {}) {Postgres.prototype.__init.call(this);\n    this._usePgNative = !!options.usePgNative;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Postgres Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    const pkg = loadModule('pg');\n\n    if (!pkg) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Postgres Integration was unable to require `pg` package.');\n      return;\n    }\n\n    if (this._usePgNative && !_optionalChain([pkg, 'access', _2 => _2.native, 'optionalAccess', _3 => _3.Client])) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(\"Postgres Integration was unable to access 'pg-native' bindings.\");\n      return;\n    }\n\n    const { Client } = this._usePgNative ? pkg.native : pkg;\n\n    /**\n     * function (query, callback) => void\n     * function (query, params, callback) => void\n     * function (query) => Promise\n     * function (query, params) => Promise\n     * function (pg.Cursor) => pg.Cursor\n     */\n    fill(Client.prototype, 'query', function (orig) {\n      return function ( config, values, callback) {\n        const scope = getCurrentHub().getScope();\n        const parentSpan = _optionalChain([scope, 'optionalAccess', _4 => _4.getSpan, 'call', _5 => _5()]);\n        const span = _optionalChain([parentSpan, 'optionalAccess', _6 => _6.startChild, 'call', _7 => _7({\n          description: typeof config === 'string' ? config : (config ).text,\n          op: 'db',\n        })]);\n\n        if (typeof callback === 'function') {\n          return orig.call(this, config, values, function (err, result) {\n            _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n            callback(err, result);\n          });\n        }\n\n        if (typeof values === 'function') {\n          return orig.call(this, config, function (err, result) {\n            _optionalChain([span, 'optionalAccess', _10 => _10.finish, 'call', _11 => _11()]);\n            values(err, result);\n          });\n        }\n\n        const rv = typeof values !== 'undefined' ? orig.call(this, config, values) : orig.call(this, config);\n\n        if (isThenable(rv)) {\n          return rv.then((res) => {\n            _optionalChain([span, 'optionalAccess', _12 => _12.finish, 'call', _13 => _13()]);\n            return res;\n          });\n        }\n\n        _optionalChain([span, 'optionalAccess', _14 => _14.finish, 'call', _15 => _15()]);\n        return rv;\n      };\n    });\n  }\n}Postgres.__initStatic();\n\nexport { Postgres };\n//# sourceMappingURL=postgres.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, loadModule, fill } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n/** Tracing integration for node-mysql package */\nclass Mysql  {constructor() { Mysql.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Mysql';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Mysql.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Mysql Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    const pkg = loadModule('mysql/lib/Connection.js');\n\n    if (!pkg) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Mysql Integration was unable to require `mysql` package.');\n      return;\n    }\n\n    // The original function will have one of these signatures:\n    //    function (callback) => void\n    //    function (options, callback) => void\n    //    function (options, values, callback) => void\n    fill(pkg, 'createQuery', function (orig) {\n      return function ( options, values, callback) {\n        const scope = getCurrentHub().getScope();\n        const parentSpan = _optionalChain([scope, 'optionalAccess', _2 => _2.getSpan, 'call', _3 => _3()]);\n        const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5({\n          description: typeof options === 'string' ? options : (options ).sql,\n          op: 'db',\n        })]);\n\n        if (typeof callback === 'function') {\n          return orig.call(this, options, values, function (err, result, fields) {\n            _optionalChain([span, 'optionalAccess', _6 => _6.finish, 'call', _7 => _7()]);\n            callback(err, result, fields);\n          });\n        }\n\n        if (typeof values === 'function') {\n          return orig.call(this, options, function (err, result, fields) {\n            _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n            values(err, result, fields);\n          });\n        }\n\n        return orig.call(this, options, values, callback);\n      };\n    });\n  }\n}Mysql.__initStatic();\n\nexport { Mysql };\n//# sourceMappingURL=mysql.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, loadModule, fill, isThenable } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n// This allows us to use the same array for both defaults options and the type itself.\n// (note `as const` at the end to make it a union of string literal types (i.e. \"a\" | \"b\" | ... )\n// and not just a string[])\n\nconst OPERATIONS = [\n  'aggregate', // aggregate(pipeline, options, callback)\n  'bulkWrite', // bulkWrite(operations, options, callback)\n  'countDocuments', // countDocuments(query, options, callback)\n  'createIndex', // createIndex(fieldOrSpec, options, callback)\n  'createIndexes', // createIndexes(indexSpecs, options, callback)\n  'deleteMany', // deleteMany(filter, options, callback)\n  'deleteOne', // deleteOne(filter, options, callback)\n  'distinct', // distinct(key, query, options, callback)\n  'drop', // drop(options, callback)\n  'dropIndex', // dropIndex(indexName, options, callback)\n  'dropIndexes', // dropIndexes(options, callback)\n  'estimatedDocumentCount', // estimatedDocumentCount(options, callback)\n  'find', // find(query, options, callback)\n  'findOne', // findOne(query, options, callback)\n  'findOneAndDelete', // findOneAndDelete(filter, options, callback)\n  'findOneAndReplace', // findOneAndReplace(filter, replacement, options, callback)\n  'findOneAndUpdate', // findOneAndUpdate(filter, update, options, callback)\n  'indexes', // indexes(options, callback)\n  'indexExists', // indexExists(indexes, options, callback)\n  'indexInformation', // indexInformation(options, callback)\n  'initializeOrderedBulkOp', // initializeOrderedBulkOp(options, callback)\n  'insertMany', // insertMany(docs, options, callback)\n  'insertOne', // insertOne(doc, options, callback)\n  'isCapped', // isCapped(options, callback)\n  'mapReduce', // mapReduce(map, reduce, options, callback)\n  'options', // options(options, callback)\n  'parallelCollectionScan', // parallelCollectionScan(options, callback)\n  'rename', // rename(newName, options, callback)\n  'replaceOne', // replaceOne(filter, doc, options, callback)\n  'stats', // stats(options, callback)\n  'updateMany', // updateMany(filter, update, options, callback)\n  'updateOne', // updateOne(filter, update, options, callback)\n] ;\n\n// All of the operations above take `options` and `callback` as their final parameters, but some of them\n// take additional parameters as well. For those operations, this is a map of\n// { <operation name>:  [<names of additional parameters>] }, as a way to know what to call the operation's\n// positional arguments when we add them to the span's `data` object later\nconst OPERATION_SIGNATURES\n\n = {\n  // aggregate intentionally not included because `pipeline` arguments are too complex to serialize well\n  // see https://github.com/getsentry/sentry-javascript/pull/3102\n  bulkWrite: ['operations'],\n  countDocuments: ['query'],\n  createIndex: ['fieldOrSpec'],\n  createIndexes: ['indexSpecs'],\n  deleteMany: ['filter'],\n  deleteOne: ['filter'],\n  distinct: ['key', 'query'],\n  dropIndex: ['indexName'],\n  find: ['query'],\n  findOne: ['query'],\n  findOneAndDelete: ['filter'],\n  findOneAndReplace: ['filter', 'replacement'],\n  findOneAndUpdate: ['filter', 'update'],\n  indexExists: ['indexes'],\n  insertMany: ['docs'],\n  insertOne: ['doc'],\n  mapReduce: ['map', 'reduce'],\n  rename: ['newName'],\n  replaceOne: ['filter', 'doc'],\n  updateMany: ['filter', 'update'],\n  updateOne: ['filter', 'update'],\n};\n\nfunction isCursor(maybeCursor) {\n  return maybeCursor && typeof maybeCursor === 'object' && maybeCursor.once && typeof maybeCursor.once === 'function';\n}\n\n/** Tracing integration for mongo package */\nclass Mongo  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Mongo';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Mongo.id;}\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {Mongo.prototype.__init.call(this);\n    this._operations = Array.isArray(options.operations) ? options.operations : (OPERATIONS );\n    this._describeOperations = 'describeOperations' in options ? options.describeOperations : true;\n    this._useMongoose = !!options.useMongoose;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Mongo Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    const moduleName = this._useMongoose ? 'mongoose' : 'mongodb';\n    const pkg = loadModule(moduleName);\n\n    if (!pkg) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Mongo Integration was unable to require \\`${moduleName}\\` package.`);\n      return;\n    }\n\n    this._instrumentOperations(pkg.Collection, this._operations, getCurrentHub);\n  }\n\n  /**\n   * Patches original collection methods\n   */\n   _instrumentOperations(collection, operations, getCurrentHub) {\n    operations.forEach((operation) => this._patchOperation(collection, operation, getCurrentHub));\n  }\n\n  /**\n   * Patches original collection to utilize our tracing functionality\n   */\n   _patchOperation(collection, operation, getCurrentHub) {\n    if (!(operation in collection.prototype)) return;\n\n    const getSpanContext = this._getSpanContextFromOperationArguments.bind(this);\n\n    fill(collection.prototype, operation, function (orig) {\n      return function ( ...args) {\n        const lastArg = args[args.length - 1];\n        const scope = getCurrentHub().getScope();\n        const parentSpan = _optionalChain([scope, 'optionalAccess', _2 => _2.getSpan, 'call', _3 => _3()]);\n\n        // Check if the operation was passed a callback. (mapReduce requires a different check, as\n        // its (non-callback) arguments can also be functions.)\n        if (typeof lastArg !== 'function' || (operation === 'mapReduce' && args.length === 2)) {\n          const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5(getSpanContext(this, operation, args))]);\n          const maybePromiseOrCursor = orig.call(this, ...args);\n\n          if (isThenable(maybePromiseOrCursor)) {\n            return maybePromiseOrCursor.then((res) => {\n              _optionalChain([span, 'optionalAccess', _6 => _6.finish, 'call', _7 => _7()]);\n              return res;\n            });\n          }\n          // If the operation returns a Cursor\n          // we need to attach a listener to it to finish the span when the cursor is closed.\n          else if (isCursor(maybePromiseOrCursor)) {\n            const cursor = maybePromiseOrCursor ;\n\n            try {\n              cursor.once('close', () => {\n                _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n              });\n            } catch (e) {\n              // If the cursor is already closed, `once` will throw an error. In that case, we can\n              // finish the span immediately.\n              _optionalChain([span, 'optionalAccess', _10 => _10.finish, 'call', _11 => _11()]);\n            }\n\n            return cursor;\n          } else {\n            _optionalChain([span, 'optionalAccess', _12 => _12.finish, 'call', _13 => _13()]);\n            return maybePromiseOrCursor;\n          }\n        }\n\n        const span = _optionalChain([parentSpan, 'optionalAccess', _14 => _14.startChild, 'call', _15 => _15(getSpanContext(this, operation, args.slice(0, -1)))]);\n\n        return orig.call(this, ...args.slice(0, -1), function (err, result) {\n          _optionalChain([span, 'optionalAccess', _16 => _16.finish, 'call', _17 => _17()]);\n          lastArg(err, result);\n        });\n      };\n    });\n  }\n\n  /**\n   * Form a SpanContext based on the user input to a given operation.\n   */\n   _getSpanContextFromOperationArguments(\n    collection,\n    operation,\n    args,\n  ) {\n    const data = {\n      collectionName: collection.collectionName,\n      dbName: collection.dbName,\n      namespace: collection.namespace,\n    };\n    const spanContext = {\n      op: 'db',\n      description: operation,\n      data,\n    };\n\n    // If the operation takes no arguments besides `options` and `callback`, or if argument\n    // collection is disabled for this operation, just return early.\n    const signature = OPERATION_SIGNATURES[operation];\n    const shouldDescribe = Array.isArray(this._describeOperations)\n      ? this._describeOperations.includes(operation)\n      : this._describeOperations;\n\n    if (!signature || !shouldDescribe) {\n      return spanContext;\n    }\n\n    try {\n      // Special case for `mapReduce`, as the only one accepting functions as arguments.\n      if (operation === 'mapReduce') {\n        const [map, reduce] = args ;\n        data[signature[0]] = typeof map === 'string' ? map : map.name || '<anonymous>';\n        data[signature[1]] = typeof reduce === 'string' ? reduce : reduce.name || '<anonymous>';\n      } else {\n        for (let i = 0; i < signature.length; i++) {\n          data[signature[i]] = JSON.stringify(args[i]);\n        }\n      }\n    } catch (_oO) {\n      // no-empty\n    }\n\n    return spanContext;\n  }\n}Mongo.__initStatic();\n\nexport { Mongo };\n//# sourceMappingURL=mongo.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, isThenable } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\nfunction isValidPrismaClient(possibleClient) {\n  return possibleClient && !!(possibleClient )['$use'];\n}\n\n/** Tracing integration for @prisma/client package */\nclass Prisma  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Prisma';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Prisma.id;}\n\n  /**\n   * Prisma ORM Client Instance\n   */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {Prisma.prototype.__init.call(this);\n    if (isValidPrismaClient(options.client)) {\n      this._client = options.client;\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(options.client)}`,\n        );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (!this._client) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('PrismaIntegration is missing a Prisma Client Instance');\n      return;\n    }\n\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Prisma Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    this._client.$use((params, next) => {\n      const scope = getCurrentHub().getScope();\n      const parentSpan = _optionalChain([scope, 'optionalAccess', _2 => _2.getSpan, 'call', _3 => _3()]);\n\n      const action = params.action;\n      const model = params.model;\n\n      const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5({\n        description: model ? `${model} ${action}` : action,\n        op: 'db.sql.prisma',\n      })]);\n\n      const rv = next(params);\n\n      if (isThenable(rv)) {\n        return rv.then((res) => {\n          _optionalChain([span, 'optionalAccess', _6 => _6.finish, 'call', _7 => _7()]);\n          return res;\n        });\n      }\n\n      _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n      return rv;\n    });\n  }\n}Prisma.__initStatic();\n\nexport { Prisma };\n//# sourceMappingURL=prisma.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, loadModule, fill, isThenable } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n/** Tracing integration for graphql package */\nclass GraphQL  {constructor() { GraphQL.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'GraphQL';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = GraphQL.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('GraphQL Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    const pkg = loadModule\n\n('graphql/execution/execute.js');\n\n    if (!pkg) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('GraphQL Integration was unable to require graphql/execution package.');\n      return;\n    }\n\n    fill(pkg, 'execute', function (orig) {\n      return function ( ...args) {\n        const scope = getCurrentHub().getScope();\n        const parentSpan = _optionalChain([scope, 'optionalAccess', _2 => _2.getSpan, 'call', _3 => _3()]);\n\n        const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5({\n          description: 'execute',\n          op: 'graphql.execute',\n        })]);\n\n        _optionalChain([scope, 'optionalAccess', _6 => _6.setSpan, 'call', _7 => _7(span)]);\n\n        const rv = orig.call(this, ...args);\n\n        if (isThenable(rv)) {\n          return rv.then((res) => {\n            _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n            _optionalChain([scope, 'optionalAccess', _10 => _10.setSpan, 'call', _11 => _11(parentSpan)]);\n\n            return res;\n          });\n        }\n\n        _optionalChain([span, 'optionalAccess', _12 => _12.finish, 'call', _13 => _13()]);\n        _optionalChain([scope, 'optionalAccess', _14 => _14.setSpan, 'call', _15 => _15(parentSpan)]);\n        return rv;\n      };\n    });\n  }\n}GraphQL.__initStatic();\n\nexport { GraphQL };\n//# sourceMappingURL=graphql.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, loadModule, fill, arrayify, isThenable } from '@sentry/utils';\nimport { shouldDisableAutoInstrumentation } from './utils/node-utils.js';\n\n/** Tracing integration for Apollo */\nclass Apollo  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Apollo';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Apollo.id;}\n\n  /**\n   * @inheritDoc\n   */\n   constructor(\n    options = {\n      useNestjs: false,\n    },\n  ) {Apollo.prototype.__init.call(this);\n    this._useNest = !!options.useNestjs;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    if (shouldDisableAutoInstrumentation(getCurrentHub)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Apollo Integration is skipped because of instrumenter configuration.');\n      return;\n    }\n\n    if (this._useNest) {\n      const pkg = loadModule\n\n('@nestjs/graphql');\n\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Apollo-NestJS Integration was unable to require @nestjs/graphql package.');\n        return;\n      }\n\n      /**\n       * Iterate over resolvers of NestJS ResolversExplorerService before schemas are constructed.\n       */\n      fill(\n        pkg.GraphQLFactory.prototype,\n        'mergeWithSchema',\n        function (orig) {\n          return function (\n\n            ...args\n          ) {\n            fill(this.resolversExplorerService, 'explore', function (orig) {\n              return function () {\n                const resolvers = arrayify(orig.call(this));\n\n                const instrumentedResolvers = instrumentResolvers(resolvers, getCurrentHub);\n\n                return instrumentedResolvers;\n              };\n            });\n\n            return orig.call(this, ...args);\n          };\n        },\n      );\n    } else {\n      const pkg = loadModule\n\n('apollo-server-core');\n\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Apollo Integration was unable to require apollo-server-core package.');\n        return;\n      }\n\n      /**\n       * Iterate over resolvers of the ApolloServer instance before schemas are constructed.\n       */\n      fill(pkg.ApolloServerBase.prototype, 'constructSchema', function (orig) {\n        return function (\n\n) {\n          if (!this.config.resolvers) {\n            if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n              if (this.config.schema) {\n                logger.warn(\n                  'Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.' +\n                    'If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead.',\n                );\n                logger.warn();\n              } else if (this.config.modules) {\n                logger.warn(\n                  'Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.',\n                );\n              }\n\n              logger.error('Skipping tracing as no resolvers found on the `ApolloServer` instance.');\n            }\n\n            return orig.call(this);\n          }\n\n          const resolvers = arrayify(this.config.resolvers);\n\n          this.config.resolvers = instrumentResolvers(resolvers, getCurrentHub);\n\n          return orig.call(this);\n        };\n      });\n    }\n  }\n}Apollo.__initStatic();\n\nfunction instrumentResolvers(resolvers, getCurrentHub) {\n  return resolvers.map(model => {\n    Object.keys(model).forEach(resolverGroupName => {\n      Object.keys(model[resolverGroupName]).forEach(resolverName => {\n        if (typeof model[resolverGroupName][resolverName] !== 'function') {\n          return;\n        }\n\n        wrapResolver(model, resolverGroupName, resolverName, getCurrentHub);\n      });\n    });\n\n    return model;\n  });\n}\n\n/**\n * Wrap a single resolver which can be a parent of other resolvers and/or db operations.\n */\nfunction wrapResolver(\n  model,\n  resolverGroupName,\n  resolverName,\n  getCurrentHub,\n) {\n  fill(model[resolverGroupName], resolverName, function (orig) {\n    return function ( ...args) {\n      const scope = getCurrentHub().getScope();\n      const parentSpan = _optionalChain([scope, 'optionalAccess', _2 => _2.getSpan, 'call', _3 => _3()]);\n      const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5({\n        description: `${resolverGroupName}.${resolverName}`,\n        op: 'graphql.resolve',\n      })]);\n\n      const rv = orig.call(this, ...args);\n\n      if (isThenable(rv)) {\n        return rv.then((res) => {\n          _optionalChain([span, 'optionalAccess', _6 => _6.finish, 'call', _7 => _7()]);\n          return res;\n        });\n      }\n\n      _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n\n      return rv;\n    };\n  });\n}\n\nexport { Apollo };\n//# sourceMappingURL=apollo.js.map\n","import { GLOBAL_OBJ } from '@sentry/utils';\n\nconst WINDOW = GLOBAL_OBJ ;\n\nexport { WINDOW };\n//# sourceMappingURL=types.js.map\n","import { hasTracingEnabled, getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, dynamicSamplingContextToSentryBaggageHeader, isInstanceOf, BAGGAGE_HEADER_NAME, stringMatchesSomePattern } from '@sentry/utils';\n\n/* eslint-disable max-lines */\n\nconst DEFAULT_TRACE_PROPAGATION_TARGETS = ['localhost', /^\\//];\n\n/** Options for Request Instrumentation */\n\nconst defaultRequestInstrumentationOptions = {\n  traceFetch: true,\n  traceXHR: true,\n  // TODO (v8): Remove this property\n  tracingOrigins: DEFAULT_TRACE_PROPAGATION_TARGETS,\n  tracePropagationTargets: DEFAULT_TRACE_PROPAGATION_TARGETS,\n};\n\n/** Registers span creators for xhr and fetch requests  */\nfunction instrumentOutgoingRequests(_options) {\n  // eslint-disable-next-line deprecation/deprecation\n  const { traceFetch, traceXHR, tracePropagationTargets, tracingOrigins, shouldCreateSpanForRequest } = {\n    traceFetch: defaultRequestInstrumentationOptions.traceFetch,\n    traceXHR: defaultRequestInstrumentationOptions.traceXHR,\n    ..._options,\n  };\n\n  const shouldCreateSpan =\n    typeof shouldCreateSpanForRequest === 'function' ? shouldCreateSpanForRequest : (_) => true;\n\n  // TODO(v8) Remove tracingOrigins here\n  // The only reason we're passing it in here is because this instrumentOutgoingRequests function is publicly exported\n  // and we don't want to break the API. We can remove it in v8.\n  const shouldAttachHeadersWithTargets = (url) =>\n    shouldAttachHeaders(url, tracePropagationTargets || tracingOrigins);\n\n  const spans = {};\n\n  if (traceFetch) {\n    addInstrumentationHandler('fetch', (handlerData) => {\n      fetchCallback(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);\n    });\n  }\n\n  if (traceXHR) {\n    addInstrumentationHandler('xhr', (handlerData) => {\n      xhrCallback(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);\n    });\n  }\n}\n\n/**\n * A function that determines whether to attach tracing headers to a request.\n * This was extracted from `instrumentOutgoingRequests` to make it easier to test shouldAttachHeaders.\n * We only export this fuction for testing purposes.\n */\nfunction shouldAttachHeaders(url, tracePropagationTargets) {\n  return stringMatchesSomePattern(url, tracePropagationTargets || DEFAULT_TRACE_PROPAGATION_TARGETS);\n}\n\n/**\n * Create and track fetch request spans\n */\nfunction fetchCallback(\n  handlerData,\n  shouldCreateSpan,\n  shouldAttachHeaders,\n  spans,\n) {\n  if (!hasTracingEnabled() || !(handlerData.fetchData && shouldCreateSpan(handlerData.fetchData.url))) {\n    return;\n  }\n\n  if (handlerData.endTimestamp) {\n    const spanId = handlerData.fetchData.__span;\n    if (!spanId) return;\n\n    const span = spans[spanId];\n    if (span) {\n      if (handlerData.response) {\n        // TODO (kmclb) remove this once types PR goes through\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        span.setHttpStatus(handlerData.response.status);\n      } else if (handlerData.error) {\n        span.setStatus('internal_error');\n      }\n      span.finish();\n\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete spans[spanId];\n    }\n    return;\n  }\n\n  const currentScope = getCurrentHub().getScope();\n  const currentSpan = currentScope && currentScope.getSpan();\n  const activeTransaction = currentSpan && currentSpan.transaction;\n\n  if (currentSpan && activeTransaction) {\n    const span = currentSpan.startChild({\n      data: {\n        ...handlerData.fetchData,\n        type: 'fetch',\n      },\n      description: `${handlerData.fetchData.method} ${handlerData.fetchData.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.fetchData.__span = span.spanId;\n    spans[span.spanId] = span;\n\n    const request = handlerData.args[0];\n\n    // In case the user hasn't set the second argument of a fetch call we default it to `{}`.\n    handlerData.args[1] = handlerData.args[1] || {};\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const options = handlerData.args[1];\n\n    if (shouldAttachHeaders(handlerData.fetchData.url)) {\n      options.headers = addTracingHeadersToFetchRequest(\n        request,\n        activeTransaction.getDynamicSamplingContext(),\n        span,\n        options,\n      );\n    }\n  }\n}\n\nfunction addTracingHeadersToFetchRequest(\n  request,\n  dynamicSamplingContext,\n  span,\n  options\n\n,\n) {\n  const sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n  const sentryTraceHeader = span.toTraceparent();\n\n  const headers =\n    typeof Request !== 'undefined' && isInstanceOf(request, Request) ? (request ).headers : options.headers;\n\n  if (!headers) {\n    return { 'sentry-trace': sentryTraceHeader, baggage: sentryBaggageHeader };\n  } else if (typeof Headers !== 'undefined' && isInstanceOf(headers, Headers)) {\n    const newHeaders = new Headers(headers );\n\n    newHeaders.append('sentry-trace', sentryTraceHeader);\n\n    if (sentryBaggageHeader) {\n      // If the same header is appended miultiple times the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.append(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n    }\n\n    return newHeaders ;\n  } else if (Array.isArray(headers)) {\n    const newHeaders = [...headers, ['sentry-trace', sentryTraceHeader]];\n\n    if (sentryBaggageHeader) {\n      // If there are multiple entries with the same key, the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.push([BAGGAGE_HEADER_NAME, sentryBaggageHeader]);\n    }\n\n    return newHeaders;\n  } else {\n    const existingBaggageHeader = 'baggage' in headers ? headers.baggage : undefined;\n    const newBaggageHeaders = [];\n\n    if (Array.isArray(existingBaggageHeader)) {\n      newBaggageHeaders.push(...existingBaggageHeader);\n    } else if (existingBaggageHeader) {\n      newBaggageHeaders.push(existingBaggageHeader);\n    }\n\n    if (sentryBaggageHeader) {\n      newBaggageHeaders.push(sentryBaggageHeader);\n    }\n\n    return {\n      ...(headers ),\n      'sentry-trace': sentryTraceHeader,\n      baggage: newBaggageHeaders.length > 0 ? newBaggageHeaders.join(',') : undefined,\n    };\n  }\n}\n\n/**\n * Create and track xhr request spans\n */\nfunction xhrCallback(\n  handlerData,\n  shouldCreateSpan,\n  shouldAttachHeaders,\n  spans,\n) {\n  if (\n    !hasTracingEnabled() ||\n    (handlerData.xhr && handlerData.xhr.__sentry_own_request__) ||\n    !(handlerData.xhr && handlerData.xhr.__sentry_xhr__ && shouldCreateSpan(handlerData.xhr.__sentry_xhr__.url))\n  ) {\n    return;\n  }\n\n  const xhr = handlerData.xhr.__sentry_xhr__;\n\n  // check first if the request has finished and is tracked by an existing span which should now end\n  if (handlerData.endTimestamp) {\n    const spanId = handlerData.xhr.__sentry_xhr_span_id__;\n    if (!spanId) return;\n\n    const span = spans[spanId];\n    if (span) {\n      span.setHttpStatus(xhr.status_code);\n      span.finish();\n\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete spans[spanId];\n    }\n    return;\n  }\n\n  const currentScope = getCurrentHub().getScope();\n  const currentSpan = currentScope && currentScope.getSpan();\n  const activeTransaction = currentSpan && currentSpan.transaction;\n\n  if (currentSpan && activeTransaction) {\n    const span = currentSpan.startChild({\n      data: {\n        ...xhr.data,\n        type: 'xhr',\n        method: xhr.method,\n        url: xhr.url,\n      },\n      description: `${xhr.method} ${xhr.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.xhr.__sentry_xhr_span_id__ = span.spanId;\n    spans[handlerData.xhr.__sentry_xhr_span_id__] = span;\n\n    if (handlerData.xhr.setRequestHeader && shouldAttachHeaders(handlerData.xhr.__sentry_xhr__.url)) {\n      try {\n        handlerData.xhr.setRequestHeader('sentry-trace', span.toTraceparent());\n\n        const dynamicSamplingContext = activeTransaction.getDynamicSamplingContext();\n        const sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n\n        if (sentryBaggageHeader) {\n          // From MDN: \"If this method is called several times with the same header, the values are merged into one single request header.\"\n          // We can therefore simply set a baggage header without checking what was there before\n          // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader\n          handlerData.xhr.setRequestHeader(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n        }\n      } catch (_) {\n        // Error: InvalidStateError: Failed to execute 'setRequestHeader' on 'XMLHttpRequest': The object's state must be OPENED.\n      }\n    }\n  }\n}\n\nexport { DEFAULT_TRACE_PROPAGATION_TARGETS, defaultRequestInstrumentationOptions, fetchCallback, instrumentOutgoingRequests, shouldAttachHeaders, xhrCallback };\n//# sourceMappingURL=request.js.map\n","import { logger, addInstrumentationHandler } from '@sentry/utils';\nimport { WINDOW } from './types.js';\n\n/**\n * Default function implementing pageload and navigation transactions\n */\nfunction instrumentRoutingWithDefaults(\n  customStartTransaction,\n  startTransactionOnPageLoad = true,\n  startTransactionOnLocationChange = true,\n) {\n  if (!WINDOW || !WINDOW.location) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Could not initialize routing instrumentation due to invalid location');\n    return;\n  }\n\n  let startingUrl = WINDOW.location.href;\n\n  let activeTransaction;\n  if (startTransactionOnPageLoad) {\n    activeTransaction = customStartTransaction({\n      name: WINDOW.location.pathname,\n      op: 'pageload',\n      metadata: { source: 'url' },\n    });\n  }\n\n  if (startTransactionOnLocationChange) {\n    addInstrumentationHandler('history', ({ to, from }) => {\n      /**\n       * This early return is there to account for some cases where a navigation transaction starts right after\n       * long-running pageload. We make sure that if `from` is undefined and a valid `startingURL` exists, we don't\n       * create an uneccessary navigation transaction.\n       *\n       * This was hard to duplicate, but this behavior stopped as soon as this fix was applied. This issue might also\n       * only be caused in certain development environments where the usage of a hot module reloader is causing\n       * errors.\n       */\n      if (from === undefined && startingUrl && startingUrl.indexOf(to) !== -1) {\n        startingUrl = undefined;\n        return;\n      }\n\n      if (from !== to) {\n        startingUrl = undefined;\n        if (activeTransaction) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`);\n          // If there's an open transaction on the scope, we need to finish it before creating an new one.\n          activeTransaction.finish();\n        }\n        activeTransaction = customStartTransaction({\n          name: WINDOW.location.pathname,\n          op: 'navigation',\n          metadata: { source: 'url' },\n        });\n      }\n    });\n  }\n}\n\nexport { instrumentRoutingWithDefaults };\n//# sourceMappingURL=router.js.map\n","import { TRACING_DEFAULTS, addTracingExtensions, extractTraceparentData, startIdleTransaction } from '@sentry/core';\nimport { logger, baggageHeaderToDynamicSamplingContext, getDomElement } from '@sentry/utils';\nimport { registerBackgroundTabDetection } from './backgroundtab.js';\nimport { startTrackingWebVitals, startTrackingLongTasks, startTrackingInteractions, addPerformanceEntries } from './metrics/index.js';\nimport { defaultRequestInstrumentationOptions, instrumentOutgoingRequests } from './request.js';\nimport { instrumentRoutingWithDefaults } from './router.js';\nimport { WINDOW } from './types.js';\n\nconst BROWSER_TRACING_INTEGRATION_ID = 'BrowserTracing';\n\n/** Options for Browser Tracing integration */\n\nconst DEFAULT_BROWSER_TRACING_OPTIONS = {\n  ...TRACING_DEFAULTS,\n  markBackgroundTransactions: true,\n  routingInstrumentation: instrumentRoutingWithDefaults,\n  startTransactionOnLocationChange: true,\n  startTransactionOnPageLoad: true,\n  enableLongTask: true,\n  _experiments: {},\n  ...defaultRequestInstrumentationOptions,\n};\n\n/**\n * The Browser Tracing integration automatically instruments browser pageload/navigation\n * actions as transactions, and captures requests, metrics and errors as spans.\n *\n * The integration can be configured with a variety of options, and can be extended to use\n * any routing library. This integration uses {@see IdleTransaction} to create transactions.\n */\nclass BrowserTracing  {\n  // This class currently doesn't have a static `id` field like the other integration classes, because it prevented\n  // @sentry/tracing from being treeshaken. Tree shakers do not like static fields, because they behave like side effects.\n  // TODO: Come up with a better plan, than using static fields on integration classes, and use that plan on all\n  // integrations.\n\n  /** Browser Tracing integration options */\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = BROWSER_TRACING_INTEGRATION_ID;}\n\n   constructor(_options) {BrowserTracing.prototype.__init.call(this);\n    addTracingExtensions();\n\n    this.options = {\n      ...DEFAULT_BROWSER_TRACING_OPTIONS,\n      ..._options,\n    };\n\n    // Special case: enableLongTask can be set in _experiments\n    // TODO (v8): Remove this in v8\n    if (this.options._experiments.enableLongTask !== undefined) {\n      this.options.enableLongTask = this.options._experiments.enableLongTask;\n    }\n\n    // TODO (v8): remove this block after tracingOrigins is removed\n    // Set tracePropagationTargets to tracingOrigins if specified by the user\n    // In case both are specified, tracePropagationTargets takes precedence\n    // eslint-disable-next-line deprecation/deprecation\n    if (_options && !_options.tracePropagationTargets && _options.tracingOrigins) {\n      // eslint-disable-next-line deprecation/deprecation\n      this.options.tracePropagationTargets = _options.tracingOrigins;\n    }\n\n    this._collectWebVitals = startTrackingWebVitals();\n    if (this.options.enableLongTask) {\n      startTrackingLongTasks();\n    }\n    if (this.options._experiments.enableInteractions) {\n      startTrackingInteractions();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    this._getCurrentHub = getCurrentHub;\n\n    const {\n      routingInstrumentation: instrumentRouting,\n      startTransactionOnLocationChange,\n      startTransactionOnPageLoad,\n      markBackgroundTransactions,\n      traceFetch,\n      traceXHR,\n      tracePropagationTargets,\n      shouldCreateSpanForRequest,\n      _experiments,\n    } = this.options;\n\n    instrumentRouting(\n      (context) => {\n        const transaction = this._createRouteTransaction(context);\n\n        this.options._experiments.onStartRouteTransaction &&\n          this.options._experiments.onStartRouteTransaction(transaction, context, getCurrentHub);\n\n        return transaction;\n      },\n      startTransactionOnPageLoad,\n      startTransactionOnLocationChange,\n    );\n\n    if (markBackgroundTransactions) {\n      registerBackgroundTabDetection();\n    }\n\n    if (_experiments.enableInteractions) {\n      this._registerInteractionListener();\n    }\n\n    instrumentOutgoingRequests({\n      traceFetch,\n      traceXHR,\n      tracePropagationTargets,\n      shouldCreateSpanForRequest,\n    });\n  }\n\n  /** Create routing idle transaction. */\n   _createRouteTransaction(context) {\n    if (!this._getCurrentHub) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(`[Tracing] Did not create ${context.op} transaction because _getCurrentHub is invalid.`);\n      return undefined;\n    }\n\n    const { beforeNavigate, idleTimeout, finalTimeout, heartbeatInterval } = this.options;\n\n    const isPageloadTransaction = context.op === 'pageload';\n\n    const sentryTraceMetaTagValue = isPageloadTransaction ? getMetaContent('sentry-trace') : null;\n    const baggageMetaTagValue = isPageloadTransaction ? getMetaContent('baggage') : null;\n\n    const traceParentData = sentryTraceMetaTagValue ? extractTraceparentData(sentryTraceMetaTagValue) : undefined;\n    const dynamicSamplingContext = baggageMetaTagValue\n      ? baggageHeaderToDynamicSamplingContext(baggageMetaTagValue)\n      : undefined;\n\n    const expandedContext = {\n      ...context,\n      ...traceParentData,\n      metadata: {\n        ...context.metadata,\n        dynamicSamplingContext: traceParentData && !dynamicSamplingContext ? {} : dynamicSamplingContext,\n      },\n      trimEnd: true,\n    };\n\n    const modifiedContext = typeof beforeNavigate === 'function' ? beforeNavigate(expandedContext) : expandedContext;\n\n    // For backwards compatibility reasons, beforeNavigate can return undefined to \"drop\" the transaction (prevent it\n    // from being sent to Sentry).\n    const finalContext = modifiedContext === undefined ? { ...expandedContext, sampled: false } : modifiedContext;\n\n    // If `beforeNavigate` set a custom name, record that fact\n    finalContext.metadata =\n      finalContext.name !== expandedContext.name\n        ? { ...finalContext.metadata, source: 'custom' }\n        : finalContext.metadata;\n\n    this._latestRouteName = finalContext.name;\n    this._latestRouteSource = finalContext.metadata && finalContext.metadata.source;\n\n    if (finalContext.sampled === false) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(`[Tracing] Will not send ${finalContext.op} transaction because of beforeNavigate.`);\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Starting ${finalContext.op} transaction on scope`);\n\n    const hub = this._getCurrentHub();\n    const { location } = WINDOW;\n\n    const idleTransaction = startIdleTransaction(\n      hub,\n      finalContext,\n      idleTimeout,\n      finalTimeout,\n      true,\n      { location }, // for use in the tracesSampler\n      heartbeatInterval,\n    );\n    idleTransaction.registerBeforeFinishCallback(transaction => {\n      this._collectWebVitals();\n      addPerformanceEntries(transaction);\n    });\n\n    return idleTransaction ;\n  }\n\n  /** Start listener for interaction transactions */\n   _registerInteractionListener() {\n    let inflightInteractionTransaction;\n    const registerInteractionTransaction = () => {\n      const { idleTimeout, finalTimeout, heartbeatInterval } = this.options;\n\n      const op = 'ui.action.click';\n      if (inflightInteractionTransaction) {\n        inflightInteractionTransaction.finish();\n        inflightInteractionTransaction = undefined;\n      }\n\n      if (!this._getCurrentHub) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`[Tracing] Did not create ${op} transaction because _getCurrentHub is invalid.`);\n        return undefined;\n      }\n\n      if (!this._latestRouteName) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          logger.warn(`[Tracing] Did not create ${op} transaction because _latestRouteName is missing.`);\n        return undefined;\n      }\n\n      const hub = this._getCurrentHub();\n      const { location } = WINDOW;\n\n      const context = {\n        name: this._latestRouteName,\n        op,\n        trimEnd: true,\n        metadata: {\n          source: this._latestRouteSource || 'url',\n        },\n      };\n\n      inflightInteractionTransaction = startIdleTransaction(\n        hub,\n        context,\n        idleTimeout,\n        finalTimeout,\n        true,\n        { location }, // for use in the tracesSampler\n        heartbeatInterval,\n      );\n    };\n\n    ['click'].forEach(type => {\n      addEventListener(type, registerInteractionTransaction, { once: false, capture: true });\n    });\n  }\n}\n\n/** Returns the value of a meta tag */\nfunction getMetaContent(metaName) {\n  // Can't specify generic to `getDomElement` because tracing can be used\n  // in a variety of environments, have to disable `no-unsafe-member-access`\n  // as a result.\n  const metaTag = getDomElement(`meta[name=${metaName}]`);\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return metaTag ? metaTag.getAttribute('content') : null;\n}\n\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing, getMetaContent };\n//# sourceMappingURL=browsertracing.js.map\n","import { addTracingExtensions, getMainCarrier } from '@sentry/core';\nimport { isNodeEnv, loadModule, dynamicRequire } from '@sentry/utils';\n\n/**\n * @private\n */\nfunction _autoloadDatabaseIntegrations() {\n  const carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n\n  const packageToIntegrationMapping = {\n    mongodb() {\n      const integration = dynamicRequire(module, './node/integrations/mongo')\n\n;\n      return new integration.Mongo();\n    },\n    mongoose() {\n      const integration = dynamicRequire(module, './node/integrations/mongo')\n\n;\n      return new integration.Mongo({ mongoose: true });\n    },\n    mysql() {\n      const integration = dynamicRequire(module, './node/integrations/mysql')\n\n;\n      return new integration.Mysql();\n    },\n    pg() {\n      const integration = dynamicRequire(module, './node/integrations/postgres')\n\n;\n      return new integration.Postgres();\n    },\n  };\n\n  const mappedPackages = Object.keys(packageToIntegrationMapping)\n    .filter(moduleName => !!loadModule(moduleName))\n    .map(pkg => {\n      try {\n        return packageToIntegrationMapping[pkg]();\n      } catch (e) {\n        return undefined;\n      }\n    })\n    .filter(p => p) ;\n\n  if (mappedPackages.length > 0) {\n    carrier.__SENTRY__.integrations = [...(carrier.__SENTRY__.integrations || []), ...mappedPackages];\n  }\n}\n\n/**\n * This patches the global object and injects the Tracing extensions methods\n */\nfunction addExtensionMethods() {\n  addTracingExtensions();\n\n  // Detect and automatically load specified integrations.\n  if (isNodeEnv()) {\n    _autoloadDatabaseIntegrations();\n  }\n}\n\nexport { addExtensionMethods };\n//# sourceMappingURL=extensions.js.map\n","import { addExtensionMethods, BrowserTracing, Apollo, Express, GraphQL, Mongo, Mysql, Postgres, Prisma } from '@sentry-internal/tracing';\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing, IdleTransaction, Span, SpanStatus, TRACEPARENT_REGEXP, Transaction, addExtensionMethods, defaultRequestInstrumentationOptions, extractTraceparentData, getActiveTransaction, hasTracingEnabled, instrumentOutgoingRequests, spanStatusfromHttpCode, startIdleTransaction, stripUrlQueryAndFragment } from '@sentry-internal/tracing';\n\nconst Integrations = {\n  BrowserTracing: BrowserTracing,\n  Apollo: Apollo,\n  Express: Express,\n  GraphQL: GraphQL,\n  Mongo: Mongo,\n  Mysql: Mysql,\n  Postgres: Postgres,\n  Prisma: Prisma,\n};\n\n// Treeshakable guard to remove all code related to tracing\n\n// Guard for tree\nif (typeof __SENTRY_TRACING__ === 'undefined' || __SENTRY_TRACING__) {\n  // We are patching the global object with our hub extension methods\n  addExtensionMethods();\n}\n\nexport { Integrations };\n//# sourceMappingURL=index.js.map\n","import App from './app';\nimport Game from './game';\n\nimport './lib/sentry';\nimport '../scss/main.scss';\n\n// Import the Leaderboards class from the 'menu' folder\nimport Leaderboards from './menu/leaderboards';\nimport Leaderboards2 from './menu/leaderboards-footer';\n\n/**\n * The entry point for the game. Create an instance of the game\n * and pass a new instance of the app onto it.\n */\n\nconst app = new App();\nconst game = new Game(app);\n\n// Initialize the Leaderboards class\nconst leaderboards = new Leaderboards(app);\nconst leaderboards2 = new Leaderboards2(app)\n\n// Define the 'leaderboards' property on the global window object\nif (typeof window !== 'undefined') {\n    (window as any).leaderboards = leaderboards;\n    (window as any).leaderboards2 = leaderboards2\n}\n"],"names":["Logger","level","data","log","registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","updateServiceWorker","_reloadPage","register","Workbox","__vitePreload","event","r","e","deferredPrompt","install","error","init","agent","isLargeScreen","isTablet","isAppleTablet","isAndroidTablet","isMobile","Login","_Login","List","List2","Equipment","Equipment2","Movement","Movement2","Target","Target2","Combat","Combat2","Network","Network2","Container","Container2","Ability","Ability2","Quest","Quest2","Achievement","Achievement2","Notification","Notification2","Experience","Experience2","NPC","NPC2","Trade","Trade2","Enchant","Enchant2","Guild","Guild2","Pointer","Pointer2","Store","Store2","TeamWar","TeamWar2","Overlay","Overlay2","Command","Command2","Skill","Skill2","Bubble","Bubble2","Effect","Effect2","Friends","Friends2","Crafting","Crafting2","ContainerType","ContainerType2","Orientation","Orientation2","EntityType","EntityType2","AbilityType","AbilityType2","Actions","Actions2","MenuActions","Hits","Hits2","AttackStyle","AttackStyle2","Hovering","Hovering2","Skills","Skills2","SkillsOrder","Enchantment","Enchantment2","Effects","Effects2","Medals","Medals2","Ranks","Ranks2","RankColours","RankTitles","DamageColours","SkillExpColours","GuildRank","GuildRank2","BannerColour","BannerOutline","BannerCrests","Constants","Packets","Packets2","storage","name","Storage","__publicField","Modules.Orientation","request","_a","database","rememberMe","username","password","volume","brightness","enabled","lowPowerMode","debug","showNames","showLevels","disableCaching","orientation","zoom","objects","cursorTiles","transaction","objectStore","cursorStore","region","errorMessage","callback","info","regionRequest","objectRequest","cursorRequest","cursor","holdTimeout","HOLD_TIME","resetTimeout","onSecondaryPress","element","gameContainer","touch","onDragDrop","dropCallback","exception","isHolding","dragClone","startHold","moveHold","endHold","cancelHold","delay","x","y","clone","target","Animation","length","row","width","height","time","_b","count","onEnd","speed","Sprite","Utils","isInt","n","min","max","type","index","primaryCallback","secondaryCallback","listElement","slot","image","Modules.ContainerType","key","trim","string","menuAction","Modules.MenuActions","Opcodes.Container","email","regX","Modules.Constants","regY","sprite","canvas","context","hurtSprite","spriteData","i","silhouetteSprite","cloneData","pixel","item","fade","opacity","App","position","destination","withAnimation","Util","message","status","title","content","changes","Updates","cc","field","keyEvent","toggle","logo","state","validation","spanElement","server","players","res","servers","firstServer","li","AudioController","game","sound","source","soundVolume","node","tileSize","gain","music","url","audio","arrayBuffer","musicVolume","player","positionX","positionY","forwardX","forwardY","gainNode","duration","Timer","global","factory","module","w","this","window","noGlobal","arr","getProto","slice","flat","array","push","indexOf","class2type","toString","hasOwn","fnToString","ObjectFunctionString","support","isFunction","obj","isWindow","document","preservedScriptAttributes","DOMEval","code","doc","val","script","toType","version","jQuery","selector","num","elems","ret","elem","_elem","len","j","src","copy","copyIsArray","deep","msg","proto","Ctor","isArrayLike","results","first","second","invert","callbackInverse","matches","callbackExpect","arg","value","_i","Sizzle","Expr","getText","isXML","tokenize","compile","select","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","contains","expando","preferredDoc","dirruns","done","classCache","createCache","tokenCache","compilerCache","nonnativeSelectorCache","sortOrder","a","b","pop","pushNative","list","booleans","whitespace","identifier","attributes","pseudos","rwhitespace","rtrim","rcomma","rcombinators","rdescend","rpseudo","ridentifier","matchExpr","rhtml","rinputs","rheader","rnative","rquickExpr","rsibling","runescape","funescape","escape","nonHex","high","rcssescape","fcssescape","ch","asCodePoint","unloadHandler","inDisabledFieldset","addCombinator","els","seed","m","nid","match","groups","newSelector","newContext","nodeType","testContext","toSelector","qsaError","keys","cache","markFunction","fn","assert","el","addHandle","attrs","handler","siblingCheck","cur","diff","createInputPseudo","createButtonPseudo","createDisabledPseudo","disabled","createPositionalPseudo","argument","matchIndexes","namespace","hasCompare","subWindow","id","attrId","tag","tmp","className","input","adown","bup","compare","aup","ap","bp","expr","elements","sel","duplicates","excess","unquoted","nodeNameSelector","nodeName","pattern","operator","check","result","what","_argument","last","simple","forward","ofType","_context","xml","uniqueCache","outerCache","nodeIndex","start","dir","parent","useCache","pseudo","args","idx","matched","matcher","unmatched","text","lang","elemLang","hash","attr","_matchIndexes","setFilters","parseOnly","tokens","soFar","preFilters","cached","combinator","base","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","map","filter","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","token","find","compiled","_name","until","truncate","siblings","rneedsContext","rsingleTag","winnow","qualifier","not","self","rootjQuery","root","rparentsprev","guaranteedUnique","targets","l","selectors","sibling","rnothtmlwhite","createOptions","object","_","flag","firing","memory","fired","locked","queue","firingIndex","fire","add","Identity","v","Thrower","ex","adoptValue","resolve","reject","noValue","method","func","tuples","promise","deferred","fns","newDefer","tuple","returned","onFulfilled","onRejected","onProgress","maxDepth","depth","special","that","mightThrow","then","process","stateString","singleValue","remaining","resolveContexts","resolveValues","primary","updateFunc","rerrorNames","stack","readyList","wait","completed","access","chainable","emptyGet","raw","bulk","_key","rmsPrefix","rdashAlpha","fcamelCase","_all","letter","camelCase","acceptData","owner","Data","prop","dataPriv","dataUser","rbrace","rmultiDash","getData","dataAttr","startLength","hooks","next","setter","defer","pnum","rcssNum","cssExpand","documentElement","isAttached","composed","isHiddenWithinTree","adjustCSS","valueParts","tween","adjusted","scale","maxIterations","currentValue","initial","unit","initialInUnit","defaultDisplayMap","getDefaultDisplay","display","showHide","show","values","rcheckableType","rtagName","rscriptType","fragment","div","wrapMap","getAll","setGlobalEval","refElements","buildFragment","scripts","selection","ignored","wrap","attached","nodes","rtypenamespace","returnTrue","returnFalse","expectSync","safeActiveElement","err","on","types","one","origFn","handleObjIn","eventHandle","events","t","handleObj","handlers","namespaces","origType","elemData","mappedTypes","origCount","nativeEvent","handlerQueue","matchedHandlers","matchedSelectors","delegateCount","hook","originalEvent","leverageNative","notAsync","saved","handle","props","delegateType","orig","fix","related","rnoInnerhtml","rchecked","rcleanScript","manipulationTarget","disableScript","restoreScript","cloneCopyEvent","dest","pdataOld","udataOld","udataCur","fixInput","domManip","collection","hasScripts","iNoClone","valueIsFunction","remove","keepData","html","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","original","insert","rnumnonpx","rcustomProp","getStyles","view","swap","old","rboxStyle","rtrimCSS","computeStyleTests","container","divStyle","pixelPositionVal","reliableMarginLeftVal","roundPixelMeasures","pixelBoxStylesVal","boxSizingReliableVal","scrollboxSizeVal","measure","reliableTrDimensionsVal","table","tr","trChild","trStyle","curCSS","computed","minWidth","maxWidth","isCustomProp","style","addGetHookIf","conditionFn","hookFn","cssPrefixes","emptyStyle","vendorProps","vendorPropName","capName","finalPropName","final","rdisplayswap","cssShow","cssNormalTransform","setPositiveNumber","subtract","boxModelAdjustment","dimension","box","isBorderBox","styles","computedVal","extra","delta","getWidthOrHeight","boxSizingNeeded","valueIsBorderBox","offsetProp","origName","scrollboxSizeBuggy","prefix","suffix","expanded","parts","Tween","end","easing","percent","eased","p","fxNow","inProgress","rfxtypes","rrun","schedule","createFxNow","genFx","includeWidth","which","createTween","animation","defaultPrefilter","opts","oldfire","propTween","restoreDisplay","isBox","anim","hidden","dataShow","propFilter","specialEasing","properties","stopped","tick","currentTime","gotoEnd","prepend","opt","to","empty","optall","doAnimation","clearQueue","stopQueue","stop","dequeue","timers","cssFn","timer","timeout","boolHook","attrHandle","nType","attrNames","getter","lowercaseName","rfocusable","rclickable","tabindex","stripAndCollapse","getClass","classesToArray","classNames","curValue","finalValue","stateVal","isValidValue","rreturn","option","optionSet","rfocusMorph","stopPropagationCallback","onlyHandlers","bubbleType","ontype","lastElement","eventPath","attaches","location","nonce","rquery","parserErrorElem","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","s","valueOrFunction","r20","rhash","rantiCache","rheaders","rlocalProtocol","rnoContent","rprotocol","prefilters","transports","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataType","dataTypes","inspectPrefiltersOrTransports","originalOptions","jqXHR","inspected","seekingTransport","inspect","selected","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxHandleResponses","responses","ct","finalDataType","firstDataType","contents","ajaxConvert","response","isSuccess","conv2","current","conv","prev","converters","settings","transport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","statusCode","requestHeaders","requestHeadersNames","strAbort","statusText","finalText","nativeStatusText","headers","success","modified","htmlIsFunction","xhrSuccessStatus","xhrSupported","errorCallback","complete","xhr","evt","oldCallbacks","rjsonp","originalSettings","callbackName","overwritten","responseContainer","jsonProp","body","keepScripts","parsed","params","off","responseText","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","rect","win","offsetParent","offset","parentOffset","top","defaultExtra","funcName","margin","fnOver","fnOut","proxy","hold","_jQuery","_$","Blob","instance","$","BubbleController","bubble","zoomFactor","offsetY","entity","Handler$1","character","_path","attacker","follower","Opcodes.Movement","_x","_y","Transition","startValue","endValue","updateCallback","stopCallback","elapsed","interval","Entity","active","onEndCount","gridX","gridY","visible","Modules.EntityType","Character","Modules.Effects","Handler","effect","keyValue","o","forced","action","Modules.Actions","force","fallback","path","_c","step","hitPoints","maxHitPoints","decrease","Mob","Task","description","stage","stageCount","subStage","rewards","experience","Modules.Skills","nextExperience","percentage","quickSlot","Friend","online","serverId","enchantments","Modules.AttackStyle","attackStats","defenseStats","bonuses","attackStyle","attackStyles","Armour","ArmourSkin","Boots","Pendant","Ring","Weapon","WeaponSkin","Arrows","Player","Modules.Ranks","Modules.Medals","Modules.Equipment","sync","equipment","skills","skill","quests","quest","achievements","achievement","task","abilities","ability","friends","attackRange","total","mana","maxMana","Modules.AbilityType","poison","rank","packet","Chest","Item","bopIndex","Projectile","Grids","radius","entities","EntitiesController","mob","projectile","impactEffect","Modules.Hits","chest","npc","Splat","isTarget","Modules.DamageColours","Modules.SkillExpColours","InfoController","amount","randomize","ChatController","colour","notify","HUDController","health","details","InputController","Chat","Opcodes.Command","pos","Opcodes.Friends","useSearch","Opcodes.Target","Modules.Hovering","offsetX","frame","Menu","containerName","closeButton","toggleButton","_data","_var1","_data1","_data2","data3","_var2","_var3","_var4","_var5","_var6","actions","itemDescription","attack","defense","bonusesDiv","enchantmentsDiv","enchantment","Modules.Enchantment","Inventory","slots","doubleClick","fromIndex","toIndex","slotElement","imageElement","countElement","Bank","inventory","fromContainer","defaultContainer","toContainer","_d","slotImage","_type","Opcodes.Store","price","Header","barElement","textElement","points","maxPoints","tooltip","showTooltip","attachTooltip","State","Abilities","activeIndex","passiveIndex","Opcodes.Ability","_event","passive","icon","child","resize","Modules.SkillsOrder","Profile","direction","page","isShard","elementImage","elementCount","Warp","socket","ignore","Settings","Equipments","sprites","arrowCount","orientations","stats","statBonuses","stat","lStat","attackElement","defenseElement","attackStat","defenseStat","bonus","lBonus","bonusElement","bonusStat","armourUrl","armourSprite","isFlipped","weaponUrl","weaponSprite","Achievements","opcode","Opcodes.Achievement","coin","progress","Quests","Opcodes.Quest","nameElement","shortDescription","friend","maxLength","world","otherPlayer","ignoreCallback","slotCount","itemCount","actualCount","inventoryIndex","Interact","pvp","app","searchElement","Guilds","Modules.BannerColour","Modules.BannerCrests","Opcodes.Guild","member","Modules.GuildRank","menu","guilds","guild","colourName","Modules.BannerOutline","outline","crest","crestName","members","serverElement","isGuild","slotType","joinButton","isPlayer","selectEmpty","outlineElement","crestElement","Leaderboards","totalExperience","Opcodes.Crafting","requirements","levelIcon","levelCount","requirement","disableClick","MenuController","LeaderboardsFooter","Opcodes.Equipment","Opcodes.Enchant","shardIndex","Opcodes.Trade","Arrow","Opcodes.Pointer","PointerController","pointers","pointer","posX","posY","camera","canvasWidth","canvasHeight","outX","outY","SpritesController","ZoningController","CharacterHandler","isObject","ignores","Map$1","mapData","worker","regionData","tile","objectIndex","tileset","tilesetInfo","tileId","Z_FIXED$1","Z_BINARY","Z_TEXT","Z_UNKNOWN$1","zero$1","buf","STORED_BLOCK","STATIC_TREES","DYN_TREES","MIN_MATCH$1","MAX_MATCH$1","LENGTH_CODES$1","LITERALS$1","L_CODES$1","D_CODES$1","BL_CODES$1","HEAP_SIZE$1","MAX_BITS$1","Buf_size","MAX_BL_BITS","END_BLOCK","REP_3_6","REPZ_3_10","REPZ_11_138","extra_lbits","extra_dbits","extra_blbits","bl_order","DIST_CODE_LEN","static_ltree","static_dtree","_dist_code","_length_code","base_length","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","max_length","static_l_desc","static_d_desc","static_bl_desc","TreeDesc","dyn_tree","stat_desc","d_code","dist","put_short","send_bits","send_code","c","tree","bi_reverse","bi_flush","gen_bitlen","desc","max_code","stree","has_stree","h","bits","xbits","f","overflow","gen_codes","bl_count","next_code","tr_static_init","init_block","bi_windup","smaller","_n2","_m2","pqdownheap","k","compress_block","ltree","dtree","lc","sx","build_tree","scan_tree","prevlen","curlen","nextlen","max_count","min_count","send_tree","build_bl_tree","max_blindex","send_all_trees","lcodes","dcodes","blcodes","detect_data_type","block_mask","static_init_done","_tr_init$1","_tr_stored_block$1","stored_len","_tr_align$1","_tr_flush_block$1","opt_lenb","static_lenb","_tr_tally$1","_tr_init_1","_tr_stored_block_1","_tr_flush_block_1","_tr_tally_1","_tr_align_1","trees","adler32","adler","s1","s2","adler32_1","makeTable","crcTable","crc32","crc","crc32_1","messages","constants$2","_tr_init","_tr_stored_block","_tr_flush_block","_tr_tally","_tr_align","Z_NO_FLUSH$2","Z_PARTIAL_FLUSH","Z_FULL_FLUSH$1","Z_FINISH$3","Z_BLOCK$1","Z_OK$3","Z_STREAM_END$3","Z_STREAM_ERROR$2","Z_DATA_ERROR$2","Z_BUF_ERROR$1","Z_DEFAULT_COMPRESSION$1","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY$1","Z_UNKNOWN","Z_DEFLATED$2","MAX_MEM_LEVEL","MAX_WBITS$1","DEF_MEM_LEVEL","LENGTH_CODES","LITERALS","L_CODES","D_CODES","BL_CODES","HEAP_SIZE","MAX_BITS","MIN_MATCH","MAX_MATCH","MIN_LOOKAHEAD","PRESET_DICT","INIT_STATE","GZIP_STATE","EXTRA_STATE","NAME_STATE","COMMENT_STATE","HCRC_STATE","BUSY_STATE","FINISH_STATE","BS_NEED_MORE","BS_BLOCK_DONE","BS_FINISH_STARTED","BS_FINISH_DONE","OS_CODE","strm","errorCode","zero","slide_hash","wsize","HASH_ZLIB","HASH","flush_pending","flush_block_only","put_byte","putShortMSB","read_buf","size","longest_match","cur_match","chain_length","scan","best_len","nice_match","limit","_win","wmask","strend","scan_end1","scan_end","fill_window","_w_size","more","str","deflate_stored","flush","min_block","left","have","used","deflate_fast","hash_head","bflush","deflate_slow","max_insert","deflate_rle","deflate_huff","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","lm_init","DeflateState","deflateStateCheck","deflateResetKeep","deflateReset","deflateSetHeader","head","deflateInit2","windowBits","memLevel","strategy","deflateInit","deflate$2","old_flush","header","level_flags","beg","gzhead_extra","bstate","deflateEnd","deflateSetDictionary","dictionary","dictLength","tmpDict","avail","deflateInit_1","deflateInit2_1","deflateReset_1","deflateResetKeep_1","deflateSetHeader_1","deflate_2$1","deflateEnd_1","deflateSetDictionary_1","deflateInfo","deflate_1$2","_has","assign","sources","flattenChunks","chunks","chunk","common","STR_APPLY_UIA_OK","__","_utf8len","q","string2buf","c2","m_pos","str_len","buf_len","buf2binstring","buf2string","out","utf16buf","c_len","utf8border","strings","ZStream","zstream","toString$1","Z_NO_FLUSH$1","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH$2","Z_OK$2","Z_STREAM_END$2","Z_DEFAULT_COMPRESSION","Z_DEFAULT_STRATEGY","Z_DEFLATED$1","Deflate$1","dict","flush_mode","chunkSize","_flush_mode","BAD$1","TYPE$1","inffast","_in","_out","dmax","whave","wnext","s_window","lcode","dcode","lmask","dmask","here","op","from","from_source","output","dolen","dodist","MAXBITS","ENOUGH_LENS$1","ENOUGH_DISTS$1","CODES$1","LENS$1","DISTS$1","lbase","lext","dbase","dext","inflate_table","lens","lens_index","codes","table_index","work","sym","curr","drop","huff","incr","fill","low","mask","offs","here_bits","here_op","here_val","inftrees","CODES","LENS","DISTS","Z_FINISH$1","Z_BLOCK","Z_TREES","Z_OK$1","Z_STREAM_END$1","Z_NEED_DICT$1","Z_STREAM_ERROR$1","Z_DATA_ERROR$1","Z_MEM_ERROR$1","Z_BUF_ERROR","Z_DEFLATED","HEAD","FLAGS","TIME","OS","EXLEN","EXTRA","NAME","COMMENT","HCRC","DICTID","DICT","TYPE","TYPEDO","STORED","COPY_","COPY","TABLE","LENLENS","CODELENS","LEN_","LEN","LENEXT","DIST","DISTEXT","MATCH","LIT","CHECK","LENGTH","DONE","BAD","MEM","SYNC","ENOUGH_LENS","ENOUGH_DISTS","MAX_WBITS","DEF_WBITS","zswap32","InflateState","inflateStateCheck","inflateResetKeep","inflateReset","inflateReset2","inflateInit2","inflateInit","virgin","lenfix","distfix","fixedtables","updatewindow","inflate$2","put","last_bits","last_op","last_val","hbuf","order","inf_leave","inflateEnd","inflateGetHeader","inflateSetDictionary","dictid","inflateReset_1","inflateReset2_1","inflateResetKeep_1","inflateInit_1","inflateInit2_1","inflate_2$1","inflateEnd_1","inflateGetHeader_1","inflateSetDictionary_1","inflateInfo","inflate_1$2","GZheader","gzheader","Z_NO_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Inflate$1","last_avail_out","next_out_utf8","tail","utf8str","inflate$1","inflator","inflateRaw$1","Inflate_1$1","inflate_2","inflateRaw_1$1","ungzip$1","constants","inflate_1$1","Inflate","inflate","inflateRaw","ungzip","inflate_1","Connection","Opcodes.Login","bufferData","char","inflatedString","regions","Opcodes.List","ids","known","newIds","currentPlayer","entitySprite","Opcodes.Combat","currentPlayerTarget","currentPlayerAttacker","isPoison","isFreezing","isBurning","Opcodes.Network","Modules.RankTitles","Opcodes.Notification","Opcodes.Experience","newSong","soundEffect","Opcodes.NPC","Opcodes.Overlay","_opcode","Opcodes.Bubble","Opcodes.Skill","update","minigame","Opcodes.TeamWar","Opcodes.Effect","Messages","Socket","host","port","MAXIMUM_ZOOM","DEFAULT_ZOOM","MAX_GRID_WIDTH","MAX_GRID_HEIGHT","MINIMUM_ZOOM","Camera","borderWidth","borderHeight","nextX","nextY","zoomAmount","mobile","maxY","maxX","Minigame","countdown","redTeam","blueTeam","overlay","ProgramData","vertexShader","fragmentShader","attribute","uniform","glVertex","glFragment","program","shader","Tileset","texture","Layer","foreground","flipped","textureData","dataIndex","relativeId","tilesWidth","Tile","animationInfo","d","g","M","C","R","S","E","T","u","I","L","W","z","B","Renderer","DarkMask","lighting","isColliding","targetData","mouse","dx","dy","flipX","flipY","weapon","weaponAnimations","weaponX","weaponY","weaponWidth","weaponHeight","sparksAnimation","sparksFrame","medal","barLength","healthX","healthY","healthWidth","healthHeight","Modules.RankColours","nameY","lightX","lightY","Vec2","centered","strokeColour","fontSize","strokeSize","color","light","Lamp","Lighting","tileInfo","distance","diffuse","indexData","grids","WebGL","tilesetCount","LayerVertex","tileIndex","layer","inverseTileSize","viewPort","layerIndex","LayerFragment","Canvas","flips","isHighTile","setWidth","relativeTileId","cell","tempX","Updater","mDistance","tDistance","isHorizontal","isVertical","isLeft","isUp","dt","sparks","AStar","grid","cols","rows","f2","open","endPos","diagonalSuccessors","diagonal","euclidean","manhattan","nothingToDo","diagonalSuccessorsFree","openF","successors","adj","$N","$S","$E","$W","N","_rows","_cols","_$N","_$S","_$E","_$W","_N","_S","_E","_W","_grid","f1","_f1","PathFinder","startX","startY","endX","endY","Game","Zoning","Overlays","Pathfinder","Map","objectToString","isBuiltin","wat","isString","isPlainObject","isRegExp","isThenable","isNaN","isInstanceOf","_e","isGlobalObj","GLOBAL_OBJ","getGlobalObject","getGlobalSingleton","creator","gbl","__SENTRY__","PREFIX","CONSOLE_LEVELS","consoleSandbox","originalConsole","wrappedLevels","originalWrappedFunc","makeLogger","logger","replacementFactory","wrapped","markFunctionWrapped","_Oo","addNonEnumerableProperty","dropUndefinedKeys","inputValue","_dropUndefinedKeys","memoizationMap","memoVal","returnValue","defaultFunctionName","getFunctionName","WINDOW","supportsFetch","isNativeFetch","supportsNativeFetch","sandbox","supportsHistory","chrome","isChromePackagedApp","hasHistoryApi","instrumented","instrument","instrumentConsole","instrumentDOM","instrumentXHR","instrumentFetch","instrumentHistory","instrumentError","instrumentUnhandledRejection","addInstrumentationHandler","triggerHandlers","originalConsoleMethod","originalFetch","handlerData","getFetchMethod","getFetchUrl","fetchArgs","xhrproto","originalOpen","xhrInfo","onreadystatechangeHandler","readyStateArgs","originalSend","lastHref","oldOnPopState","_oO","historyReplacementFunction","originalHistoryFunction","debounceDuration","debounceTimerID","lastCapturedEvent","shouldShortcircuitPreviousDebounce","previous","shouldSkipDOMEvent","makeDOMEventHandler","globalListener","triggerDOMHandler","globalDOMEventHandler","originalAddEventListener","listener","handlerForType","originalRemoveEventListener","_oldOnErrorHandler","line","column","_oldOnUnhandledRejectionHandler","uuid4","crypto","getRandomByte","arrayify","maybeArray","isBrowserBundle","isNodeEnv","dynamicRequire","mod","loadModule","moduleName","cwd","States","RESOLVED","REJECTED","SyncPromise","executor","onfulfilled","onrejected","reason","onfinally","isRejected","cachedHandlers","stripUrlQueryAndFragment","urlPath","getNumberOfUrlSegments","extractPathForTransaction","req","dateTimestampSource","getBrowserPerformance","performance","timeOrigin","getNodePerformance","platformPerformance","timestampSource","dateTimestampInSeconds","timestampInSeconds","timestampWithMs","threshold","performanceNow","dateNow","timeOriginDelta","timeOriginIsReliable","navigationStart","navigationStartDelta","navigationStartIsReliable","DEFAULT_ENVIRONMENT","makeSession","startingTime","session","sessionToJSON","updateSession","closeSession","DEFAULT_MAX_BREADCRUMBS","Scope","scope","newScope","user","requestSession","tags","extras","fingerprint","span","captureContext","updatedScope","breadcrumb","maxBreadcrumbs","maxCrumbs","mergedBreadcrumb","attachment","hint","transactionName","getGlobalEventProcessors","newData","processors","processor","API_VERSION","DEFAULT_BREADCRUMBS","Hub","client","_version","eventId","syntheticException","beforeBreadcrumb","finalBreadcrumb","oldHub","makeMain","integration","customSamplingContext","endSession","release","environment","userAgent","currentSession","sentry","getMainCarrier","hub","registry","getHubFromCarrier","setHubOnCarrier","getCurrentHub","hasHubOnCarrier","getHubFromActiveDomain","activeDomain","registryHubTopStack","carrier","hasTracingEnabled","maybeOptions","getActiveTransaction","maybeHub","errorsInstrumented","registerErrorInstrumentation","activeTransaction","SpanRecorder","maxlen","Span","spanContext","childSpan","opStr","nameStr","idStr","logMessage","httpStatus","spanStatus","spanStatusfromHttpCode","endTimestamp","sampledString","Transaction","transactionContext","incomingDynamicSamplingContext","newName","newMetadata","finishedSpans","metadata","public_key","maybeSampleRate","sample_rate","user_segment","dsc","TRACING_DEFAULTS","traceHeaders","sample","samplingContext","sampleRate","isValidSampleRate","rate","_startTransaction","configInstrumenter","transactionInstrumenter","addTracingExtensions","_optionalChain","ops","lastAccessLHS","shouldDisableAutoInstrumentation","clientOptions","_2","_3","_4","_5","_6","Express","instrumentMiddlewares","instrumentRouter","arity","_7","_8","_9","wrapMiddlewareArgs","patchMiddleware","router","originalCallback","methods","appOrRouter","isApp","routerProto","originalProcessParams","called","layerRoutePath","isRegex","isArray","numExtraSegments","getLayerRoutePathInfo","finalPartialRoute","segment","urlLength","routeLength","finalRoute","lrp","_10","_11","getNumberOfArrayUrlSegments","getLayerRoutePathString","routesArray","accNumSegments","currentRoute","Postgres","pkg","Client","config","parentSpan","rv","_12","_13","_14","_15","Mysql","fields","OPERATIONS","OPERATION_SIGNATURES","isCursor","maybeCursor","Mongo","operations","operation","getSpanContext","lastArg","maybePromiseOrCursor","_16","_17","signature","shouldDescribe","reduce","isValidPrismaClient","possibleClient","Prisma","model","GraphQL","Apollo","resolvers","instrumentResolvers","resolverGroupName","resolverName","wrapResolver","DEFAULT_TRACE_PROPAGATION_TARGETS","defaultRequestInstrumentationOptions","instrumentRoutingWithDefaults","customStartTransaction","startTransactionOnPageLoad","startTransactionOnLocationChange","startingUrl","_autoloadDatabaseIntegrations","packageToIntegrationMapping","mappedPackages","addExtensionMethods","leaderboards","leaderboards2","Leaderboards2"],"mappings":"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"}