!function(){function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=o(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:i):a.value}},n.apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var o=d(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,a,r,s=[],l=!0,c=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(c)throw o}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,i){return(t=x(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(X){l=function(e,t,i){return e[t]=i}}function c(e,t,i,o){var a=t&&t.prototype instanceof p?t:p,r=Object.create(a.prototype),s=new T(o||[]);return n(r,"_invoke",{value:_(e,i,s)}),r}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(X){return{type:"throw",arg:X}}}e.wrap=c;var u={};function p(){}function g(){}function m(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(Y([])));k&&k!==t&&i.call(k,a)&&(v=k);var x=m.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function o(n,a,r,s){var l=d(e[n],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==h(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){o("next",e,r,s)}),(function(e){o("throw",e,r,s)})):t.resolve(u).then((function(e){c.value=e,r(c)}),(function(e){return o("throw",e,r,s)}))}s(l.arg)}var a;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){o(e,i,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,i){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return I()}for(i.method=o,i.arg=a;;){var r=i.delegate;if(r){var s=S(r,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=d(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function Y(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return g.prototype=m,n(x,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:g,configurable:!0}),g.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(y.prototype),l(y.prototype,r,(function(){return this})),e.AsyncIterator=y,e.async=function(t,i,n,o,a){void 0===a&&(a=Promise);var r=new y(c(t,i,n,o),a);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=Y,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],r=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),E(i),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;E(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:Y(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},e}function g(e,t,i,n,o,a,r){try{var s=e[a](r),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function m(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var a=e.apply(t,i);function r(e){g(a,n,o,r,s,"next",e)}function s(e){g(a,n,o,r,s,"throw",e)}r(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function k(e,t,i){return t&&b(e.prototype,t),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function w(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=y(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function y(e,t){if(e){if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}System.register([],(function(e,o){"use strict";var r=document.createElement("style");return r.textContent='html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;font-size:100%;vertical-align:baseline;background-color:transparent;border:0;outline:0}html,body{position:absolute;top:0;left:0;overflow:hidden;width:100%;height:100%;background-color:#000}canvas{position:absolute;image-rendering:pixelated}body{touch-action:manipulation;overflow:hidden;margin:0;padding:0;line-height:1;background:linear-gradient(to bottom,rgba(0,0,0,0),rgba(0,0,0,0),rgba(0,0,0,.6)),url(/img/wood.png) center center;background-size:auto;image-rendering:pixelated}ol,ul{list-style:none}blockquote,q{quotes:none}:focus{outline:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-spacing:0;border-collapse:collapse}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-scrollbar{width:0;background-color:transparent}@font-face{font-family:AdvoCut;font-weight:400;font-style:normal;font-display:swap;src:url(/fonts/advocut/advocut-webfont.eot);src:url(/fonts/advocut/advocut-webfont.eot?#iefix) format("embedded-opentype"),url(/fonts/advocut/advocut-webfont.woff) format("woff"),url(/fonts/advocut/advocut-webfont.ttf) format("truetype"),url(/fonts/advocut/advocut-webfont.svg#AndinaRegular) format("svg")}@font-face{font-family:KerrieFont;font-weight:400;font-style:normal;font-display:swap;src:url(/fonts/kerriefont.ttf) format("truetype")}@font-face{font-family:DorfScratch;font-weight:400;font-style:normal;font-display:swap;src:url(/fonts/dorfscratch.ttf) format("truetype")}@keyframes move-parchment-left{0%,to{left:0}45%,55%{left:41%}}@keyframes move-parchment-right{0%,to{right:0}45%,55%{right:41%}}@keyframes parchment-middle-1{0%,to{width:346px;margin-left:-173px;background-position:-38px -294px}45%,55%{width:0;margin-left:0;background-position:-211px -294px}}@keyframes parchment-middle-2{0%,to{width:692px;margin-left:-346px;background-position:-76px -588px}45%,55%{width:0;margin-left:0;background-position:-422px -588px}}@keyframes parchment-middle-3{0%,to{width:1038px;margin-left:-519px;background-position:-114px -882px}45%,55%{width:0;margin-left:0;background-position:-633px -882px}}@keyframes blink{50%{color:transparent}}.dimmed{overflow:hidden;width:100%;height:100%;filter:brightness(50%)}.check{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;top:100%;display:block;padding-left:1em;text-align:left}.check input{cursor:pointer;position:absolute;top:-200%;width:0;height:0;opacity:0}.check .checkmark{position:absolute;top:.5px;left:0;width:16px;height:16px}@media only screen and (min-width: 1501px){.check .checkmark{width:24px;height:24px;background:url(/img/interface/characterdialogsheet.png) -327px -720px;background-size:1860px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-354px}.check input:active~.checkmark{background-position-x:-381px}.check input:checked~.checkmark{background-position-x:-408px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-435px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.check .checkmark{width:16px;height:16px;background:url(/img/interface/characterdialogsheet.png) -218px -480px;background-size:1240px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-236px}.check input:active~.checkmark{background-position-x:-254px}.check input:checked~.checkmark{background-position-x:-272px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-290px}}@media only screen and (max-width: 1000px){.check .checkmark{width:8px;height:8px;background:url(/img/interface/characterdialogsheet.png) -109px -240px;background-size:620px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-118px}.check input:active~.checkmark{background-position-x:-127px}.check input:checked~.checkmark{background-position-x:-136px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-145px}}#parchment,#parchment input,#parchment select{font-family:AdvoCut,sans-serif}#parchment{opacity:0}#parchment p{font-family:AdvoCut,sans-serif}#parchment input{width:50%;color:#eee;text-align:center;background-color:rgba(0,0,0,.05);animation:glow .5s linear infinite alternate}#parchment input:focus{color:#fff;background-color:rgba(0,0,0,.1);border-color:rgba(0,0,0,.3);animation:none}#parchment input.field-error{background-color:rgba(255,0,0,.1);border-color:#f84444}#parchment select{width:25%;color:#000;text-align:center;background-color:rgba(0,0,0,.05)}#load-character,#create-character,#world-select,#credits,#about,#git,#death,#news,#error{pointer-events:none;position:absolute;z-index:1000;left:50%;font-family:AdvoCut,sans-serif;text-align:center;opacity:0;transition:none}#credits,#about,#death,#news,#git{top:50%}#parchment,#create-character,#load-character,#world-select,#error{position:absolute;z-index:2;top:55%;left:50%;text-align:center}.parchment-left{position:absolute;top:0;left:0}.parchment-right{position:absolute;top:0;right:0}.parchment-middle{position:absolute;top:0;left:50%}.parchment-left,.parchment-middle,.parchment-right,#respawn{image-rendering:pixelated}.animate .parchment-left{animation:move-parchment-left 1s ease-in-out 1}.animate .parchment-right{animation:move-parchment-right 1s ease-in-out 1}.left-ornament,.right-ornament{position:relative;display:inline-block;image-rendering:pixelated}#about p,#news p{width:80%;margin-top:5%;margin-left:10%}#news p{margin-top:3%}.close-about{margin-top:2%}.close-news{margin-top:5%}#death p{margin-top:10%}#death #respawn{cursor:pointer;margin-top:5%;background-color:transparent;border:none}.credits #credits,.about #about,.git #git,.death #death,.news #news,.error #error,.create-character #create-character,.world-select #world-select,.load-character #load-character{pointer-events:auto;opacity:1;transition:.5s opacity linear}@media only screen and (min-width: 1501px){#parchment h1,#news h1,#about h1{margin-top:60px}#parchment,#create-character,#load-character,#world-select,#error{width:1266px;height:546px;margin-top:-273px;margin-left:-633px}#parchment input,#parchment select{padding:0 15px;font-size:30px;border:3px dashed #b2af9b;border-radius:9px}#parchment input{height:60px;margin-top:30px}#parchment select{height:48px;margin-top:24px}#load-character h1,#create-character h1,#world-select h1{margin-top:30px}#credits,#about,#death,#news,#git{width:1266px;height:546px;margin-top:-273px;margin-left:-633px;font-size:30px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/interface/spritesheet.png);background-size:1266px}.parchment-left{width:114px;height:546px;background-position:0 -882px}.parchment-middle{width:1038px;height:546px;margin-left:-519px;background-position:-114px -882px}.parchment-right{width:114px;height:546px;background-position:-1152px -882px}.left-ornament,.right-ornament{top:9px;width:93px;height:36px;margin:0 20px;background-image:url(/img/interface/spritesheet.png);background-size:1266px}.left-ornament{background-position-x:-1062px}.right-ornament{background-position-x:-1155px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#parchment h1,#news h1,#about h1{margin-top:40px}#parchment,#create-character,#load-character,#world-select,#error{width:844px;height:364px;margin-top:-182px;margin-left:-422px}#parchment input,#parchment select{padding:0 10px;font-size:20px;border:2px dashed #b2af9b;border-radius:6px}#parchment input{height:40px;margin-top:20px}#parchment select{height:32px;margin-top:16px}#load-character h1,#create-character h1,#world-select h1{margin-top:20px}#credits,#about,#death,#news,#git{width:844px;height:364px;margin-top:-182px;margin-left:-422px;font-size:20px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/interface/spritesheet.png);background-size:844px}.parchment-left{width:76px;height:364px;background-position:0 -588px}.parchment-middle{width:692px;height:364px;margin-left:-346px;background-position:-76px -588px}.parchment-right{width:76px;height:364px;background-position:-768px -588px}.left-ornament,.right-ornament{top:6px;width:62px;height:24px;margin:0 15px;background-image:url(/img/interface/spritesheet.png);background-size:844px}.left-ornament{background-position-x:-708px}.right-ornament{background-position-x:-770px}}@media only screen and (max-width: 1000px){#parchment h1,#news h1,#about h1{margin-top:20px}#parchment,#create-character,#load-character,#world-select,#error{width:422px;height:182px;margin-top:-91px;margin-left:-211px}#parchment input,#parchment select{padding:0 5px;font-size:10px;border:1px dashed #b2af9b;border-radius:3px}#parchment input{height:20px;margin-top:10px}#parchment select{height:16px;margin-top:8px}#load-character h1,#create-character h1,#world-select h1{margin-top:10px}#credits,#about,#death,#news,#git{width:422px;height:182px;margin-top:-91px;margin-left:-211px;font-size:10px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/interface/spritesheet.png);background-size:422px}.parchment-left{width:38px;height:182px;background-position:0 -294px}.parchment-middle{width:346px;height:182px;margin-left:-173px;background-position:-38px -294px}.parchment-right{width:38px;height:182px;background-position:-384px -294px}.left-ornament,.right-ornament{top:3px;width:31px;height:12px;margin:0 10px;background-image:url(/img/interface/spritesheet.png);background-size:422px}.left-ornament{background-position-x:-354px}.right-ornament{background-position-x:-385px}}@media only screen and (min-width: 1501px){#parchment h1,#load-character h1,#news h1,#about h1{margin-top:30px;font-size:30px}#create-character h1{margin-top:10px;font-size:30px}.left-ornament,.right-ornament{top:12px}#parchment,#create-character,#load-character,#world-select,#error{font-size:20px}#parchment.create-character input{height:45px;margin-top:24px}.animate .parchment-middle{animation:parchment-middle-3 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:1038px;margin-left:-519px;background-position:-114px -882px}#respawn{width:375px;height:153px;margin:63px auto 0;background-position:0 -1428px}#respawn:active{background-position:-375px -1428px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#parchment,#create-character,#world-select,#load-character,#error{font-size:20px}#parchment.create-character input{height:30px;margin-top:15px}.animate .parchment-middle{animation:parchment-middle-2 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:692px;margin-left:-346px;background-position:-76px -588px}#respawn{width:250px;height:102px;margin:42px auto 0;background-position:0 -952px}#respawn:active{background-position:-250px -952px}}@media only screen and (max-width: 1000px){#parchment,#create-character,#load-character,#world-select,#error{font-size:10px}#parchment.create-character input{height:15px;margin-top:8px}.animate .parchment-middle{animation:parchment-middle-1 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:346px;margin-left:-173px;background-position:-38px -294px}#respawn{width:125px;height:51px;margin:21px auto 0;background-position:0 -476px}#respawn:active{background-position:-125px -476px}}#login,#back,#new-account{top:120%}#cancel-register,#play{top:92.5%}#back{left:15%}#login{left:41%}#cancel-register{left:10%}#new-account{left:66%}#play{left:65%}#remember-me{left:18%}#guest{left:61%}#guest-text{left:110%}input[type=range]{width:100%;background-image:-webkit-gradient(linear,left top,right top,color-stop(1,#4d4d4d),color-stop(1,#c5c5c5));-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none!important;appearance:none!important}input[type=range]::-webkit-slider-thumb{background-color:#707070;border:1px solid #000}input[type=range]::-webkit-slider-thumb:active{background-color:#fcda5c}@media only screen and (min-width: 1501px){#remember-me-text,#guest-text{height:24px;padding-left:15px;font-size:30px}#back,#login{background-position-x:-288px}#new-account{background-position-x:-576px}#cancel-register,#cancel-worlds{background-position-x:-864px}#continue-worlds{background-position-x:-1152px}.actions button{position:absolute;cursor:pointer;width:288px;height:81px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:1728px;border:none}.actions button:hover,.actions button:focus{background-position-y:-81px}.actions button:active{background-position-y:-162px}#play,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:288px;height:81px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:1728px;border:none}#play:hover,#play:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-81px}#play:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-162px}#play:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-243px}.validation-error,.validation-warning,.status{font-size:24px}.validation-summary{width:384px}input[type=range]{height:9px;border-radius:9px}input[type=range]::-webkit-slider-thumb{width:15px;height:24px;border-radius:6px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#remember-me-text,#guest-text{height:16px;padding-left:10px;font-size:20px}#back,#login{background-position-x:-192px}#new-account{background-position-x:-384px}#cancel-register,#cancel-worlds{background-position-x:-576px}#continue-worlds{background-position-x:-768px}.actions button{position:absolute;cursor:pointer;width:192px;height:54px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:1152px;border:none}.actions button:hover,.actions button:focus{background-position-y:-54px}.actions button:active{background-position-y:-108px}#play,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:192px;height:54px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:1152px;border:none}#play:hover,#play:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-54px}#play:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-108px}#play:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-162px}.validation-error,.validation-warning,.status{font-size:16px}.validation-summary{width:256px}input[type=range]{height:6px;border-radius:6px}input[type=range]::-webkit-slider-thumb{width:10px;height:16px;border-radius:4px}}@media only screen and (max-width: 1000px){#remember-me-text,#guest-text{height:8px;padding-left:5px;font-size:10px}#back,#login{background-position-x:-96px}#new-account{background-position-x:-192px}#cancel-register,#cancel-worlds{background-position-x:-288px}#continue-worlds{background-position-x:-384px}.actions button{position:absolute;cursor:pointer;width:96px;height:27px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:576px;border:none}.actions button:hover,.actions button:focus{background-position-y:-27px}.actions button:active{background-position-y:-54px}#play,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:96px;height:27px;background-color:transparent;background-image:url(/img/interface/buttons.png);background-size:576px;border:none}#play:hover,#play:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-27px}#play:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-54px}#play:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-81px}.validation-error,.validation-warning,.status{font-size:8px}.validation-summary{width:128px}input[type=range]{height:3px;border-radius:3px}input[type=range]::-webkit-slider-thumb{width:5px;height:8px;border-radius:2px}}@media only screen and (min-width: 1501px){.validation-error,.validation-warning,.status{font-size:24px}.stroke{text-shadow:2px 2px 0 #373737,2px -2px 0 #373737,0 2px 0 #373737,2px 0 0 #373737,-2px 2px 0 #373737,-2px -2px 0 #373737,0 -2px 0 #373737,0 2px 0 #373737,-2px 0 0 #373737}#remember-me-text,#guest-text{width:225px}.validation-summary{width:366px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#remember-me-text,#guest-text{width:150px}input[type=range]::-webkit-slider-thumb{height:15px}.stroke{text-shadow:1px 1px 0 #373737,1px -1px 0 #373737,0 1px 0 #373737,1px 0 0 #373737,-1px 1px 0 #373737,-1px -1px 0 #373737,0 -1px 0 #373737,0 1px 0 #373737,-1px 0 0 #373737}}@media only screen and (max-width: 1000px){#remember-me-text,#guest-text{width:100px}#yes{left:0}#no{left:40%}#about h1,#credits h1{font-size:16px}}.footer-button{color:#c6c0a3;text-decoration:none}body.intro #intro-container{transition:.4s opacity linear}body.intro footer,body.intro #logo,body.intro #parchment{opacity:1}body.intro #game-container{pointer-events:none;opacity:0}body.intro footer{position:absolute;bottom:5%;left:0;width:100%;font-family:AdvoCut,sans-serif;font-size:18px;color:#c6c0a3;text-align:center;text-shadow:0 1px 0 black;transition:.2s opacity linear}body.intro footer div{display:inline-block;padding:0 5px}body.intro footer div span:hover{cursor:pointer;color:#fcda5c}@media only screen and (min-width: 1501px){body.intro footer{font-size:28px}}body.intro #load-character form,body.intro #create-character form,body.intro #world-select form{position:relative}body.intro .validation-summary{height:1em;margin:.5em auto}body.intro .validation-error{font-size:15px;color:#800;text-shadow:2px 2px 2px #f66}body.intro .validation-warning{font-size:15px;color:#a8a210;text-shadow:2px 2px 2px #fc6}body.intro .status{font-size:15px;color:#03c;text-shadow:2px 2px 2px #39f}body.intro .loader{position:relative;margin-top:30%}@media only screen and (min-width: 1501px){body.intro .loader{font-size:26px}}body.intro .loader-dot{animation:1s blink infinite}body.intro .loader-dot:nth-child(2){animation-delay:.25s}body.intro .loader-dot:nth-child(3){animation-delay:.5s}#world-select-button{cursor:pointer;position:absolute;bottom:0;left:0;margin:3.5em;padding:.5em 1em;font-family:AdvoCut,sans-serif,arial;font-size:24px;color:#eee;background-color:#d83939;border:2px solid #373737;border-radius:.25em}#world-select-button:hover{background-color:#e26d6d;border-color:#fcda5c}#world-select-button:active{background-color:#db4848}#world-select-button strong{display:block;letter-spacing:.05em}#world-select-button span{font-size:20px}#world-select form{display:flex;flex-flow:column;height:65%;padding:1em 5em}#worlds{overflow-y:auto;padding:0 5em}#worlds li{cursor:pointer;display:flex;flex:1;justify-content:space-evenly;padding:.5em 0}#worlds li:nth-child(odd){background-color:rgba(0,0,0,.25)}#worlds li:hover{background-color:rgba(0,0,0,.5)}#worlds li:active{background-color:rgba(0,0,0,.75)}#worlds li.active{color:#fcda5c;background-color:rgba(0,0,0,.75);outline:2px solid #fcda5c}.button-row{display:flex;gap:1em;justify-content:space-between;width:100%;margin:.5em 0}#cancel-worlds,#continue-worlds{position:relative}@media only screen and (min-width: 1501px){#world-select form{padding:1em 7.5em}}#alert{width:100%;height:50px;font-family:AdvoCut,arial,sans-serif;font-size:20px;line-height:50px;color:#eee;text-align:center;background-color:#d83939;border-bottom:1px solid #000}#game-version{position:absolute;right:0;bottom:0;padding:3em;font-family:AdvoCut,sans-serif,arial;font-size:24px;color:#eee}#leaderboards.container{z-index:1000}#logo{width:100%;max-width:600px;height:-moz-fit-content;height:fit-content;color:#f0e91e;text-align:center;position:absolute;left:33%;right:50%}#ability-shortcut{position:absolute;margin-left:40%;opacity:0;transition:opacity 2s}#ability-shortcut ul{overflow:hidden;width:128%;margin-left:7%;padding:0;list-style-type:none}#ability-shortcut ul li{float:left;margin-top:1%;margin-right:4%}@media only screen and (min-width: 1501px){.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:48px;height:48px}#ability-quickslot1{top:6px;left:27px}#ability-quickslot2{top:6px;left:93px}#ability-quickslot3{top:6px;left:159px}#ability-quickslot4{top:6px;left:225px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:32px;height:32px}#ability-quickslot1{top:4px;left:18px}#ability-quickslot2{top:4px;left:62px}#ability-quickslot3{top:4px;left:106px}#ability-quickslot4{top:4px;left:150px}}@media only screen and (min-width: 1501px){#ability-shortcut{cursor:url(/img/hand.png),auto;bottom:5px;width:400px;height:80px;background-image:url(/img/interface/skillslots.png);background-size:400px}}.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:64px;height:64px;margin-top:2px}.quickslot-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:512px}.quickslot-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:512px}.quickslot-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:512px}.quickslot-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:512px}.quickslot-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-256px 1px;background-size:512px}.quickslot-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-320px 1px;background-size:512px}.quickslot-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-384px 1px;background-size:512px}.quickslot-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-448px 1px;background-size:512px}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#ability-shortcut{cursor:url(/img/hand.png),auto;bottom:5px;width:400px;height:80px;background-image:url(/img/interface/skillslots.png);background-size:400px}}.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:64px;height:64px;margin-top:2px}.quickslot-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:512px}.quickslot-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:512px}.quickslot-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:512px}.quickslot-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:512px}.quickslot-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-256px 1px;background-size:512px}.quickslot-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-320px 1px;background-size:512px}.quickslot-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-384px 1px;background-size:512px}.quickslot-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-448px 1px;background-size:512px}@media only screen and (max-width: 1000px){#ability-shortcut{cursor:url(/img/hand.png),auto;bottom:5px;width:200px;height:40px;background-image:url(/img/interface/skillslots.png);background-size:200px}}.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:64px;height:64px;margin-top:2px}.quickslot-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:512px}.quickslot-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:512px}.quickslot-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:512px}.quickslot-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:512px}.quickslot-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-256px 1px;background-size:512px}.quickslot-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-320px 1px;background-size:512px}.quickslot-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-384px 1px;background-size:512px}.quickslot-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-448px 1px;background-size:512px}.quickslot-icon-intimidate:hover,.quickslot-icon-run:hover,.quickslot-icon-awareness:hover,.quickslot-icon-dualistsmark:hover,.quickslot-icon-hotshot:hover,.quickslot-icon-thickskin:hover,.quickslot-icon-precognition:hover,.quickslot-icon-secretcalling:hover{background-position-y:-60px}.quickslot-icon-intimidate:active,.quickslot-icon-intimidate.active,.quickslot-icon-run:active,.quickslot-icon-run.active,.quickslot-icon-awareness:active,.quickslot-icon-awareness.active,.quickslot-icon-dualistsmark:active,.quickslot-icon-dualistsmark.active,.quickslot-icon-hotshot:active,.quickslot-icon-hotshot.active,.quickslot-icon-thickskin:active,.quickslot-icon-thickskin.active,.quickslot-icon-precognition:active,.quickslot-icon-precognition.active,.quickslot-icon-secretcalling:active,.quickslot-icon-secretcalling.active{background-position-y:-120px}@media only screen and (min-width: 1501px){#ability-quickslot1{left:36px}#ability-quickslot2{left:124px}#ability-quickslot3{left:212px}#ability-quickslot4{left:300px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#ability-shortcut{margin-left:25%}.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:64px;height:64px;margin-top:4px;margin-left:18px}.quickslot-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:512px}.quickslot-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:512px}.quickslot-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:512px}.quickslot-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:512px}.quickslot-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-256px 1px;background-size:512px}.quickslot-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-320px 1px;background-size:512px}.quickslot-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-384px 1px;background-size:512px}.quickslot-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-448px 1px;background-size:512px}.quickslot-icon-intimidate:hover,.quickslot-icon-run:hover,.quickslot-icon-awareness:hover,.quickslot-icon-dualistsmark:hover,.quickslot-icon-hotshot:hover,.quickslot-icon-thickskin:hover,.quickslot-icon-precognition:hover,.quickslot-icon-secretcalling:hover{background-position-y:-60px}.quickslot-icon-intimidate:active,.quickslot-icon-intimidate.active,.quickslot-icon-run:active,.quickslot-icon-run.active,.quickslot-icon-awareness:active,.quickslot-icon-awareness.active,.quickslot-icon-dualistsmark:active,.quickslot-icon-dualistsmark.active,.quickslot-icon-hotshot:active,.quickslot-icon-hotshot.active,.quickslot-icon-thickskin:active,.quickslot-icon-thickskin.active,.quickslot-icon-precognition:active,.quickslot-icon-precognition.active,.quickslot-icon-secretcalling:active,.quickslot-icon-secretcalling.active{background-position-y:-120px}}@media only screen and (max-width: 1000px){#ability-shortcut{right:0;margin-bottom:50px}.ability-quickslot{cursor:url(/img/hand.png),auto;position:absolute;width:32px;height:32px;margin-top:0;margin-left:0}.quickslot-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:256px}.quickslot-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-32px 1px;background-size:256px}.quickslot-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:256px}.quickslot-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-96px 1px;background-size:256px}.quickslot-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:256px}.quickslot-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-160px 1px;background-size:256px}.quickslot-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:256px}.quickslot-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-224px 1px;background-size:256px}.quickslot-icon-intimidate:hover,.quickslot-icon-run:hover,.quickslot-icon-awareness:hover,.quickslot-icon-dualistsmark:hover,.quickslot-icon-hotshot:hover,.quickslot-icon-thickskin:hover,.quickslot-icon-precognition:hover,.quickslot-icon-secretcalling:hover{background-position-y:-30px}.quickslot-icon-intimidate:active,.quickslot-icon-intimidate.active,.quickslot-icon-run:active,.quickslot-icon-run.active,.quickslot-icon-awareness:active,.quickslot-icon-awareness.active,.quickslot-icon-dualistsmark:active,.quickslot-icon-dualistsmark.active,.quickslot-icon-hotshot:active,.quickslot-icon-hotshot.active,.quickslot-icon-thickskin:active,.quickslot-icon-thickskin.active,.quickslot-icon-precognition:active,.quickslot-icon-precognition.active,.quickslot-icon-secretcalling:active,.quickslot-icon-secretcalling.active{background-position-y:-60px}}#achievements-container{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;margin:auto;font-family:AdvoCut,sans-serif}#achievements-container>ul>li:last-child.achievement-element{padding-bottom:0!important}.achievement-element>p.achievement-title{float:left;color:#fff}.achievement-element>p.achievement-progress{float:right;color:#fff}.coin{position:absolute}@media only screen and (min-width: 1501px){#achievements-container{width:954px;height:390px;font-size:22px}.achievement-element{width:954px;height:78px;padding-bottom:24px;background:url(/img/interface/achievements.png) 0 -288px no-repeat;background-size:1248px}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:27px}.achievement-element>p.achievement-title{margin-left:90px;font-size:24px}.achievement-element>p.achievement-description{margin-left:285px}.achievement-element>p.achievement-progress{margin-right:6px}.coin{width:72px;height:78px;background:url(/img/interface/achievements.png) no-repeat;background-size:1248px}.coin-default{background-position:-216px -78px}.coin-gravemystery{background-position:-648px 0}.coin-kaetramdungeon{background-position:-360px 0}.coin-lumberjacking50,.coin-lumberjacking100,.coin-lumberjacking500,.coin-lumberjacking1000,.coin-lumberjacking5000,.coin-lumberjacking10000,.coin-mining50,.coin-mining100,.coin-mining500,.coin-mining1000,.coin-mining5000,.coin-mining10000,.coin-fishing50,.coin-fishing100,.coin-fishing500,.coin-fishing1000,.coin-fishing5000,.coin-fishing10000{background-position:-216px -78px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#achievements-container{width:636px;height:260px;font-size:22px}.achievement-element{width:636px;height:52px;padding-bottom:16px;background:url(/img/interface/achievements.png) 0 -192px no-repeat;background-size:832px}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:18px}.achievement-element>p.achievement-title{margin-left:60px;font-size:16px}.achievement-element>p.achievement-description{margin-left:190px}.achievement-element>p.achievement-progress{margin-right:4px}.coin{width:48px;height:52px;background:url(/img/interface/achievements.png) no-repeat;background-size:832px}.coin-default{background-position:-144px -52px}.coin-gravemystery{background-position:-432px 0}.coin-kaetramdungeon{background-position:-240px 0}.coin-lumberjacking50,.coin-lumberjacking100,.coin-lumberjacking500,.coin-lumberjacking1000,.coin-lumberjacking5000,.coin-lumberjacking10000,.coin-mining50,.coin-mining100,.coin-mining500,.coin-mining1000,.coin-mining5000,.coin-mining10000,.coin-fishing50,.coin-fishing100,.coin-fishing500,.coin-fishing1000,.coin-fishing5000,.coin-fishing10000{background-position:-144px -52px}}@media only screen and (max-width: 1000px){#achievements-container{width:318px;height:130px;font-size:22px}.achievement-element{width:318px;height:26px;padding-bottom:8px;background:url(/img/interface/achievements.png) 0 -96px no-repeat;background-size:416px}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:9px}.achievement-element>p.achievement-title{margin-left:30px;font-size:8px}.achievement-element>p.achievement-description{margin-left:95px}.achievement-element>p.achievement-progress{margin-right:2px}.coin{width:24px;height:26px;background:url(/img/interface/achievements.png) no-repeat;background-size:416px}.coin-default{background-position:-72px -26px}.coin-gravemystery{background-position:-216px 0}.coin-kaetramdungeon{background-position:-120px 0}.coin-lumberjacking50,.coin-lumberjacking100,.coin-lumberjacking500,.coin-lumberjacking1000,.coin-lumberjacking5000,.coin-lumberjacking10000,.coin-mining50,.coin-mining100,.coin-mining500,.coin-mining1000,.coin-mining5000,.coin-mining10000,.coin-fishing50,.coin-fishing100,.coin-fishing500,.coin-fishing1000,.coin-fishing5000,.coin-fishing10000{background-position:-72px -26px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.achievement-element>p.achievement-title{font-size:16px}.achievement-element>p.achievement-description{font-size:15px}}@media only screen and (max-width: 1000px){.achievement-element>p.achievement-title{font-size:10px}.achievement-element>p.achievement-description{margin-left:110px;font-size:9px}}#action-container{position:absolute;display:none}#action-page{cursor:url(/img/hand.png),auto;position:absolute;width:100%;height:100%;font-family:AdvoCut,sans-serif}#action-page ul{position:absolute;display:inline-flex}#action-description-attack,#action-description-defense,#action-description-bonuses,#action-description-enchantments{position:absolute;overflow:auto;width:45%;height:30%}.action-item-name{text-align:center}.action-item-name,.action-item-description{color:#fff}@media only screen and (min-width: 1501px){#action-container{right:303px;bottom:102px;width:192px;height:267px}#action-page{background:url(/img/interface/main.png) -672px -1176px no-repeat;background-size:1470px}#action-page ul{bottom:12px;left:12px}#action-page ul li{margin-left:9px}.action-wield,.action-equip,.action-attack{background:url(/img/interface/main.png) -1200px -1152px no-repeat;background-size:1470px}.action-drop-one{background:url(/img/interface/main.png) -1200px -1200px no-repeat;background-size:1470px}.action-drop-many{background:url(/img/interface/main.png) -1200px -1248px no-repeat;background-size:1470px}.action-eat{background:url(/img/interface/main.png) -1200px -1296px no-repeat;background-size:1470px}.action-eat2{background:url(/img/interface/main.png) -1200px -1344px no-repeat;background-size:1470px}.action-trade{background:url(/img/interface/main.png) -1200px -1392px no-repeat;background-size:1470px}.action-potion{background:url(/img/interface/main.png) -1200px -1440px no-repeat;background-size:1470px}.action-follow{background:url(/img/interface/main.png) -1200px -1488px no-repeat;background-size:1470px}.action-examine{background:url(/img/interface/main.png) -1200px -1536px no-repeat;background-size:1470px}.action-addfriend{background:url(/img/interface/main.png) -1200px -1584px no-repeat;background-size:1470px}.action-button{width:48px;height:48px}.action-button:hover{background-position-x:-1296px}.action-button:active{background-position-x:-1248px}.action-item-name{margin-top:9px;margin-bottom:6px;margin-left:12px;font-size:18px}.action-item-description{margin-left:9px;font-size:12px}#action-description-attack{left:12px}#action-description-defense{right:0}#action-description-bonuses{bottom:66px;left:12px}#action-description-enchantments{right:0;bottom:66px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#action-container{right:202px;bottom:68px;width:128px;height:178px}#action-page{background:url(/img/interface/main.png) -448px -784px no-repeat;background-size:980px}#action-page ul{bottom:8px;left:8px}#action-page ul li{margin-left:6px}.action-wield,.action-equip,.action-attack{background:url(/img/interface/main.png) -800px -768px no-repeat;background-size:980px}.action-drop-one{background:url(/img/interface/main.png) -800px -800px no-repeat;background-size:980px}.action-drop-many{background:url(/img/interface/main.png) -800px -832px no-repeat;background-size:980px}.action-eat{background:url(/img/interface/main.png) -800px -864px no-repeat;background-size:980px}.action-eat2{background:url(/img/interface/main.png) -800px -896px no-repeat;background-size:980px}.action-trade{background:url(/img/interface/main.png) -800px -928px no-repeat;background-size:980px}.action-potion{background:url(/img/interface/main.png) -800px -960px no-repeat;background-size:980px}.action-follow{background:url(/img/interface/main.png) -800px -992px no-repeat;background-size:980px}.action-examine{background:url(/img/interface/main.png) -800px -1024px no-repeat;background-size:980px}.action-addfriend{background:url(/img/interface/main.png) -800px -1056px no-repeat;background-size:980px}.action-button{width:32px;height:32px}.action-button:hover{background-position-x:-864px}.action-button:active{background-position-x:-832px}.action-item-name{margin-top:6px;margin-bottom:4px;margin-left:8px;font-size:12px}.action-item-description{margin-left:6px;font-size:8px}#action-description-attack{left:8px}#action-description-defense{right:0}#action-description-bonuses{bottom:44px;left:8px}#action-description-enchantments{right:0;bottom:44px}}@media only screen and (min-width: 1501px){#action-container{right:298px;bottom:80px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#action-container{right:202px;bottom:68px}}#attack-info{position:absolute;left:40%;display:none}#attack-info .name,#attack-info .health{position:absolute;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}#attack-info .name{overflow:hidden;width:100%}#attack-info .details{overflow:hidden;width:100%;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}#attack-info .health{left:5%;overflow:hidden;width:90%}@media only screen and (min-width: 1501px){#attack-info{top:0;width:300px;height:96px;background:url(/img/interface/main.png) -96px -1392px no-repeat;background-size:1470px}#attack-info .name{margin-top:9px}#attack-info .details{margin-top:36px}#attack-info .health{height:18px;background-color:red;border:3px solid #373737;border-radius:6px;transition:.5s width ease}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#attack-info{top:0;width:200px;height:64px;background:url(/img/interface/main.png) -64px -928px no-repeat;background-size:980px}#attack-info .name{margin-top:6px}#attack-info .details{margin-top:24px}#attack-info .health{height:12px;background-color:red;border:2px solid #373737;border-radius:4px;transition:.5s width ease}}@media only screen and (max-width: 1000px){#attack-info{top:0;width:100px;height:32px;background:url(/img/interface/main.png) -32px -464px no-repeat;background-size:490px}#attack-info .name{margin-top:3px}#attack-info .details{margin-top:12px}#attack-info .health{height:6px;background-color:red;border:1px solid #373737;border-radius:2px;transition:.5s width ease}}#bank{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#bank-container{float:right}#bank-slot{position:absolute;top:9%;overflow:hidden;overflow-y:scroll}#bank-slot ul{margin:0;padding:0;list-style-type:none}#bank-slot ul li{float:left}#bank-inventory-slots{position:absolute;overflow:hidden;overflow-y:scroll}#bank-inventory-slots ul{margin:0;padding:0;list-style-type:none}#bank-inventory-slots ul li{float:left}.bank-item-count{font-family:AdvoCut,sans-serif!important;color:gold!important}.bank-item-count{text-shadow:1px 1px black}@media only screen and (min-width: 1501px){#bank{width:900px;height:501px}#bank-container,#bank-inventory-container{background-image:url(/img/interface/bank.png);background-size:930px}#bank-inventory-slots{top:48px;left:60px;width:288px;height:276px}#bank-inventory-slots ul li .item-slot{margin-bottom:12px}#bank-container{width:513px;height:501px;background-position:-396px 0}#bank-slot{left:420px;width:432px;height:390px}#bank-slot ul li .item-slot{margin-bottom:12px;margin-left:6px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#bank{width:600px;height:334px}#bank-container,#bank-inventory-container{background-image:url(/img/interface/bank.png);background-size:620px}#bank-inventory-slots{top:32px;left:40px;width:192px;height:184px}#bank-inventory-slots ul li .item-slot{margin-bottom:8px}#bank-container{width:342px;height:334px;background-position:-264px 0}#bank-slot{left:280px;width:288px;height:260px}#bank-slot ul li .item-slot{margin-bottom:8px;margin-left:4px}}@media only screen and (max-width: 1000px){#bank{width:300px;height:167px}#bank-container,#bank-inventory-container{background-image:url(/img/interface/bank.png);background-size:310px}#bank-inventory-slots{top:16px;left:20px;width:96px;height:92px}#bank-inventory-slots ul li .item-slot{margin-bottom:4px}#bank-container{width:171px;height:167px;background-position:-132px 0}#bank-slot{left:140px;width:144px;height:130px}#bank-slot ul li .item-slot{margin-bottom:4px;margin-left:2px}}@media only screen and (max-width: 1000px){#bank{transform:scale(1.5)}#bank-slot ul li .item-slot{margin-bottom:8px;margin-left:3px}#bank-inventory-slots{left:11px;width:106px}#bank-inventory-slots ul li .item-slot{margin-bottom:8px}}#bubbles{pointer-events:none;position:absolute;z-index:5;top:0;left:0;overflow:hidden;width:100%;height:100%;font-family:AdvoCut,sans-serif}#bubbles p{margin-top:6px}#bubbles a{pointer-events:auto;color:#fcda5c;text-decoration:none}.pointer{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;display:inline-block}.bubble{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;display:inline-block;padding:3px 10px 0;color:rgba(255,255,255,.8);text-align:center;background-color:rgba(45,45,45,.9);border-radius:8px}.bubble-tip{position:relative;top:10px;width:11px;height:10px;margin:0 auto;background-image:url(/img/thingy.png)}#buttons{cursor:url(/img/hand.png),auto;position:absolute;right:0;bottom:0;overflow-x:hidden;overflow-y:hidden;background-color:rgba(0,0,0,0)}#buttons ul{float:right;overflow:hidden;margin:0;padding:0;list-style-type:none}#buttons ul li{float:left}.accept-button{position:absolute}@media only screen and (min-width: 1501px){#inventory-button,#chat-button,#profile-button,#settings-button,#warp-button,#audio-button,#achievements-button,#quests-button,#friends-button,.placeholder-button{position:relative;width:66px;height:75px;background:url(/img/interface/hud_buttons.png) 0 0 no-repeat;background-size:417px}#chat-button{background-position:0 -78px}#chat-button:hover{background-position-x:-69px}#chat-button.active,#chat-button:active{background-position-x:-138px}#inventory-button{background-position-x:0}#inventory-button:hover{background-position-x:-69px}#inventory-button.active,#inventory-button:active{background-position-x:-138px}#profile-button{background-position-x:-213px}#profile-button:hover{background-position-x:-282px}#profile-button.active,#profile-button:active{background-position-x:-351px}#settings-button{background-position-y:-312px}#settings-button:hover{background-position-x:-69px}#settings-button.active,#settings-button:active{background-position-x:-138px}#warp-button{background-position-y:-234px}#warp-button:hover{background-position-x:-69px}#warp-button.active,#warp-button:active{background-position-x:-138px}#audio-button{background-position-x:-294px}#audio-button:hover{background-position-x:-378px}#audio-button.active,#audio-button:active{background-position-x:-336px}#achievements-button{background-position:-213px -312px}#achievements-button:hover{background-position-x:-282px}#achievements-button.active,#achievements-button:active{background-position-x:-351px}#quests-button{background-position:-213px -78px}#quests-button:hover{background-position-x:-282px}#quests-button.active,#quests-button:active{background-position-x:-351px}#friends-button{background-position:-213px -234px}#friends-button:hover{background-position-x:-282px}#friends-button.active,#friends-button:active{background-position-x:-351px}.placeholder-button{background-position:-1200px -1008px}.placeholder-button:hover{background-position-x:-1248px}.placeholder-button.active,.placeholder-button:active{background-position-x:-1296px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#inventory-button,#chat-button,#profile-button,#settings-button,#warp-button,#audio-button,#achievements-button,#quests-button,#friends-button,.placeholder-button{position:relative;width:44px;height:50px;background:url(/img/interface/hud_buttons.png) 0 0 no-repeat;background-size:278px}#chat-button{background-position:0 -52px}#chat-button:hover{background-position-x:-46px}#chat-button.active,#chat-button:active{background-position-x:-92px}#inventory-button{background-position-x:0}#inventory-button:hover{background-position-x:-46px}#inventory-button.active,#inventory-button:active{background-position-x:-92px}#profile-button{background-position-x:-142px}#profile-button:hover{background-position-x:-188px}#profile-button.active,#profile-button:active{background-position-x:-234px}#settings-button{background-position-y:-208px}#settings-button:hover{background-position-x:-46px}#settings-button.active,#settings-button:active{background-position-x:-92px}#warp-button{background-position-y:-156px}#warp-button:hover{background-position-x:-46px}#warp-button.active,#warp-button:active{background-position-x:-92px}#audio-button{background-position-x:-196px}#audio-button:hover{background-position-x:-252px}#audio-button.active,#audio-button:active{background-position-x:-224px}#achievements-button{background-position:-142px -208px}#achievements-button:hover{background-position-x:-188px}#achievements-button.active,#achievements-button:active{background-position-x:-234px}#quests-button{background-position:-142px -52px}#quests-button:hover{background-position-x:-188px}#quests-button.active,#quests-button:active{background-position-x:-234px}#friends-button{background-position:-142px -156px}#friends-button:hover{background-position-x:-188px}#friends-button.active,#friends-button:active{background-position-x:-234px}.placeholder-button{background-position:-800px -672px}.placeholder-button:hover{background-position-x:-832px}.placeholder-button.active,.placeholder-button:active{background-position-x:-864px}}@media only screen and (min-width: 1501px){.accept-button{width:288px;height:81px;background:url(/img/interface/buttons.png) -1440px 0 no-repeat;background-size:1728px}.accept-button:hover{background-position-y:-81px}.accept-button.active,.accept-button:active{background-position-y:-162px}.accept-button.disabled{background-position-y:-243px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.accept-button{width:192px;height:54px;background:url(/img/interface/buttons.png) -960px 0 no-repeat;background-size:1152px}.accept-button:hover{background-position-y:-54px}.accept-button.active,.accept-button:active{background-position-y:-108px}.accept-button.disabled{background-position-y:-162px}}@media only screen and (max-width: 1000px){.accept-button{width:96px;height:27px;background:url(/img/interface/buttons.png) -480px 0 no-repeat;background-size:576px}.accept-button:hover{background-position-y:-27px}.accept-button.active,.accept-button:active{background-position-y:-54px}.accept-button.disabled{background-position-y:-81px}}#chat{pointer-events:none;position:absolute;bottom:30px;left:12px;display:none}#chat p{padding-left:8px;font-family:AdvoCut,sans-serif}#chat-log{overflow-y:scroll;height:100%;text-shadow:2px 2px 2px black;background:linear-gradient(0deg,rgba(0,0,0,.4),20%,transparent);border:1px solid black;border-top-left-radius:4px;border-top-right-radius:4px}#chat-log::-webkit-scrollbar-thumb{pointer-events:auto}#chat-input{pointer-events:auto;display:none;width:calc(100% - 6px);background-color:rgba(0,0,0,.75);border:1px solid black;border-bottom-right-radius:4px;border-bottom-left-radius:4px}#chat-log,#chat-input{font-family:AdvoCut,sans-serif;font-size:16px;color:#fff}@media only screen and (min-width: 1501px){#chat{width:750px;height:300px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#chat{width:500px;height:200px}}@media only screen and (max-width: 1000px){#chat{width:250px;height:100px}}@media only screen and (max-width: 1000px){#chat{bottom:70px;left:4px}}#game-container{position:inherit;z-index:100;width:100%;height:100%;margin:0;background-color:rgba(0,0,0,.2);transition:1s opacity linear}#background,#text-canvas,#foreground,#cursor,#overlay{transform:translateZ(0);margin:0;padding:0}#canvas,#foreground,#background,#text-canvas,#overlay,#game-container,#border,#cursor{cursor:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media only screen and (max-width: 1000px){#canvas,#foreground,#background,#text-canvas,#overlay,#game-container,#border,#cursor{cursor:url(/img/hand.png),auto}}#border{position:absolute;top:0;left:0;width:100%;height:100%;margin-left:0;padding:0;background:none;border:0}.container{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none}.container-slot,.container-slot-large{margin:auto}.container-slot.flex,.container-slot-large.flex{display:inline-flex;align-items:center;justify-content:space-between}.container-slot>p,.container-slot-large>p{font-size:20px;color:#a81005;text-align:center}.container-slot>p.left,.container-slot-large>p.left{float:left;text-align:left}.container-slot>p.right,.container-slot-large>p.right{float:right;text-align:right}.container-slot>p.yellow,.container-slot-large>p.yellow{color:#a8a805}.container-slot>p.green,.container-slot-large>p.green{color:#10a805}.container-slot>p.white,.container-slot-large>p.white{color:#fff}@media only screen and (min-width: 1501px){.container{width:1032px;height:471px;margin:auto;background:url(/img/interface/spritesheet.png) 0 -240px no-repeat;background-size:1266px}.container-slot{width:306px;height:45px;margin-top:6px;background:url(/img/interface/characterdialogsheet.png) -432px -768px;background-size:1860px}.container-slot:hover{background-position-y:-960px}.container-slot:active{background-position-y:-1008px}.container-slot-large{width:498px;height:45px;margin-top:6px;background:url(/img/interface/leaderboards.png) 0 -480px;background-size:1266px}.container-slot-large:hover{background-position-y:-528px}.container-slot-large:active{background-position-y:-576px}.container-slot>p,.container-slot-large>p{padding-top:12px}.new-close-container{width:33px;height:36px;background:url(/img/interface/guilds/elements.png) -336px 0;background-size:1152px}.new-close-container:hover{background-position-x:-372px}.new-close-container:active,.new-close-container.active{background-position-x:-408px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.container{width:688px;height:314px;margin:auto;background:url(/img/interface/spritesheet.png) 0 -160px no-repeat;background-size:844px}.container-slot{width:204px;height:30px;margin-top:4px;background:url(/img/interface/characterdialogsheet.png) -288px -512px;background-size:1240px}.container-slot:hover{background-position-y:-640px}.container-slot:active{background-position-y:-672px}.container-slot-large{width:332px;height:30px;margin-top:4px;background:url(/img/interface/leaderboards.png) 0 -320px;background-size:844px}.container-slot-large:hover{background-position-y:-352px}.container-slot-large:active{background-position-y:-384px}.container-slot>p,.container-slot-large>p{padding-top:8px}.new-close-container{width:22px;height:24px;background:url(/img/interface/guilds/elements.png) -224px 0;background-size:768px}.new-close-container:hover{background-position-x:-248px}.new-close-container:active,.new-close-container.active{background-position-x:-272px}}@media only screen and (max-width: 1000px){.container{width:344px;height:157px;margin:auto;background:url(/img/interface/spritesheet.png) 0 -80px no-repeat;background-size:422px}.container-slot{width:102px;height:15px;margin-top:2px;background:url(/img/interface/characterdialogsheet.png) -144px -256px;background-size:620px}.container-slot:hover{background-position-y:-320px}.container-slot:active{background-position-y:-336px}.container-slot-large{width:166px;height:15px;margin-top:2px;background:url(/img/interface/leaderboards.png) 0 -160px;background-size:422px}.container-slot-large:hover{background-position-y:-176px}.container-slot-large:active{background-position-y:-192px}.container-slot>p,.container-slot-large>p{padding-top:4px}.new-close-container{width:11px;height:12px;background:url(/img/interface/guilds/elements.png) -112px 0;background-size:384px}.new-close-container:hover{background-position-x:-124px}.new-close-container:active,.new-close-container.active{background-position-x:-136px}}@media only screen and (max-width: 1000px){.container-slot>p,.container-slot-large>p{padding-top:2px;font-size:10px}}.close-container{top:-2%!important;left:96%!important}.new-close-container{position:absolute;right:1px}dialog{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto;padding:0;font-family:AdvoCut,sans-serif;font-size:16px;color:#e3e3e3;background-color:rgba(45,45,45,.8);border:none}.dialog-count{display:block;margin:0 auto;font-family:AdvoCut,sans-serif;color:#fff;background-color:rgba(0,0,0,.5)}.dialog-title{text-align:center}.dialog-accept,.dialog-cancel{cursor:pointer;cursor:url(/img/hand.png),auto}.dialog-buttons{display:flex;justify-content:space-between;padding:0 10px}@media only screen and (min-width: 1501px){.dialog{width:159px;height:120px;background:url(/img/interface/main.png) -432px -1488px no-repeat;background-size:1470px}.dialog-count{width:120px;margin-bottom:3px}.dialog-title{margin-top:9px;margin-bottom:9px;font-size:18px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.dialog{width:106px;height:80px;background:url(/img/interface/main.png) -288px -992px no-repeat;background-size:980px}.dialog-count{width:80px;margin-bottom:2px}.dialog-title{margin-top:6px;margin-bottom:6px;font-size:12px}}@media only screen and (max-width: 1000px){.dialog-title{font-size:10px}.dialog-buttons{transform:scale(2);margin-top:8px;padding:0 30px}}#enchant{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#enchant-inventory-slots{position:absolute;overflow:hidden;overflow-y:scroll;margin:0;padding:0;list-style-type:none}#enchant-inventory-slots li{float:left}#enchant-selected-item,#enchant-shards{position:absolute;top:80%;background-size:cover}#enchant-selected-item{left:11%}#enchant-shards{left:34%}@media only screen and (min-width: 1501px){#enchant{width:387px;height:465px;background:url(/img/interface/containers.png) 0 0;background-size:1536px}#enchant-selected-item,#enchant-shards{width:48px;height:45px}#enchant-container{background-image:url(/img/interface/containers.png);background-size:1536px}.inventory-slots{width:288px;height:240px}#shards-count{width:48px}#enchant-inventory-slots{top:48px;left:60px;width:288px;height:276px}#enchant-inventory-slots li .item-slot{margin-bottom:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#enchant{width:258px;height:310px;background:url(/img/interface/containers.png) 0 0;background-size:1024px}#enchant-selected-item,#enchant-shards{width:32px;height:30px}#enchant-container{background-image:url(/img/interface/containers.png);background-size:1024px}.inventory-slots{width:192px;height:160px}#shards-count{width:32px}#enchant-inventory-slots{top:32px;left:40px;width:192px;height:184px}#enchant-inventory-slots li .item-slot{margin-bottom:8px}}@media only screen and (max-width: 1000px){#enchant{width:129px;height:155px;background:url(/img/interface/containers.png) 0 0;background-size:512px}#enchant-selected-item,#enchant-shards{width:16px;height:15px}#enchant-container{background-image:url(/img/interface/containers.png);background-size:512px}.inventory-slots{width:96px;height:80px}#shards-count{width:16px}#enchant-inventory-slots{top:16px;left:20px;width:96px;height:92px}#enchant-inventory-slots li .item-slot{margin-bottom:4px}}@media only screen and (max-width: 1000px){#enchant-inventory-slots{left:11px;width:106px}#enchant-inventory-slots li .item-slot{margin-bottom:8px}}@media only screen and (min-width: 1501px){#equipment-slots{top:60px;left:165px;overflow:hidden;width:348px;height:360px;background-position:-12px -240px}#equipment-container{position:absolute;top:-210px;left:-6px}.player-image{position:absolute;top:210px;left:330px}#player-image-armour,#player-image-weapon{transform:scale(3);scale:3;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:282px;left:285px}.title{font-size:30px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:24px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:48px;width:210px;height:240px}#attack-stats{left:540px}#defense-stats{left:750px}#bonuses{top:270px;left:540px}.equip-weapon-slot{top:354px;left:6px}.equip-weapon-skin-slot{top:354px;left:78px}.equip-armour-slot{top:354px;left:306px}.equip-armour-skin-slot{top:354px;left:237px}.equip-pendant-slot{top:228px;left:78px}.equip-ring-slot{top:492px;left:78px}.equip-boots-slot{top:492px;left:234px}.equip-arrows-slot{top:228px;left:231px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#equipment-slots{top:40px;left:110px;overflow:hidden;width:232px;height:240px;background-position:-8px -160px}#equipment-container{position:absolute;top:-140px;left:-4px}.player-image{position:absolute;top:140px;left:220px}#player-image-armour,#player-image-weapon{transform:scale(2);scale:2;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:188px;left:190px}.title{font-size:20px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:16px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:32px;width:140px;height:160px}#attack-stats{left:360px}#defense-stats{left:500px}#bonuses{top:180px;left:360px}.equip-weapon-slot{top:236px;left:4px}.equip-weapon-skin-slot{top:236px;left:52px}.equip-armour-slot{top:236px;left:204px}.equip-armour-skin-slot{top:236px;left:158px}.equip-pendant-slot{top:152px;left:52px}.equip-ring-slot{top:328px;left:52px}.equip-boots-slot{top:328px;left:156px}.equip-arrows-slot{top:152px;left:154px}}@media only screen and (max-width: 1000px){#equipment-slots{top:20px;left:55px;overflow:hidden;width:116px;height:120px;background-position:-4px -80px}#equipment-container{position:absolute;top:-70px;left:-2px}.player-image{position:absolute;top:70px;left:110px}#player-image-armour,#player-image-weapon{transform:scale(1);scale:1;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:94px;left:95px}.title{font-size:10px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:8px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:16px;width:70px;height:80px}#attack-stats{left:180px}#defense-stats{left:250px}#bonuses{top:90px;left:180px}.equip-weapon-slot{top:118px;left:2px}.equip-weapon-skin-slot{top:118px;left:26px}.equip-armour-slot{top:118px;left:102px}.equip-armour-skin-slot{top:118px;left:79px}.equip-pendant-slot{top:76px;left:26px}.equip-ring-slot{top:164px;left:26px}.equip-boots-slot{top:164px;left:78px}.equip-arrows-slot{top:76px;left:77px}}@media only screen and (max-width: 1000px){.player-image{top:60px;left:100px}}#attack-stats,#defense-stats,#bonuses{position:absolute;font-family:AdvoCut,sans-serif}#close-equipments{top:-2%;left:96%}#friends-container{position:absolute;right:0;bottom:45px}#friends-list{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;margin:auto;font-family:AdvoCut,sans-serif}#friends-list li p:first-child{color:#fff}#friends-list li p:last-child{float:right}#popup-container{position:absolute;top:0;right:0;bottom:0;left:0;display:none;width:100%;height:100%;border-radius:16px}#add-popup{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto}#popup-friend-input{position:absolute;font-family:AdvoCut,sans-serif;font-size:16px;color:#fff;background-color:transparent;border:none}.add,.remove{position:absolute}.confirm,.cancel{position:inherit;bottom:0}@media only screen and (min-width: 1501px){#friends-container{display:none}#friends-page{width:100%;height:100%;background:url(/img/interface/characterdialogsheet.png) -744px -651px;background-size:1860px}#friends-list{width:318px;height:516px;margin-top:42px;padding-left:6px}#friends-list li p:first-child{padding-left:18px}#friends-list li p:last-child{padding-right:18px}#friends-list>li:last-child{margin-bottom:3px}#add-popup{width:288px;height:114px;background:url(/img/interface/characterdialogsheet.png) -438px -816px;background-size:1860px}#popup-friend-input{top:24px;left:24px;width:228px}.add{left:72px;background-position-y:-822px}.remove{right:72px;background-position-y:-873px}.add,.remove{bottom:24px;width:63px;height:51px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1860px}.add:hover,.remove:hover{background-position-x:-126px}.add:active,.remove:active{background-position-x:-63px}.confirm{bottom:12px;left:42px;background-position-y:-924px}.cancel{right:42px;bottom:12px;background-position-y:-966px}.confirm,.cancel{width:63px;height:42px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1860px}.confirm:hover,.cancel:hover{background-position-x:-126px}.confirm:active,.cancel:active{background-position-x:-63px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#friends-container{display:none}#friends-page{width:100%;height:100%;background:url(/img/interface/characterdialogsheet.png) -496px -434px;background-size:1240px}#friends-list{width:212px;height:344px;margin-top:28px;padding-left:4px}#friends-list li p:first-child{padding-left:12px}#friends-list li p:last-child{padding-right:12px}#friends-list>li:last-child{margin-bottom:2px}#add-popup{width:192px;height:76px;background:url(/img/interface/characterdialogsheet.png) -292px -544px;background-size:1240px}#popup-friend-input{top:16px;left:16px;width:152px}.add{left:48px;background-position-y:-548px}.remove{right:48px;background-position-y:-582px}.add,.remove{bottom:16px;width:42px;height:34px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1240px}.add:hover,.remove:hover{background-position-x:-84px}.add:active,.remove:active{background-position-x:-42px}.confirm{bottom:8px;left:28px;background-position-y:-616px}.cancel{right:28px;bottom:8px;background-position-y:-644px}.confirm,.cancel{width:42px;height:28px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1240px}.confirm:hover,.cancel:hover{background-position-x:-84px}.confirm:active,.cancel:active{background-position-x:-42px}}@media only screen and (max-width: 1000px){#friends-container{display:none}#friends-page{width:100%;height:100%;background:url(/img/interface/characterdialogsheet.png) -248px -217px;background-size:620px}#friends-list{width:106px;height:172px;margin-top:14px;padding-left:2px}#friends-list li p:first-child{padding-left:6px}#friends-list li p:last-child{padding-right:6px}#friends-list>li:last-child{margin-bottom:1px}#add-popup{width:96px;height:38px;background:url(/img/interface/characterdialogsheet.png) -146px -272px;background-size:620px}#popup-friend-input{top:8px;left:8px;width:76px}.add{left:24px;background-position-y:-274px}.remove{right:24px;background-position-y:-291px}.add,.remove{bottom:8px;width:21px;height:17px;background-image:url(/img/interface/characterdialogsheet.png);background-size:620px}.add:hover,.remove:hover{background-position-x:-42px}.add:active,.remove:active{background-position-x:-21px}.confirm{bottom:4px;left:14px;background-position-y:-308px}.cancel{right:14px;bottom:4px;background-position-y:-322px}.confirm,.cancel{width:21px;height:14px;background-image:url(/img/interface/characterdialogsheet.png);background-size:620px}.confirm:hover,.cancel:hover{background-position-x:-42px}.confirm:active,.cancel:active{background-position-x:-21px}}@media only screen and (min-width: 1501px){#friends-container{right:0;right:52px;bottom:68px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#friends-container{right:36px;bottom:48px}#popup-friend-input{top:12px}#friends-page>ul>li>p{font-size:20px}}@media only screen and (max-width: 1000px){#friends-container{right:84px;bottom:99px;transform:scale(1.5)}#popup-friend-input{top:6px;font-size:7px}#friends-page>ul>li>p{font-size:10px}}#interact{cursor:url(/img/hand.png),auto;position:absolute;display:none}#interact ul{position:absolute;display:flex;justify-content:center;width:100%}@media only screen and (min-width: 1501px){#interact{width:192px;height:90px;background:url(/img/interface/main.png) -432px -1392px no-repeat;background-size:1470px}#interact ul{top:18px;left:3px}#interact ul li{margin-right:9px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#interact{width:128px;height:60px;background:url(/img/interface/main.png) -288px -928px no-repeat;background-size:980px}#interact ul{top:12px;left:2px}#interact ul li{margin-right:6px}}#inventory{cursor:url(/img/hand.png),auto;position:absolute;right:10px;bottom:80px;display:none;font-family:AdvoCut,sans-serif}#inventory ul{overflow:hidden;margin:0;padding:0;list-style-type:none}#inventory ul li{float:left}#inventory-container{position:absolute}.item-image{pointer-events:none;background-size:cover;filter:opacity(100%)}@media only screen and (min-width: 1501px){#inventory{width:288px;height:396px;background:url(/img/interface/main.png) -864px -1056px no-repeat;background-size:1470px}#inventory-container{top:9px;right:9px;width:270px;height:306px}.item-slot,.item-image{width:48px;height:48px}.item-slot{margin-top:6px;margin-bottom:21px;margin-left:4.5px;background:url(/img/interface/main.png) -1200px -1056px no-repeat;background-size:1470px}.item-slot:hover{background-position-x:-1248px}.item-slot:active{background-position-x:-1296px}.item-count{width:48px;height:21px;font-size:18px;text-align:center}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#inventory{width:192px;height:264px;background:url(/img/interface/main.png) -576px -704px no-repeat;background-size:980px}#inventory-container{top:6px;right:6px;width:180px;height:204px}.item-slot,.item-image{width:32px;height:32px}.item-slot{margin-top:4px;margin-bottom:14px;margin-left:3px;background:url(/img/interface/main.png) -800px -704px no-repeat;background-size:980px}.item-slot:hover{background-position-x:-832px}.item-slot:active{background-position-x:-864px}.item-count{width:32px;height:14px;font-size:12px;text-align:center}}@media only screen and (max-width: 1000px){#inventory{bottom:56px}}#map-frame{pointer-events:auto;cursor:url(/img/hand.png),auto;position:absolute;z-index:100;top:0;right:0;bottom:0;left:0;display:none;margin:auto;background-repeat:no-repeat}.map-button{position:absolute;background-position-y:0}#close-map-frame{top:0;left:95%}.warp-button{position:absolute}@media only screen and (min-width: 1501px){#warp0{top:120px;left:360px;background:url(/img/interface/mapicons.png) 0 0;background-size:345px}#warp1{top:165px;left:75px;background:url(/img/interface/mapicons.png) -225px 0;background-size:345px}#warp2{top:210px;left:525px;background:url(/img/interface/mapicons.png) -180px 0;background-size:345px}#warp3{top:360px;left:405px;background:url(/img/interface/mapicons.png) -135px 0;background-size:345px}#warp4{top:360px;left:225px;background:url(/img/interface/mapicons.png) -90px 0;background-size:345px}#warp5{top:420px;left:60px;background:url(/img/interface/mapicons.png) -270px 0;background-size:345px}#warp6{top:240px;left:270px;background:url(/img/interface/mapicons.png) 231px 0;background-size:345px}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-60px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-120px}#map-frame{width:810px;height:540px;background-image:url(/img/interface/mapframe.png);background-size:810px}.map-button{width:45px;height:48px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#warp0{top:80px;left:240px;background:url(/img/interface/mapicons.png) 0 0;background-size:230px}#warp1{top:110px;left:50px;background:url(/img/interface/mapicons.png) -150px 0;background-size:230px}#warp2{top:140px;left:350px;background:url(/img/interface/mapicons.png) -120px 0;background-size:230px}#warp3{top:240px;left:270px;background:url(/img/interface/mapicons.png) -90px 0;background-size:230px}#warp4{top:240px;left:150px;background:url(/img/interface/mapicons.png) -60px 0;background-size:230px}#warp5{top:280px;left:40px;background:url(/img/interface/mapicons.png) -180px 0;background-size:230px}#warp6{top:160px;left:180px;background:url(/img/interface/mapicons.png) 154px 0;background-size:230px}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-40px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-80px}#map-frame{width:540px;height:360px;background-image:url(/img/interface/mapframe.png);background-size:540px}.map-button{width:30px;height:32px}}@media only screen and (max-width: 1000px){#warp0{top:40px;left:120px;background:url(/img/interface/mapicons.png) 0 0;background-size:115px}#warp1{top:55px;left:25px;background:url(/img/interface/mapicons.png) -75px 0;background-size:115px}#warp2{top:70px;left:175px;background:url(/img/interface/mapicons.png) -60px 0;background-size:115px}#warp3{top:120px;left:135px;background:url(/img/interface/mapicons.png) -45px 0;background-size:115px}#warp4{top:120px;left:75px;background:url(/img/interface/mapicons.png) -30px 0;background-size:115px}#warp5{top:140px;left:20px;background:url(/img/interface/mapicons.png) -90px 0;background-size:115px}#warp6{top:80px;left:90px;background:url(/img/interface/mapicons.png) 77px 0;background-size:115px}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-20px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-40px}#map-frame{width:270px;height:180px;background-image:url(/img/interface/mapframe.png);background-size:270px}.map-button{width:15px;height:16px}}@media only screen and (max-width: 1000px){#map-frame{transform:scale(1.6)}#close-map-frame{top:-6px;left:90%}}#notify,#confirm{pointer-events:auto;position:absolute;top:45%;left:35%;display:none}#exclamation,#question{top:30%;left:10%}.done{position:absolute;top:70%;left:85%}#cancel{position:absolute;top:70%;left:70%}#message{pointer-events:none;position:absolute;top:48%;left:42%;font-family:AdvoCut,sans-serif}.fade{position:absolute;top:0;left:0;display:none;width:100%;height:98%;background-color:rgba(0,0,0,.3)}#notification{pointer-events:none;position:absolute;top:100%;left:50%;opacity:.8;transition:.7s top ease}#notification-text-title{position:relative;top:25%;font-family:AdvoCut,sans-serif;font-size:20px;color:#45ebfc;text-align:center;text-shadow:2px 2px #0e0a00}#notification-text-description{position:relative;top:25%;margin-top:10px;font-family:AdvoCut,sans-serif;font-size:14px;color:#fff;text-align:center;text-shadow:2px 2px #0e0a00}@media only screen and (min-width: 1501px){#notification{width:648px;height:102px;margin-left:-324px;background:url(/img/interface/spritesheet.png) no-repeat;background-size:1266px}#notify,#confirm{background-image:url(/img/interface/containers.png);background-size:1536px}#question,#exclamation{position:relative;display:block;width:45px;height:48px}#question{background:url(/img/interface/containers.png) -1047px -141px;background-size:1536px}#exclamation{background:url(/img/interface/containers.png) -1002px -141px;background-size:1536px}#message{width:360px;height:69px}#cancel{background:url(/img/interface/containers.png);background-size:1536px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#notification{width:432px;height:68px;margin-left:-216px;background:url(/img/interface/spritesheet.png) no-repeat;background-size:844px}#notify,#confirm{background-image:url(/img/interface/containers.png);background-size:1024px}#question,#exclamation{position:relative;display:block;width:30px;height:32px}#question{background:url(/img/interface/containers.png) -698px -94px;background-size:1024px}#exclamation{background:url(/img/interface/containers.png) -668px -94px;background-size:1024px}#message{width:240px;height:46px}#cancel{background:url(/img/interface/containers.png);background-size:1024px}}@media only screen and (min-width: 1501px){#notification{margin-left:-344px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#notify,#confirm{width:333px;height:94px;background-position:-601px 0}#notification-text-title{font-size:18px}#notification-text-description{font-size:12px}#cancel{width:40px;height:14px;background-position:-601px -108px}#cancel:hover,#cancel:focus{background-position-y:-94px}#message{width:240px;height:46px}}@media only screen and (max-width: 1000px){#notify,#confirm{width:166px;height:47px;background:url(/img/interface/containers.png) -300px 0}#cancel{top:55%;left:75%;width:14px;height:14px;background:url(/img/interface/containers.png) -371px -79px}#cancel:hover,#cancel:focus{background-position-x:-65px}}#profile-dialog,#settings-page{position:absolute;right:0;bottom:45px;display:none}#bank-inventory-container,#enchant-container{float:left}.inventory-slots{position:absolute;top:13%;left:6%}.item-count{font-family:AdvoCut,sans-serif;color:#fff}.close{position:absolute;top:-3%;left:92%}.ok,.ok-check{position:absolute}@media only screen and (min-width: 1501px){#bank-inventory-container,#enchant-container{width:387px;height:381px;background-position:0 0}.item-count{width:48px;height:21px;margin-left:3;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:57px}.ok,.ok-check{background-image:url(/img/interface/containers.png);background-size:1536px}.ok{width:84px;height:42px;background-position:-1023px -237px}.ok:hover{background-position-y:-195px}.ok-check{width:42px;height:42px;background-position:-1161px -237px}.ok-check:hover{background-position-y:-195px}.ok-check:active{background-position-y:-279px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#bank-inventory-container,#enchant-container{width:258px;height:254px;background-position:0 0}.item-count{width:32px;height:14px;margin-left:2;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:38px}.ok,.ok-check{background-image:url(/img/interface/containers.png);background-size:1024px}.ok{width:56px;height:28px;background-position:-682px -158px}.ok:hover{background-position-y:-130px}.ok-check{width:28px;height:28px;background-position:-774px -158px}.ok-check:hover{background-position-y:-130px}.ok-check:active{background-position-y:-186px}}@media only screen and (max-width: 1000px){#bank-inventory-container,#enchant-container{width:129px;height:127px;background-position:0 0}.item-count{width:16px;height:7px;margin-left:1;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:19px}.ok,.ok-check{background-image:url(/img/interface/containers.png);background-size:512px}.ok{width:28px;height:14px;background-position:-341px -79px}.ok:hover{background-position-y:-65px}.ok-check{width:14px;height:14px;background-position:-387px -79px}.ok-check:hover{background-position-y:-65px}.ok-check:active{background-position-y:-93px}}@media only screen and (min-width: 1501px){.close{width:48px;height:48px;background:url(/img/interface/containers.png) -96px -498px;background-size:1536px}.close:hover{background-position-x:-144px}.close:active{background-position-x:-192px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.close{width:32px;height:32px;background:url(/img/interface/containers.png) -64px -332px;background-size:1024px}.close:hover{background-position-x:-96px}.close:active{background-position-x:-128px}}@media only screen and (min-width: 1501px){.item-count{font-size:14px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.item-count{font-size:11px}}@media only screen and (max-width: 1000px){.item-count{font-size:8px}}@keyframes flash{0%{background:#ffa2a2}to{background:#e22525}}@keyframes flash-green{0%{background:#a2ffa2}to{background:#25e225}}@keyframes flash-poison{0%{background:#42e373}to{background:#146e2b}}#player-info{position:absolute;top:10px;left:10px}#health-bar-text,#mana-bar-text{font-family:AdvoCut,sans-serif;text-align:center;vertical-align:middle}#health,#health-info{cursor:url(/img/hand.png),auto}#health{background:linear-gradient(to right,#f00,#ef5a5a);transition:.5s width ease}#mana{background:linear-gradient(to right,rgb(12,55,208),#257cd2);transition:.5s width ease}#exp{background:linear-gradient(to left,#4f4,#080);transition:.5s width ease}#health.white{animation:flash .5s linear infinite}#health.green{animation:flash-green .5s linear infinite}#health.poison{animation:flash-poison .5s linear infinite}@media only screen and (min-width: 1501px){#health,#health-bar,#mana,#mana-bar{position:absolute;width:288.75px;height:37.5px;margin:0;padding:0;text-align:center;border:0}#health,#health-bar{top:7.5px;left:37.5px}#health-info,#mana-info{position:absolute;width:330px;height:48.75px;margin:0;padding:0;color:#fff;text-align:center;border:0}#mana,#mana-bar{top:52.5px;left:37.5px}#health-bar-text,#mana-bar-text{margin:15px 0 0 37.5px;font-size:22.5px}#health-info{top:0;left:0;background-image:url(/img/interface/main.png);background-position:0 -1042.5px;background-size:1837.5px}#mana-info{top:48.75px;left:0;background-image:url(/img/interface/main.png);background-position:-330px -1042.5px;background-size:1837.5px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#health,#health-bar,#mana,#mana-bar{position:absolute;width:231px;height:30px;margin:0;padding:0;text-align:center;border:0}#health,#health-bar{top:6px;left:30px}#health-info,#mana-info{position:absolute;width:264px;height:39px;margin:0;padding:0;color:#fff;text-align:center;border:0}#mana,#mana-bar{top:42px;left:30px}#health-bar-text,#mana-bar-text{margin:12px 0 0 30px;font-size:18px}#health-info{top:0;left:0;background-image:url(/img/interface/main.png);background-position:0 -834px;background-size:1470px}#mana-info{top:39px;left:0;background-image:url(/img/interface/main.png);background-position:-264px -834px;background-size:1470px}}@media only screen and (max-width: 1000px){#health,#health-bar,#mana,#mana-bar{position:absolute;width:231px;height:30px;margin:0;padding:0;text-align:center;border:0}#health,#health-bar{top:6px;left:30px}#health-info,#mana-info{position:absolute;width:264px;height:39px;margin:0;padding:0;color:#fff;text-align:center;border:0}#mana,#mana-bar{top:42px;left:30px}#health-bar-text,#mana-bar-text{margin:12px 0 0 30px;font-size:18px}#health-info{top:0;left:0;background-image:url(/img/interface/main.png);background-position:0 -834px;background-size:1470px}#mana-info{top:39px;left:0;background-image:url(/img/interface/main.png);background-position:-264px -834px;background-size:1470px}}.page{cursor:url(/img/hand.png),auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}#quest-list{position:absolute;top:50%;left:8%;overflow:auto}#skills-list{position:absolute;overflow:auto}#armour-slot-info{text-align:right}#arrows-count{position:absolute;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}#profile-info{position:absolute;display:none}#attack-style-list{display:flex;gap:6px;align-items:center;justify-content:center}#guilds-button,#leaderboards-button{position:absolute}.profession-item{width:100%;height:10%;font-family:AdvoCut,sans-serif}.profession-name{z-index:1;float:left;width:98%;margin-top:3px;font-size:22px;color:#fff;text-align:center;background-color:rgba(51,153,255,.4);border:2px solid #373737}.profile-info{position:absolute;left:24px;width:92px;height:12px;font-family:AdvoCut,sans-serif;font-size:6px;font-weight:700;line-height:12px;text-align:center;text-shadow:1px 1px #808080}.profile-item-info{pointer-events:none;position:absolute;font-family:AdvoCut,sans-serif;font-size:12px;font-weight:700}.navigator{position:absolute;top:89%;left:37%}.skill-level,.skill-experience{position:absolute}.skill-level{font-family:AdvoCut,sans-serif;color:#fff}.skill-experience{background:linear-gradient(to left,#4f4,#080);transition:.5s width ease}.profile-info-title,.profile-info-details{position:absolute;font-family:AdvoCut,sans-serif;color:#fff}.attack-style{position:absolute}@media only screen and (min-width: 1501px){#state-page,.state-page{display:block;background:url(/img/interface/characterdialogsheet.png) 0 0;background-size:1860px}#abilities-page{display:none;background:url(/img/interface/characterdialogsheet.png) -372px 0;background-size:1860px}#settings-page{display:none;background:url(/img/interface/characterdialogsheet.png) -744px 0;background-size:1860px}#quest-page{display:none;background:url(/img/interface/characterdialogsheet.png) -1116px 0;background-size:1860px}#guild-page{display:none;background:url(/img/interface/characterdialogsheet.png) -1488px 0;background-size:1860px}#skills-page{display:none;background:url(/img/interface/characterdialogsheet.png) -744px -651px;background-size:1860px}#profile-dialog,.page{position:absolute;width:372px;height:651px}.profile-slot{position:absolute;width:48px;height:45px;margin-top:-6px;background-position:0 0;background-size:cover}.profile-info{position:absolute;left:72px;width:276px;height:36px;font-family:AdvoCut,sans-serif;font-size:18px;font-weight:700;line-height:36px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:59%;right:153px;width:63px;height:51px;background:url(/img/interface/characterdialogsheet.png) 0 -771px;background-size:1860px}#equipment-button:hover{background:url(/img/interface/characterdialogsheet.png) -126px -771px;background-size:1860px}#equipment-button:active,#equipment-button.active{background:url(/img/interface/characterdialogsheet.png) -63px -771px;background-size:1860px}#arrows-count{top:57px;left:6px}#profile-level{top:24px}#profile-experience{top:87px}#guilds-button,#leaderboards-button{bottom:24px}#guilds-button{left:18px}#leaderboards-button{right:18px}#guilds-button,#leaderboards-button,#leaderboards-button2{width:42px;height:45px;background:url(/img/interface/main.png) no-repeat;background-position-y:-942px;background-size:1470px}#leaderboards-button2{background:none}#guilds-button{background-position:-840px -987px}#guilds-button:hover{background-position-x:-882px}#guilds-button.active,#guilds-button:active{background-position-x:-924px}#leaderboards-button{background-position:-714px -987px}#leaderboards-button:hover{background-position-x:-756px}#leaderboards-button.active,#leaderboards-button:active{background-position-x:-798px}.slot-background{z-index:-1;background:url(/img/interface/characterdialogsheet.png) -1392px -768px;background-size:1860px}.weapon-slot{top:384px;left:12px}.weapon-skin-slot{top:384px;left:84px}.armour-slot{top:384px;left:312px}.armour-skin-slot{top:384px;left:243px}.pendant-slot{top:258px;left:84px}.ring-slot{top:522px;left:81px}.boots-slot{top:522px;left:240px}.arrows-slot{top:258px;left:237px}.navigator{width:126px;height:51px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:63px;height:51px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1860px}.previous{cursor:pointer;left:0;background-position:0 -720px}.previous.disabled{cursor:url(/img/hand.png),auto;background-position:0 -669px}.next{cursor:pointer;left:63px;background-position:-63px -669px}.next.disabled{cursor:url(/img/hand.png),auto;background-position:-63px -720px}#skills-list{top:48px;left:36px;width:318px;height:510px}.skill{width:306px;height:93px;padding-top:9px;background:url(/img/interface/characterdialogsheet.png) -96px -1059px;background-size:1860px}.skill:hover{background-position:-432px -1059px}.skill:active{background-position:-432px -1200px}.skill-experience{width:192px;height:3px;margin-top:60px;margin-left:84px}.skill-level{margin-top:18px;margin-left:144px;font-size:30px}.skill-image{width:48px;height:48px;margin-top:15px;margin-left:24px}.skill-image-accuracy{background:url(/img/interface/skills/accuracy.png);background-size:48px}.skill-image-archery{background:url(/img/interface/skills/archery.png);background-size:48px}.skill-image-health{background:url(/img/interface/skills/health.png);background-size:48px}.skill-image-lumberjacking{background:url(/img/interface/skills/lumberjacking.png);background-size:48px}.skill-image-magic{background:url(/img/interface/skills/magic.png);background-size:48px}.skill-image-mining{background:url(/img/interface/skills/mining.png);background-size:48px}.skill-image-strength{background:url(/img/interface/skills/strength.png);background-size:48px}.skill-image-defense{background:url(/img/interface/skills/defense.png);background-size:48px}.skill-image-fishing{background:url(/img/interface/skills/fishing.png);background-size:48px}.skill-image-smithing{background:url(/img/interface/skills/smithing.png);background-size:48px}.skill-image-cooking{background:url(/img/interface/skills/cooking.png);background-size:48px}.skill-image-fletching{background:url(/img/interface/skills/fletching.png);background-size:48px}.skill-image-crafting{background:url(/img/interface/skills/crafting.png);background-size:48px}.skill-image-foraging{background:url(/img/interface/skills/foraging.png);background-size:48px}.skill-image-eating{background:url(/img/interface/skills/eating.png);background-size:48px}.skill-image-loitering{background:url(/img/interface/skills/loitering.png);background-size:48px}#achievement-count,#quest-count{width:90px;height:24px;font-size:24px}.ability,.ability-icon{position:absolute;display:none;width:48px;height:48px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:384px}.ability-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-48px 1px;background-size:384px}.ability-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-96px 1px;background-size:384px}.ability-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-144px 1px;background-size:384px}.ability-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:384px}.ability-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-240px 1px;background-size:384px}.ability-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-288px 1px;background-size:384px}.ability-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-336px 1px;background-size:384px}.ability-icon-run:hover,.ability-icon-awareness:hover,.ability-icon-dualistsmark:hover,.ability-icon-hotshot:hover,.ability-icon-thickskin:hover,.ability-icon-precognition:hover,.ability-icon-secretcalling:hover{background-position-y:-45px}.ability-icon-run:active,.ability-icon-run.active,.ability-icon-awareness:active,.ability-icon-awareness.active,.ability-icon-dualistsmark:active,.ability-icon-dualistsmark.active,.ability-icon-hotshot:active,.ability-icon-hotshot.active,.ability-icon-thickskin:active,.ability-icon-thickskin.active,.ability-icon-precognition:active,.ability-icon-precognition.active,.ability-icon-secretcalling:active,.ability-icon-secretcalling.active{background-position-y:-90px}.ability-level{position:absolute;width:15px;height:18px;margin-top:30px;background-image:url(/img/interface/characterdialogsheet.png);background-position:-291px -726px;background-size:1860px}.ability-level1{margin-left:57px}.ability-level2{margin-left:75px}.ability-level3{margin-left:93px}.ability-level4{margin-left:111px}#activeability1{top:48px;left:42px}#activeability2{top:48px;left:210px}#activeability3{top:108px;left:42px}#activeability4{top:108px;left:210px}#activeability5{top:168px;left:42px}#activeability6{top:168px;left:210px}#activeability7{top:228px;left:42px}#activeability8{top:228px;left:210px}#passiveability1{top:336px;left:42px}#passiveability2{top:336px;left:210px}#passiveability3{top:396px;left:42px}#passiveability4{top:396px;left:210px}#passiveability5{top:456px;left:42px}#passiveability6{top:456px;left:210px}#passiveability7{top:516px;left:42px}#passiveability8{top:516px;left:210px}#profile-info{top:60px;right:372px;width:276px;height:390px;background:url(/img/interface/characterdialogsheet.png) -1584px -912px;background-size:1860px}.profile-info-skill-image{width:48px;height:48px;margin-top:30px;margin-left:27px}.profile-info-title{top:42px;left:96px;font-size:30px}.profile-info-details{bottom:18px;left:18px;width:252px;height:216px;font-size:30px;text-align:center}#attack-style-list{margin-top:138px}.attack-style-box{width:69px;height:93px;background:url(/img/interface/characterdialogsheet.png) -1227px -768px;background-size:1860px}.attack-style-box:hover{background-position-x:-1152px}.attack-style-box:active,.attack-style-box.active{background-position-x:-1302px}.attack-style{width:51px;height:51px;margin-top:27px;margin-left:9px}.attack-style-stab{background:url(/img/interface/characterdialogsheet.png) -1152px -672px;background-size:1860px}.attack-style-slash{background:url(/img/interface/characterdialogsheet.png) -1209px -672px;background-size:1860px}.attack-style-defensive{background:url(/img/interface/characterdialogsheet.png) -1266px -672px;background-size:1860px}.attack-style-crush{background:url(/img/interface/characterdialogsheet.png) -1323px -672px;background-size:1860px}.attack-style-shared{background:url(/img/interface/characterdialogsheet.png) -1380px -672px;background-size:1860px}.attack-style-hack{background:url(/img/interface/characterdialogsheet.png) -1437px -672px;background-size:1860px}.attack-style-chop{background:url(/img/interface/characterdialogsheet.png) -1494px -672px;background-size:1860px}.attack-style-accurate{background:url(/img/interface/characterdialogsheet.png) -1551px -672px;background-size:1860px}.attack-style-fast{background:url(/img/interface/characterdialogsheet.png) -1608px -672px;background-size:1860px}.attack-style-focused{background:url(/img/interface/characterdialogsheet.png) -1665px -672px;background-size:1860px}.attack-style-longrange{background:url(/img/interface/characterdialogsheet.png) -1722px -672px;background-size:1860px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#state-page,.state-page{display:block;background:url(/img/interface/characterdialogsheet.png) 0 0;background-size:1240px}#abilities-page{display:none;background:url(/img/interface/characterdialogsheet.png) -248px 0;background-size:1240px}#settings-page{display:none;background:url(/img/interface/characterdialogsheet.png) -496px 0;background-size:1240px}#quest-page{display:none;background:url(/img/interface/characterdialogsheet.png) -744px 0;background-size:1240px}#guild-page{display:none;background:url(/img/interface/characterdialogsheet.png) -992px 0;background-size:1240px}#skills-page{display:none;background:url(/img/interface/characterdialogsheet.png) -496px -434px;background-size:1240px}#profile-dialog,.page{position:absolute;width:248px;height:434px}.profile-slot{position:absolute;width:32px;height:30px;margin-top:-4px;background-position:0 0;background-size:cover}.profile-info{position:absolute;left:48px;width:184px;height:24px;font-family:AdvoCut,sans-serif;font-size:12px;font-weight:700;line-height:24px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:59%;right:102px;width:42px;height:34px;background:url(/img/interface/characterdialogsheet.png) 0 -514px;background-size:1240px}#equipment-button:hover{background:url(/img/interface/characterdialogsheet.png) -84px -514px;background-size:1240px}#equipment-button:active,#equipment-button.active{background:url(/img/interface/characterdialogsheet.png) -42px -514px;background-size:1240px}#arrows-count{top:38px;left:4px}#profile-level{top:16px}#profile-experience{top:58px}#guilds-button,#leaderboards-button{bottom:16px}#guilds-button{left:12px}#leaderboards-button{right:12px}#guilds-button,#leaderboards-button,#leaderboards-button2{width:28px;height:30px;background:url(/img/interface/main.png) no-repeat;background-position-y:-628px;background-size:980px}#leaderboards-button2{background:none}#guilds-button{background-position:-560px -658px}#guilds-button:hover{background-position-x:-588px}#guilds-button.active,#guilds-button:active{background-position-x:-616px}#leaderboards-button{background-position:-476px -658px}#leaderboards-button:hover{background-position-x:-504px}#leaderboards-button.active,#leaderboards-button:active{background-position-x:-532px}.slot-background{z-index:-1;background:url(/img/interface/characterdialogsheet.png) -928px -512px;background-size:1240px}.weapon-slot{top:256px;left:8px}.weapon-skin-slot{top:256px;left:56px}.armour-slot{top:256px;left:208px}.armour-skin-slot{top:256px;left:162px}.pendant-slot{top:172px;left:56px}.ring-slot{top:348px;left:54px}.boots-slot{top:348px;left:160px}.arrows-slot{top:172px;left:158px}.navigator{width:84px;height:34px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:42px;height:34px;background-image:url(/img/interface/characterdialogsheet.png);background-size:1240px}.previous{cursor:pointer;left:0;background-position:0 -480px}.previous.disabled{cursor:url(/img/hand.png),auto;background-position:0 -446px}.next{cursor:pointer;left:42px;background-position:-42px -446px}.next.disabled{cursor:url(/img/hand.png),auto;background-position:-42px -480px}#skills-list{top:32px;left:24px;width:212px;height:340px}.skill{width:204px;height:62px;padding-top:6px;background:url(/img/interface/characterdialogsheet.png) -64px -706px;background-size:1240px}.skill:hover{background-position:-288px -706px}.skill:active{background-position:-288px -800px}.skill-experience{width:128px;height:2px;margin-top:40px;margin-left:56px}.skill-level{margin-top:12px;margin-left:96px;font-size:20px}.skill-image{width:32px;height:32px;margin-top:10px;margin-left:16px}.skill-image-accuracy{background:url(/img/interface/skills/accuracy.png);background-size:32px}.skill-image-archery{background:url(/img/interface/skills/archery.png);background-size:32px}.skill-image-health{background:url(/img/interface/skills/health.png);background-size:32px}.skill-image-lumberjacking{background:url(/img/interface/skills/lumberjacking.png);background-size:32px}.skill-image-magic{background:url(/img/interface/skills/magic.png);background-size:32px}.skill-image-mining{background:url(/img/interface/skills/mining.png);background-size:32px}.skill-image-strength{background:url(/img/interface/skills/strength.png);background-size:32px}.skill-image-defense{background:url(/img/interface/skills/defense.png);background-size:32px}.skill-image-fishing{background:url(/img/interface/skills/fishing.png);background-size:32px}.skill-image-smithing{background:url(/img/interface/skills/smithing.png);background-size:32px}.skill-image-cooking{background:url(/img/interface/skills/cooking.png);background-size:32px}.skill-image-fletching{background:url(/img/interface/skills/fletching.png);background-size:32px}.skill-image-crafting{background:url(/img/interface/skills/crafting.png);background-size:32px}.skill-image-foraging{background:url(/img/interface/skills/foraging.png);background-size:32px}.skill-image-eating{background:url(/img/interface/skills/eating.png);background-size:32px}.skill-image-loitering{background:url(/img/interface/skills/loitering.png);background-size:32px}#achievement-count,#quest-count{width:60px;height:16px;font-size:16px}.ability,.ability-icon{position:absolute;display:none;width:32px;height:32px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:256px}.ability-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-32px 1px;background-size:256px}.ability-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:256px}.ability-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-96px 1px;background-size:256px}.ability-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-128px 1px;background-size:256px}.ability-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-160px 1px;background-size:256px}.ability-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-192px 1px;background-size:256px}.ability-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-224px 1px;background-size:256px}.ability-icon-run:hover,.ability-icon-awareness:hover,.ability-icon-dualistsmark:hover,.ability-icon-hotshot:hover,.ability-icon-thickskin:hover,.ability-icon-precognition:hover,.ability-icon-secretcalling:hover{background-position-y:-30px}.ability-icon-run:active,.ability-icon-run.active,.ability-icon-awareness:active,.ability-icon-awareness.active,.ability-icon-dualistsmark:active,.ability-icon-dualistsmark.active,.ability-icon-hotshot:active,.ability-icon-hotshot.active,.ability-icon-thickskin:active,.ability-icon-thickskin.active,.ability-icon-precognition:active,.ability-icon-precognition.active,.ability-icon-secretcalling:active,.ability-icon-secretcalling.active{background-position-y:-60px}.ability-level{position:absolute;width:10px;height:12px;margin-top:20px;background-image:url(/img/interface/characterdialogsheet.png);background-position:-194px -484px;background-size:1240px}.ability-level1{margin-left:38px}.ability-level2{margin-left:50px}.ability-level3{margin-left:62px}.ability-level4{margin-left:74px}#activeability1{top:32px;left:28px}#activeability2{top:32px;left:140px}#activeability3{top:72px;left:28px}#activeability4{top:72px;left:140px}#activeability5{top:112px;left:28px}#activeability6{top:112px;left:140px}#activeability7{top:152px;left:28px}#activeability8{top:152px;left:140px}#passiveability1{top:224px;left:28px}#passiveability2{top:224px;left:140px}#passiveability3{top:264px;left:28px}#passiveability4{top:264px;left:140px}#passiveability5{top:304px;left:28px}#passiveability6{top:304px;left:140px}#passiveability7{top:344px;left:28px}#passiveability8{top:344px;left:140px}#profile-info{top:40px;right:248px;width:184px;height:260px;background:url(/img/interface/characterdialogsheet.png) -1056px -608px;background-size:1240px}.profile-info-skill-image{width:32px;height:32px;margin-top:20px;margin-left:18px}.profile-info-title{top:28px;left:64px;font-size:20px}.profile-info-details{bottom:12px;left:12px;width:168px;height:144px;font-size:20px;text-align:center}#attack-style-list{margin-top:92px}.attack-style-box{width:46px;height:62px;background:url(/img/interface/characterdialogsheet.png) -818px -512px;background-size:1240px}.attack-style-box:hover{background-position-x:-768px}.attack-style-box:active,.attack-style-box.active{background-position-x:-868px}.attack-style{width:34px;height:34px;margin-top:18px;margin-left:6px}.attack-style-stab{background:url(/img/interface/characterdialogsheet.png) -768px -448px;background-size:1240px}.attack-style-slash{background:url(/img/interface/characterdialogsheet.png) -806px -448px;background-size:1240px}.attack-style-defensive{background:url(/img/interface/characterdialogsheet.png) -844px -448px;background-size:1240px}.attack-style-crush{background:url(/img/interface/characterdialogsheet.png) -882px -448px;background-size:1240px}.attack-style-shared{background:url(/img/interface/characterdialogsheet.png) -920px -448px;background-size:1240px}.attack-style-hack{background:url(/img/interface/characterdialogsheet.png) -958px -448px;background-size:1240px}.attack-style-chop{background:url(/img/interface/characterdialogsheet.png) -996px -448px;background-size:1240px}.attack-style-accurate{background:url(/img/interface/characterdialogsheet.png) -1034px -448px;background-size:1240px}.attack-style-fast{background:url(/img/interface/characterdialogsheet.png) -1072px -448px;background-size:1240px}.attack-style-focused{background:url(/img/interface/characterdialogsheet.png) -1110px -448px;background-size:1240px}.attack-style-longrange{background:url(/img/interface/characterdialogsheet.png) -1148px -448px;background-size:1240px}}@media only screen and (max-width: 1000px){#state-page,.state-page{display:block;background:url(/img/interface/characterdialogsheet.png) 0 0;background-size:620px}#abilities-page{display:none;background:url(/img/interface/characterdialogsheet.png) -124px 0;background-size:620px}#settings-page{display:none;background:url(/img/interface/characterdialogsheet.png) -248px 0;background-size:620px}#quest-page{display:none;background:url(/img/interface/characterdialogsheet.png) -372px 0;background-size:620px}#guild-page{display:none;background:url(/img/interface/characterdialogsheet.png) -496px 0;background-size:620px}#skills-page{display:none;background:url(/img/interface/characterdialogsheet.png) -248px -217px;background-size:620px}#profile-dialog,.page{position:absolute;width:124px;height:217px}.profile-slot{position:absolute;width:16px;height:15px;margin-top:-2px;background-position:0 0;background-size:cover}.profile-info{position:absolute;left:24px;width:92px;height:12px;font-family:AdvoCut,sans-serif;font-size:6px;font-weight:700;line-height:12px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:59%;right:51px;width:21px;height:17px;background:url(/img/interface/characterdialogsheet.png) 0 -257px;background-size:620px}#equipment-button:hover{background:url(/img/interface/characterdialogsheet.png) -42px -257px;background-size:620px}#equipment-button:active,#equipment-button.active{background:url(/img/interface/characterdialogsheet.png) -21px -257px;background-size:620px}#arrows-count{top:19px;left:2px}#profile-level{top:8px}#profile-experience{top:29px}#guilds-button,#leaderboards-button{bottom:8px}#guilds-button{left:6px}#leaderboards-button{right:6px}#guilds-button,#leaderboards-button,#leaderboards-button2{width:14px;height:15px;background:url(/img/interface/main.png) no-repeat;background-position-y:-314px;background-size:490px}#leaderboards-button2{background:none}#guilds-button{background-position:-280px -329px}#guilds-button:hover{background-position-x:-294px}#guilds-button.active,#guilds-button:active{background-position-x:-308px}#leaderboards-button{background-position:-238px -329px}#leaderboards-button:hover{background-position-x:-252px}#leaderboards-button.active,#leaderboards-button:active{background-position-x:-266px}.slot-background{z-index:-1;background:url(/img/interface/characterdialogsheet.png) -464px -256px;background-size:620px}.weapon-slot{top:128px;left:4px}.weapon-skin-slot{top:128px;left:28px}.armour-slot{top:128px;left:104px}.armour-skin-slot{top:128px;left:81px}.pendant-slot{top:86px;left:28px}.ring-slot{top:174px;left:27px}.boots-slot{top:174px;left:80px}.arrows-slot{top:86px;left:79px}.navigator{width:42px;height:17px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:21px;height:17px;background-image:url(/img/interface/characterdialogsheet.png);background-size:620px}.previous{cursor:pointer;left:0;background-position:0 -240px}.previous.disabled{cursor:url(/img/hand.png),auto;background-position:0 -223px}.next{cursor:pointer;left:21px;background-position:-21px -223px}.next.disabled{cursor:url(/img/hand.png),auto;background-position:-21px -240px}#skills-list{top:16px;left:12px;width:106px;height:170px}.skill{width:102px;height:31px;padding-top:3px;background:url(/img/interface/characterdialogsheet.png) -32px -353px;background-size:620px}.skill:hover{background-position:-144px -353px}.skill:active{background-position:-144px -400px}.skill-experience{width:64px;height:1px;margin-top:20px;margin-left:28px}.skill-level{margin-top:6px;margin-left:48px;font-size:10px}.skill-image{width:16px;height:16px;margin-top:5px;margin-left:8px}.skill-image-accuracy{background:url(/img/interface/skills/accuracy.png);background-size:16px}.skill-image-archery{background:url(/img/interface/skills/archery.png);background-size:16px}.skill-image-health{background:url(/img/interface/skills/health.png);background-size:16px}.skill-image-lumberjacking{background:url(/img/interface/skills/lumberjacking.png);background-size:16px}.skill-image-magic{background:url(/img/interface/skills/magic.png);background-size:16px}.skill-image-mining{background:url(/img/interface/skills/mining.png);background-size:16px}.skill-image-strength{background:url(/img/interface/skills/strength.png);background-size:16px}.skill-image-defense{background:url(/img/interface/skills/defense.png);background-size:16px}.skill-image-fishing{background:url(/img/interface/skills/fishing.png);background-size:16px}.skill-image-smithing{background:url(/img/interface/skills/smithing.png);background-size:16px}.skill-image-cooking{background:url(/img/interface/skills/cooking.png);background-size:16px}.skill-image-fletching{background:url(/img/interface/skills/fletching.png);background-size:16px}.skill-image-crafting{background:url(/img/interface/skills/crafting.png);background-size:16px}.skill-image-foraging{background:url(/img/interface/skills/foraging.png);background-size:16px}.skill-image-eating{background:url(/img/interface/skills/eating.png);background-size:16px}.skill-image-loitering{background:url(/img/interface/skills/loitering.png);background-size:16px}#achievement-count,#quest-count{width:30px;height:8px;font-size:8px}.ability,.ability-icon{position:absolute;display:none;width:16px;height:16px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/interface/abilityicons.png);background-position:0 1px;background-size:128px}.ability-icon-run{background-image:url(/img/interface/abilityicons.png);background-position:-16px 1px;background-size:128px}.ability-icon-awareness{background-image:url(/img/interface/abilityicons.png);background-position:-32px 1px;background-size:128px}.ability-icon-dualistsmark{background-image:url(/img/interface/abilityicons.png);background-position:-48px 1px;background-size:128px}.ability-icon-hotshot{background-image:url(/img/interface/abilityicons.png);background-position:-64px 1px;background-size:128px}.ability-icon-thickskin{background-image:url(/img/interface/abilityicons.png);background-position:-80px 1px;background-size:128px}.ability-icon-precognition{background-image:url(/img/interface/abilityicons.png);background-position:-96px 1px;background-size:128px}.ability-icon-secretcalling{background-image:url(/img/interface/abilityicons.png);background-position:-112px 1px;background-size:128px}.ability-icon-run:hover,.ability-icon-awareness:hover,.ability-icon-dualistsmark:hover,.ability-icon-hotshot:hover,.ability-icon-thickskin:hover,.ability-icon-precognition:hover,.ability-icon-secretcalling:hover{background-position-y:-15px}.ability-icon-run:active,.ability-icon-run.active,.ability-icon-awareness:active,.ability-icon-awareness.active,.ability-icon-dualistsmark:active,.ability-icon-dualistsmark.active,.ability-icon-hotshot:active,.ability-icon-hotshot.active,.ability-icon-thickskin:active,.ability-icon-thickskin.active,.ability-icon-precognition:active,.ability-icon-precognition.active,.ability-icon-secretcalling:active,.ability-icon-secretcalling.active{background-position-y:-30px}.ability-level{position:absolute;width:5px;height:6px;margin-top:10px;background-image:url(/img/interface/characterdialogsheet.png);background-position:-97px -242px;background-size:620px}.ability-level1{margin-left:19px}.ability-level2{margin-left:25px}.ability-level3{margin-left:31px}.ability-level4{margin-left:37px}#activeability1{top:16px;left:14px}#activeability2{top:16px;left:70px}#activeability3{top:36px;left:14px}#activeability4{top:36px;left:70px}#activeability5{top:56px;left:14px}#activeability6{top:56px;left:70px}#activeability7{top:76px;left:14px}#activeability8{top:76px;left:70px}#passiveability1{top:112px;left:14px}#passiveability2{top:112px;left:70px}#passiveability3{top:132px;left:14px}#passiveability4{top:132px;left:70px}#passiveability5{top:152px;left:14px}#passiveability6{top:152px;left:70px}#passiveability7{top:172px;left:14px}#passiveability8{top:172px;left:70px}#profile-info{top:20px;right:124px;width:92px;height:130px;background:url(/img/interface/characterdialogsheet.png) -528px -304px;background-size:620px}.profile-info-skill-image{width:16px;height:16px;margin-top:10px;margin-left:9px}.profile-info-title{top:14px;left:32px;font-size:10px}.profile-info-details{bottom:6px;left:6px;width:84px;height:72px;font-size:10px;text-align:center}#attack-style-list{margin-top:46px}.attack-style-box{width:23px;height:31px;background:url(/img/interface/characterdialogsheet.png) -409px -256px;background-size:620px}.attack-style-box:hover{background-position-x:-384px}.attack-style-box:active,.attack-style-box.active{background-position-x:-434px}.attack-style{width:17px;height:17px;margin-top:9px;margin-left:3px}.attack-style-stab{background:url(/img/interface/characterdialogsheet.png) -384px -224px;background-size:620px}.attack-style-slash{background:url(/img/interface/characterdialogsheet.png) -403px -224px;background-size:620px}.attack-style-defensive{background:url(/img/interface/characterdialogsheet.png) -422px -224px;background-size:620px}.attack-style-crush{background:url(/img/interface/characterdialogsheet.png) -441px -224px;background-size:620px}.attack-style-shared{background:url(/img/interface/characterdialogsheet.png) -460px -224px;background-size:620px}.attack-style-hack{background:url(/img/interface/characterdialogsheet.png) -479px -224px;background-size:620px}.attack-style-chop{background:url(/img/interface/characterdialogsheet.png) -498px -224px;background-size:620px}.attack-style-accurate{background:url(/img/interface/characterdialogsheet.png) -517px -224px;background-size:620px}.attack-style-fast{background:url(/img/interface/characterdialogsheet.png) -536px -224px;background-size:620px}.attack-style-focused{background:url(/img/interface/characterdialogsheet.png) -555px -224px;background-size:620px}.attack-style-longrange{background:url(/img/interface/characterdialogsheet.png) -574px -224px;background-size:620px}}@media only screen and (min-width: 1501px){#profile-dialog{right:118px;bottom:68px}.profile-item-info{font-size:24px}.profession-name{border-radius:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#profile-dialog{right:78px;bottom:48px}.profile-item-info{font-size:18px}.profession-name{font-size:20px;border-radius:8px}}@media only screen and (max-width: 1000px){#profile-dialog{right:128px;bottom:99px;transform:scale(1.5)}.profile-item-info{font-size:8px}.profession-name{font-size:10px;border:1px solid #373737;border-radius:4px}#arrows-count{font-size:8px}}#quests-container,#quest-log{position:absolute;overflow:auto;font-family:AdvoCut,sans-serif}.quest-log-h1{font-size:150%;color:#fff;text-align:left}.quest-log-p{color:#fff}@media only screen and (min-width: 1501px){#quests{background:url(/img/interface/quests.png) 0 0 no-repeat;background-size:1266px}#quests-container{width:318px;height:351px;margin-top:60px;margin-left:63px}#quest-log{width:516px;height:351px;margin-top:60px;margin-left:453px}#quest-log>div{margin-top:12px;margin-left:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#quests{background:url(/img/interface/quests.png) 0 0 no-repeat;background-size:844px}#quests-container{width:212px;height:234px;margin-top:40px;margin-left:42px}#quest-log{width:344px;height:234px;margin-top:40px;margin-left:302px}#quest-log>div{margin-top:8px;margin-left:8px}}@media only screen and (max-width: 1000px){#quests{background:url(/img/interface/quests.png) 0 0 no-repeat;background-size:422px}#quests-container{width:106px;height:117px;margin-top:20px;margin-left:21px}#quest-log{width:172px;height:117px;margin-top:20px;margin-left:151px}#quest-log>div{margin-top:4px;margin-left:4px}}@media only screen and (max-width: 1000px){#quests-container,#quest-log{font-size:8px}}#sliders{position:absolute;top:15%;right:10%;float:right}#texts{position:absolute;top:15%;left:10%;float:left;font-family:AdvoCut,sans-serif}#info{position:absolute;top:78%;width:100%;height:8%;text-align:center}#check-marks{position:absolute;top:41%;right:10%;float:right}#music,#sound,#brightness{position:absolute}#audio-enabled-checkbox,#low-power-checkbox,#debug-mode-checkbox,#centre-checkbox,#show-names-checkbox,#show-levels-checkbox,#disable-region-caching-checkbox{left:50%}@media only screen and (min-width: 1501px){#sliders{width:120px;height:90px}#music{top:3px}#sound{top:60px}#brightness{top:123px}#check-marks{width:120px;height:360px}#texts{width:180px;height:300px;font-size:24px}#texts p{margin-bottom:36px}#audio-enabled-checkbox{top:9px}#low-power-checkbox{top:69px}#debug-mode-checkbox{top:132px}#show-names-checkbox{top:186px}#show-levels-checkbox{top:246px}#disable-region-caching-checkbox{top:306px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#sliders{width:80px;height:60px}#music{top:2px}#sound{top:40px}#brightness{top:82px}#check-marks{width:80px;height:240px}#texts{width:120px;height:200px;font-size:16px}#texts p{margin-bottom:24px}#audio-enabled-checkbox{top:6px}#low-power-checkbox{top:46px}#debug-mode-checkbox{top:88px}#show-names-checkbox{top:124px}#show-levels-checkbox{top:164px}#disable-region-caching-checkbox{top:204px}}@media only screen and (max-width: 1000px){#sliders{width:40px;height:30px}#music{top:1px}#sound{top:20px}#brightness{top:41px}#check-marks{width:40px;height:120px}#texts{width:60px;height:100px;font-size:8px}#texts p{margin-bottom:12px}#audio-enabled-checkbox{top:3px}#low-power-checkbox{top:23px}#debug-mode-checkbox{top:44px}#show-names-checkbox{top:62px}#show-levels-checkbox{top:82px}#disable-region-caching-checkbox{top:102px}}@media only screen and (min-width: 1501px){#settings-page{bottom:68px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#settings-page{bottom:48px}}@media only screen and (max-width: 1000px){#settings-page{right:38px;bottom:99px;transform:scale(1.5)}#texts{top:15%}}#store{cursor:url(/img/hand.png),auto;position:absolute;top:17%;left:50%;display:none}#store-inventory-container{position:absolute;top:0;right:100%}#store-inventory-slots{position:absolute;overflow:hidden;overflow-y:scroll;margin:0;padding:0;list-style-type:none}#store-inventory-slots li{float:left}#store-container{position:absolute;top:8%;left:8%;overflow-y:scroll;font-family:AdvoCut,sans-serif}#store-container li{margin-bottom:5px}#store-container li:first-child{margin-top:5px}#store-help{margin:90% auto;font-family:AdvoCut,sans-serif;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{color:#000}#confirm-enchant,#confirm-sell{top:80%;left:70%}.store-item-image{width:32px;height:32px;margin-bottom:4px;background-size:cover}.store-item-name,.store-item-count,.store-item-price{flex:1;font-family:AdvoCut,sans-serif;font-size:12px;color:#fff}.store-item-name{float:left;flex:4}.store-item-count,.store-item-price{text-align:right}@media only screen and (min-width: 1501px){#store{width:510px;height:504px;background:url(/img/interface/containers.png) -387px -66px;background-size:1536px}#store-container{width:438px;height:402px}#store-container li .item-slot{margin-bottom:12px}#store-help{font-size:30px}#store-inventory-container{width:387px;height:465px;background:url(/img/interface/containers.png) 0 0;background-size:1536px}#store-inventory-slots{top:48px;left:60px;width:288px;height:276px}#store-inventory-slots li .item-slot{margin-bottom:12px}#store-sell-slot,#store-sell-slot-return{position:absolute;top:369px;width:48px;height:48px;background-size:cover}#store-sell-slot{left:42px}#store-sell-slot-return{left:132px}.store-item{display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;width:408px;height:66px;margin-left:12px;padding-left:1em;background:url(/img/interface/containers.png) -1056px -336px;background-size:1536px}.store-item:hover{background-position-y:-402px}.store-item:active{background-position-y:-468px}.store-item-name,.store-item-count,.store-item-price{font-size:18px}.store-item-name{padding-left:1.5em}.store-item-count,.store-item-price{padding-right:1em}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#store{width:340px;height:336px;background:url(/img/interface/containers.png) -258px -44px;background-size:1024px}#store-container{width:292px;height:268px}#store-container li .item-slot{margin-bottom:8px}#store-help{font-size:20px}#store-inventory-container{width:258px;height:310px;background:url(/img/interface/containers.png) 0 0;background-size:1024px}#store-inventory-slots{top:32px;left:40px;width:192px;height:184px}#store-inventory-slots li .item-slot{margin-bottom:8px}#store-sell-slot,#store-sell-slot-return{position:absolute;top:246px;width:32px;height:32px;background-size:cover}#store-sell-slot{left:28px}#store-sell-slot-return{left:88px}.store-item{display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;width:272px;height:44px;margin-left:8px;padding-left:1em;background:url(/img/interface/containers.png) -704px -224px;background-size:1024px}.store-item:hover{background-position-y:-268px}.store-item:active{background-position-y:-312px}.store-item-name,.store-item-count,.store-item-price{font-size:18px}.store-item-name{padding-left:1.5em}.store-item-count,.store-item-price{padding-right:1em}}@media only screen and (max-width: 1000px){#store{width:170px;height:168px;background:url(/img/interface/containers.png) -129px -22px;background-size:512px}#store-container{width:146px;height:134px}#store-container li .item-slot{margin-bottom:4px}#store-help{font-size:10px}#store-inventory-container{width:129px;height:155px;background:url(/img/interface/containers.png) 0 0;background-size:512px}#store-inventory-slots{top:16px;left:20px;width:96px;height:92px}#store-inventory-slots li .item-slot{margin-bottom:4px}#store-sell-slot,#store-sell-slot-return{position:absolute;top:123px;width:16px;height:16px;background-size:cover}#store-sell-slot{left:14px}#store-sell-slot-return{left:44px}.store-item{display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;width:136px;height:22px;margin-left:4px;padding-left:1em;background:url(/img/interface/containers.png) -352px -112px;background-size:512px}.store-item:hover{background-position-y:-134px}.store-item:active{background-position-y:-156px}.store-item-name,.store-item-count,.store-item-price{font-size:18px}.store-item-name{padding-left:1.5em}.store-item-count,.store-item-price{padding-right:1em}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.store-item{padding-left:5px}.store-item-name,.store-item-count,.store-item-price{font-size:14px}.store-item-name{padding-left:1em}}@media only screen and (max-width: 1000px){#store{top:30%;left:55%;transform:scale(1.7)}#store-inventory-slots{left:11px;width:106px}#store-inventory-slots li .item-slot{margin-bottom:8px}.store-item{padding-left:3px}.store-item-name,.store-item-count,.store-item-price{font-size:7px}.store-item-image{width:16px;height:16px}}#trade-container{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#close-trade{left:98%!important}#trade-inventory-slots,#trade-player-slots,#trade-oplayer-slots{position:absolute;overflow:hidden;overflow-y:scroll}#trade-inventory-slots ul,#trade-player-slots ul,#trade-oplayer-slots ul{margin:0;padding:0;list-style-type:none}#trade-inventory-slots ul li,#trade-player-slots ul li,#trade-oplayer-slots ul li{float:left}#trade-player-name,#trade-oplayer-name,#trade-status{position:absolute;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}@media only screen and (min-width: 1501px){#trade-container{width:1137px;height:510px;background:url(/img/interface/trade.png) 0 0 no-repeat;background-size:1536px}#trade-inventory-slots{top:48px;left:60px;width:288px;height:270px}#trade-player-slots{top:120px;left:444px}#trade-oplayer-slots{top:120px;left:804px}#trade-oplayer-slots ul li .item-slot{pointer-events:none}#trade-player-slots,#trade-oplayer-slots{width:306px;height:276px}#trade-player-slots ul li .item-slot,#trade-oplayer-slots ul li .item-slot,#trade-inventory-slots ul li .item-slot{margin-bottom:12px}#trade-player-name,#trade-oplayer-name{top:39px;width:312px;height:30px;font-size:30px}#trade-status{top:81px;right:66px;width:624px;height:30px;font-size:18px}#trade-player-name{left:420px}#trade-oplayer-name{left:789px}#trade-accept{right:231px;bottom:21px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#trade-container{width:758px;height:340px;background:url(/img/interface/trade.png) 0 0 no-repeat;background-size:1024px}#trade-inventory-slots{top:32px;left:40px;width:192px;height:180px}#trade-player-slots{top:80px;left:296px}#trade-oplayer-slots{top:80px;left:536px}#trade-oplayer-slots ul li .item-slot{pointer-events:none}#trade-player-slots,#trade-oplayer-slots{width:204px;height:184px}#trade-player-slots ul li .item-slot,#trade-oplayer-slots ul li .item-slot,#trade-inventory-slots ul li .item-slot{margin-bottom:8px}#trade-player-name,#trade-oplayer-name{top:26px;width:208px;height:20px;font-size:20px}#trade-status{top:54px;right:44px;width:416px;height:20px;font-size:12px}#trade-player-name{left:280px}#trade-oplayer-name{left:526px}#trade-accept{right:154px;bottom:14px}}@media only screen and (max-width: 1000px){#trade-container{width:379px;height:170px;background:url(/img/interface/trade.png) 0 0 no-repeat;background-size:512px}#trade-inventory-slots{top:16px;left:20px;width:96px;height:90px}#trade-player-slots{top:40px;left:148px}#trade-oplayer-slots{top:40px;left:268px}#trade-oplayer-slots ul li .item-slot{pointer-events:none}#trade-player-slots,#trade-oplayer-slots{width:102px;height:92px}#trade-player-slots ul li .item-slot,#trade-oplayer-slots ul li .item-slot,#trade-inventory-slots ul li .item-slot{margin-bottom:4px}#trade-player-name,#trade-oplayer-name{top:13px;width:104px;height:10px;font-size:10px}#trade-status{top:27px;right:22px;width:208px;height:10px;font-size:6px}#trade-player-name{left:140px}#trade-oplayer-name{left:263px}#trade-accept{right:77px;bottom:7px}}@media only screen and (max-width: 1000px){#trade-inventory-slots{top:16px;left:10px;width:106px;height:90px}#trade-player-slots,#trade-oplayer-slots{top:40px;width:106px;height:92px}#trade-player-slots{left:140px}#trade-oplayer-slots{left:260px}}#zoom-buttons{position:absolute;z-index:1000;top:1em;right:2em;transform:scale(2);display:none;flex-direction:row}#zoom-buttons button{width:21px;height:21px;background-color:transparent;background-image:url(/img/interface/main.png);background-position-y:-336px;border:none}#zoom-buttons button:hover{background-position-x:-22px}#zoom-buttons button:active{background-position-x:-44px}#zoom-in{background-position-y:688px}#zoom-out{background-position-y:664px}@media only screen and (max-width: 1000px){#zoom-buttons{display:flex}}#leaderboards-search-input,#leaderboards-search,#leaderboards-results{position:absolute;overflow:auto;font-family:AdvoCut,sans-serif}#leaderboards-search-input{position:absolute;font-family:AdvoCut,sans-serif;font-size:24px;color:#fff;text-align:center;background-color:transparent;border:none}@media only screen and (min-width: 1501px){#leaderboards{background:url(/img/interface/leaderboards.png) 0 0 no-repeat;background-size:1266px}#leaderboards-search-input{top:60px;left:96px;width:282px;height:36px}#leaderboards-search{top:126px;left:66px;width:312px;height:285px}#leaderboards-results{top:60px;left:456px;width:510px;height:348px}#leaderboards-results li p:first-child{padding-left:18px}#leaderboards-results li p:last-child{padding-right:18px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#leaderboards{background:url(/img/interface/leaderboards.png) 0 0 no-repeat;background-size:844px}#leaderboards-search-input{top:40px;left:64px;width:188px;height:24px}#leaderboards-search{top:84px;left:44px;width:208px;height:190px}#leaderboards-results{top:40px;left:304px;width:340px;height:232px}#leaderboards-results li p:first-child{padding-left:12px}#leaderboards-results li p:last-child{padding-right:12px}}@media only screen and (max-width: 1000px){#leaderboards{background:url(/img/interface/leaderboards.png) 0 0 no-repeat;background-size:422px}#leaderboards-search-input{top:20px;left:32px;width:94px;height:12px}#leaderboards-search{top:42px;left:22px;width:104px;height:95px}#leaderboards-results{top:20px;left:152px;width:170px;height:116px}#leaderboards-results li p:first-child{padding-left:6px}#leaderboards-results li p:last-child{padding-right:6px}}@media only screen and (max-width: 1000px){#leaderboards-search-input{font-size:8px}#leaderboards-search p{font-size:10px}}#guilds{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#guilds-list-container,#guilds-info-container{position:absolute}#guilds-list-container p,#guilds-info-container p{font-family:AdvoCut,sans-serif;text-align:center}#guilds-list-container ul,#guilds-info-container ul{position:absolute;overflow:auto;height:86%}#guilds-create-container,#guilds-info-container{display:none}#close-guilds{position:absolute;right:1px}#create-guild,#guild-back,#guild-create{position:absolute}#banner-colours,#banner-outline-colours{position:absolute;overflow:auto;display:table-cell}#banner-crests{position:absolute;overflow:auto;display:grid;grid-template-columns:repeat(3,1fr)}#guild-name-input,#guild-chat-input{position:absolute;font-family:AdvoCut,sans-serif;color:#fff;text-align:center;background-color:transparent;border:none}#guild-chat-input{display:none}#guild-chat-log{position:absolute;overflow:auto;display:none;font-family:AdvoCut,sans-serif;color:#fff}#guild-chat-log p{text-align:left;text-shadow:2px 2px 2px black}#create-error{position:absolute;font-family:AdvoCut,sans-serif;font-size:15px;color:#800;text-align:center;text-shadow:2px 2px 2px #f66}#sidebar-list li div.members-icon,#sidebar-list li div.chat-icon{position:relative}.guilds-decoration{position:absolute;top:0;right:0;bottom:auto;left:0;margin:auto}.guilds-decoration p{font-family:AdvoCut,sans-serif;color:#fff;text-align:center}.element-button{font-family:AdvoCut,sans-serif;color:#fff;text-align:center;vertical-align:middle}.slot-element{display:flex;align-items:center}.slot-element span.count{flex:1;text-align:center}.slot-element span.name{flex:3}.slot-element span.server{text-align:right}.slot-element span.count,.slot-element span.name,.slot-element span.server{font-family:AdvoCut,sans-serif;color:#fff}.slot-element span.red{color:red}.slot-element span.yellow{color:#ff0}.slot-element span.green{color:#0f0}.guild-banner-decoration,.banner-crest{position:absolute}.banner-outline{position:relative}@media only screen and (min-width: 1501px){#guilds{width:723px;height:603px;background:url(/img/interface/guilds/frames.png) no-repeat;background-size:2304px}#guilds-list-container,#guilds-info-container{top:96px;right:54px;width:420px;height:474px;background:url(/img/interface/guilds/frames.png) -768px -48px no-repeat;background-size:2304px}#guilds-list-container ul,#guilds-info-container ul{top:36px;left:24px}#guilds-info{margin-top:50%}#create-guild{top:228px;left:-180px}#banner-colours,#banner-outline-colours{top:102px;width:42px;height:450px}#banner-crests{top:150px;right:78px;width:234px;height:300px}#banner-colours{left:246px}#banner-outline-colours{left:306px}#guild-name-input{top:48px;right:72px}#guild-chat-input{right:39px;bottom:18px}#guild-chat-log{top:30px;left:48px;width:324px;height:360px}#guild-back{right:222px;bottom:42px}#guild-create{right:84px;bottom:42px}#create-error{right:60px;bottom:108px;width:276px}#guild-leave{margin-top:-54px}#sidebar-list{left:414px!important}#sidebar-list{width:102px;height:171px}#sidebar-list li{margin-bottom:6px}.guild-chat{background-position:-1584px 0!important}.guilds-decoration{top:-36px;width:234px;height:18px;background:url(/img/interface/guilds/frames.png) -858px -24px no-repeat;background-size:2304px}.guilds-decoration p{margin-top:-18px}.slot-element{box-sizing:border-box;width:375px;height:51px;padding-left:54px;background:url(/img/interface/guilds/frames.png) -1200px;background-size:2304px}.crest-element{width:72px;height:96px;margin-top:3px;background:url(/img/interface/guilds/elements.png) -375px -111px;background-size:1152px}.crest-element:hover{background-position-x:-456px}.crest-element:active,.crest-element.active{background-position-x:-537px}.members-icon{width:45px;height:33px;background:url(/img/interface/guilds/elements.png) -624px -60px;background-size:1152px}.chat-icon{width:45px;height:36px;background:url(/img/interface/guilds/elements.png) -624px 0;background-size:1152px}.element-button,.element-button-red{width:84px;height:42px;line-height:42px;background:url(/img/interface/guilds/elements.png) 0 -378px;background-size:1152px}.element-button:hover,.element-button-red:hover{background-position-y:-423px}.element-button:active,.element-button.active,.element-button-red:active,.element-button-red.active{background-position-y:-468px}.element-button-red{background-position-x:-87px}.element-button-large{width:105px;height:52.5px;line-height:52.5px;background:url(/img/interface/guilds/elements.png) 0 -472.5px;background-size:1440px}.element-button-large:hover{background-position-y:-528.75px}.element-button-large:active,.element-button-large.active{background-position-y:-585px}.sidebar-element{width:102px;height:57px;background:url(/img/interface/guilds/elements.png) 0 -252px;background-size:1152px}.sidebar-element:hover{background-position-y:-315px}.sidebar-element:hover div.members-icon,.sidebar-element:hover div.chat-icon{left:21px}.sidebar-element:active,.sidebar-element.active{background-position-y:-189px}.sidebar-element:active div.members-icon,.sidebar-element:active div.chat-icon,.sidebar-element.active div.members-icon,.sidebar-element.active div.chat-icon{left:15px}.sidebar-element div.members-icon,.sidebar-element div.chat-icon{top:12px;left:15px}.guild-name-input-image{width:228px;height:51px;background:url(/img/interface/guilds/elements.png) -378px -51px;background-size:1152px}.guild-chat-input-image{width:336px;height:51px;background:url(/img/interface/guilds/elements.png) -672px 0;background-size:1152px}.guild-banner-decoration{top:48px;width:27px;height:36px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:1152px}.guild-banner-select{left:252px;background-position-x:-216px}.guild-outline-select{left:312px;background-position-x:-282px}.slot-guild{background-position-y:-432px}.slot-fledgling{background-position-y:0}.slot-emergent{background-position-y:-54px}.slot-established{background-position-y:-108px}.slot-adept{background-position-y:-162px}.slot-veteran{background-position-y:-216px}.slot-elite{background-position-y:-270px}.slot-master{background-position-y:-324px}.slot-landlord{background-position-y:-378px}.banner{width:198px;height:654px;margin-top:-3px;margin-left:24px;background:url(/img/interface/guilds/banners.png) no-repeat;background-size:1860px}.banner-outline{top:3px;width:168px;height:633px;margin-left:15px;background:url(/img/interface/guilds/banners-outline.png) no-repeat;background-size:2340px}.banner-crest,.banner-crest-icon{background:url(/img/interface/guilds/decorations.png) no-repeat;background-size:810px}.banner-crest{top:216px;left:45px;width:156px;height:156px;background-position:-3px -3px}.banner-crest-icon{width:48px;height:45px;margin-top:30px;margin-left:12px;background-position-y:-720px}.banner-colour-button,.banner-outline-button{width:42px;height:45px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:1152px}.banner-colour-button{background-position-x:-210px}.banner-outline-button{background-position-x:-276px}.banner-green{background-position-x:0}.banner-blue{background-position-x:-201px}.banner-red{background-position-x:-402px}.banner-grey{background-position-x:-603px}.banner-black{background-position-x:-804px}.banner-tangerine{background-position-x:-1005px}.banner-yellow{background-position-x:-1206px}.banner-purple{background-position-x:-1407px}.banner-pink{background-position-x:-1608px}.banner-outline-green{background-position-x:-201px}.banner-outline-blue{background-position-x:-402px}.banner-outline-orange{background-position-x:-603px}.banner-outline-white{background-position-x:-804px}.banner-outline-grey{background-position-x:-1005px}.banner-outline-tangerine{background-position-x:-1206px}.banner-outline-yellow{background-position-x:-1407px}.banner-outline-purple{background-position-x:-1608px}.banner-outline-pink{background-position-x:-1809px}.banner-colour-button-green,.banner-outline-button-green{background-position-y:-45px}.banner-colour-button-blue,.banner-outline-button-blue{background-position-y:-93px}.banner-colour-button-red,.banner-outline-button-orange{background-position-y:-141px}.banner-colour-button-grey,.banner-outline-button-white{background-position-y:-189px}.banner-colour-button-black,.banner-outline-button-grey{background-position-y:-237px}.banner-colour-button-tangerine,.banner-outline-button-tangerine{background-position-y:-285px}.banner-colour-button-yellow,.banner-outline-button-yellow{background-position-y:-333px}.banner-colour-button-purple,.banner-outline-button-purple{background-position-y:-381px}.banner-colour-button-pink,.banner-outline-button-pink{background-position-y:-429px}.banner-crest-none{background-position-x:-3px}.banner-crest-star{background-position-x:-165px}.banner-crest-hawk{background-position-x:-327px}.banner-crest-phoenix{background-position-x:-489px}.banner-crest-icon-none{background-position-x:0}.banner-crest-icon-star{background-position-x:-48px}.banner-crest-icon-hawk{background-position-x:-96px}.banner-crest-icon-phoenix{background-position-x:-144px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#guilds{width:482px;height:402px;background:url(/img/interface/guilds/frames.png) no-repeat;background-size:1536px}#guilds-list-container,#guilds-info-container{top:64px;right:36px;width:280px;height:316px;background:url(/img/interface/guilds/frames.png) -512px -32px no-repeat;background-size:1536px}#guilds-list-container ul,#guilds-info-container ul{top:24px;left:16px}#guilds-info{margin-top:50%}#create-guild{top:152px;left:-120px}#banner-colours,#banner-outline-colours{top:68px;width:28px;height:300px}#banner-crests{top:100px;right:52px;width:156px;height:200px}#banner-colours{left:164px}#banner-outline-colours{left:204px}#guild-name-input{top:32px;right:48px}#guild-chat-input{right:26px;bottom:12px}#guild-chat-log{top:20px;left:32px;width:216px;height:240px}#guild-back{right:148px;bottom:28px}#guild-create{right:56px;bottom:28px}#create-error{right:40px;bottom:72px;width:184px}#guild-leave{margin-top:-36px}#sidebar-list{left:276px!important}#sidebar-list{width:68px;height:114px}#sidebar-list li{margin-bottom:4px}.guild-chat{background-position:-1056px 0!important}.guilds-decoration{top:-24px;width:156px;height:12px;background:url(/img/interface/guilds/frames.png) -572px -16px no-repeat;background-size:1536px}.guilds-decoration p{margin-top:-12px}.slot-element{box-sizing:border-box;width:250px;height:34px;padding-left:36px;background:url(/img/interface/guilds/frames.png) -800px;background-size:1536px}.crest-element{width:48px;height:64px;margin-top:2px;background:url(/img/interface/guilds/elements.png) -250px -74px;background-size:768px}.crest-element:hover{background-position-x:-304px}.crest-element:active,.crest-element.active{background-position-x:-358px}.members-icon{width:30px;height:22px;background:url(/img/interface/guilds/elements.png) -416px -40px;background-size:768px}.chat-icon{width:30px;height:24px;background:url(/img/interface/guilds/elements.png) -416px 0;background-size:768px}.element-button,.element-button-red{width:56px;height:28px;line-height:28px;background:url(/img/interface/guilds/elements.png) 0 -252px;background-size:768px}.element-button:hover,.element-button-red:hover{background-position-y:-282px}.element-button:active,.element-button.active,.element-button-red:active,.element-button-red.active{background-position-y:-312px}.element-button-red{background-position-x:-58px}.element-button-large{width:70px;height:35px;line-height:35px;background:url(/img/interface/guilds/elements.png) 0 -315px;background-size:960px}.element-button-large:hover{background-position-y:-352.5px}.element-button-large:active,.element-button-large.active{background-position-y:-390px}.sidebar-element{width:68px;height:38px;background:url(/img/interface/guilds/elements.png) 0 -168px;background-size:768px}.sidebar-element:hover{background-position-y:-210px}.sidebar-element:hover div.members-icon,.sidebar-element:hover div.chat-icon{left:14px}.sidebar-element:active,.sidebar-element.active{background-position-y:-126px}.sidebar-element:active div.members-icon,.sidebar-element:active div.chat-icon,.sidebar-element.active div.members-icon,.sidebar-element.active div.chat-icon{left:10px}.sidebar-element div.members-icon,.sidebar-element div.chat-icon{top:8px;left:10px}.guild-name-input-image{width:152px;height:34px;background:url(/img/interface/guilds/elements.png) -252px -34px;background-size:768px}.guild-chat-input-image{width:224px;height:34px;background:url(/img/interface/guilds/elements.png) -448px 0;background-size:768px}.guild-banner-decoration{top:32px;width:18px;height:24px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:768px}.guild-banner-select{left:168px;background-position-x:-144px}.guild-outline-select{left:208px;background-position-x:-188px}.slot-guild{background-position-y:-288px}.slot-fledgling{background-position-y:0}.slot-emergent{background-position-y:-36px}.slot-established{background-position-y:-72px}.slot-adept{background-position-y:-108px}.slot-veteran{background-position-y:-144px}.slot-elite{background-position-y:-180px}.slot-master{background-position-y:-216px}.slot-landlord{background-position-y:-252px}.banner{width:132px;height:436px;margin-top:-2px;margin-left:16px;background:url(/img/interface/guilds/banners.png) no-repeat;background-size:1240px}.banner-outline{top:2px;width:112px;height:422px;margin-left:10px;background:url(/img/interface/guilds/banners-outline.png) no-repeat;background-size:1560px}.banner-crest,.banner-crest-icon{background:url(/img/interface/guilds/decorations.png) no-repeat;background-size:540px}.banner-crest{top:144px;left:30px;width:104px;height:104px;background-position:-2px -2px}.banner-crest-icon{width:32px;height:30px;margin-top:20px;margin-left:8px;background-position-y:-480px}.banner-colour-button,.banner-outline-button{width:28px;height:30px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:768px}.banner-colour-button{background-position-x:-140px}.banner-outline-button{background-position-x:-184px}.banner-green{background-position-x:0}.banner-blue{background-position-x:-134px}.banner-red{background-position-x:-268px}.banner-grey{background-position-x:-402px}.banner-black{background-position-x:-536px}.banner-tangerine{background-position-x:-670px}.banner-yellow{background-position-x:-804px}.banner-purple{background-position-x:-938px}.banner-pink{background-position-x:-1072px}.banner-outline-green{background-position-x:-134px}.banner-outline-blue{background-position-x:-268px}.banner-outline-orange{background-position-x:-402px}.banner-outline-white{background-position-x:-536px}.banner-outline-grey{background-position-x:-670px}.banner-outline-tangerine{background-position-x:-804px}.banner-outline-yellow{background-position-x:-938px}.banner-outline-purple{background-position-x:-1072px}.banner-outline-pink{background-position-x:-1206px}.banner-colour-button-green,.banner-outline-button-green{background-position-y:-30px}.banner-colour-button-blue,.banner-outline-button-blue{background-position-y:-62px}.banner-colour-button-red,.banner-outline-button-orange{background-position-y:-94px}.banner-colour-button-grey,.banner-outline-button-white{background-position-y:-126px}.banner-colour-button-black,.banner-outline-button-grey{background-position-y:-158px}.banner-colour-button-tangerine,.banner-outline-button-tangerine{background-position-y:-190px}.banner-colour-button-yellow,.banner-outline-button-yellow{background-position-y:-222px}.banner-colour-button-purple,.banner-outline-button-purple{background-position-y:-254px}.banner-colour-button-pink,.banner-outline-button-pink{background-position-y:-286px}.banner-crest-none{background-position-x:-2px}.banner-crest-star{background-position-x:-110px}.banner-crest-hawk{background-position-x:-218px}.banner-crest-phoenix{background-position-x:-326px}.banner-crest-icon-none{background-position-x:0}.banner-crest-icon-star{background-position-x:-32px}.banner-crest-icon-hawk{background-position-x:-64px}.banner-crest-icon-phoenix{background-position-x:-96px}}@media only screen and (max-width: 1000px){#guilds{width:241px;height:201px;background:url(/img/interface/guilds/frames.png) no-repeat;background-size:768px}#guilds-list-container,#guilds-info-container{top:32px;right:18px;width:140px;height:158px;background:url(/img/interface/guilds/frames.png) -256px -16px no-repeat;background-size:768px}#guilds-list-container ul,#guilds-info-container ul{top:12px;left:8px}#guilds-info{margin-top:50%}#create-guild{top:76px;left:-60px}#banner-colours,#banner-outline-colours{top:34px;width:14px;height:150px}#banner-crests{top:50px;right:26px;width:78px;height:100px}#banner-colours{left:82px}#banner-outline-colours{left:102px}#guild-name-input{top:16px;right:24px}#guild-chat-input{right:13px;bottom:6px}#guild-chat-log{top:10px;left:16px;width:108px;height:120px}#guild-back{right:74px;bottom:14px}#guild-create{right:28px;bottom:14px}#create-error{right:20px;bottom:36px;width:92px}#guild-leave{margin-top:-18px}#sidebar-list{left:138px!important}#sidebar-list{width:34px;height:57px}#sidebar-list li{margin-bottom:2px}.guild-chat{background-position:-528px 0!important}.guilds-decoration{top:-12px;width:78px;height:6px;background:url(/img/interface/guilds/frames.png) -286px -8px no-repeat;background-size:768px}.guilds-decoration p{margin-top:-6px}.slot-element{box-sizing:border-box;width:125px;height:17px;padding-left:18px;background:url(/img/interface/guilds/frames.png) -400px;background-size:768px}.crest-element{width:24px;height:32px;margin-top:1px;background:url(/img/interface/guilds/elements.png) -125px -37px;background-size:384px}.crest-element:hover{background-position-x:-152px}.crest-element:active,.crest-element.active{background-position-x:-179px}.members-icon{width:15px;height:11px;background:url(/img/interface/guilds/elements.png) -208px -20px;background-size:384px}.chat-icon{width:15px;height:12px;background:url(/img/interface/guilds/elements.png) -208px 0;background-size:384px}.element-button,.element-button-red{width:28px;height:14px;line-height:14px;background:url(/img/interface/guilds/elements.png) 0 -126px;background-size:384px}.element-button:hover,.element-button-red:hover{background-position-y:-141px}.element-button:active,.element-button.active,.element-button-red:active,.element-button-red.active{background-position-y:-156px}.element-button-red{background-position-x:-29px}.element-button-large{width:35px;height:17.5px;line-height:17.5px;background:url(/img/interface/guilds/elements.png) 0 -157.5px;background-size:480px}.element-button-large:hover{background-position-y:-176.25px}.element-button-large:active,.element-button-large.active{background-position-y:-195px}.sidebar-element{width:34px;height:19px;background:url(/img/interface/guilds/elements.png) 0 -84px;background-size:384px}.sidebar-element:hover{background-position-y:-105px}.sidebar-element:hover div.members-icon,.sidebar-element:hover div.chat-icon{left:7px}.sidebar-element:active,.sidebar-element.active{background-position-y:-63px}.sidebar-element:active div.members-icon,.sidebar-element:active div.chat-icon,.sidebar-element.active div.members-icon,.sidebar-element.active div.chat-icon{left:5px}.sidebar-element div.members-icon,.sidebar-element div.chat-icon{top:4px;left:5px}.guild-name-input-image{width:76px;height:17px;background:url(/img/interface/guilds/elements.png) -126px -17px;background-size:384px}.guild-chat-input-image{width:112px;height:17px;background:url(/img/interface/guilds/elements.png) -224px 0;background-size:384px}.guild-banner-decoration{top:16px;width:9px;height:12px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:384px}.guild-banner-select{left:84px;background-position-x:-72px}.guild-outline-select{left:104px;background-position-x:-94px}.slot-guild{background-position-y:-144px}.slot-fledgling{background-position-y:0}.slot-emergent{background-position-y:-18px}.slot-established{background-position-y:-36px}.slot-adept{background-position-y:-54px}.slot-veteran{background-position-y:-72px}.slot-elite{background-position-y:-90px}.slot-master{background-position-y:-108px}.slot-landlord{background-position-y:-126px}.banner{width:66px;height:218px;margin-top:-1px;margin-left:8px;background:url(/img/interface/guilds/banners.png) no-repeat;background-size:620px}.banner-outline{top:1px;width:56px;height:211px;margin-left:5px;background:url(/img/interface/guilds/banners-outline.png) no-repeat;background-size:780px}.banner-crest,.banner-crest-icon{background:url(/img/interface/guilds/decorations.png) no-repeat;background-size:270px}.banner-crest{top:72px;left:15px;width:52px;height:52px;background-position:-1px -1px}.banner-crest-icon{width:16px;height:15px;margin-top:10px;margin-left:4px;background-position-y:-240px}.banner-colour-button,.banner-outline-button{width:14px;height:15px;background:url(/img/interface/guilds/elements.png) no-repeat;background-size:384px}.banner-colour-button{background-position-x:-70px}.banner-outline-button{background-position-x:-92px}.banner-green{background-position-x:0}.banner-blue{background-position-x:-67px}.banner-red{background-position-x:-134px}.banner-grey{background-position-x:-201px}.banner-black{background-position-x:-268px}.banner-tangerine{background-position-x:-335px}.banner-yellow{background-position-x:-402px}.banner-purple{background-position-x:-469px}.banner-pink{background-position-x:-536px}.banner-outline-green{background-position-x:-67px}.banner-outline-blue{background-position-x:-134px}.banner-outline-orange{background-position-x:-201px}.banner-outline-white{background-position-x:-268px}.banner-outline-grey{background-position-x:-335px}.banner-outline-tangerine{background-position-x:-402px}.banner-outline-yellow{background-position-x:-469px}.banner-outline-purple{background-position-x:-536px}.banner-outline-pink{background-position-x:-603px}.banner-colour-button-green,.banner-outline-button-green{background-position-y:-15px}.banner-colour-button-blue,.banner-outline-button-blue{background-position-y:-31px}.banner-colour-button-red,.banner-outline-button-orange{background-position-y:-47px}.banner-colour-button-grey,.banner-outline-button-white{background-position-y:-63px}.banner-colour-button-black,.banner-outline-button-grey{background-position-y:-79px}.banner-colour-button-tangerine,.banner-outline-button-tangerine{background-position-y:-95px}.banner-colour-button-yellow,.banner-outline-button-yellow{background-position-y:-111px}.banner-colour-button-purple,.banner-outline-button-purple{background-position-y:-127px}.banner-colour-button-pink,.banner-outline-button-pink{background-position-y:-143px}.banner-crest-none{background-position-x:-1px}.banner-crest-star{background-position-x:-55px}.banner-crest-hawk{background-position-x:-109px}.banner-crest-phoenix{background-position-x:-163px}.banner-crest-icon-none{background-position-x:0}.banner-crest-icon-star{background-position-x:-16px}.banner-crest-icon-hawk{background-position-x:-32px}.banner-crest-icon-phoenix{background-position-x:-48px}}@media only screen and (min-width: 1501px){#guild-name-input,#guild-chat-input{font-size:20px}.guilds-decoration p{margin-top:-24px;font-size:28px}.slot-element span.name,.slot-element span.count,.slot-element span.server{font-size:22px}.element-button{font-size:18px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#guild-name-input,#guild-chat-input,#guild-chat-log{font-size:14px}.guilds-decoration p{margin-top:-22px;font-size:20px}.slot-element span.name,.slot-element span.count,.slot-element span.server{font-size:14px}}@media only screen and (max-width: 1000px){#guild-name-input,#guild-chat-input{font-size:8px}#guild-chat-log{font-size:10px}.guilds-decoration p{margin-top:-12px;font-size:10px}.slot-element span.name,.slot-element span.count,.slot-element span.server{font-size:8px}.element-button{font-size:7px}}#crafting{cursor:url(/img/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#crafting-options{position:absolute;overflow:auto;display:grid;grid-template-columns:repeat(4,1fr)}#craft-button{position:absolute;display:flex;align-items:center;justify-content:center;font-family:KerrieFont,sans-serif;color:#fff;vertical-align:middle}#crafting-requirements{position:absolute;display:flex}#crafting-result,#crafting-level,#crafting-result-name{position:absolute}.crafting-option-icon{background-size:cover;filter:opacity(100%)}#crafting-result-name,.crafting-option-count{font-family:KerrieFont,sans-serif;font-size:14px;color:#fff;text-align:center}.crafting-buttons{position:absolute;display:flex;justify-content:space-between}.amount-button{flex:auto}@media only screen and (min-width: 1501px){#crafting{width:1248px;height:756px;background:url(/img/interface/crafting.png) no-repeat;background-size:1248px}#crafting-options{top:72px;left:90px;width:522px;height:360px}#crafting-requirements{top:72px;right:72px;gap:18px;width:420px;height:144px}#craft-button{right:138px;bottom:72px;width:288px;height:96px;font-size:36px;background:url(/img/interface/crafting.png) 0 -942px;background-size:1248px}#craft-button:hover{height:84px;background-position-y:-1146px}#craft-button:active,#craft-button.active{height:78px;background-position-y:-1056px}#crafting-result-name{right:72px;bottom:234px;width:420px;font-size:36px}#crafting-result,#crafting-level{bottom:288px}#crafting-result{right:318px}#crafting-level{right:126px}.crafting-option{width:126px;height:132px;margin-bottom:48px;background:url(/img/interface/crafting.png) -288px -768px;background-size:1248px}.crafting-option:hover{background-position-x:-420px}.crafting-option:active,.crafting-option.active{background-position-x:-552px}.crafting-option.disabled{background-position-x:-288px!important}.crafting-option-icon{width:96px;height:96px;margin:15px}.crafting-option-count{font-size:42px}.crafting-buttons{bottom:180px;left:96px;gap:36px}.craft-slot{width:126px;height:132px;background:url(/img/interface/crafting.png) -768px -1056px;background-size:1248px}.craft-slot:hover{background-position-x:-900px}.craft-slot:active,.craft-slot.active{background-position-x:-1032px}.amount-button{width:96px;height:96px;background:url(/img/interface/crafting.png);background-size:1248px}.amount-one{background-position:-2px -1248px}.amount-five{background-position:-102px -1248px}.amount-ten{background-position:-204px -1248px}.amount-one:hover,.amount-one.active,.amount-five:hover,.amount-five.active,.amount-ten:hover,.amount-ten.active{background-position-y:-1440px}.amount-one:active,.amount-five:active,.amount-ten:active{background-position-y:-1344px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#crafting{width:832px;height:504px;background:url(/img/interface/crafting.png) no-repeat;background-size:832px}#crafting-options{top:48px;left:60px;width:348px;height:240px}#crafting-requirements{top:48px;right:48px;gap:12px;width:280px;height:96px}#craft-button{right:92px;bottom:48px;width:192px;height:64px;font-size:24px;background:url(/img/interface/crafting.png) 0 -628px;background-size:832px}#craft-button:hover{height:56px;background-position-y:-764px}#craft-button:active,#craft-button.active{height:52px;background-position-y:-704px}#crafting-result-name{right:48px;bottom:156px;width:280px;font-size:24px}#crafting-result,#crafting-level{bottom:192px}#crafting-result{right:212px}#crafting-level{right:84px}.crafting-option{width:84px;height:88px;margin-bottom:32px;background:url(/img/interface/crafting.png) -192px -512px;background-size:832px}.crafting-option:hover{background-position-x:-280px}.crafting-option:active,.crafting-option.active{background-position-x:-368px}.crafting-option.disabled{background-position-x:-192px!important}.crafting-option-icon{width:64px;height:64px;margin:10px}.crafting-option-count{font-size:28px}.crafting-buttons{bottom:120px;left:64px;gap:24px}.craft-slot{width:84px;height:88px;background:url(/img/interface/crafting.png) -512px -704px;background-size:832px}.craft-slot:hover{background-position-x:-600px}.craft-slot:active,.craft-slot.active{background-position-x:-688px}.amount-button{width:64px;height:64px;background:url(/img/interface/crafting.png);background-size:832px}.amount-one{background-position:-2px -832px}.amount-five{background-position:-68px -832px}.amount-ten{background-position:-136px -832px}.amount-one:hover,.amount-one.active,.amount-five:hover,.amount-five.active,.amount-ten:hover,.amount-ten.active{background-position-y:-960px}.amount-one:active,.amount-five:active,.amount-ten:active{background-position-y:-896px}}@media only screen and (max-width: 1000px){#crafting{width:416px;height:252px;background:url(/img/interface/crafting.png) no-repeat;background-size:416px}#crafting-options{top:24px;left:30px;width:174px;height:120px}#crafting-requirements{top:24px;right:24px;gap:6px;width:140px;height:48px}#craft-button{right:46px;bottom:24px;width:96px;height:32px;font-size:12px;background:url(/img/interface/crafting.png) 0 -314px;background-size:416px}#craft-button:hover{height:28px;background-position-y:-382px}#craft-button:active,#craft-button.active{height:26px;background-position-y:-352px}#crafting-result-name{right:24px;bottom:78px;width:140px;font-size:12px}#crafting-result,#crafting-level{bottom:96px}#crafting-result{right:106px}#crafting-level{right:42px}.crafting-option{width:42px;height:44px;margin-bottom:16px;background:url(/img/interface/crafting.png) -96px -256px;background-size:416px}.crafting-option:hover{background-position-x:-140px}.crafting-option:active,.crafting-option.active{background-position-x:-184px}.crafting-option.disabled{background-position-x:-96px!important}.crafting-option-icon{width:32px;height:32px;margin:5px}.crafting-option-count{font-size:14px}.crafting-buttons{bottom:60px;left:32px;gap:12px}.craft-slot{width:42px;height:44px;background:url(/img/interface/crafting.png) -256px -352px;background-size:416px}.craft-slot:hover{background-position-x:-300px}.craft-slot:active,.craft-slot.active{background-position-x:-344px}.amount-button{width:32px;height:32px;background:url(/img/interface/crafting.png);background-size:416px}.amount-one{background-position:-2px -416px}.amount-five{background-position:-34px -416px}.amount-ten{background-position:-68px -416px}.amount-one:hover,.amount-one.active,.amount-five:hover,.amount-five.active,.amount-ten:hover,.amount-ten.active{background-position-y:-480px}.amount-one:active,.amount-five:active,.amount-ten:active{background-position-y:-448px}}body.game{background:#000}body.game #load-character,body.game #create-character,body.game #error{display:none}body.game #parchment{z-index:0;transition:.5s opacity linear .5s,z-index 0s linear 1s}body.game #credits,body.game #death,body.game #news,body.game #about,body.game #git{z-index:1000;opacity:0;transition:0s opacity linear 0s}body.game .parchment-left{left:41%;transition:.5s left ease-in-out}body.game .parchment-right{right:41%;transition:.5s right ease-in-out}body.game.credits #credits,body.game.death #death,body.game.news #news,body.game.about #about,body.game.git #git{z-index:1000;opacity:1;transition:.5s opacity linear .5s}body.game.credits #parchment,body.game.death #parchment,body.game.news #parchment,body.game.about #parchment,body.game.git #parchment{z-index:1000;opacity:1;transition:.5s opacity linear 0s}body.game.credits .parchment-left,body.game.death .parchment-left,body.game.news .parchment-left,body.game.about .parchment-left,body.game.git .parchment-left{left:0}body.game.credits .parchment-right,body.game.death .parchment-right,body.game.news .parchment-right,body.game.about .parchment-right,body.game.git .parchment-right{right:0}body.game .parchment-middle{width:0;margin-left:0;transition:.5s width ease-in-out,.5s margin-left ease-in-out,.5s background-position ease-in-out}body.game #game-container{opacity:1}body.game footer{display:none;color:#8a8a8a}@media only screen and (min-width: 1501px){body.game .parchment-middle{background-position:-633px -882px}body.game.credits .parchment-middle,body.game.death .parchment-middle,body.game.news .parchment-middle,body.game.git .parchment-middle,body.game.about .parchment-middle{width:1038px;margin-left:-519px;background-position-x:-114px}}\n',document.head.appendChild(r),{execute:function(){var e,r,g,b,x,y=function(){function e(t){v(this,e),this.level=t}return k(e,[{key:"info",value:function(){var e;"debug"!==this.level&&"info"!==this.level||(e=console).info.apply(e,arguments)}},{key:"debug",value:function(){var e;"debug"===this.level&&(e=console).debug.apply(e,arguments)}},{key:"error",value:function(){var e;(e=console).error.apply(e,arguments)}}]),e}(),_=new y("info"),S=function(e,t,i){return e()};function C(){return(C=m(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if("true"===localStorage.getItem("prompted")){e.next=5;break}return e.next=5,x.prompt().catch((function(e){return _.error("[SW ERROR]",e)}));case 5:return e.next=7,x.userChoice;case 7:localStorage.setItem("prompted","true"),x=null;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"serviceWorker"in navigator&&(window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),x=e})),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.immediate,n=void 0!==i&&i,a=(t.onNeedRefresh,t.onOfflineReady),r=t.onRegistered,s=t.onRegisteredSW,l=t.onRegisterError;function c(){return d.apply(this,arguments)}function d(){return d=m(f().mark((function t(){var i,c;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("serviceWorker"in navigator)){t.next=9;break}return t.next=3,S((function(){return o.import("./workbox-window.prod.es5-legacy-ab6aa431.js")}));case 3:i=t.sent,c=i.Workbox,(e=new c("/sw.js",{scope:"/",type:"classic"})).addEventListener("activated",(function(e){(e.isUpdate||e.isExternal)&&window.location.reload()})),e.addEventListener("installed",(function(e){e.isUpdate||null==a||a()})),e.register({immediate:n}).then((function(e){s?s("/sw.js",e):null==r||r(e)})).catch((function(e){null==l||l(e)}));case 9:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}c()}({immediate:!0}));var E=navigator.userAgent.toLowerCase();var T=function(){return window.innerWidth<1e3},Y=function(e){return e[e.Login=0]="Login",e[e.Register=1]="Register",e[e.Guest=2]="Guest",e}(Y||{}),I=function(e){return e[e.Spawns=0]="Spawns",e[e.Positions=1]="Positions",e}(I||{}),X=function(e){return e[e.Batch=0]="Batch",e[e.Equip=1]="Equip",e[e.Unequip=2]="Unequip",e[e.Style=3]="Style",e}(X||{}),z=function(e){return e[e.Request=0]="Request",e[e.Started=1]="Started",e[e.Step=2]="Step",e[e.Stop=3]="Stop",e[e.Move=4]="Move",e[e.Follow=5]="Follow",e[e.Entity=6]="Entity",e[e.Speed=7]="Speed",e}(z||{}),A=function(e){return e[e.Talk=0]="Talk",e[e.Attack=1]="Attack",e[e.None=2]="None",e[e.Object=3]="Object",e}(A||{}),L=function(e){return e[e.Initiate=0]="Initiate",e[e.Hit=1]="Hit",e[e.Finish=2]="Finish",e[e.Sync=3]="Sync",e}(L||{}),q=function(e){return e[e.Ping=0]="Ping",e[e.Pong=1]="Pong",e}(q||{}),D=function(e){return e[e.Batch=0]="Batch",e[e.Add=1]="Add",e[e.Remove=2]="Remove",e[e.Select=3]="Select",e[e.Swap=4]="Swap",e}(D||{}),P=function(e){return e[e.Batch=0]="Batch",e[e.Add=1]="Add",e[e.Update=2]="Update",e[e.Use=3]="Use",e[e.QuickSlot=4]="QuickSlot",e[e.Toggle=5]="Toggle",e}(P||{}),R=function(e){return e[e.Batch=0]="Batch",e[e.Progress=1]="Progress",e[e.Finish=2]="Finish",e}(R||{}),M=function(e){return e[e.Batch=0]="Batch",e[e.Progress=1]="Progress",e}(M||{}),N=function(e){return e[e.Ok=0]="Ok",e[e.YesNo=1]="YesNo",e[e.Text=2]="Text",e[e.Popup=3]="Popup",e}(N||{}),O=function(e){return e[e.Sync=0]="Sync",e[e.Skill=1]="Skill",e}(O||{}),B=function(e){return e[e.Talk=0]="Talk",e[e.Store=1]="Store",e[e.Bank=2]="Bank",e[e.Enchant=3]="Enchant",e[e.Countdown=4]="Countdown",e}(B||{}),F=function(e){return e[e.Request=0]="Request",e[e.Add=1]="Add",e[e.Remove=2]="Remove",e[e.Accept=3]="Accept",e[e.Close=4]="Close",e[e.Open=5]="Open",e}(F||{}),j=function(e){return e[e.Select=0]="Select",e[e.Confirm=1]="Confirm",e}(j||{}),H=function(e){return e[e.Create=0]="Create",e[e.Login=1]="Login",e[e.Logout=2]="Logout",e[e.Join=3]="Join",e[e.Leave=4]="Leave",e[e.Rank=5]="Rank",e[e.Update=6]="Update",e[e.Experience=7]="Experience",e[e.Banner=8]="Banner",e[e.List=9]="List",e[e.Error=10]="Error",e[e.Chat=11]="Chat",e}(H||{}),U=function(e){return e[e.Location=0]="Location",e[e.Relative=1]="Relative",e[e.Entity=2]="Entity",e[e.Remove=3]="Remove",e[e.Button=4]="Button",e}(U||{}),G=function(e){return e[e.Open=0]="Open",e[e.Close=1]="Close",e[e.Buy=2]="Buy",e[e.Sell=3]="Sell",e[e.Update=4]="Update",e[e.Select=5]="Select",e}(G||{}),W=function(e){return e[e.Score=0]="Score",e[e.End=1]="End",e[e.Lobby=2]="Lobby",e[e.Exit=3]="Exit",e}(W||{}),V=function(e){return e[e.Set=0]="Set",e[e.Remove=1]="Remove",e[e.Lamp=2]="Lamp",e[e.RemoveLamps=3]="RemoveLamps",e[e.Darkness=4]="Darkness",e}(V||{}),Z=function(e){return e[e.CtrlClick=0]="CtrlClick",e}(Z||{}),K=function(e){return e[e.Batch=0]="Batch",e[e.Update=1]="Update",e}(K||{}),$=function(e){return e[e.Entity=0]="Entity",e[e.Position=1]="Position",e}($||{}),Q=function(e){return e[e.Add=0]="Add",e[e.Remove=1]="Remove",e}(Q||{}),J=function(e){return e[e.List=0]="List",e[e.Add=1]="Add",e[e.Remove=2]="Remove",e[e.Status=3]="Status",e[e.Sync=4]="Sync",e}(J||{}),ee=function(e){return e[e.Open=0]="Open",e[e.Select=1]="Select",e[e.Craft=2]="Craft",e}(ee||{});U.Remove;var te,ie=function(e){return e[e.Bank=0]="Bank",e[e.Inventory=1]="Inventory",e[e.Trade=2]="Trade",e}(ie||{}),ne=function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e}(ne||{}),oe=function(e){return e[e.Player=0]="Player",e[e.NPC=1]="NPC",e[e.Item=2]="Item",e[e.Mob=3]="Mob",e[e.Chest=4]="Chest",e[e.Projectile=5]="Projectile",e[e.Object=6]="Object",e[e.Pet=7]="Pet",e}(oe||{}),ae=function(e){return e[e.Active=0]="Active",e[e.Passive=1]="Passive",e}(ae||{}),re=function(e){return e[e.Idle=0]="Idle",e[e.Attack=1]="Attack",e[e.Walk=2]="Walk",e[e.Orientate=3]="Orientate",e}(re||{}),se=function(e){return e.DropOne="drop-one",e.DropMany="drop-many",e.Wield="wield",e.Equip="equip",e.Attack="attack",e.Eat="eat",e.Eat2="eat2",e.Move="move",e.Trade="trade",e.Potion="potion",e.Follow="follow",e.Examine="examine",e.AddFriend="addfriend",e}(se||{}),le=function(e){return e[e.Normal=0]="Normal",e[e.Poison=1]="Poison",e[e.Heal=2]="Heal",e[e.Mana=3]="Mana",e[e.Experience=4]="Experience",e[e.LevelUp=5]="LevelUp",e[e.Critical=6]="Critical",e[e.Stun=7]="Stun",e[e.Profession=8]="Profession",e[e.Freezing=9]="Freezing",e[e.Burning=10]="Burning",e[e.Terror=11]="Terror",e}(le||{}),ce=function(e){return e[e.Armour=0]="Armour",e[e.Boots=1]="Boots",e[e.Pendant=2]="Pendant",e[e.Ring=3]="Ring",e[e.Weapon=4]="Weapon",e[e.Arrows=5]="Arrows",e[e.WeaponSkin=6]="WeaponSkin",e[e.ArmourSkin=7]="ArmourSkin",e}(ce||{}),de=function(e){return e[e.None=0]="None",e[e.Stab=1]="Stab",e[e.Slash=2]="Slash",e[e.Defensive=3]="Defensive",e[e.Crush=4]="Crush",e[e.Shared=5]="Shared",e[e.Hack=6]="Hack",e[e.Chop=7]="Chop",e[e.Accurate=8]="Accurate",e[e.Fast=9]="Fast",e[e.Focused=10]="Focused",e[e.LongRange=11]="LongRange",e}(de||{}),he=function(e){return e[e.Colliding=0]="Colliding",e[e.Mob=1]="Mob",e[e.Player=2]="Player",e[e.Item=3]="Item",e[e.NPC=4]="NPC",e[e.Chest=5]="Chest",e[e.Object=6]="Object",e}(he||{}),ue=function(e){return e[e.Lumberjacking=0]="Lumberjacking",e[e.Accuracy=1]="Accuracy",e[e.Archery=2]="Archery",e[e.Health=3]="Health",e[e.Magic=4]="Magic",e[e.Mining=5]="Mining",e[e.Strength=6]="Strength",e[e.Defense=7]="Defense",e[e.Fishing=8]="Fishing",e[e.Cooking=9]="Cooking",e[e.Smithing=10]="Smithing",e[e.Crafting=11]="Crafting",e[e.Fletching=12]="Fletching",e[e.Smelting=13]="Smelting",e[e.Foraging=14]="Foraging",e[e.Eating=15]="Eating",e[e.Loitering=16]="Loitering",e}(ue||{}),pe=[3,1,6,7,2,4,0,5,8,14,11,9,12,10,15,16],fe=function(e){return e[e.Bloodsucking=0]="Bloodsucking",e[e.Critical=1]="Critical",e[e.Evasion=2]="Evasion",e[e.Thorns=3]="Thorns",e[e.Explosive=4]="Explosive",e[e.Stun=5]="Stun",e[e.AntiStun=6]="AntiStun",e[e.Splash=7]="Splash",e[e.DoubleEdged=8]="DoubleEdged",e}(fe||{}),ge=function(e){return e[e.None=0]="None",e[e.Critical=1]="Critical",e[e.Terror=2]="Terror",e[e.TerrorStatus=3]="TerrorStatus",e[e.Stun=4]="Stun",e[e.Healing=5]="Healing",e[e.Fireball=6]="Fireball",e[e.Iceball=7]="Iceball",e[e.Poisonball=8]="Poisonball",e[e.Boulder=9]="Boulder",e[e.Running=10]="Running",e[e.HotSauce=11]="HotSauce",e[e.DualistsMark=12]="DualistsMark",e[e.ThickSkin=13]="ThickSkin",e[e.SnowPotion=14]="SnowPotion",e[e.FirePotion=15]="FirePotion",e[e.Burning=16]="Burning",e[e.Freezing=17]="Freezing",e[e.Invincible=18]="Invincible",e}(ge||{}),me=function(e){return e[e.None=0]="None",e[e.Silver=1]="Silver",e[e.Gold=2]="Gold",e[e.Artist=3]="Artist",e[e.Tier1=4]="Tier1",e[e.Tier2=5]="Tier2",e[e.Tier3=6]="Tier3",e[e.Tier4=7]="Tier4",e[e.Tier5=8]="Tier5",e[e.Tier6=9]="Tier6",e[e.Tier7=10]="Tier7",e}(me||{}),ve=function(e){return e[e.None=0]="None",e[e.Moderator=1]="Moderator",e[e.Admin=2]="Admin",e[e.Veteran=3]="Veteran",e[e.Patron=4]="Patron",e[e.Artist=5]="Artist",e[e.Cheater=6]="Cheater",e[e.TierOne=7]="TierOne",e[e.TierTwo=8]="TierTwo",e[e.TierThree=9]="TierThree",e[e.TierFour=10]="TierFour",e[e.TierFive=11]="TierFive",e[e.TierSix=12]="TierSix",e[e.TierSeven=13]="TierSeven",e[e.HollowAdmin=14]="HollowAdmin",e}(ve||{}),be=(p(e={},0,""),p(e,1,"#02f070"),p(e,2,"#3bbaff"),p(e,3,"#d84343"),p(e,4,"#db753c"),p(e,5,"#b552f7"),p(e,6,"#ffffff"),p(e,7,"#db963c"),p(e,8,"#e6c843"),p(e,9,"#d6e34b"),p(e,10,"#a9e03a"),p(e,11,"#7beb65"),p(e,12,"#77e691"),p(e,13,"#77e691"),p(e,14,"#3bbaff"),e),ke=(p(r={},0,""),p(r,1,"Mod"),p(r,2,"Admin"),p(r,3,"Veteran"),p(r,4,"Patron"),p(r,5,"Artist"),p(r,6,"Cheater"),p(r,7,"T1 Patron"),p(r,8,"T2 Patron"),p(r,9,"T3 Patron"),p(r,10,"T4 Patron"),p(r,11,"T5 Patron"),p(r,12,"T6 Patron"),p(r,13,"T7 Patron"),p(r,14,"Admin"),r),xe=(p(g={},0,{fill:"rgb(255, 50, 50)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"white",stroke:"#373737"}}),p(g,6,{fill:"rgb(204, 0, 204)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"rgb(255, 153, 204)",stroke:"#373737"}}),p(g,1,{fill:"rgb(66, 183, 77)",stroke:"rgb(50, 120 , 50)"}),p(g,2,{fill:"rgb(80, 255, 80)",stroke:"rgb(50, 120, 50)"}),p(g,3,{fill:"rgb(73, 94, 228)",stroke:"rgb(56, 63, 133)"}),p(g,4,{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"}),p(g,5,{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"}),p(g,8,{fill:"rgb(204, 0, 153)",stroke:"rgb(112, 17, 112)"}),p(g,9,{fill:"rgb(52, 195, 235)",stroke:"rgb(14, 138, 227)"}),p(g,10,{fill:"rgb(227, 170, 14)",stroke:"rgb(235, 135, 52)"}),g),we=(p(b={},0,{fill:"rgb(132, 57, 45)",stroke:"rgb(101, 48, 35)"}),p(b,1,{fill:"rgb(6, 191, 188)",stroke:"rgb(2, 94, 93)"}),p(b,2,{fill:"rgb(34, 214, 130)",stroke:"rgb(7, 184, 101)"}),p(b,3,{fill:"rgb(239, 90, 90)",stroke:"rgb(255, 0, 0)"}),p(b,4,{fill:"rgb(37, 124, 210)",stroke:"rgb(12, 55, 208)"}),p(b,5,{fill:"rgb(105, 106, 107)",stroke:"rgb(45, 45, 46)"}),p(b,6,{fill:"rgb(232, 211, 185)",stroke:"rgb(189, 172, 151)"}),p(b,7,{fill:"rgb(110, 158, 255)",stroke:"rgb(7, 63, 176)"}),p(b,8,{fill:"rgb(0, 255, 255)",stroke:"rgb(0, 255, 255)"}),p(b,9,{fill:"rgb(255, 0, 0)",stroke:"rgb(255, 0, 0)"}),p(b,10,{fill:"rgb(132, 57, 45)",stroke:"rgb(101, 48, 35)"}),p(b,11,{fill:"rgb(255, 255, 0)",stroke:"rgb(255, 255, 0)"}),p(b,12,{fill:"rgb(255, 255, 0)",stroke:"rgb(255, 255, 0)"}),p(b,13,{fill:"rgb(255, 255, 0)",stroke:"rgb(255, 255, 0)"}),p(b,15,{fill:"rgb(255, 0, 0)",stroke:"rgb(255, 0, 0)"}),p(b,16,{fill:"rgb(255, 0, 0)",stroke:"rgb(255, 0, 0)"}),p(b,14,{fill:"rgb(255, 0, 0)",stroke:"rgb(255, 0, 0)"}),b),ye=function(e){return e[e.Fledgling=0]="Fledgling",e[e.Emergent=1]="Emergent",e[e.Established=2]="Established",e[e.Adept=3]="Adept",e[e.Veteran=4]="Veteran",e[e.Elite=5]="Elite",e[e.Master=6]="Master",e[e.Landlord=7]="Landlord",e}(ye||{}),_e=function(e){return e.Green="green",e.Blue="blue",e.Red="red",e.Grey="grey",e.Black="black",e.Tangerine="tangerine",e.Yellow="yellow",e.Purple="purple",e.Pink="pink",e}(_e||{}),Se=function(e){return e.Green="green",e.Blue="blue",e.Orange="orange",e.White="white",e.Grey="grey",e.Tangerine="tangerine",e.Yellow="yellow",e.Purple="purple",e.Pink="pink",e}(Se||{}),Ce=function(e){return e.None="none",e.Star="star",e.Hawk="hawk",e.Phoenix="phoenix",e}(Ce||{}),Ee=135,Te=25,Ye=420,Ie=48,Xe=40,ze=function(e){return e[e.Handshake=0]="Handshake",e[e.Login=1]="Login",e[e.Welcome=2]="Welcome",e[e.Map=3]="Map",e[e.Spawn=4]="Spawn",e[e.List=5]="List",e[e.Who=6]="Who",e[e.Equipment=7]="Equipment",e[e.Ready=8]="Ready",e[e.Sync=9]="Sync",e[e.Movement=10]="Movement",e[e.Teleport=11]="Teleport",e[e.Despawn=12]="Despawn",e[e.Target=13]="Target",e[e.Combat=14]="Combat",e[e.Animation=15]="Animation",e[e.Points=16]="Points",e[e.Network=17]="Network",e[e.Chat=18]="Chat",e[e.Command=19]="Command",e[e.Container=20]="Container",e[e.Ability=21]="Ability",e[e.Quest=22]="Quest",e[e.Achievement=23]="Achievement",e[e.Notification=24]="Notification",e[e.Blink=25]="Blink",e[e.Heal=26]="Heal",e[e.Experience=27]="Experience",e[e.Death=28]="Death",e[e.Music=29]="Music",e[e.NPC=30]="NPC",e[e.Respawn=31]="Respawn",e[e.Trade=32]="Trade",e[e.Enchant=33]="Enchant",e[e.Guild=34]="Guild",e[e.Pointer=35]="Pointer",e[e.PVP=36]="PVP",e[e.Poison=37]="Poison",e[e.Warp=38]="Warp",e[e.Store=39]="Store",e[e.Overlay=40]="Overlay",e[e.Camera=41]="Camera",e[e.Bubble=42]="Bubble",e[e.Skill=43]="Skill",e[e.Update=44]="Update",e[e.Minigame=45]="Minigame",e[e.Effect=46]="Effect",e[e.Friends=47]="Friends",e[e.Focus=48]="Focus",e[e.Rank=49]="Rank",e[e.Examine=50]="Examine",e[e.Player=51]="Player",e[e.Relay=52]="Relay",e[e.Crafting=53]="Crafting",e}(ze||{}),Ae=window.localStorage,Le="data",qe=function(){function e(){v(this,e),p(this,"data",void 0),p(this,"mapData",void 0),p(this,"newVersion",!1),this.data=Ae.data?JSON.parse(Ae.getItem(Le)):this.create(),this.newVersion=this.isNewVersion(),this.newVersion?(this.set(this.create()),this.clearIndexedDB()):this.loadIndexedDB()}return k(e,[{key:"create",value:function(){return{new:!0,world:1,clientVersion:"v-1.0.0",errorMessage:"",player:{username:"",password:"",autoLogin:!1,rememberMe:!1,orientation:ne.Down,zoom:3},settings:{musicVolume:100,soundVolume:100,brightness:100,audioEnabled:!T(),lowPowerMode:!1,debugMode:!1,showNames:!0,showLevels:!0,disableCaching:!1}}}},{key:"loadIndexedDB",value:function(){var e,t=this,i=null===(e=window.indexedDB)||void 0===e?void 0:e.open("mapCache",this.getDBVersion());i.addEventListener("error",(function(){t.clearIndexedDB()})),i.addEventListener("upgradeneeded",(function(e){var i=e.target.result;i||console.error("Could not open IndexedDB database."),i.createObjectStore("regions"),i.createObjectStore("objects"),i.createObjectStore("cursorTiles"),_.debug("IndexedDB created with version ".concat(t.getDBVersion(),"."))})),i.addEventListener("success",(function(e){t.mapData=e.target.result,_.debug("Successfully opened IndexedDB with version ".concat(t.getDBVersion(),"."))}))}},{key:"save",value:function(){try{this.data&&Ae.setItem(Le,JSON.stringify(this.data))}catch(e){console.error(e)}}},{key:"clear",value:function(){Ae.removeItem(Le),this.set(this.create()),this.save()}},{key:"clearIndexedDB",value:function(){var e;null===(e=this.mapData)||void 0===e||e.close(),window.indexedDB.deleteDatabase("mapCache"),this.loadIndexedDB()}},{key:"set",value:function(e){this.data=e,this.save()}},{key:"setError",value:function(e){return this.data.errorMessage=e,this.save(),!0}},{key:"setRemember",value:function(e){this.data.player.rememberMe=e,this.save()}},{key:"setCredentials",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.data.player.username=e,this.data.player.password=t,this.save()}},{key:"setMusicVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.data.settings.musicVolume=e,this.save()}},{key:"setSoundVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.data.settings.soundVolume=e,this.save()}},{key:"setBrightness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.data.settings.brightness=e,this.save()}},{key:"setAudioEnabled",value:function(e){this.data.settings.audioEnabled=e,this.save()}},{key:"setLowPowerMode",value:function(e){this.data.settings.lowPowerMode=e,this.save()}},{key:"setDebug",value:function(e){this.data.settings.debugMode=e,this.save()}},{key:"setShowNames",value:function(e){this.data.settings.showNames=e,this.save()}},{key:"setShowLevels",value:function(e){this.data.settings.showLevels=e,this.save()}},{key:"setDisableCaching",value:function(e){this.data.settings.disableCaching=e,this.save()}},{key:"isNewVersion",value:function(){return"v-1.0.0"!==this.data.clientVersion}},{key:"setOrientation",value:function(e){this.data.player.orientation=e,this.save()}},{key:"setZoom",value:function(e){this.data.player.zoom=e,this.save()}},{key:"setMapData",value:function(e,t){if(this.mapData){var i=this.mapData.transaction(["objects","cursorTiles"],"readwrite"),n=i.objectStore("objects"),o=i.objectStore("cursorTiles");n.put(e,0),o.put(t,0)}}},{key:"setRegionData",value:function(e,t){if(this.mapData){var i=this.mapData.transaction("regions","readwrite").objectStore("regions"),n=i.get(t);n.addEventListener("success",(function(){n.result||i.put(e,t)}))}}},{key:"getError",value:function(){var e=this.data.errorMessage;return this.data.errorMessage="",this.save(),e}},{key:"getUsername",value:function(){return this.data.player.username}},{key:"getPassword",value:function(){return this.data.player.password}},{key:"getDBVersion",value:function(){return parseInt(this.data.clientVersion.replace(/\D/g,""))||1}},{key:"hasRemember",value:function(){return this.data.player.rememberMe}},{key:"isNew",value:function(){return this.data.new}},{key:"getRegionData",value:function(e){var t={regionData:{},objects:[],cursorTiles:{}};if(!this.mapData)return e(t);var i=this.mapData.transaction(["regions","objects","cursorTiles"],"readonly"),n=i.objectStore("regions").openCursor(),o=i.objectStore("objects").get(0),a=i.objectStore("cursorTiles").get(0);i.addEventListener("error",(function(){return e(t)})),n.addEventListener("success",(function(e){var i=e.target.result;i&&(t.regionData[i.primaryKey]=i.value,i.continue())})),o.addEventListener("success",(function(){return t.objects=o.result})),a.addEventListener("success",(function(){return t.cursorTiles=a.result})),i.addEventListener("complete",(function(){return e(t)}))}},{key:"getSettings",value:function(){return this.data.settings}},{key:"getDebug",value:function(){return this.data.settings.debugMode}}]),e}();function De(){void 0!==te&&(clearTimeout(te),te=void 0)}function Pe(e,t){var i=document.querySelector("#game-container");e.addEventListener("contextmenu",(function(e){e.preventDefault(),De(),t({x:e.clientX,y:e.clientY})})),i.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.addEventListener("touchstart",(function(e){var i=u(e.touches,1)[0];te=window.setTimeout((function(){return t({x:i.clientX,y:i.clientY})}),200)})),i.addEventListener("touchmove",De)}function Re(e,t,i){var n,o=!1,a=document.querySelector("#game-container");function r(t){te=window.setTimeout((function(){null!=i&&i()||(c(),o=!0,(n=e.cloneNode(!0)).style.position="absolute",n.style.opacity="0.75",n.style.top="".concat(-e.clientHeight,"px"),n.style.left="".concat(-e.clientWidth,"px"),n.style.pointerEvents="none",n.style.touchAction="none",null==a||a.append(n))}),t)}function s(t,i){if(De(),!o||!n)return c();n.style.top="".concat(i-e.clientHeight/2,"px"),n.style.left="".concat(t-e.clientWidth/2,"px")}function l(e,i){if(o){var a=n;c();var r=document.elementFromPoint(e,i);r&&a&&t(a,r)}}function c(){var t;De(),o=!1,null===(t=n)||void 0===t||t.remove(),n=void 0,e.classList.remove("item-slot-focused")}e.addEventListener("mousedown",(function(){return r()})),a.addEventListener("mousemove",(function(e){return s(e.clientX,e.clientY)})),a.addEventListener("mouseup",(function(e){return l(e.clientX,e.clientY)})),e.addEventListener("touchstart",(function(){return r(200)})),a.addEventListener("touchmove",(function(e){var t=u(e.touches,1)[0];o&&e.preventDefault(),s(t.clientX,t.clientY)})),a.addEventListener("touchend",(function(e){var t=u(e.changedTouches,1)[0];l(t.clientX,t.clientY)})),a.addEventListener("touchcancel",c)}var Me=function(){function e(t,i,n,o,a){v(this,e),p(this,"frame",{index:0,x:0,y:0}),p(this,"count",1),p(this,"bopIndex",0),p(this,"bopCount",4),p(this,"decreaseBop",!1),p(this,"lastTime",Date.now()),p(this,"speed",100),p(this,"bopCallback",void 0),p(this,"endCallback",void 0),this.name=t,this.length=i,this.row=n,this.width=o,this.height=a,this.reset()}return k(e,[{key:"update",value:function(e){if(this.canAnimate()){var t,i;if(this.lastTime=e,1===this.length)return this.decreaseBop?this.bopIndex--:this.bopIndex++,this.bopIndex>=this.bopCount?this.decreaseBop=!0:this.bopIndex<=0&&(this.decreaseBop=!1),null===(t=this.bopCallback)||void 0===t?void 0:t.call(this,this.bopIndex);if(this.frame.index>=this.length-1)return this.count>0&&this.count--,this.count<=0&&(null===(i=this.endCallback)||void 0===i||i.call(this)),this.reset();this.frame.index++,this.frame.x=this.frame.index*this.width,this.frame.y=this.row*this.height}}},{key:"setCount",value:function(e,t){this.count=e,this.endCallback=t}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"setRow",value:function(e){this.row=e}},{key:"canAnimate",value:function(){return Date.now()-this.lastTime>this.speed}},{key:"reset",value:function(){this.lastTime=Date.now(),this.frame={index:0,x:0,y:this.row*this.height}}},{key:"onBop",value:function(e){this.bopCallback=e}}]),e}(),Ne=function(){function e(t){var i,n;v(this,e),p(this,"key",""),p(this,"path",""),p(this,"width",Be.tileSize),p(this,"height",Be.tileSize),p(this,"offsetX",-Be.tileSize),p(this,"offsetY",-Be.tileSize),p(this,"idleSpeed",450),p(this,"loaded",!1),p(this,"loading",!1),p(this,"hasDeathAnimation",!1),p(this,"animations",{}),p(this,"image",void 0),p(this,"hurtSprite",void 0),p(this,"silhouetteSprite",void 0),this.data=t,this.key=this.data.id,this.path="/img/sprites/".concat(this.key,".png"),this.width=this.data.width||this.width,this.height=this.data.height||this.height,this.offsetX=null!==(i=this.data.offsetX)&&void 0!==i?i:this.offsetX,this.offsetY=null!==(n=this.data.offsetY)&&void 0!==n?n:this.offsetY,this.idleSpeed=this.data.idleSpeed||this.idleSpeed,this.loadAnimations()}return k(e,[{key:"load",value:function(){var e=this;this.loading||this.loaded||(this.loading=!0,this.image=new Image,this.image.crossOrigin="Anonymous",this.image.src=this.path,this.image.addEventListener("load",(function(){var t;e.loaded=!0,!e.key.startsWith("items/")&&e.image.width>96&&(e.hurtSprite=Be.getHurtSprite(e)),e.silhouetteSprite=Be.getSilhouetteSprite(e),e.loading=!1,null===(t=e.loadCallback)||void 0===t||t.call(e)})))}},{key:"loadAnimations",value:function(){for(var e in this.data.animations||(this.data.animations=Be.getDefaultAnimations(this.key.startsWith("items/"))),this.data.animations){var t=this.data.animations[e];"death"===e&&(this.hasDeathAnimation=!0),this.animations[e]=new Me(e,t.length,t.row,this.width,this.height)}}},{key:"onLoad",value:function(e){this.loadCallback=e}}]),e}(),Oe=function(e){return e%1==0},Be={tileSize:-1,sideLength:-1,thirdTile:-1,tileAndAQuarter:-1,createId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"".concat(e).concat(t).concat(i)},randomInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},createSlot:function(e,t,i,n){var o=document.createElement("li"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");return a.dataset.type="".concat(e),a.dataset.index="".concat(t),a.classList.add("item-slot"),r.classList.add("item-image"),s.classList.add("item-count"),e===ie.Bank&&s.classList.add("bank-item-count"),a.append(r),a.append(s),i&&a.addEventListener("click",(function(){return i(e,t)})),n&&Pe(a,(function(){return n(e,t)})),o.append(a),o},getImageURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?"":'url("/img/sprites/items/'.concat(e,'.png")')},formatName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})),t>1&&e.length>t&&(e="".concat(e.slice(0,Math.max(0,t)),"...")),e},getCount:function(e){var t=e.toString();return e>999999?"".concat(Math.floor(e/1e6),"M"):e>9999?"".concat(Math.floor(e/1e3),"K"):e>1?t:""},getContainerAction:function(e){switch(e){case se.Wield:case se.Equip:case se.Eat:case se.Eat2:return D.Select;case se.DropOne:return D.Remove;case se.Move:return D.Swap}},isEmail:function(e){return/^(([^\s"(),.:;<>@[\\\]]+(\.[^\s"(),.:;<>@[\\\]]+)*)|(".+"))@((\[(?:\d{1,3}\.){3}\d{1,3}])|(([\dA-Za-z-]+\.)+[A-Za-z]{2,}))$/.test(e)},getRegion:function(e,t){return Math.floor(e/Ie)+Math.floor(t/Ie)*this.sideLength},getEmptyStats:function(){return{crush:0,slash:0,stab:0,archery:0,magic:0}},getEmptyBonuses:function(){return{accuracy:0,strength:0,archery:0,magic:0}},getHurtSprite:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),n=new Ne(e.data);t.width=e.image.width,t.height=e.image.height,i.drawImage(e.image,0,0,e.image.width,e.image.height);for(var o=i.getImageData(0,0,e.image.width,e.image.height),a=0;a<o.data.length;a+=4)0!==o.data[a+4]&&(o.data[a]=255,o.data[a+1]=o.data[a+2]=75);return i.putImageData(o,0,0),n.image=t,n.loaded=!0,n},getSilhouetteSprite:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),n=new Ne(e.data);t.width=e.image.width,t.height=e.image.height,i.drawImage(e.image,0,0,e.image.width,e.image.height);for(var o=i.getImageData(0,0,e.image.width,e.image.height),a=i.getImageData(0,0,e.image.width,e.image.height),r=0;r<a.data.length;r+=4)if(0===a.data[r+3]){var s=r/4%e.image.width,l=Math.floor(r/4/e.image.width);if(0!==s&&s!==e.image.width-1&&0!==l&&l!==e.image.height-1)[a.data[r-1],a.data[r+7],a.data[r-4*a.width+3],a.data[r+4*a.width+3]].some((function(e){return 0!==e}))&&(o.data[r]=o.data[r+1]=255,o.data[r+2]=o.data[r+3]=150)}return i.putImageData(o,0,0),n.image=t,n.loaded=!0,n},getDefaultAnimations:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?{idle:{length:1,row:0}}:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}}},fadeIn:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;(t=e.style).opacity||(t.opacity="0"),e.style.display="block";var n=function t(){var n=parseFloat(e.style.opacity)+i;e.style.display="block",n<=1&&(e.style.opacity=n.toString(),requestAnimationFrame(t))};requestAnimationFrame(n)},fadeOut:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;(t=e.style).opacity||(t.opacity="1");var n=function t(){var n=parseFloat(e.style.opacity)-i;n>=0?(e.style.opacity=n.toString(),requestAnimationFrame(t)):e.style.display="none"};requestAnimationFrame(n)}},Fe={"alpha-2.2.3":{title:"Kaetram alpha-2.2.3",content:["- Audio fixes","- Added new achievement","- Minor map updates","- This neat little interface :)","- Hotkeys 'm' for map and 'p' for profile","- Admins and moderators name now displays a different colour"]},"alpha-2.2.4":{title:"Kaetram alpha-2.2.4",content:["- Discord bot updates","- Forester now sells axes","- Map updates and loading time improvements","- Armour and weapon stats for all items","- Added default price to majority of items","- Profanity filter fixes and improvements"]},"alpha-2.2.5":{title:"Kaetram alpha-2.2.5",content:["- Fixes health bar resetting when logging out","- Anti-cheating measures updated","- Minor fixes to the UI animations","- Mobile support drag & drop","- Un-droppable/un-sellable quest items","- Fixes bug with poison weapons","- Respawn duration changes to Skeleton King and Ogre Lord","- Map changes and more content","- A lot of game engine improvements and preparations for new content ;)"]},"alpha-2.2.6":{title:"Kaetram alpha-2.2.6",content:["- Chatbox fixes and new layout","- Added stop movement by pressing ESC","- Added attack last target by pressing 't'","- Combat system improvements","- Anti-cheat detection/no-clipping fixes (hopefully)","- Gold coin image update","- Map loading improvements","- Client backend work, support for special effects and more","- New map content"]},"alpha-2.2.7":{title:"Kaetram alpha-2.2.7",content:["- Improvements to the poison effect","- Adds 'h' as the hotkey for healing (will use first potion in inventory)","- Trees now indicate level required to chop","- Improvements to the backend and interactions with the map","- New map content and achievements","- New trees have been added"]},"alpha-2.3.0":{title:"Kaetram alpha-2.3.0",content:["- Friends list","- New achievement interface","- New quest interface","- Various user interface improvements","- Backend fixes"]},"alpha-2.3.1":{title:"Kaetram alpha-2.3.1",content:["- Added special effects to some projectiles","- Fixes some user interface quirks","- Fixes some private messaging issues","- Minor improvements to ranged combat","- Fixes a bug with the overlay sizing","- New caching system for the client map"]},"alpha-2.3.2":{title:"Kaetram alpha-2.3.2",content:["- New inventory interface","- Fixes mobs being unattackable after they moved","- Mob position sync when returning to game tab (browsers)","- Fix bug with combat continuing after closing the game","- Backend optimizations","- Chat UI fixes on mobile"]},"alpha-2.3.3":{title:"Kaetram alpha-2.3.3",content:["- Mining skill","- Magic is now publicly available","- Added support for in-game special ranks","- Added new quests, bosses, weapons, rings, pendants, and areas","- Fixes to disconnection issues due to high-latency","- Fixes and updates to multiple interfaces","- Improvements to clicking moving mobs and ranged combat","- Combat formula and defense stats of mobs updated","- Support for multiple game worlds now completed"]},"alpha-2.3.4":{title:"Kaetram alpha-2.3.4",content:["- Added arrows to archery","- Added boots","- Added following functionality","- Right-click interaction with mobs and items","- Zooming now available on mobile","- Fixes player stuck online bug","- Fixes bug where items would disappear when unequipping","- Fixes and improvements to the user interface","- Fixes WASD interaction with NPCs/mobs"]},"alpha-2.3.5":{title:"Kaetram alpha-2.3.5",content:["- Added player trading","- Added shared exp (based on damage contributions to mob)","- Added priority drops (whoever does most damage has priority to an item)","- Polished bank/store containers","- Tweaked item prices, drop rates, stats, and descriptions","- Bank is now stackable for all items","- Graphical rehaul on many sprites","- Buy/drop/etc X amount","- Various bug fixes and backend improvements"]},"alpha-2.4.0":{title:"Kaetram alpha-2.4.0",content:["- Added Defense skill, attack styles, and secret achievements","- Added freezing effect and snow potion functionality","- Added PVP areas, new quests, and new areas","- Experience gain is now on a per-hit basis","- New interfaces for profile, skills, and friends list","- Fix bank/inventory/store-related bugs","- Fix cross-server private messaging","- Loads of backend improvements and optimizations"]},"alpha-2.4.1":{title:"Kaetram alpha-2.4.1",content:["- Added guilds","- Added leaderboards","- Added special effects to arrows","- Added weapon enchanting","- Adjusted stats for mobs and items","- Enahanced mob attack logic","- Major improvements to the backend","- And many more bug fixes and improvements"]},"alpha-2.5.0":{title:"Kaetram alpha-2.5.0",content:["- Added 8 new skills","- Added new areas/bosses/achievements/quests","- Added many new items","- Increased inventory/bank size","- Fix status effects not being removed","- Fix bug with the death animation hanging","- Fix bug with character animations","- Many new features and bug fixes"]},"alpha-2.5.1":{title:"Kaetram alpha-2.5.1",content:["- Adds missing items to the game","- Fixed collisions around the map","- Fixed freezing bug with fishing spots","- Fixes to the death animation","- Fixes fishing bug when inventory full","- Fixed pirate captain teleport bug","- Update user interface icons"]}},je=function(){function e(){v(this,e),p(this,"config",{name:"Kaetram",host:"localhost",ssl:!1,serverId:1,sentryDsn:"",debug:!1,version:"v-1.0.0",minor:"",port:9001,hub:!1}),p(this,"storage",new qe),p(this,"body",document.querySelector("body")),p(this,"parchment",document.querySelector("#parchment")),p(this,"canvas",document.querySelector("#canvas")),p(this,"loginForm",document.querySelector("#load-character form")),p(this,"registerForm",document.querySelector("#create-character form")),p(this,"worldsList",document.querySelector("#worlds")),p(this,"passwordConfirmation",document.querySelector("#register-password-confirmation-input")),p(this,"emailField",document.querySelector("#register-email-input")),p(this,"loginButton",document.querySelector("#login")),p(this,"registerButton",document.querySelector("#new-account")),p(this,"cancelRegister",document.querySelector("#cancel-register")),p(this,"cancelWorlds",document.querySelector("#cancel-worlds")),p(this,"continueWorlds",document.querySelector("#continue-worlds")),p(this,"respawn",document.querySelector("#respawn")),p(this,"rememberMe",document.querySelector("#remember-me input")),p(this,"guest",document.querySelector("#guest input")),p(this,"about",document.querySelector("#toggle-about")),p(this,"validation",document.querySelectorAll(".validation-summary")),p(this,"loading",document.querySelector(".loader")),p(this,"worldSelectButton",document.querySelector("#world-select-button")),p(this,"gameVersion",document.querySelector("#game-version")),p(this,"currentScroll","load-character"),p(this,"parchmentAnimating",!1),p(this,"loggingIn",!1),p(this,"menuHidden",!1),p(this,"statusMessage",""),p(this,"selectedServer",void 0),p(this,"keyDownCallback",void 0),p(this,"keyUpCallback",void 0),p(this,"loginCallback",void 0),p(this,"leftClickCallback",void 0),p(this,"rightClickCallback",void 0),p(this,"mouseMoveCallback",void 0),p(this,"resizeCallback",void 0),p(this,"respawnCallback",void 0),p(this,"focusCallback",void 0),this.sendStatus("Initializing the game client"),this.load()}var t;return k(e,[{key:"load",value:function(){var e=this;this.loginForm.addEventListener("submit",this.login.bind(this)),this.registerForm.addEventListener("submit",this.login.bind(this)),this.registerButton.addEventListener("click",(function(){return e.openScroll("create-character")})),this.cancelRegister.addEventListener("click",(function(){return e.openScroll("load-character")})),this.cancelWorlds.addEventListener("click",(function(){return e.openScroll("load-character")})),this.continueWorlds.addEventListener("click",(function(){return e.openScroll("load-character")})),this.about.addEventListener("click",(function(){return e.openScroll("about")})),this.respawn.addEventListener("click",(function(){var t;return null===(t=e.respawnCallback)||void 0===t?void 0:t.call(e)})),this.parchment.addEventListener("click",(function(){e.hasFooterOpen()&&e.openScroll("load-character"),e.body.classList.contains("news")&&e.body.classList.remove("news")})),this.worldSelectButton.addEventListener("click",(function(){return e.openScroll("world-select")})),this.gameVersion.textContent="".concat(this.config.version).concat(this.config.minor),document.addEventListener("keydown",(function(e){return"Enter"!==e.key})),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("keyup",(function(t){var i;return null===(i=e.keyUpCallback)||void 0===i?void 0:i.call(e,t)})),document.addEventListener("mousemove",(function(t){var i;return null===(i=e.mouseMoveCallback)||void 0===i?void 0:i.call(e,t)})),this.canvas.addEventListener("click",(function(t){var i;return null===(i=e.leftClickCallback)||void 0===i?void 0:i.call(e,t)})),window.addEventListener("resize",(function(){var t;return null===(t=e.resizeCallback)||void 0===t?void 0:t.call(e)})),window.addEventListener("focus",(function(){var t;return null===(t=e.focusCallback)||void 0===t?void 0:t.call(e)})),Pe(document.querySelector("#canvas"),(function(t){var i;return null===(i=e.rightClickCallback)||void 0===i?void 0:i.call(e,t)}))}},{key:"loadLogin",value:function(){var e=this.storage.getError();e&&this.sendError(e),this.storage.hasRemember()&&(this.getUsernameField().value=this.storage.getUsername(),this.getPasswordField().value=this.storage.getPassword(),this.rememberMe.checked=!0)}},{key:"handleKeyDown",value:function(e){var t;if(this.isMenuHidden())return null===(t=this.keyDownCallback)||void 0===t?void 0:t.call(this,e);"Enter"===e.key&&this.login()}},{key:"ready",value:function(){this.sendStatus(),this.loginButton.disabled=!1,this.loadLogin(),this.loadWorlds(),"indexedDB"in window||this.setValidation("validation-warning","Your browser does not support IndexedDB. Regions will not be cached.")}},{key:"login",value:function(){var e;this.loggingIn||this.statusMessage||!this.verifyForm()||(this.clearErrors(),this.toggleLogin(!0),null===(e=this.loginCallback)||void 0===e||e.call(this,this.selectedServer),function(){C.apply(this,arguments)}())}},{key:"saveLogin",value:function(){this.storage.setRemember(this.isRememberMe()),this.storage.setCredentials(),this.isRememberMe()&&this.storage.setCredentials(this.getUsername(),this.getPassword())}},{key:"showMenu",value:function(){this.body.className="intro",this.menuHidden=!1,this.worldSelectButton.hidden=!1,this.gameVersion.hidden=!1}},{key:"fadeMenu",value:function(){var e=this;this.menuHidden||(this.body.className="game",this.menuHidden=!0,this.worldSelectButton.hidden=!0,this.gameVersion.hidden=!0,this.updateLoader(),this.saveLogin(),setTimeout((function(){return e.displayNews()}),1e3))}},{key:"openScroll",value:function(e){this.loggingIn||this.parchmentAnimating||(this.clearErrors(),this.changeScroll(e,!T()))}},{key:"changeScroll",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i?(this.parchmentAnimating=!0,this.parchment.classList.toggle("animate"),this.parchment.classList.remove(this.currentScroll),window.setTimeout((function(){var i;t.parchmentAnimating=!1,t.parchment.classList.toggle("animate"),t.parchment.classList.add(e),null===(i=document.querySelector("#".concat(e," input")))||void 0===i||i.focus()}),1e3)):(this.parchment.classList.remove(this.currentScroll),this.parchment.classList.add(e)),this.currentScroll=e}},{key:"verifyForm",value:function(){if(this.isGuest())return!0;if(!this.getUsername())return this.sendError("Please enter a username.",this.getUsernameField());if(!this.getPassword())return this.sendError("Please enter a password.",this.getPasswordField());if(this.isRegistering()){if(this.getPassword().length<3)return this.sendError("Password must be at least 3 characters long.",this.getPasswordField());if(this.getPassword()!==this.getPasswordConfirmation())return this.sendError("Passwords do not match.",this.passwordConfirmation);if(""!==this.getEmail()&&!Be.isEmail(this.getEmail()))return this.sendError("The email you've entered is not valid.",this.emailField)}return!0}},{key:"sendStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.clearErrors(),this.statusMessage=e,e){this.setValidation("status",e);var t=document.querySelector(".status");t&&(t.innerHTML=e+this.getLoaderDots())}}},{key:"updateLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loading.innerHTML=e?e+this.getLoaderDots():""}},{key:"displayNews",value:function(){var e=document.querySelector("#news-title"),t=document.querySelector("#news-content");if(e&&t){if(this.storage.isNew())return this.body.classList.add("news");if(this.storage.newVersion){e.textContent="Kaetram ".concat(this.config.version," Changelog");var i=Fe[this.config.version];if(!i)return;t.textContent="";var n,o=w(i.content);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.innerHTML+="".concat(a,"<br>")}}catch(zn){o.e(zn)}finally{o.f()}this.body.classList.add("news")}}}},{key:"sendError",value:function(e,t){if(this.isMenuHidden())return this.storage.setError(e);if(this.clearErrors(),this.setValidation("validation-error",e),!t)return!1;t.classList.add("field-error"),t.focus();return t.addEventListener("keypress",(function e(){var i;t.removeEventListener("keypress",e,!1),t.classList.remove("field-error"),null===(i=document.querySelector(".validation-error"))||void 0===i||i.remove()})),!1}},{key:"clearErrors",value:function(){var e;null===(e=document.querySelector(".status"))||void 0===e||e.remove(),this.clearValidation(),this.getUsernameField().classList.remove("field-error"),this.getPasswordField().classList.remove("field-error"),this.passwordConfirmation.classList.remove("field-error"),this.emailField.classList.remove("field-error")}},{key:"toggleLogin",value:function(e){this.updateLoader("Connecting"),this.toggleTyping(e),this.loggingIn=e,this.loading.hidden=!e,this.loginButton.disabled=e,this.registerButton.disabled=e;var t=document.getElementById("logo");t&&(t.style.display="none")}},{key:"toggleTyping",value:function(e){this.getUsernameField().readOnly=e,this.getPasswordField().readOnly=e,this.passwordConfirmation.readOnly=e,this.emailField.readOnly=e}},{key:"hasFooterOpen",value:function(){return this.parchment.classList.contains("about")}},{key:"isGuest",value:function(){return this.guest.checked}},{key:"isRememberMe",value:function(){return this.rememberMe.checked}},{key:"isRegistering",value:function(){return"create-character"===this.currentScroll}},{key:"isMenuHidden",value:function(){return this.menuHidden}},{key:"getUsernameField",value:function(){return document.querySelector(this.isRegistering()?"#register-name-input":"#login-name-input")}},{key:"getUsername",value:function(){return this.getUsernameField().value}},{key:"getPasswordField",value:function(){return document.querySelector(this.isRegistering()?"#register-password-input":"#login-password-input")}},{key:"getPassword",value:function(){return this.getPasswordField().value}},{key:"getPasswordConfirmation",value:function(){return this.passwordConfirmation.value}},{key:"getEmail",value:function(){return this.isRegistering()?this.emailField.value:""}},{key:"getLoaderDots",value:function(){return'<span class="loader-dot">.</span><span class="loader-dot">.</span><span class="loader-dot">.</span>'}},{key:"clearValidation",value:function(){var e,t=w(this.validation);try{for(t.s();!(e=t.n()).done;){e.value.innerHTML=""}}catch(zn){t.e(zn)}finally{t.f()}}},{key:"setValidation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.clearValidation();var i,n=w(this.validation);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.append(this.createValidation(e,t))}}catch(zn){n.e(zn)}finally{n.f()}}},{key:"createValidation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=document.createElement("span");return i.classList.add(e),i.classList.add("blink"),i.textContent=t,i}},{key:"selectServer",value:function(e){this.selectedServer=e,this.worldSelectButton.querySelector("strong").textContent="".concat(e.name," ").concat(e.id),this.worldSelectButton.querySelector("span").textContent="(".concat(e.players,"/").concat(e.maxPlayers," players)")}},{key:"loadWorlds",value:(t=m(f().mark((function e(){var t,i,n,o,a,r,s=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.hub){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(this.config.hub,"/all")).catch((function(){return null}));case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",this.setValidation("validation-error","Unable to load world list."));case 7:return e.next=9,t.json();case 9:if(i=e.sent,n=u(i,1),o=n[0]){e.next=14;break}return e.abrupt("return",this.setValidation("validation-error","No servers are currently available."));case 14:if(this.selectServer(o),!(i.length<2)){e.next=17;break}return e.abrupt("return");case 17:this.worldSelectButton.hidden=!1,a=f().mark((function e(){var t,n,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i[r],n=document.createElement("li"),o=document.createElement("strong"),a=document.createElement("span"),0===parseInt(r)&&n.classList.add("active"),o.textContent="".concat(t.name," ").concat(t.id),a.textContent="".concat(t.players,"/").concat(t.maxPlayers," players"),n.append(o),n.append(a),n.addEventListener("click",(function(){var e;s.selectServer(t),null===(e=s.worldsList.querySelector("li.active"))||void 0===e||e.classList.remove("active"),n.classList.add("active")})),s.worldsList.append(n);case 8:case"end":return e.stop()}}),e)})),e.t0=f().keys(i);case 20:if((e.t1=e.t0()).done){e.next=25;break}return r=e.t1.value,e.delegateYield(a(),"t2",23);case 23:e.next=20;break;case 25:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onKeyDown",value:function(e){this.keyDownCallback=e}},{key:"onKeyUp",value:function(e){this.keyUpCallback=e}},{key:"onLogin",value:function(e){this.loginCallback=e}},{key:"onLeftClick",value:function(e){this.leftClickCallback=e}},{key:"onRightClick",value:function(e){this.rightClickCallback=e}},{key:"onMouseMove",value:function(e){this.mouseMoveCallback=e}},{key:"onResize",value:function(e){this.resizeCallback=e}},{key:"onRespawn",value:function(e){this.respawnCallback=e}},{key:"onFocus",value:function(e){this.focusCallback=e}}]),e}(),He=function(){function e(t){v(this,e),p(this,"musicCrossfadeDuration",3),p(this,"musicMinGain",.01),p(this,"musicMaxGain",.5),p(this,"buffers",{}),p(this,"context",void 0),p(this,"musicGainNode",void 0),p(this,"isMusicConnected",!1),this.game=t}var t,i,n,o;return k(e,[{key:"createContext",value:function(){this.context=new AudioContext}},{key:"playSound",value:(o=m(f().mark((function e(t,i){var n,o,a,r,s,l=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAudioEnabled()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.bufferSource("/audio/sounds/".concat(t,".mp3"));case 4:n=e.sent,o=this.getSoundVolume(),a=n.connect(new GainNode(this.context,{gain:o})),i&&!this.getSettings().lowPowerMode&&(r=this.game.map.tileSize,a=a.connect(new PannerNode(this.context,{positionX:i.x,positionY:i.y,distanceModel:"linear",refDistance:r,maxDistance:10*r}))),a.connect(this.context.destination),(s=this.musicGainNode.gain).cancelScheduledValues(this.context.currentTime),this.rampGain(s,s.value-o*this.musicMaxGain/2),n.addEventListener("ended",(function(){l.rampGain(s,l.getMusicVolume(),.5)})),n.start();case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"playMusic",value:(n=m(f().mark((function e(t){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.stopMusic());case 2:return e.next=4,this.bufferSource("/audio/music/".concat(t,".mp3"));case 4:(i=e.sent).loop=!0,this.stopMusic(),i.connect(this.musicGainNode),this.isAudioEnabled()&&this.musicGainNode.connect(this.context.destination),this.rampGain(this.musicGainNode.gain,this.getMusicVolume(),this.musicCrossfadeDuration),i.start();case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"bufferSource",value:(i=m(f().mark((function e(t){var i,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateVolume(),null!==(n=(i=this.buffers)[t])&&void 0!==n||(i[t]=this.loadAudio(t)),e.t0=AudioBufferSourceNode,e.t1=this.context,e.next=6,this.buffers[t];case 6:return e.t2=e.sent,e.t3={buffer:e.t2},e.abrupt("return",new e.t0(e.t1,e.t3));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadAudio",value:(t=m(f().mark((function e(t){var i,n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return n=e.sent,e.next=8,this.context.decodeAudioData(n);case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateVolume",value:function(){this.musicGainNode||this.initMusicNode();var e=this.getMusicVolume();if(e<=0||!this.isAudioEnabled())this.isMusicConnected&&(this.musicGainNode.disconnect(this.context.destination),this.isMusicConnected=!1);else{var t=this.musicGainNode.gain;t.cancelScheduledValues(this.context.currentTime),this.isMusicConnected?this.rampGain(t,e):(this.musicGainNode.connect(this.context.destination),this.isMusicConnected=!0,this.rampGain(t,this.musicMinGain),this.rampGain(t,e,this.musicCrossfadeDuration))}}},{key:"updatePlayerListener",value:function(){if(this.context&&this.isAudioEnabled()&&!this.getSettings().lowPowerMode){var e=this.game.player,t=this.context.listener,i=t.positionX,n=t.positionY,o=t.forwardX,a=t.forwardY;if(i&&n&&o&&a)switch(i.value=e.x,n.value=e.y,e.orientation){case ne.Up:o.value=0,a.value=1;break;case ne.Down:o.value=0,a.value=-1;break;case ne.Left:o.value=-1,a.value=0;break;case ne.Right:o.value=1,a.value=0}else this.context.listener.setPosition(e.x,e.y,0)}}},{key:"stopMusic",value:function(){var e=this.musicGainNode;if(this.initMusicNode(),e){var t=e.gain;t.cancelScheduledValues(this.context.currentTime),this.rampGain(t,this.musicMinGain,this.musicCrossfadeDuration),setTimeout((function(){return e.disconnect()}),1e3*this.musicCrossfadeDuration)}}},{key:"initMusicNode",value:function(){this.musicGainNode=new GainNode(this.context,{gain:this.musicMinGain})}},{key:"rampGain",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t>0&&e.linearRampToValueAtTime(t,this.context.currentTime+i)}},{key:"getSoundVolume",value:function(){return this.getSettings().soundVolume/100}},{key:"getMusicVolume",value:function(){return this.getSettings().musicVolume/100*this.musicMaxGain*2}},{key:"isAudioEnabled",value:function(){return this.getSettings().audioEnabled}},{key:"getSettings",value:function(){return this.game.storage.data.settings}},{key:"playHitSound",value:function(e){this.playSound("hit".concat(Be.randomInt(1,2)),e)}},{key:"playKillSound",value:function(e){this.playSound("kill".concat(Be.randomInt(1,2)),e)}}]),e}(),Ue=function(){function e(t,i){v(this,e),this.time=t,this.duration=i}return k(e,[{key:"isOver",value:function(e){return e-this.time>this.duration}}]),e}(),Ge="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},We={};
/*!
             * jQuery JavaScript Library v3.6.3
             * https://jquery.com/
             *
             * Includes Sizzle.js
             * https://sizzlejs.com/
             *
             * Copyright OpenJS Foundation and other contributors
             * Released under the MIT license
             * https://jquery.org/license
             *
             * Date: 2022-12-20T21:28Z
             */
!function(e){!function(t,i){e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}}("undefined"!=typeof window?window:Ge,(function(e,t){var i=[],n=Object.getPrototypeOf,o=i.slice,a=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},r=i.push,s=i.indexOf,l={},c=l.toString,d=l.hasOwnProperty,u=d.toString,p=u.call(Object),f={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},v=e.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function k(e,t,i){var n,o,a=(i=i||v).createElement("script");if(a.text=e,t)for(n in b)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,o);i.head.appendChild(a).parentNode.removeChild(a)}function x(e){return null==e?e+"":"object"===h(e)||"function"==typeof e?l[c.call(e)]||"object":h(e)}var w="3.6.3",y=function e(t,i){return new e.fn.init(t,i)};function _(e){var t=!!e&&"length"in e&&e.length,i=x(e);return!g(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:w,constructor:y,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(y.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice},y.extend=y.fn.extend=function(){var e,t,i,n,o,a,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"===h(r)||g(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&r!==n&&(c&&n&&(y.isPlainObject(n)||(o=Array.isArray(n)))?(i=r[t],a=o&&!Array.isArray(i)?[]:o||y.isPlainObject(i)?i:{},o=!1,r[t]=y.extend(c,a,n)):void 0!==n&&(r[t]=n));return r},y.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e))&&(!(t=n(e))||"function"==typeof(i=d.call(t,"constructor")&&t.constructor)&&u.call(i)===p)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){k(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(_(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(_(Object(e))?y.merge(i,"string"==typeof e?[e]:e):r.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:s.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,a=e.length,r=!i;o<a;o++)!t(e[o],o)!==r&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,s=[];if(_(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&s.push(o);return a(s)},guid:1,support:f}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=i[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
            	 * Sizzle CSS Selector Engine v2.3.9
            	 * https://sizzlejs.com/
            	 *
            	 * Copyright JS Foundation and other contributors
            	 * Released under the MIT license
            	 * https://js.foundation/
            	 *
            	 * Date: 2022-12-19
            	 */
function(e){var t,i,n,o,a,r,s,l,c,d,h,u,p,f,g,m,v,b,k,x="sizzle"+1*new Date,w=e.document,y=0,_=0,S=le(),C=le(),E=le(),T=le(),Y=function(e,t){return e===t&&(h=!0),0},I={}.hasOwnProperty,X=[],z=X.pop,A=X.push,L=X.push,q=X.slice,D=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",M="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",N="\\[[\\x20\\t\\r\\n\\f]*("+M+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+R+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",B=new RegExp(R+"+","g"),F=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),j=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),U=new RegExp(R+"|>"),G=new RegExp(O),W=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){u()},re=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{L.apply(X=q.call(w.childNodes),w.childNodes),X[w.childNodes.length].nodeType}catch(Ra){L={apply:X.length?function(e,t){A.apply(e,q.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function se(e,t,n,o){var a,s,c,d,h,f,v,b=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!o&&(u(t),t=t||p,g)){if(11!==w&&(h=J.exec(e)))if(a=h[1]){if(9===w){if(!(c=t.getElementById(a)))return n;if(c.id===a)return n.push(c),n}else if(b&&(c=b.getElementById(a))&&k(t,c)&&c.id===a)return n.push(c),n}else{if(h[2])return L.apply(n,t.getElementsByTagName(e)),n;if((a=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return L.apply(n,t.getElementsByClassName(a)),n}if(i.qsa&&!T[e+" "]&&(!m||!m.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,b=t,1===w&&(U.test(e)||H.test(e))){for((b=ee.test(e)&&ve(t.parentNode)||t)===t&&i.scope||((d=t.getAttribute("id"))?d=d.replace(ne,oe):t.setAttribute("id",d=x)),s=(f=r(e)).length;s--;)f[s]=(d?"#"+d:":scope")+" "+ke(f[s]);v=f.join(",")}try{if(i.cssSupportsSelector&&!CSS.supports("selector(:is("+v+"))"))throw new Error;return L.apply(n,b.querySelectorAll(v)),n}catch(y){T(e,!0)}finally{d===x&&t.removeAttribute("id")}}}return l(e.replace(F,"$1"),t,n,o)}function le(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function ce(e){return e[x]=!0,e}function de(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Ra){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(i,n){for(var o,a=e([],i.length,t),r=a.length;r--;)i[o=a[r]]&&(i[o]=!(n[o]=i[o]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=se.support={},a=se.isXML=function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!Z.test(t||i&&i.nodeName||"HTML")},u=se.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:w;return r!=p&&9===r.nodeType&&r.documentElement?(f=(p=r).documentElement,g=!a(p),w!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ae,!1):o.attachEvent&&o.attachEvent("onunload",ae)),i.scope=de((function(e){return f.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.cssSupportsSelector=de((function(){return CSS.supports("selector(*)")&&p.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),i.attributes=de((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=de((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=de((function(e){return f.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i,n,o,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(o=t.getElementsByName(e),n=0;a=o[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[o++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(i.qsa=Q.test(p.querySelectorAll))&&(de((function(e){var t;f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+P+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),de((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=Q.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&de((function(e){i.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",O)})),i.cssSupportsSelector||m.push(":has"),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(f.compareDocumentPosition),k=t||Q.test(f.contains)?function(e,t){var i=9===e.nodeType&&e.documentElement||e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==w&&k(w,e)?-1:t==p||t.ownerDocument==w&&k(w,t)?1:d?D(d,e)-D(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,o=e.parentNode,a=t.parentNode,r=[e],s=[t];if(!o||!a)return e==p?-1:t==p?1:o?-1:a?1:d?D(d,e)-D(d,t):0;if(o===a)return ue(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;r[n]===s[n];)n++;return n?ue(r[n],s[n]):r[n]==w?-1:s[n]==w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(u(e),i.matchesSelector&&g&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Ra){T(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&u(e),k(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&u(e);var o=n.attrHandle[t.toLowerCase()],a=o&&I.call(n.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==a?a:i.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(ne,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],o=0,a=0;if(h=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(Y),h){for(;t=e[a++];)t===e[a]&&(o=n.push(a));for(;o--;)e.splice(n[o],1)}return d=null,e},o=se.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},n=se.selectors={cacheLength:50,createPseudo:ce,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&G.test(i)&&(t=r(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+R+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var o=se.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(B," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,d,h,u,p,f,g=a!==r?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,k=!1;if(m){if(a){for(;g;){for(u=t;u=u[g];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&b){for(k=(p=(c=(d=(h=(u=m)[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===y&&c[1])&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(k=p=0)||f.pop();)if(1===u.nodeType&&++k&&u===t){d[e]=[y,p,k];break}}else if(b&&(k=p=(c=(d=(h=(u=t)[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===y&&c[1]),!1===k)for(;(u=++p&&u&&u[g]||(k=p=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++k||(b&&((d=(h=u[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]=[y,k]),u!==t)););return(k-=o)===n||k%n==0&&k/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[x]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,i){for(var n,a=o(e,t),r=a.length;r--;)e[n=D(e,a[r])]=!(i[n]=a[r])})):function(e){return o(e,0,i)}):o}},pseudos:{not:ce((function(e){var t=[],i=[],n=s(e.replace(F,"$1"));return n[x]?ce((function(e,t,i,o){for(var a,r=n(e,null,o,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))})):function(e,o,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:me((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:me((function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:me((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function be(){}function ke(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function xe(e,t,i){var n=t.dir,o=t.next,a=o||n,r=i&&"parentNode"===a,s=_++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o);return!1}:function(t,i,l){var c,d,h,u=[y,s];if(l){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||r)if(d=(h=t[x]||(t[x]={}))[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=d[a])&&c[0]===y&&c[1]===s)return u[2]=c[2];if(d[a]=u,u[2]=e(t,i,l))return!0}return!1}}function we(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function ye(e,t,i,n,o){for(var a,r=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(i&&!i(a,n,o)||(r.push(a),c&&t.push(s)));return r}function _e(e,t,i,n,o,a){return n&&!n[x]&&(n=_e(n)),o&&!o[x]&&(o=_e(o,a)),ce((function(a,r,s,l){var c,d,h,u=[],p=[],f=r.length,g=a||function(e,t,i){for(var n=0,o=t.length;n<o;n++)se(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?g:ye(g,u,e,s,l),v=i?o||(a?e:f||n)?[]:r:m;if(i&&i(m,v,s,l),n)for(c=ye(v,p),n(c,[],s,l),d=c.length;d--;)(h=c[d])&&(v[p[d]]=!(m[p[d]]=h));if(a){if(o||e){if(o){for(c=[],d=v.length;d--;)(h=v[d])&&c.push(m[d]=h);o(null,v=[],c,l)}for(d=v.length;d--;)(h=v[d])&&(c=o?D(a,h):u[d])>-1&&(a[c]=!(r[c]=h))}}else v=ye(v===r?v.splice(f,v.length):v),o?o(null,r,v,l):L.apply(r,v)}))}function Se(e){for(var t,i,o,a=e.length,r=n.relative[e[0].type],s=r||n.relative[" "],l=r?1:0,d=xe((function(e){return e===t}),s,!0),h=xe((function(e){return D(t,e)>-1}),s,!0),u=[function(e,i,n){var o=!r&&(n||i!==c)||((t=i).nodeType?d(e,i,n):h(e,i,n));return t=null,o}];l<a;l++)if(i=n.relative[e[l].type])u=[xe(we(u),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[x]){for(o=++l;o<a&&!n.relative[e[o].type];o++);return _e(l>1&&we(u),l>1&&ke(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(F,"$1"),i,l<o&&Se(e.slice(l,o)),o<a&&Se(e=e.slice(o)),o<a&&ke(e))}u.push(i)}return we(u)}return be.prototype=n.filters=n.pseudos,n.setFilters=new be,r=se.tokenize=function(e,t){var i,o,a,r,s,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],c=n.preFilter;s;){for(r in i&&!(o=j.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),i=!1,(o=H.exec(s))&&(i=o.shift(),a.push({value:i,type:o[0].replace(F," ")}),s=s.slice(i.length)),n.filter)!(o=V[r].exec(s))||c[r]&&!(o=c[r](o))||(i=o.shift(),a.push({value:i,type:r,matches:o}),s=s.slice(i.length));if(!i)break}return t?s.length:s?se.error(e):C(e,l).slice(0)},s=se.compile=function(e,t){var i,o=[],a=[],s=E[e+" "];if(!s){for(t||(t=r(e)),i=t.length;i--;)(s=Se(t[i]))[x]?o.push(s):a.push(s);s=E(e,function(e,t){var i=t.length>0,o=e.length>0,a=function(a,r,s,l,d){var h,f,m,v=0,b="0",k=a&&[],x=[],w=c,_=a||o&&n.find.TAG("*",d),S=y+=null==w?1:Math.random()||.1,C=_.length;for(d&&(c=r==p||r||d);b!==C&&null!=(h=_[b]);b++){if(o&&h){for(f=0,r||h.ownerDocument==p||(u(h),s=!g);m=e[f++];)if(m(h,r||p,s)){l.push(h);break}d&&(y=S)}i&&((h=!m&&h)&&v--,a&&k.push(h))}if(v+=b,i&&b!==v){for(f=0;m=t[f++];)m(k,x,r,s);if(a){if(v>0)for(;b--;)k[b]||x[b]||(x[b]=z.call(l));x=ye(x)}L.apply(l,x),d&&!a&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return d&&(y=S,c=w),k};return i?ce(a):a}(a,o)),s.selector=e}return s},l=se.select=function(e,t,i,o){var a,l,c,d,h,u="function"==typeof e&&e,p=!o&&r(e=u.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,ie),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=V.needsContext.test(e)?0:l.length;a--&&(c=l[a],!n.relative[d=c.type]);)if((h=n.find[d])&&(o=h(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(a,1),!(e=o.length&&ke(l)))return L.apply(i,o),i;break}}return(u||s(e,p))(o,t,!g,i,!t||ee.test(e)&&ve(t.parentNode)||t),i},i.sortStable=x.split("").sort(Y).join("")===x,i.detectDuplicates=!!h,u(),i.sortDetached=de((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),de((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&de((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),de((function(e){return null==e.getAttribute("disabled")}))||he(P,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),se}(e);y.find=S,(y.expr=S.selectors)[":"]=y.expr.pseudos,y.uniqueSort=y.unique=S.uniqueSort,y.text=S.getText,y.isXMLDoc=S.isXML,y.contains=S.contains,y.escapeSelector=S.escape;var C=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&y(e).is(i))break;n.push(e)}return n},E=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=y.expr.match.needsContext;function Y(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function X(e,t,i){return g(t)?y.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?y.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?y.grep(e,(function(e){return s.call(t,e)>-1!==i})):y.filter(t,e,i)}y.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?y.find.matchesSelector(n,e)?[n]:[]:y.find.matches(e,y.grep(t,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(t=0;t<n;t++)if(y.contains(o[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)y.find(e,o[t],i);return n>1?y.uniqueSort(i):i},filter:function(e){return this.pushStack(X(this,e||[],!1))},not:function(e){return this.pushStack(X(this,e||[],!0))},is:function(e){return!!X(this,"string"==typeof e&&T.test(e)?y(e):e||[],!1).length}});var z,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||z,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof y?t[0]:t,y.merge(this,y.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:v,!0)),I.test(n[1])&&y.isPlainObject(t))for(n in t)g(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=v.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,z=y(v);var L=/^(?:parents|prev(?:Until|All))/,q={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(y.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,o=this.length,a=[],r="string"!=typeof e&&y(e);if(!T.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&y.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?y.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?s.call(y(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return C(e,"parentNode")},parentsUntil:function(e,t,i){return C(e,"parentNode",i)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return C(e,"nextSibling")},prevAll:function(e){return C(e,"previousSibling")},nextUntil:function(e,t,i){return C(e,"nextSibling",i)},prevUntil:function(e,t,i){return C(e,"previousSibling",i)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(Y(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},(function(e,t){y.fn[e]=function(i,n){var o=y.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=y.filter(n,o)),this.length>1&&(q[e]||y.uniqueSort(o),L.test(e)&&o.reverse()),this.pushStack(o)}}));var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function N(e,t,i,n){var o;try{e&&g(o=e.promise)?o.call(e).done(t).fail(i):e&&g(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(P)||[],(function(e,i){t[i]=!0})),t}(e):y.extend({},e);var t,i,n,o,a=[],r=[],s=-1,l=function(){for(o=o||e.once,n=t=!0;r.length;s=-1)for(i=r.shift();++s<a.length;)!1===a[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=a.length,i=!1);e.memory||(i=!1),t=!1,o&&(a=i?[]:"")},c={add:function(){return a&&(i&&!t&&(s=a.length-1,r.push(i)),function t(i){y.each(i,(function(i,n){g(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==x(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return y.each(arguments,(function(e,t){for(var i;(i=y.inArray(t,a,i))>-1;)a.splice(i,1),i<=s&&s--})),this},has:function(e){return e?y.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=r=[],a=i="",this},disabled:function(){return!a},lock:function(){return o=r=[],i||t||(a=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],r.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},y.extend({Deferred:function(t){var i=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(t){y.each(i,(function(i,n){var o=g(e[n[4]])&&e[n[4]];a[n[1]]((function(){var e=o&&o.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,o){var a=0;function r(t,i,n,o){return function(){var s=this,l=arguments,c=function(){var e,c;if(!(t<a)){if((e=n.apply(s,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"===h(e)||"function"==typeof e)&&e.then,g(c)?o?c.call(e,r(a,i,R,o),r(a,i,M,o)):(a++,c.call(e,r(a,i,R,o),r(a,i,M,o),r(a,i,R,i.notifyWith))):(n!==R&&(s=void 0,l=[e]),(o||i.resolveWith)(s,l))}},d=o?c:function(){try{c()}catch(Ra){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(Ra,d.stackTrace),t+1>=a&&(n!==M&&(s=void 0,l=[Ra]),i.rejectWith(s,l))}};t?d():(y.Deferred.getStackHook&&(d.stackTrace=y.Deferred.getStackHook()),e.setTimeout(d))}}return y.Deferred((function(e){i[0][3].add(r(0,e,g(o)?o:R,e.notifyWith)),i[1][3].add(r(0,e,g(t)?t:R)),i[2][3].add(r(0,e,g(n)?n:M))})).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},a={};return y.each(i,(function(e,t){var r=t[2],s=t[5];o[t[1]]=r.add,s&&r.add((function(){n=s}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),r.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=r.fireWith})),o.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,i=t,n=Array(i),a=o.call(arguments),r=y.Deferred(),s=function(e){return function(i){n[e]=this,a[e]=arguments.length>1?o.call(arguments):i,--t||r.resolveWith(n,a)}};if(t<=1&&(N(e,r.done(s(i)).resolve,r.reject,!t),"pending"===r.state()||g(a[i]&&a[i].then)))return r.then();for(;i--;)N(a[i],s(i),r.reject);return r.promise()}});var O=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&O.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},y.readyException=function(t){e.setTimeout((function(){throw t}))};var B=y.Deferred();function F(){v.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),y.ready()}y.fn.ready=function(e){return B.then(e).catch((function(e){y.readyException(e)})),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||B.resolveWith(v,[y]))}}),y.ready.then=B.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?e.setTimeout(y.ready):(v.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var j=function e(t,i,n,o,a,r,s){var l=0,c=t.length,d=null==n;if("object"===x(n))for(l in a=!0,n)e(t,i,l,n[l],!0,r,s);else if(void 0!==o&&(a=!0,g(o)||(s=!0),d&&(s?(i.call(t,o),i=null):(d=i,i=function(e,t,i){return d.call(y(e),i)})),i))for(;l<c;l++)i(t[l],n,s?o:o.call(t[l],l,i(t[l],n)));return a?t:d?i.call(t):c?i(t[0],n):r},H=/^-ms-/,U=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function W(e){return e.replace(H,"ms-").replace(U,G)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=y.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[W(t)]=i;else for(n in t)o[W(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(W):(t=W(t))in n?[t]:t.match(P)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||y.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var K=new Z,$=new Z,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function ee(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(i)}catch(Ra){}$.set(e,t,i)}else i=void 0;return i}y.extend({hasData:function(e){return $.hasData(e)||K.hasData(e)},data:function(e,t,i){return $.access(e,t,i)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,i){return K.access(e,t,i)},_removeData:function(e,t){K.remove(e,t)}}),y.fn.extend({data:function(e,t){var i,n,o,a=this[0],r=a&&a.attributes;if(void 0===e){if(this.length&&(o=$.get(a),1===a.nodeType&&!K.get(a,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&(n=W(n.slice(5)),ee(a,n,o[n]));K.set(a,"hasDataAttrs",!0)}return o}return"object"===h(e)?this.each((function(){$.set(this,e)})):j(this,(function(t){var i;if(a&&void 0===t)return void 0!==(i=$.get(a,e))||void 0!==(i=ee(a,e))?i:void 0;this.each((function(){$.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),y.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=K.get(e,t),i&&(!n||Array.isArray(i)?n=K.access(e,t,y.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=y.queue(e,t=t||"fx"),n=i.length,o=i.shift(),a=y._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete a.stop,o.call(e,(function(){y.dequeue(e,t)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return K.get(e,i)||K.access(e,i,{empty:y.Callbacks("once memory").add((function(){K.remove(e,[t+"queue",i])}))})}}),y.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?y.queue(this[0],e):void 0===t?this:this.each((function(){var i=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=y.Deferred(),a=this,r=this.length,s=function(){--n||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(i=K.get(a[r],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],oe=v.documentElement,ae=function(e){return y.contains(e.ownerDocument,e)},re={composed:!0};oe.getRootNode&&(ae=function(e){return y.contains(e.ownerDocument,e)||e.getRootNode(re)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===y.css(e,"display")};function le(e,t,i,n){var o,a,r=20,s=n?function(){return n.cur()}:function(){return y.css(e,t,"")},l=s(),c=i&&i[3]||(y.cssNumber[t]?"":"px"),d=e.nodeType&&(y.cssNumber[t]||"px"!==c&&+l)&&ie.exec(y.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;r--;)y.style(e,t,d+c),(1-a)*(1-(a=s()/l||.5))<=0&&(r=0),d/=a;y.style(e,t,(d*=2)+c),i=i||[]}return i&&(d=+d||+l||0,o=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=o)),o}var ce={};function de(e){var t,i=e.ownerDocument,n=e.nodeName,o=ce[n];return o||(t=i.body.appendChild(i.createElement(n)),o=y.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ce[n]=o,o)}function he(e,t){for(var i,n,o=[],a=0,r=e.length;a<r;a++)(n=e[a]).style&&(i=n.style.display,t?("none"===i&&(o[a]=K.get(n,"display")||null,o[a]||(n.style.display="")),""===n.style.display&&se(n)&&(o[a]=de(n))):"none"!==i&&(o[a]="none",K.set(n,"display",i)));for(a=0;a<r;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}y.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){se(this)?y(this).show():y(this).hide()}))}});var ue,pe,fe=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i;ue=v.createDocumentFragment().appendChild(v.createElement("div")),(pe=v.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),ue.appendChild(pe),f.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue,ue.innerHTML="<option></option>",f.option=!!ue.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&Y(e,t)?y.merge([e],i):i}function ke(e,t){for(var i=0,n=e.length;i<n;i++)K.set(e[i],"globalEval",!t||K.get(t[i],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,f.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function we(e,t,i,n,o){for(var a,r,s,l,c,d,h=t.createDocumentFragment(),u=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if("object"===x(a))y.merge(u,a.nodeType?[a]:a);else if(xe.test(a)){for(r=r||h.appendChild(t.createElement("div")),s=(ge.exec(a)||["",""])[1].toLowerCase(),l=ve[s]||ve._default,r.innerHTML=l[1]+y.htmlPrefilter(a)+l[2],d=l[0];d--;)r=r.lastChild;y.merge(u,r.childNodes),(r=h.firstChild).textContent=""}else u.push(t.createTextNode(a));for(h.textContent="",p=0;a=u[p++];)if(n&&y.inArray(a,n)>-1)o&&o.push(a);else if(c=ae(a),r=be(h.appendChild(a),"script"),c&&ke(r),i)for(d=0;a=r[d++];)me.test(a.type||"")&&i.push(a);return h}var ye=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function Se(){return!1}function Ce(e,t){return e===function(){try{return v.activeElement}catch(zn){}}()==("focus"===t)}function Ee(e,t,i,n,o,a){var r,s;if("object"===h(t)){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)Ee(e,s,i,n,t[s],a);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Se;else if(!o)return e;return 1===a&&(r=o,o=function(e){return y().off(e),r.apply(this,arguments)},o.guid=r.guid||(r.guid=y.guid++)),e.each((function(){y.event.add(this,t,o,n,i)}))}function Te(e,t,i){i?(K.set(e,t,!1),y.event.add(e,t,{namespace:!1,handler:function(e){var n,a,r=K.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(y.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=o.call(arguments),K.set(this,t,r),n=i(this,t),this[t](),r!==(a=K.get(this,t))||n?K.set(this,t,!1):a={},r!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else r.length&&(K.set(this,t,{value:y.event.trigger(y.extend(r[0],y.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&y.event.add(e,t,_e)}y.event={global:{},add:function(e,t,i,n,o){var a,r,s,l,c,d,h,u,p,f,g,m=K.get(e);if(V(e))for(i.handler&&(i=(a=i).handler,o=a.selector),o&&y.find.matchesSelector(oe,o),i.guid||(i.guid=y.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(t){return y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(P)||[""]).length;c--;)p=g=(s=ye.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=y.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=y.event.special[p]||{},d=y.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&y.expr.match.needsContext.test(o),namespace:f.join(".")},a),(u=l[p])||((u=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,r)||e.addEventListener&&e.addEventListener(p,r)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,d):u.push(d),y.event.global[p]=!0)},remove:function(e,t,i,n,o){var a,r,s,l,c,d,h,u,p,f,g,m=K.hasData(e)&&K.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(P)||[""]).length;c--;)if(p=g=(s=ye.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=y.event.special[p]||{},u=l[p=(n?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=u.length;a--;)d=u[a],!o&&g!==d.origType||i&&i.guid!==d.guid||s&&!s.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(a,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));r&&!u.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||y.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)y.event.remove(e,p+t[c],i,n,!0);y.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,a,r,s=new Array(arguments.length),l=y.event.fix(e),c=(K.get(this,"events")||Object.create(null))[l.type]||[],d=y.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(r=y.event.handlers.call(this,l,c),t=0;(o=r[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(n=((y.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,o,a,r,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],r={},i=0;i<l;i++)void 0===r[o=(n=t[i]).selector+" "]&&(r[o]=n.needsContext?y(o,this).index(c)>-1:y.find(o,this,null,[c]).length),r[o]&&a.push(n);a.length&&s.push({elem:c,handlers:a})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&Y(t,"input")&&Te(t,"click",_e),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&Y(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&Y(t,"input")&&K.get(t,"click")||Y(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},(y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[y.expando]=!0}).prototype={constructor:y.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},(function(e,t){y.event.special[e]={setup:function(){return Te(this,e,Ce),!1},trigger:function(){return Te(this,e),!0},_default:function(t){return K.get(t.target,e)},delegateType:t}})),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===n||y.contains(n,o))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}})),y.fn.extend({on:function(e,t,i,n){return Ee(this,e,t,i,n)},one:function(e,t,i,n){return Ee(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,y(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===h(e)){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Se),this.each((function(){y.event.remove(this,e,i,t)}))}});var Ye=/<script|<style|<link/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ze(e,t){return Y(e,"table")&&Y(11!==t.nodeType?t:t.firstChild,"tr")&&y(e).children("tbody")[0]||e}function Ae(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function qe(e,t){var i,n,o,a,r,s;if(1===t.nodeType){if(K.hasData(e)&&(s=K.get(e).events))for(o in K.remove(t,"handle events"),s)for(i=0,n=s[o].length;i<n;i++)y.event.add(t,o,s[o][i]);$.hasData(e)&&(a=$.access(e),r=y.extend({},a),$.set(t,r))}}function De(e,t){var i=t.nodeName.toLowerCase();"input"===i&&fe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Pe(e,t,i,n){t=a(t);var o,r,s,l,c,d,h=0,u=e.length,p=u-1,m=t[0],v=g(m);if(v||u>1&&"string"==typeof m&&!f.checkClone&&Ie.test(m))return e.each((function(o){var a=e.eq(o);v&&(t[0]=m.call(this,o,a.html())),Pe(a,t,i,n)}));if(u&&(r=(o=we(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(l=(s=y.map(be(o,"script"),Ae)).length;h<u;h++)c=o,h!==p&&(c=y.clone(c,!0,!0),l&&y.merge(s,be(c,"script"))),i.call(e[h],c,h);if(l)for(d=s[s.length-1].ownerDocument,y.map(s,Le),h=0;h<l;h++)c=s[h],me.test(c.type||"")&&!K.access(c,"globalEval")&&y.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?y._evalUrl&&!c.noModule&&y._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):k(c.textContent.replace(Xe,""),c,d))}return e}function Re(e,t,i){for(var n,o=t?y.filter(t,e):e,a=0;null!=(n=o[a]);a++)i||1!==n.nodeType||y.cleanData(be(n)),n.parentNode&&(i&&ae(n)&&ke(be(n,"script")),n.parentNode.removeChild(n));return e}y.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,o,a,r,s=e.cloneNode(!0),l=ae(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(r=be(s),n=0,o=(a=be(e)).length;n<o;n++)De(a[n],r[n]);if(t)if(i)for(a=a||be(e),r=r||be(s),n=0,o=a.length;n<o;n++)qe(a[n],r[n]);else qe(e,s);return(r=be(s,"script")).length>0&&ke(r,!l&&be(e,"script")),s},cleanData:function(e){for(var t,i,n,o=y.event.special,a=0;void 0!==(i=e[a]);a++)if(V(i)){if(t=i[K.expando]){if(t.events)for(n in t.events)o[n]?y.event.remove(i,n):y.removeEvent(i,n,t.handle);i[K.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return j(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Pe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ze(this,e).appendChild(e)}))},prepend:function(){return Pe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ze(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))},html:function(e){return j(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ye.test(e)&&!ve[(ge.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(y.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(Ra){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Pe(this,arguments,(function(t){var i=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(be(this)),i&&i.replaceChild(t,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){y.fn[e]=function(e){for(var i,n=[],o=y(e),a=o.length-1,s=0;s<=a;s++)i=s===a?this:this.clone(!0),y(o[s])[t](i),r.apply(n,i.get());return this.pushStack(n)}}));var Me=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Ne=/^--/,Oe=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Be=function(e,t,i){var n,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in n=i.call(e),t)e.style[o]=a[o];return n},Fe=new RegExp(ne.join("|"),"i"),je=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function He(e,t,i){var n,o,a,r,s=Ne.test(t),l=e.style;return(i=i||Oe(e))&&(r=i.getPropertyValue(t)||i[t],s&&r&&(r=r.replace(je,"$1")||void 0),""!==r||ae(e)||(r=y.style(e,t)),!f.pixelBoxStyles()&&Me.test(r)&&Fe.test(t)&&(n=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=i.width,l.width=n,l.minWidth=o,l.maxWidth=a)),void 0!==r?r+"":r}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(d);var t=e.getComputedStyle(d);n="1%"!==t.top,l=12===i(t.marginLeft),d.style.right="60%",r=36===i(t.right),o=36===i(t.width),d.style.position="absolute",a=12===i(d.offsetWidth/3),oe.removeChild(c),d=null}}function i(e){return Math.round(parseFloat(e))}var n,o,a,r,s,l,c=v.createElement("div"),d=v.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===d.style.backgroundClip,y.extend(f,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,i,n,o;return null==s&&(t=v.createElement("table"),i=v.createElement("tr"),n=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",oe.appendChild(t).appendChild(i).appendChild(n),o=e.getComputedStyle(i),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===i.offsetHeight,oe.removeChild(t)),s}}))}();var Ge=["Webkit","Moz","ms"],We=v.createElement("div").style,Ve={};function Ze(e){var t=y.cssProps[e]||Ve[e];return t||(e in We?e:Ve[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Ge.length;i--;)if((e=Ge[i]+t)in We)return e}(e)||e)}var Ke=/^(none|table(?!-c[ea]).+)/,$e={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,i){var n=ie.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function et(e,t,i,n,o,a){var r="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(l+=y.css(e,i+ne[r],!0,o)),n?("content"===i&&(l-=y.css(e,"padding"+ne[r],!0,o)),"margin"!==i&&(l-=y.css(e,"border"+ne[r]+"Width",!0,o))):(l+=y.css(e,"padding"+ne[r],!0,o),"padding"!==i?l+=y.css(e,"border"+ne[r]+"Width",!0,o):s+=y.css(e,"border"+ne[r]+"Width",!0,o));return!n&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function tt(e,t,i){var n=Oe(e),o=(!f.boxSizingReliable()||i)&&"border-box"===y.css(e,"boxSizing",!1,n),a=o,r=He(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(r)){if(!i)return r;r="auto"}return(!f.boxSizingReliable()&&o||!f.reliableTrDimensions()&&Y(e,"tr")||"auto"===r||!parseFloat(r)&&"inline"===y.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===y.css(e,"boxSizing",!1,n),(a=s in e)&&(r=e[s])),(r=parseFloat(r)||0)+et(e,t,i||(o?"border":"content"),a,n,r)+"px"}function it(e,t,i,n,o){return new it.prototype.init(e,t,i,n,o)}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=He(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,s=W(t),l=Ne.test(t),c=e.style;if(l||(t=Ze(s)),r=y.cssHooks[t]||y.cssHooks[s],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(e,!1,n))?o:c[t];"string"===(a=h(i))&&(o=ie.exec(i))&&o[1]&&(i=le(e,t,o),a="number"),null!=i&&i==i&&("number"!==a||l||(i+=o&&o[3]||(y.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var o,a,r,s=W(t);return Ne.test(t)||(t=Ze(s)),(r=y.cssHooks[t]||y.cssHooks[s])&&"get"in r&&(o=r.get(e,!0,i)),void 0===o&&(o=He(e,t,n)),"normal"===o&&t in Qe&&(o=Qe[t]),""===i||i?(a=parseFloat(o),!0===i||isFinite(a)?a||0:o):o}}),y.each(["height","width"],(function(e,t){y.cssHooks[t]={get:function(e,i,n){if(i)return!Ke.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,n):Be(e,$e,(function(){return tt(e,t,n)}))},set:function(e,i,n){var o,a=Oe(e),r=!f.scrollboxSize()&&"absolute"===a.position,s=(r||n)&&"border-box"===y.css(e,"boxSizing",!1,a),l=n?et(e,t,n,s,a):0;return s&&r&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-et(e,t,"border",!1,a)-.5)),l&&(o=ie.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=y.css(e,t)),Je(0,i,l)}}})),y.cssHooks.marginLeft=Ue(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,t){y.cssHooks[e+t]={expand:function(i){for(var n=0,o={},a="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ne[n]+t]=a[n]||a[n-2]||a[0];return o}},"margin"!==e&&(y.cssHooks[e+t].set=Je)})),y.fn.extend({css:function(e,t){return j(this,(function(e,t,i){var n,o,a={},r=0;if(Array.isArray(t)){for(n=Oe(e),o=t.length;r<o;r++)a[t[r]]=y.css(e,t[r],!1,n);return a}return void 0!==i?y.style(e,t,i):y.css(e,t)}),e,t,arguments.length>1)}}),y.Tween=it,it.prototype={constructor:it,init:function(e,t,i,n,o,a){this.elem=e,this.prop=i,this.easing=o||y.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(y.cssNumber[i]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,i=it.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=y.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||!y.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(y.fx=it.prototype.init).step={};var nt,ot,at=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function st(){ot&&(!1===v.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,y.fx.interval),y.fx.tick())}function lt(){return e.setTimeout((function(){nt=void 0})),nt=Date.now()}function ct(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ne[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function dt(e,t,i){for(var n,o=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),a=0,r=o.length;a<r;a++)if(n=o[a].call(i,t,e))return n}function ht(e,t,i){var n,o,a=0,r=ht.prefilters.length,s=y.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=nt||lt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),a=0,r=c.tweens.length;a<r;a++)c.tweens[a].run(n);return s.notifyWith(e,[c,n,i]),n<1&&r?i:(r||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},i),originalProperties:t,originalOptions:i,startTime:nt||lt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=y.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var i,n,o,a,r;for(i in e)if(o=t[n=W(i)],a=e[i],Array.isArray(a)&&(o=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(r=y.cssHooks[n])&&"expand"in r)for(i in a=r.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=o);else t[n]=o}(d,c.opts.specialEasing);a<r;a++)if(n=ht.prefilters[a].call(c,e,d,c.opts))return g(n.stop)&&(y._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return y.map(d,dt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),y.fx.timer(y.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}y.Animation=y.extend(ht,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return le(i.elem,e,ie.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(P);for(var i,n=0,o=e.length;n<o;n++)i=e[n],ht.tweeners[i]=ht.tweeners[i]||[],ht.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,a,r,s,l,c,d,h="width"in t||"height"in t,u=this,p={},f=e.style,g=e.nodeType&&se(e),m=K.get(e,"fxshow");for(n in i.queue||(null==(r=y._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,u.always((function(){u.always((function(){r.unqueued--,y.queue(e,"fx").length||r.empty.fire()}))}))),t)if(o=t[n],at.test(o)){if(delete t[n],a=a||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||y.style(e,n)}if((l=!y.isEmptyObject(t))||!y.isEmptyObject(p))for(n in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=K.get(e,"display")),"none"===(d=y.css(e,"display"))&&(c?d=c:(he([e],!0),c=e.style.display||c,d=y.css(e,"display"),he([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===y.css(e,"float")&&(l||(u.done((function(){f.display=c})),null==c&&(d=f.display,c="none"===d?"":d)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=K.access(e,"fxshow",{display:c}),a&&(m.hidden=!g),g&&he([e],!0),u.done((function(){for(n in g||he([e]),K.remove(e,"fxshow"),p)y.style(e,n,p[n])}))),l=dt(g?m[n]:0,n,u),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),y.speed=function(e,t,i){var n=e&&"object"===h(e)?y.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return y.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in y.fx.speeds?n.duration=y.fx.speeds[n.duration]:n.duration=y.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&y.dequeue(this,n.queue)},n},y.fn.extend({fadeTo:function(e,t,i,n){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=y.isEmptyObject(e),a=y.speed(t,i,n),r=function(){var t=ht(this,y.extend({},e),a);(o||K.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=y.timers,r=K.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&rt.test(o)&&n(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(i),t=!1,a.splice(o,1));!t&&i||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=K.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],a=y.timers,r=n?n.length:0;for(i.finish=!0,y.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),y.each(["toggle","show","hide"],(function(e,t){var i=y.fn[t];y.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ct(t,!0),e,n,o)}})),y.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){y.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),y.timers=[],y.fx.tick=function(){var e,t=0,i=y.timers;for(nt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||y.fx.stop(),nt=void 0},y.fx.timer=function(e){y.timers.push(e),y.fx.start()},y.fx.interval=13,y.fx.start=function(){ot||(ot=!0,st())},y.fx.stop=function(){ot=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(t,i){return t=y.fx&&y.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var o=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(o)}}))},function(){var e=v.createElement("input"),t=v.createElement("select").appendChild(v.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=v.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var ut,pt=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return j(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,t,i){var n,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?y.prop(e,t,i):(1===a&&y.isXMLDoc(e)||(o=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?ut:void 0)),void 0!==i?null===i?void y.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=y.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&Y(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(P);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ut={set:function(e,t,i){return!1===t?y.removeAttr(e,i):e.setAttribute(i,i),i}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=pt[t]||y.find.attr;pt[t]=function(e,t,n){var o,a,r=t.toLowerCase();return n||(a=pt[r],pt[r]=o,o=null!=i(e,t,n)?r:null,pt[r]=a),o}}));var ft=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function mt(e){return(e.match(P)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}y.fn.extend({prop:function(e,t){return j(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,t,i){var n,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&y.isXMLDoc(e)||(t=y.propFix[t]||t,o=y.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(y.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this})),y.fn.extend({addClass:function(e){var t,i,n,o,a,r;return g(e)?this.each((function(t){y(this).addClass(e.call(this,t,vt(this)))})):(t=bt(e)).length?this.each((function(){if(n=vt(this),i=1===this.nodeType&&" "+mt(n)+" "){for(a=0;a<t.length;a++)o=t[a],i.indexOf(" "+o+" ")<0&&(i+=o+" ");r=mt(i),n!==r&&this.setAttribute("class",r)}})):this},removeClass:function(e){var t,i,n,o,a,r;return g(e)?this.each((function(t){y(this).removeClass(e.call(this,t,vt(this)))})):arguments.length?(t=bt(e)).length?this.each((function(){if(n=vt(this),i=1===this.nodeType&&" "+mt(n)+" "){for(a=0;a<t.length;a++)for(o=t[a];i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r=mt(i),n!==r&&this.setAttribute("class",r)}})):this:this.attr("class","")},toggleClass:function(e,t){var i,n,o,a,r=h(e),s="string"===r||Array.isArray(e);return g(e)?this.each((function(i){y(this).toggleClass(e.call(this,i,vt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(i=bt(e),this.each((function(){if(s)for(a=y(this),o=0;o<i.length;o++)n=i[o],a.hasClass(n)?a.removeClass(n):a.addClass(n);else void 0!==e&&"boolean"!==r||((n=vt(this))&&K.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":K.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+mt(vt(i))+" ").indexOf(t)>-1)return!0;return!1}});var kt=/\r/g;y.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=g(e),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,y(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=y.map(o,(function(e){return null==e?"":e+""}))),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=y.valHooks[o.type]||y.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(kt,""):null==i?"":i:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:mt(y.text(e))}},select:{get:function(e){var t,i,n,o=e.options,a=e.selectedIndex,r="select-one"===e.type,s=r?null:[],l=r?a+1:o.length;for(n=a<0?l:r?a:0;n<l;n++)if(((i=o[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!Y(i.parentNode,"optgroup"))){if(t=y(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,a=y.makeArray(t),r=o.length;r--;)((n=o[r]).selected=y.inArray(y.valHooks.option.get(n),a)>-1)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},f.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in e;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};y.extend(y.event,{trigger:function(t,i,n,o){var a,r,s,l,c,u,p,f,b=[n||v],k=d.call(t,"type")?t.type:t,x=d.call(t,"namespace")?t.namespace.split("."):[];if(r=f=s=n=n||v,3!==n.nodeType&&8!==n.nodeType&&!xt.test(k+y.event.triggered)&&(k.indexOf(".")>-1&&(x=k.split("."),k=x.shift(),x.sort()),c=k.indexOf(":")<0&&"on"+k,(t=t[y.expando]?t:new y.Event(k,"object"===h(t)&&t)).isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:y.makeArray(i,[t]),p=y.event.special[k]||{},o||!p.trigger||!1!==p.trigger.apply(n,i))){if(!o&&!p.noBubble&&!m(n)){for(l=p.delegateType||k,xt.test(l+k)||(r=r.parentNode);r;r=r.parentNode)b.push(r),s=r;s===(n.ownerDocument||v)&&b.push(s.defaultView||s.parentWindow||e)}for(a=0;(r=b[a++])&&!t.isPropagationStopped();)f=r,t.type=a>1?l:p.bindType||k,(u=(K.get(r,"events")||Object.create(null))[t.type]&&K.get(r,"handle"))&&u.apply(r,i),(u=c&&r[c])&&u.apply&&V(r)&&(t.result=u.apply(r,i),!1===t.result&&t.preventDefault());return t.type=k,o||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(b.pop(),i)||!V(n)||c&&g(n[k])&&!m(n)&&((s=n[c])&&(n[c]=null),y.event.triggered=k,t.isPropagationStopped()&&f.addEventListener(k,wt),n[k](),t.isPropagationStopped()&&f.removeEventListener(k,wt),y.event.triggered=void 0,s&&(n[c]=s)),t.result}},simulate:function(e,t,i){var n=y.extend(new y.Event,i,{type:e,isSimulated:!0});y.event.trigger(n,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each((function(){y.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return y.event.trigger(e,t,i,!0)}}),f.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,o=K.access(n,t);o||n.addEventListener(e,i,!0),K.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=K.access(n,t)-1;o?K.access(n,t,o):(n.removeEventListener(e,i,!0),K.remove(n,t))}}}));var yt=e.location,_t={guid:Date.now()},St=/\?/;y.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(Ra){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||y.error("Invalid XML: "+(n?y.map(n.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var Ct=/\[\]$/,Et=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Yt=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var o;if(Array.isArray(t))y.each(t,(function(t,o){i||Ct.test(e)?n(e,o):It(e+"["+("object"===h(o)&&null!=o?t:"")+"]",o,i,n)}));else if(i||"object"!==x(t))n(e,t);else for(o in t)It(e+"["+o+"]",t[o],i,n)}y.param=function(e,t){var i,n=[],o=function(e,t){var i=g(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){o(this.name,this.value)}));else for(i in e)It(i,e[i],t,o);return n.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&Yt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=y(this).val();return null==i?null:Array.isArray(i)?y.map(i,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:i.replace(Et,"\r\n")}})).get()}});var Xt=/%20/g,zt=/#.*$/,At=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:GET|HEAD)$/,Dt=/^\/\//,Pt={},Rt={},Mt="*/".concat("*"),Nt=v.createElement("a");function Ot(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,a=t.toLowerCase().match(P)||[];if(g(i))for(;n=a[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Bt(e,t,i,n){var o={},a=e===Rt;function r(s){var l;return o[s]=!0,y.each(e[s]||[],(function(e,s){var c=s(t,i,n);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)})),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Ft(e,t){var i,n,o=y.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&y.extend(!0,e,n),e}Nt.href=yt.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,y.ajaxSettings),t):Ft(y.ajaxSettings,e)},ajaxPrefilter:Ot(Pt),ajaxTransport:Ot(Rt),ajax:function(t,i){"object"===h(t)&&(i=t,t=void 0);var n,o,a,r,s,l,c,d,u,p,f=y.ajaxSetup({},i=i||{}),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?y(g):y.event,b=y.Deferred(),k=y.Callbacks("once memory"),x=f.statusCode||{},w={},_={},S="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!r)for(r={};t=Lt.exec(a);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||S;return n&&n.abort(t),E(0,t),this}};if(b.promise(C),f.url=((t||f.url||yt.href)+"").replace(Dt,yt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(P)||[""],null==f.crossDomain){l=v.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Nt.protocol+"//"+Nt.host!=l.protocol+"//"+l.host}catch(Ra){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=y.param(f.data,f.traditional)),Bt(Pt,f,i,C),c)return C;for(u in(d=y.event&&f.global)&&0==y.active++&&y.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qt.test(f.type),o=f.url.replace(zt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Xt,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(St.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(At,"$1"),p=(St.test(o)?"&":"?")+"_="+_t.guid+++p),f.url=o+p),f.ifModified&&(y.lastModified[o]&&C.setRequestHeader("If-Modified-Since",y.lastModified[o]),y.etag[o]&&C.setRequestHeader("If-None-Match",y.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Mt+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(g,C,f)||c))return C.abort();if(S="abort",k.add(f.complete),C.done(f.success),C.fail(f.error),n=Bt(Rt,f,i,C)){if(C.readyState=1,d&&m.trigger("ajaxSend",[C,f]),c)return C;f.async&&f.timeout>0&&(s=e.setTimeout((function(){C.abort("timeout")}),f.timeout));try{c=!1,n.send(w,E)}catch(Ra){if(c)throw Ra;E(-1,Ra)}}else E(-1,"No Transport");function E(t,i,r,l){var h,u,p,v,w,_=i;c||(c=!0,s&&e.clearTimeout(s),n=void 0,a=l||"",C.readyState=t>0?4:0,h=t>=200&&t<300||304===t,r&&(v=function(e,t,i){for(var n,o,a,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}r||(r=o)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),i[a]}(f,C,r)),!h&&y.inArray("script",f.dataTypes)>-1&&y.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),v=function(e,t,i,n){var o,a,r,s,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(a=d.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=c[l+" "+a]||c["* "+a]))for(o in c)if((s=o.split(" "))[1]===a&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[o]:!0!==c[o]&&(a=s[0],d.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(Ra){return{state:"parsererror",error:r?Ra:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,v,C,h),h?(f.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(y.lastModified[o]=w),(w=C.getResponseHeader("etag"))&&(y.etag[o]=w)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=v.state,u=v.data,h=!(p=v.error))):(p=_,!t&&_||(_="error",t<0&&(t=0))),C.status=t,C.statusText=(i||_)+"",h?b.resolveWith(g,[u,_,C]):b.rejectWith(g,[C,_,p]),C.statusCode(x),x=void 0,d&&m.trigger(h?"ajaxSuccess":"ajaxError",[C,f,h?u:p]),k.fireWith(g,[C,_]),d&&(m.trigger("ajaxComplete",[C,f]),--y.active||y.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return y.get(e,t,i,"json")},getScript:function(e,t){return y.get(e,void 0,t,"script")}}),y.each(["get","post"],(function(e,t){y[t]=function(e,i,n,o){return g(i)&&(o=o||n,n=i,i=void 0),y.ajax(y.extend({url:e,type:t,dataType:o,data:i,success:n},y.isPlainObject(e)&&e))}})),y.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),y._evalUrl=function(e,t,i){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){y.globalEval(e,t,i)}})},y.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){y(this).wrapInner(e.call(this,t))})):this.each((function(){var t=y(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(i){y(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(Ra){}};var jt={0:200,1223:204},Ht=y.ajaxSettings.xhr();f.cors=!!Ht&&"withCredentials"in Ht,f.ajax=Ht=!!Ht,y.ajaxTransport((function(t){var i,n;if(f.cors||Ht&&!t.crossDomain)return{send:function(o,a){var r,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];for(r in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(r,o[r]);i=function(e){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(Ra){if(i)throw Ra}},abort:function(){i&&i()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,o){t=y("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),v.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Ut,Gt=[],Wt=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||y.expando+"_"+_t.guid++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(t,i,n){var o,a,r,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+o):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||y.error(o+" was not called"),r[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){r=arguments},n.always((function(){void 0===a?y(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=i.jsonpCallback,Gt.push(o)),r&&g(a)&&a(r[0]),r=a=void 0})),"script"})),f.createHTMLDocument=((Ut=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),y.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((n=(t=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,t.head.appendChild(n)):t=v),a=!i&&[],(o=I.exec(e))?[t.createElement(o[1])]:(o=we([e],t,a),a&&a.length&&y(a).remove(),y.merge([],o.childNodes)));var n,o,a},y.fn.load=function(e,t,i){var n,o,a,r=this,s=e.indexOf(" ");return s>-1&&(n=mt(e.slice(s)),e=e.slice(0,s)),g(t)?(i=t,t=void 0):t&&"object"===h(t)&&(o="POST"),r.length>0&&y.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,r.html(n?y("<div>").append(y.parseHTML(e)).find(n):e)})).always(i&&function(e,t){r.each((function(){i.apply(this,a||[e.responseText,t,e])}))}),this},y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(t){return e===t.elem})).length},y.offset={setOffset:function(e,t,i){var n,o,a,r,s,l,c=y.css(e,"position"),d=y(e),h={};"static"===c&&(e.style.position="relative"),s=d.offset(),a=y.css(e,"top"),l=y.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(r=(n=d.position()).top,o=n.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),g(t)&&(t=t.call(e,i,y.extend({},s))),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):d.css(h)}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){y.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===y.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===y.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=y(e).offset()).top+=y.css(e,"borderTopWidth",!0),o.left+=y.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-y.css(n,"marginTop",!0),left:t.left-o.left-y.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||oe}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;y.fn[e]=function(n){return j(this,(function(e,n,o){var a;if(m(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:o,i?o:a.pageYOffset):e[n]=o}),e,n,arguments.length)}})),y.each(["top","left"],(function(e,t){y.cssHooks[t]=Ue(f.pixelPosition,(function(e,i){if(i)return i=He(e,t),Me.test(i)?y(e).position()[t]+"px":i}))})),y.each({Height:"height",Width:"width"},(function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){y.fn[n]=function(o,a){var r=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===a?"margin":"border");return j(this,(function(t,i,o){var a;return m(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?y.css(t,i,s):y.style(t,i,o,s)}),t,r?o:void 0,r)}}))})),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){y.fn[t]=function(e){return this.on(t,e)}})),y.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){y.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var Vt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(e,t){var i,n,a;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return n=o.call(arguments,2),a=function(){return e.apply(t||this,n.concat(o.call(arguments)))},a.guid=e.guid=e.guid||y.guid++,a},y.holdReady=function(e){e?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=Y,y.isFunction=g,y.isWindow=m,y.camelCase=W,y.type=x,y.now=Date.now,y.isNumeric=function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},y.trim=function(e){return null==e?"":(e+"").replace(Vt,"$1")};var Zt=e.jQuery,Kt=e.$;return y.noConflict=function(t){return e.$===y&&(e.$=Kt),t&&e.jQuery===y&&(e.jQuery=Zt),y},void 0===t&&(e.jQuery=e.$=y),y}))}({get exports(){return We},set exports(e){We=e}});var Ve,Ze=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,o=arguments.length>3?arguments[3]:void 0;v(this,e),p(this,"element",void 0),p(this,"duration",5e3),p(this,"timer",void 0),p(this,"static",!1),this.instance=t,this.position=o,this.timer=new Ue(Date.now(),n),this.element=this.createBlob(t,i),this.static=!!this.position}return k(e,[{key:"update",value:function(e,t){this.timer.time=t,We(this.element).find("p").html(e)}},{key:"isOver",value:function(e){return this.timer.isOver(e)}},{key:"destroy",value:function(){We(this.element).remove()}},{key:"createBlob",value:function(e,t){return We('<div id="'.concat(e,'" class="bubble"><p>').concat(t,'</p><div class="bubble-tip"></div></div>'))}}]),e}(),Ke=function(){function e(t){v(this,e),p(this,"container",We("#bubbles")),p(this,"bubbles",{}),this.game=t}return k(e,[{key:"create",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=arguments.length>3?arguments[3]:void 0,o=this.bubbles[e];if(o)return o.update(t,Date.now());this.bubbles[e]=new Ze(e,t,i,n),this.bubbles[e].element.appendTo(this.container)}},{key:"setTo",value:function(e,t,i){var n=this.bubbles[e],o=this.game.camera.zoomFactor,a=this.game.renderer.tileSize*o,r=(parseInt(n.element.css("width"))+24)/2-a/2;t=(t-this.game.camera.x)*o,i=(i-this.game.camera.y)*o-2*a- -20,n.element.css({left:"".concat(t-r+3,"px"),top:"".concat(i,"px")})}},{key:"update",value:function(e){for(var t=0,i=Object.values(this.bubbles);t<i.length;t++){var n=i[t],o=this.game.entities.get(n.instance);o&&this.setTo(o.instance,o.x,o.y),n.static&&this.setTo(n.instance,n.position.x,n.position.y),n.isOver(e)&&this.destroy(n)}}},{key:"clear",value:function(e){this.bubbles[e]&&this.destroy(this.bubbles[e])}},{key:"destroy",value:function(e){e.destroy(),delete this.bubbles[e.instance]}},{key:"clean",value:function(){for(var e=0,t=Object.values(this.bubbles);e<t.length;e++){t[e].destroy()}this.bubbles={}}}]),e}(),$e=function(){function e(t){v(this,e),p(this,"game",void 0),p(this,"entities",void 0),this.character=t,this.game=t.game,this.entities=this.game.entities,this.character.onRequestPath(this.handleRequestPath.bind(this)),this.character.onStartPathing(this.handleStartPathing.bind(this)),this.character.onBeforeStep(this.handleBeforeStep.bind(this)),this.character.onStep(this.handleStep.bind(this)),this.character.onSecondStep(this.handleSecondStep.bind(this)),this.character.onStopPathing(this.handleStopPathing.bind(this)),this.character.onMove(this.handleMove.bind(this)),this.character.onFallback(this.handleFallback.bind(this))}return k(e,[{key:"handleRequestPath",value:function(e,t){return this.character.gridX===e&&this.character.gridY===t||this.game.map.isColliding(e,t)?[]:this.game.findPath(this.character,e,t)}},{key:"handleStartPathing",value:function(e){}},{key:"handleBeforeStep",value:function(){this.entities.unregisterPosition(this.character)}},{key:"handleStep",value:function(){var e=this;this.entities.registerPosition(this.character),this.character.forEachAttacker((function(t){if(!t.target||t.target.instance!==e.character.instance)return e.character.removeAttacker(t);t.canAttackTarget()||t.follow(e.character)})),this.character.forEachFollower((function(t){if(!t.target||t.target.instance!==e.character.instance)return e.character.removeFollower(t);t.follow(e.character)})),(this.character.hasTarget()||this.character.hasAttackers())&&this.game.socket.send(ze.Movement,{opcode:z.Entity,targetInstance:this.character.instance,requestX:this.character.gridX,requestY:this.character.gridY}),this.character.canAttackTarget()&&this.character.stop(!0)}},{key:"handleSecondStep",value:function(){}},{key:"handleStopPathing",value:function(e,t){}},{key:"handleMove",value:function(){}},{key:"handleFallback",value:function(e,t){this.game.teleport(this.character,e,t)}}]),e}(),Qe=function(){function e(){v(this,e),p(this,"startValue",0),p(this,"endValue",0),p(this,"duration",0),p(this,"inProgress",!1),p(this,"startTime",void 0),p(this,"updateCallback",void 0),p(this,"stopCallback",void 0)}return k(e,[{key:"start",value:function(e,t,i,n,o,a){this.startTime=e,this.startValue=t,this.endValue=i,this.duration=n,this.updateCallback=o,this.stopCallback=a,this.inProgress=!0}},{key:"step",value:function(e){var t;if(this.inProgress){var i=e-this.startTime;i>this.duration&&(i=this.duration);var n,o=this.endValue-this.startValue,a=Math.round(this.startValue+o/this.duration*i);if(i===this.duration||a===this.endValue)this.inProgress=!1,null===(n=this.stopCallback)||void 0===n||n.call(this);else null===(t=this.updateCallback)||void 0===t||t.call(this,a)}}}]),e}(),Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;v(this,e),p(this,"x",0),p(this,"y",0),p(this,"gridX",0),p(this,"gridY",0),p(this,"nextGridX",-1),p(this,"nextGridY",-1),p(this,"movementSpeed",-1),p(this,"attackRange",-1),p(this,"frozen",!1),p(this,"dead",!1),p(this,"name",""),p(this,"region",-1),p(this,"healthBarVisible",!1),p(this,"sprite",void 0),p(this,"spriteFlipX",!1),p(this,"spriteFlipY",!1),p(this,"animation",void 0),p(this,"shadowOffsetY",0),p(this,"hidden",!1),p(this,"visible",!0),p(this,"fading",!1),p(this,"angle",0),p(this,"angled",!1),p(this,"hasCounter",!1),p(this,"counter",0),p(this,"countdownTime",0),p(this,"fadingDuration",1e3),p(this,"orientation",ne.Down),p(this,"fadingTime",void 0),p(this,"blinking",void 0),p(this,"normalSprite",void 0),p(this,"hurtSprite",void 0),p(this,"silhouetteSprite",void 0),p(this,"ready",!1),p(this,"hitPoints",0),p(this,"maxHitPoints",0),p(this,"mana",0),p(this,"maxMana",0),p(this,"level",1),p(this,"experience",0),p(this,"teleporting",!1),p(this,"pvp",!1),p(this,"nameColour",void 0),p(this,"customScale",void 0),p(this,"fadingAlpha",void 0),p(this,"lastUpdate",Date.now()),this.instance=t,this.type=i}return k(e,[{key:"fadeIn",value:function(e){this.fading=!0,this.fadingTime=e}},{key:"blink",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150;this.blinking=window.setInterval((function(){return e.toggleVisibility()}),t)}},{key:"stopBlinking",value:function(){this.blinking&&clearInterval(this.blinking),this.setVisible(!0)}},{key:"idle",value:function(){}},{key:"animateDeath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setAnimation("death",t,i,e)}},{key:"updateSilhouette",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.silhouetteSprite&&(this.sprite=e?this.silhouetteSprite:this.normalSprite)}},{key:"setSprite",value:function(e){var t,i=this;if(!e.loaded&&(e.load(),(null===(t=this.sprite)||void 0===t?void 0:t.key)===e.key))return;this.sprite=e,this.normalSprite=e,e.loading?setTimeout((function(){return i.setSprite(e)}),100):(e.hurtSprite&&(this.hurtSprite=e.hurtSprite),e.silhouetteSprite&&(this.silhouetteSprite=e.silhouetteSprite),e.onLoad((function(){i.normalSprite=e,e.hurtSprite&&(i.hurtSprite=e.hurtSprite),e.silhouetteSprite&&(i.silhouetteSprite=e.silhouetteSprite),i.customScale&&(i.sprite.offsetX*=i.customScale,i.sprite.offsetY*=i.customScale)})))}},{key:"setAnimation",value:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sprite.idleSpeed,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0;if((null===(t=this.animation)||void 0===t?void 0:t.name)!==e){var r=this.sprite.animations[e],s=r.length,l=r.row,c=r.width,d=r.height;this.animation=new Me(e,s,l,c,d),e.startsWith("atk")&&this.animation.reset(),this.animation.setSpeed(n),this.animation.setCount(o,a||function(){return i.idle()})}}},{key:"setPosition",value:function(e,t){this.x=e,this.y=t}},{key:"setGridPosition",value:function(e,t){this.gridX=e,this.gridY=t,this.region=Be.getRegion(e,t),this.setPosition(e*Be.tileSize,t*Be.tileSize)}},{key:"setCountdown",value:function(e){this.counter=e,this.countdownTime=Date.now(),this.hasCounter=!0}},{key:"setVisible",value:function(e){this.visible=e}},{key:"getDistance",value:function(e){var t=this.gridX,i=this.gridY;return Math.abs(t-e.gridX)+Math.abs(i-e.gridY)}},{key:"getAngle",value:function(){return this.angle}},{key:"toggleVisibility",value:function(){this.setVisible(!this.visible)}},{key:"isVisible",value:function(){return this.visible}},{key:"drawNames",value:function(){return!0}},{key:"hasShadow",value:function(){return!1}},{key:"hasMedal",value:function(){return!1}},{key:"isPlayer",value:function(){return this.type===oe.Player}},{key:"isMob",value:function(){return this.type===oe.Mob}},{key:"isNPC",value:function(){return this.type===oe.NPC}},{key:"isItem",value:function(){return this.type===oe.Item}},{key:"isChest",value:function(){return this.type===oe.Chest}},{key:"isProjectile",value:function(){return this.type===oe.Projectile}},{key:"isObject",value:function(){return this.type===oe.Object}},{key:"isModerator",value:function(){return!1}},{key:"isAdmin",value:function(){return!1}}]),e}(),et=function(e){a(i,e);var t=s(i);function i(e,n,o){var a,r;return v(this,i),p(c(r=t.call(this,e,n)),"moving",!1),p(c(r),"following",!1),p(c(r),"stunned",!1),p(c(r),"forced",!1),p(c(r),"trading",!1),p(c(r),"interrupted",!1),p(c(r),"path",null),p(c(r),"target",null),p(c(r),"lastTarget",""),p(c(r),"statusEffects",[]),p(c(r),"attackers",{}),p(c(r),"followers",{}),p(c(r),"movement",new Qe),p(c(r),"handler",void 0),p(c(r),"attackAnimationSpeed",50),p(c(r),"walkAnimationSpeed",120),p(c(r),"effect",ge.None),p(c(r),"destination",void 0),p(c(r),"newDestination",void 0),p(c(r),"step",void 0),p(c(r),"healthBarTimeout",void 0),p(c(r),"effects",(p(a={},ge.Critical,{key:"effect-critical",animation:new Me("effect",10,0,48,48)}),p(a,ge.Terror,{key:"effect-terror",animation:new Me("effect",8,0,64,64)}),p(a,ge.TerrorStatus,{key:"effect-terror2",animation:new Me("effect",5,0,32,32),perpetual:!0,speed:200}),p(a,ge.Stun,{key:"effect-stun",animation:new Me("effect",6,0,48,48),perpetual:!0}),p(a,ge.Healing,{key:"effect-heal",animation:new Me("effect",8,0,64,64)}),p(a,ge.Fireball,{key:"effect-fireball",animation:new Me("effect",8,0,64,64)}),p(a,ge.Iceball,{key:"effect-iceball",animation:new Me("effect",8,0,64,64)}),p(a,ge.Burning,{key:"effect-burn",animation:new Me("effect",5,0,32,32),perpetual:!0,speed:150}),p(a,ge.Freezing,{key:"effect-freeze",animation:new Me("effect",6,0,32,32),perpetual:!0,speed:200}),p(a,ge.Poisonball,{key:"effect-poisonball",animation:new Me("effect",10,0,40,40),speed:175}),p(a,ge.Boulder,{key:"effect-boulder",animation:new Me("effect",7,0,32,32)}),a)),p(c(r),"requestPathCallback",void 0),p(c(r),"startPathingCallback",void 0),p(c(r),"beforeStepCallback",void 0),p(c(r),"stepCallback",void 0),p(c(r),"secondStepCallback",void 0),p(c(r),"stopPathingCallback",void 0),p(c(r),"moveCallback",void 0),p(c(r),"fallbackCallback",void 0),p(c(r),"hitPointsCallback",void 0),r.game=o,r.loadAnimations(),r.handler=new $e(c(r)),r}return k(i,[{key:"loadAnimations",value:function(){var e=this,t=function(){var t=e.effects[i],n=parseInt(i);t.animation.setSpeed(t.speed||50),t.animation.setCount(1,(function(){t.perpetual||e.removeEffect(n),n===ge.Terror&&e.addEffect(ge.TerrorStatus),t.animation.reset(),t.animation.count=1}))};for(var i in this.effects)t()}},{key:"setAnimation",value:function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,s=["atk","walk","idle"];"death"!==(null===(t=this.animation)||void 0===t?void 0:t.name)&&(this.spriteFlipX=!1,this.spriteFlipY=!1,s.includes(e)&&(e+="_".concat(this.orientation===ne.Left?"right":this.orientationToString()),this.spriteFlipX=this.orientation===ne.Left),n(d(i.prototype),"setAnimation",this).call(this,e,o,a,r))}},{key:"animateDeath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.setAnimation("death",t,i,e)}},{key:"toggleHurt",value:function(){var e=this;this.dead||this.teleporting||!this.hurtSprite||(this.sprite=this.hurtSprite,window.setTimeout((function(){return e.sprite=e.normalSprite}),100))}},{key:"despawn",value:function(){this.hitPoints=0,this.dead=!0,this.removeTarget(),this.stop(),this.orientation=ne.Down}},{key:"trade",value:function(e){this.trading=!0,this.follow(e)}},{key:"follow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.following=!0,this.setTarget(e),this.move(e.gridX,e.gridY,t)}},{key:"pursue",value:function(e){this.setTarget(e),this.move(e.gridX,e.gridY),e.addFollower(this)}},{key:"followPosition",value:function(e,t){this.following=!0,this.move(e,t)}},{key:"addEffect",value:function(e){this.hasEffect(e)||this.statusEffects.push(e)}},{key:"addAttacker",value:function(e){this.attackers[e.instance]=e}},{key:"addFollower",value:function(e){this.followers[e.instance]=e}},{key:"removeEffect",value:function(e){e===ge.Terror&&this.removeEffect(ge.TerrorStatus),this.statusEffects=this.statusEffects.filter((function(t){return t!==e}))}},{key:"removeAllEffects",value:function(){this.statusEffects=[]}},{key:"removeAttacker",value:function(e){delete this.attackers[e.instance]}},{key:"removeFollower",value:function(e){delete this.followers[e.instance]}},{key:"hasEffect",value:function(e){return this.statusEffects.includes(e)}},{key:"hasActiveEffect",value:function(){return this.statusEffects.length>0}},{key:"hasAttackers",value:function(){return Object.keys(this.attackers).length>0}},{key:"hasFollowers",value:function(){return Object.keys(this.followers).length>0}},{key:"performAction",value:function(e,t){switch(this.setOrientation(e),t){case re.Idle:case re.Orientate:this.setAnimation("idle",this.sprite.idleSpeed);break;case re.Attack:this.setAnimation("atk",this.attackAnimationSpeed,1);break;case re.Walk:this.setAnimation("walk",this.walkAnimationSpeed)}}},{key:"idle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasPath()||t){var i=e||this.orientation;this.performAction(i,re.Idle)}}},{key:"orientationToString",value:function(){switch(this.orientation){case ne.Left:return"left";case ne.Right:return"right";case ne.Up:return"up";case ne.Down:return"down"}}},{key:"lookAt",value:function(e){var t=this.gridX,i=this.gridY;e.gridX>t?this.setOrientation(ne.Right):e.gridX<t?this.setOrientation(ne.Left):e.gridY>i?this.setOrientation(ne.Down):e.gridY<i&&this.setOrientation(ne.Up),this.idle()}},{key:"go",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.frozen||(this.following&&(this.following=!1,this.removeTarget()),this.move(e,t,i,n))}},{key:"move",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.hasPath()&&!i)this.proceed(e,t);else{var o,a=this.requestPathfinding(e,t);if((!a||a.length<2)&&n)return null===(o=this.fallbackCallback)||void 0===o?void 0:o.call(this,e,t);this.followPath(a)}this.destination={x:e,y:t}}},{key:"proceed",value:function(e,t){this.newDestination={x:e,y:t}}},{key:"nextStep",value:function(){var e,t,i,n,o=!1;if(this.step%2==0&&this.secondStepCallback&&this.secondStepCallback(),this.hasPath()){if(null===(e=this.beforeStepCallback)||void 0===e||e.call(this),this.updateGridPosition(),!this.interrupted&&this.path){var a;if(this.hasNextStep()){var r=u(this.path[this.step+1],2);this.nextGridX=r[0],this.nextGridY=r[1]}if(null===(a=this.stepCallback)||void 0===a||a.call(this),this.changedPath()){var s,l=this.newDestination;if(t=l.x,i=l.y,!(n=this.requestPathfinding(t,i)))return;if(this.newDestination=null,n.length<2)o=!0;else null===(s=this.startPathingCallback)||void 0===s||s.call(this,n),this.followPath(n)}else this.hasNextStep()?(this.step++,this.updateMovement()):o=!0}else o=!0,this.interrupted=!1;o&&(this.path=null,this.idle(),this.stopPathingCallback&&this.stopPathingCallback(this.gridX,this.gridY,this.forced),this.forced=!1)}}},{key:"updateMovement",value:function(){var e=this.path,t=this.step;e&&(e[t][0]<e[t-1][0]&&this.performAction(ne.Left,re.Walk),e[t][0]>e[t-1][0]&&this.performAction(ne.Right,re.Walk),e[t][1]<e[t-1][1]&&this.performAction(ne.Up,re.Walk),e[t][1]>e[t-1][1]&&this.performAction(ne.Down,re.Walk))}},{key:"followPath",value:function(e){var t;!e||e.length<2||(this.path=e,this.step=0,this.following&&e.pop(),this.moving||this.changedPath()||null===(t=this.startPathingCallback)||void 0===t||t.call(this,e),this.nextStep())}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.hasPath()&&(this.path=null,this.destination=null,this.newDestination=null,this.movement=new Qe,this.performAction(this.orientation,re.Idle),this.nextGridX=this.gridX,this.nextGridY=this.gridY):this.interrupted=!0}},{key:"canAttackTarget",value:function(){return!!this.hasTarget()&&(!(!this.target.isMob()&&!this.target.isPlayer())&&!(this.getDistance(this.target)>this.attackRange-1))}},{key:"getEffect",value:function(e){return this.effects[e]}},{key:"triggerHealthBar",value:function(){var e=this;this.healthBarVisible=!0,this.healthBarTimeout&&clearTimeout(this.healthBarTimeout),this.healthBarTimeout=window.setTimeout((function(){e.healthBarVisible=!1}),7e3)}},{key:"clearHealthBar",value:function(){this.healthBarVisible=!1,clearTimeout(this.healthBarTimeout),this.healthBarTimeout=null}},{key:"requestPathfinding",value:function(e,t){var i;return(null===(i=this.requestPathCallback)||void 0===i?void 0:i.call(this,e,t))||null}},{key:"updateGridPosition",value:function(){this.path&&0!==this.path.length&&this.setGridPosition(this.path[this.step][0],this.path[this.step][1])}},{key:"hasShadow",value:function(){return!0}},{key:"hasPath",value:function(){return null!==this.path}},{key:"hasNextStep",value:function(){return this.path&&this.path.length-1>this.step}},{key:"changedPath",value:function(){return!!this.newDestination}},{key:"removeTarget",value:function(){this.target=null}},{key:"moved",value:function(){var e;null===(e=this.moveCallback)||void 0===e||e.call(this)}},{key:"setTarget",value:function(e){this.target=e,this.lastTarget=e.instance}},{key:"hasTarget",value:function(e){return e?this.target===e:!!this.target}},{key:"setObjectTarget",value:function(e){var t=new i("".concat(e.gridX,"-").concat(e.gridY),oe.Object,this.game);t.setGridPosition(e.gridX,e.gridY),this.setTarget(t),this.followPosition(e.gridX,e.gridY)}},{key:"setHitPoints",value:function(e,t){var i,n=!1;e<0&&(e=0),e<this.hitPoints&&(n=!0),this.hitPoints=e,t&&(this.maxHitPoints=t),null===(i=this.hitPointsCallback)||void 0===i||i.call(this,this.hitPoints,t||this.maxHitPoints,n)}},{key:"setOrientation",value:function(e){this.orientation=e}},{key:"forEachAttacker",value:function(e){for(var t=0,i=Object.values(this.attackers);t<i.length;t++){e(i[t])}}},{key:"forEachFollower",value:function(e){for(var t=0,i=Object.values(this.followers);t<i.length;t++){e(i[t])}}},{key:"onRequestPath",value:function(e){this.requestPathCallback=e}},{key:"onStartPathing",value:function(e){this.startPathingCallback=e}},{key:"onStopPathing",value:function(e){this.stopPathingCallback=e}},{key:"onBeforeStep",value:function(e){this.beforeStepCallback=e}},{key:"onStep",value:function(e){this.stepCallback=e}},{key:"onSecondStep",value:function(e){this.secondStepCallback=e}},{key:"onMove",value:function(e){this.moveCallback=e}},{key:"onHitPoints",value:function(e){this.hitPointsCallback=e}},{key:"onFallback",value:function(e){this.fallbackCallback=e}}]),i}(Je),tt=function(e){a(i,e);var t=s(i);function i(e,n){var o;return v(this,i),p(c(o=t.call(this,e,oe.Mob,n)),"hiddenName",!1),o}return k(i,[{key:"hasShadow",value:function(){return!this.hiddenName}},{key:"drawNames",value:function(){return!this.hiddenName}}]),i}(et),it=function(e){a(i,e);var t=s(i);function i(e){return v(this,i),t.call(this,e,oe.NPC)}return k(i,[{key:"idle",value:function(){this.setAnimation("idle_down",this.sprite.idleSpeed)}}]),i}(Je),nt=function(){function e(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;v(this,e),p(this,"secret",!1),this.id=t,this.name=i,this.description=n,this.stage=o,this.stageCount=a,this.subStage=r,this.rewards=s}return k(e,[{key:"update",value:function(e,t,i,n){this.stage=e,t&&(this.subStage=t),i&&(this.name=i),n&&(this.description=n)}},{key:"isFinished",value:function(){return this.stage>=this.stageCount}},{key:"isStarted",value:function(){return this.stage>0}}]),e}(),ot=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;v(this,e),p(this,"name",void 0),p(this,"percentage",0),p(this,"nextExperience",0),this.type=t,this.experience=i,this.level=n,this.name=ue[t]}return k(e,[{key:"update",value:function(e,t,i,n){this.experience=e,this.nextExperience=t,this.level=i||this.level,this.percentage=n||0}}]),e}(),at=function(){function e(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;v(this,e),p(this,"active",!1),this.type=t,this.key=i,this.level=n,this.quickSlot=o}return k(e,[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.quickSlot;this.level=e,this.quickSlot=t}},{key:"toggle",value:function(){this.active=!this.active}}]),e}(),rt=k((function e(t,i,n,o){v(this,e),this.id=t,this.username=i,this.online=n,this.serverId=o})),st=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};v(this,e),p(this,"attackStats",Be.getEmptyStats()),p(this,"defenseStats",Be.getEmptyStats()),p(this,"bonuses",Be.getEmptyBonuses()),p(this,"attackStyle",de.None),p(this,"attackStyles",[]),this.key=t,this.name=i,this.count=n,this.enchantments=o}return k(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:de.None,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];this.key=e,this.name=t,this.count=i,this.enchantments=n,this.attackStats=o||Be.getEmptyStats(),this.defenseStats=a||Be.getEmptyStats(),this.bonuses=r||Be.getEmptyBonuses(),this.attackStyle=s,this.attackStyles=l}},{key:"exists",value:function(){return""!==this.key}}]),e}(),lt=function(e){a(i,e);var t=s(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clotharmor",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Cloth Armor",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return v(this,i),t.call(this,e,n,o,a)}return k(i,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clotharmor",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Cloth Armor",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;n(d(i.prototype),"update",this).call(this,e,t,o,a,r,s,l)}}]),i}(st),ct=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),dt=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),ht=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),ut=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),pt=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),ft=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),gt=function(e){a(i,e);var t=s(i);function i(){return v(this,i),t.apply(this,arguments)}return k(i)}(st),mt=function(e){a(i,e);var t=s(i);function i(e,n){var o,a;return v(this,i),p(c(a=t.call(this,e,oe.Player,n)),"rank",ve.None),p(c(a),"wanted",!1),p(c(a),"serverId",-1),p(c(a),"pvpKills",-1),p(c(a),"pvpDeaths",-1),p(c(a),"moveLeft",!1),p(c(a),"moveRight",!1),p(c(a),"moveUp",!1),p(c(a),"moveDown",!1),p(c(a),"poison",!1),p(c(a),"disableAction",!1),p(c(a),"medal",me.None),p(c(a),"guild",void 0),p(c(a),"hitPoints",0),p(c(a),"maxHitPoints",0),p(c(a),"mana",0),p(c(a),"maxMana",0),p(c(a),"equipments",(p(o={},ce.Armour,new lt),p(o,ce.ArmourSkin,new ct),p(o,ce.Boots,new dt),p(o,ce.Pendant,new ht),p(o,ce.Ring,new ut),p(o,ce.Weapon,new pt),p(o,ce.WeaponSkin,new ft),p(o,ce.Arrows,new gt),o)),p(c(a),"skills",{}),p(c(a),"abilities",{}),p(c(a),"quests",{}),p(c(a),"achievements",{}),p(c(a),"friends",{}),p(c(a),"syncCallback",void 0),p(c(a),"poisonCallback",void 0),p(c(a),"abilityCallback",void 0),p(c(a),"manaCallback",void 0),a}return k(i,[{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance=e.instance,this.name=e.name,this.level=e.level,this.movementSpeed=e.movementSpeed,this.orientation=e.orientation,this.attackRange=e.attackRange,e.displayInfo&&(this.nameColour=e.displayInfo.colour),this.setRank(e.rank),this.setOrientation(e.orientation),t||this.setGridPosition(e.x,e.y),this.setHitPoints(e.hitPoints,e.maxHitPoints),this.setMana(e.mana,e.maxMana),e.equipments){var i,n=w(e.equipments);try{for(n.s();!(i=n.n()).done;){var o=i.value;this.equip(o)}}catch(zn){n.e(zn)}finally{n.f()}}}},{key:"loadSkills",value:function(e){var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.setSkill(n)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"loadQuests",value:function(e){var t,i=w(e.entries());try{for(i.s();!(t=i.n()).done;){var n=u(t.value,2),o=n[0],a=n[1];this.quests[a.key]=new nt(o,a.name,a.description,a.stage,a.stageCount,a.subStage,a.rewards)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"loadAchievements",value:function(e){for(var t in e){var i=e[t],n=new nt(parseInt(t),i.name,i.description,i.stage,i.stageCount);i.secret&&(n.secret=!0),this.achievements[i.key]=n}}},{key:"loadAbilities",value:function(e){var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.setAbility(n.key,n.level,n.type,n.quickSlot)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"loadFriends",value:function(e){var t=0;for(var i in e){var n=e[i];this.friends[i]=new rt(t,i,n.online,n.serverId),t++}}},{key:"equip",value:function(e){var t=e.type,i=e.name,n=e.key,o=e.count,a=e.enchantments,r=e.attackRange,s=e.attackStats,l=e.defenseStats,c=e.bonuses,d=e.attackStyle,h=e.attackStyles;if(!n)return this.unequip(t);this.equipments[t].update(n,i,o,a,s,l,c),t===ce.Weapon&&(this.attackRange=r||1,this.setAttackStyle(d,h))}},{key:"addFriend",value:function(e,t,i){this.friends[e]=new rt(Object.keys(this.friends).length,e,t,i)}},{key:"unequip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t>0?this.equipments[e].count=t:this.equipments[e].update()}},{key:"sync",value:function(){var e;null===(e=this.syncCallback)||void 0===e||e.call(this)}},{key:"getSpriteName",value:function(){return this.equipments[ce.ArmourSkin].key?this.equipments[ce.ArmourSkin].key:this.equipments[ce.Armour].key}},{key:"getWeaponSpriteName",value:function(){return this.equipments[ce.WeaponSkin].key?this.equipments[ce.WeaponSkin].key:this.equipments[ce.Weapon].key}},{key:"getArmour",value:function(){return this.equipments[ce.Armour]}},{key:"getArmourSkin",value:function(){return this.equipments[ce.ArmourSkin]}},{key:"getBoots",value:function(){return this.equipments[ce.Boots]}},{key:"getArrows",value:function(){return this.equipments[ce.Arrows]}},{key:"getPendant",value:function(){return this.equipments[ce.Pendant]}},{key:"getRing",value:function(){return this.equipments[ce.Ring]}},{key:"getWeapon",value:function(){return this.equipments[ce.Weapon]}},{key:"getWeaponSkin",value:function(){return this.equipments[ce.WeaponSkin]}},{key:"isAdmin",value:function(){return this.rank===ve.Admin||this.rank===ve.HollowAdmin}},{key:"isModerator",value:function(){return this.rank===ve.Moderator}},{key:"getTotalExperience",value:function(){for(var e=0,t=0,i=Object.values(this.skills);t<i.length;t++){e+=i[t].experience}return e}},{key:"getMedalKey",value:function(){switch(this.medal){case me.Silver:return"silvermedal";case me.Gold:return"goldmedal";case me.Artist:return"crown-artist";case me.Tier1:return"crown-tier1";case me.Tier2:return"crown-tier2";case me.Tier3:return"crown-tier3";case me.Tier4:return"crown-tier4";case me.Tier5:return"crown-tier5";case me.Tier6:return"crown-tier6";case me.Tier7:return"crown-tier7";default:return""}}},{key:"getRankMedal",value:function(){switch(this.rank){case ve.Artist:return me.Artist;case ve.TierOne:return me.Tier1;case ve.TierTwo:return me.Tier2;case ve.TierThree:return me.Tier3;case ve.TierFour:return me.Tier4;case ve.TierFive:return me.Tier5;case ve.TierSix:return me.Tier6;case ve.TierSeven:return me.Tier7;default:return me.None}}},{key:"setMana",value:function(e,t){var i;this.mana=e,t&&(this.maxMana=t),null===(i=this.manaCallback)||void 0===i||i.call(this,this.mana,t||this.maxMana)}},{key:"setSkill",value:function(e){var t=e.type,i=e.experience,n=e.level,o=e.percentage,a=e.nextExperience;this.skills[t]||(this.skills[t]=new ot(t)),this.skills[t].update(i,a,n,o)}},{key:"setQuest",value:function(e,t,i){var n;null===(n=this.quests[e])||void 0===n||n.update(t,i)}},{key:"setAchievement",value:function(e,t,i,n){var o;if(!(e in this.achievements)){var a=new nt(Object.keys(this.achievements).length-1,i,n);return a.secret=!0,void(this.achievements[e]=a)}null===(o=this.achievements[e])||void 0===o||o.update(t,void 0,i,n)}},{key:"setAbility",value:function(e,t,i){var n,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;e in this.abilities?null===(n=this.abilities[e])||void 0===n||n.update(t,a):this.abilities[e]=new at(i,e,t,a),i!==ae.Active&&-1===a||null===(o=this.abilityCallback)||void 0===o||o.call(this,e,t,a)}},{key:"setPoison",value:function(e){var t;this.poison=e,null===(t=this.poisonCallback)||void 0===t||t.call(this,e)}},{key:"setFriendStatus",value:function(e,t,i){this.friends[e].online=t,this.friends[e].serverId=i}},{key:"setAttackStyle",value:function(e,t){this.getWeapon().attackStyle=e,t&&(this.getWeapon().attackStyles=t)}},{key:"setRank",value:function(e){this.rank=e,this.medal=this.getRankMedal()}},{key:"setGuild",value:function(e){this.guild=e?{name:e.name,members:e.members}:void 0}},{key:"toggleAbility",value:function(e){var t;null===(t=this.abilities[e])||void 0===t||t.toggle()}},{key:"isRanged",value:function(){return this.attackRange>1}},{key:"isMagic",value:function(){return this.getWeapon().bonuses.magic>0&&this.isRanged()}},{key:"hasWeapon",value:function(){return this.equipments[ce.Weapon].exists()}},{key:"hasMedal",value:function(){return this.medal!==me.None}},{key:"hasKeyboardMovement",value:function(){return this.moveLeft||this.moveRight||this.moveUp||this.moveDown}},{key:"hasFriend",value:function(e){return e.toLowerCase()in this.friends}},{key:"onPoison",value:function(e){this.poisonCallback=e}},{key:"onSync",value:function(e){this.syncCallback=e}},{key:"onAbility",value:function(e){this.abilityCallback=e}},{key:"onMana",value:function(e){this.manaCallback=e}}]),i}(et),vt=function(e){a(i,e);var t=s(i);function i(e){return v(this,i),t.call(this,e,oe.Chest)}return k(i,[{key:"idle",value:function(){this.setAnimation("idle_down",150)}}]),i}(Je),bt=function(e){a(i,e);var t=s(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v(this,i),p(c(n=t.call(this,e,oe.Item)),"dropped",!1),p(c(n),"originalY",-1),n.count=o,n.enchantments=a,n}return k(i,[{key:"setAnimation",value:function(e,t,o,a){var r,s=this;n(d(i.prototype),"setAnimation",this).call(this,e,t,o,a),this.animation.length>1||(this.originalY=this.sprite.offsetY,null===(r=this.animation)||void 0===r||r.onBop((function(e){s.sprite.offsetY=s.originalY-e})))}},{key:"idle",value:function(){this.setAnimation("idle",150)}},{key:"hasShadow",value:function(){return!0}}]),i}(Je),kt=function(e){a(i,e);var t=s(i);function i(e,n){var o;return v(this,i),p(c(o=t.call(this,e,oe.Projectile)),"type",oe.Projectile),p(c(o),"speed",150),p(c(o),"fadingDuration",100),p(c(o),"target",void 0),o.owner=n,o}return k(i,[{key:"idle",value:function(){this.setAnimation("travel")}},{key:"impact",value:function(){var e;null===(e=this.impactCallback)||void 0===e||e.call(this)}},{key:"setStart",value:function(e,t){this.setGridPosition(Math.floor(e/Be.tileSize),Math.floor(t/Be.tileSize))}},{key:"setTarget",value:function(e){this.target=e,this.updateAngle()}},{key:"getAnimationSpeed",value:function(){return this.sprite.idleSpeed}},{key:"getTimeDiff",value:function(){return(Date.now()-this.lastUpdate)/1e3}},{key:"getImpactEffect",value:function(){switch(this.sprite.key){case"projectile-boulder":return ge.Boulder;case"projectile-poisonball":return ge.Poisonball;case"projectile-fireball":case"projectile-gift6":return ge.Fireball;case"projectile-iceball":return ge.Iceball;case"projectile-terror":return ge.Terror}return ge.None}},{key:"updateAngle",value:function(){this.target&&(this.angle=Math.atan2(this.target.y-this.y,this.target.x-this.x)*(180/Math.PI)-90)}},{key:"getAngle",value:function(){return this.angle*Math.PI/180}},{key:"onImpact",value:function(e){this.impactCallback=e}}]),i}(Je),xt=function(){function e(t){v(this,e),p(this,"renderingGrid",[]),this.map=t,this.load()}return k(e,[{key:"load",value:function(){for(var e=0;e<this.map.height;e++){this.renderingGrid[e]=[];for(var t=0;t<this.map.width;t++)this.renderingGrid[e][t]={}}_.debug("Finished generating the rendering grid.")}},{key:"addToRenderingGrid",value:function(e){var t=e.instance,i=e.gridX,n=e.gridY;this.map.isOutOfBounds(i,n)||(this.renderingGrid[n][i][t]=e)}},{key:"removeFromRenderingGrid",value:function(e){var t=e.instance,i=e.gridX,n=e.gridY;delete this.renderingGrid[n][i][t]}},{key:"getEntitiesAround",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=[],a=t-n;a<t+n;a++)for(var r=e-n;r<e+n;r++){if(this.map.isOutOfBounds(r,a))continue;o=[].concat(i(o),i(Object.values(this.renderingGrid[a][r])))}return o}}]),e}(),wt=function(){function e(t){v(this,e),p(this,"grids",void 0),p(this,"sprites",void 0),p(this,"entities",{}),p(this,"decrepit",[]),this.game=t,this.grids=new xt(t.map),this.sprites=t.sprites,t.input.loadCursors()}return k(e,[{key:"create",value:function(e){if(!this.isPlayer(e.instance)&&!(e.instance in this.entities)){var t;switch(e.type){case oe.Chest:t=this.createChest(e.instance);break;case oe.NPC:t=this.createNPC(e.instance);break;case oe.Item:t=this.createItem(e);break;case oe.Mob:t=this.createMob(e);break;case oe.Projectile:t=this.createProjectile(e);break;case oe.Player:t=this.createPlayer(e)}if(!t)return _.error("Failed to create entity ".concat(e.instance));var i=this.game.sprites.get(t.isItem()?"items/".concat(e.key):e.key);if(!i)return _.error("Failed to create sprite for entity ".concat(e.key,"."));t.name=e.name,t.setGridPosition(e.x,e.y),t.setSprite(i),t.idle(),this.addEntity(t)}}},{key:"createChest",value:function(e){return new vt(e)}},{key:"createNPC",value:function(e){return new it(e)}},{key:"createItem",value:function(e){return new bt(e.instance,e.count,e.enchantments)}},{key:"createMob",value:function(e){var t=new tt(e.instance,this.game);return t.setHitPoints(e.hitPoints,e.maxHitPoints),t.attackRange=e.attackRange,t.level=e.level,t.hiddenName=e.hiddenName,t.movementSpeed=e.movementSpeed,t.orientation=e.orientation,e.displayInfo&&(e.displayInfo.colour&&(t.nameColour=e.displayInfo.colour),e.displayInfo.scale&&(t.customScale=e.displayInfo.scale)),t}},{key:"createProjectile",value:function(e){var t=this,i=this.get(e.ownerInstance),n=this.get(e.targetInstance);if(i&&n){i.lookAt(n);var o=new kt(e.instance,i);return o.name=e.name,o.setStart(i.x,i.y),o.setTarget(n),o.angled=!0,o.type=e.type,o.onImpact((function(){var i=o.getImpactEffect();i!==ge.None&&n.addEffect(i),t.game.info.create(le.Normal,e.damage,n.x,n.y,t.isPlayer(n.instance)),n.triggerHealthBar(),t.unregisterPosition(o),delete t.entities[o.instance]})),i.performAction(i.orientation,re.Attack),i.triggerHealthBar(),o}}},{key:"createPlayer",value:function(e){var t=new mt(e.instance,this.game);return t.load(e),t.setSprite(this.game.sprites.get(t.getSpriteName())),t.ready=!0,t}},{key:"isPlayer",value:function(e){return this.game.player.instance===e}},{key:"get",value:function(e){return this.entities[e]}},{key:"addEntity",value:function(e){this.entities[e.instance]=e,this.registerPosition(e),e instanceof bt&&e.dropped||e.fadeIn(this.game.time)}},{key:"removeEntity",value:function(e){e.isPlayer()&&(e.ready=!1),this.unregisterPosition(e),delete this.entities[e.instance]}},{key:"removeItem",value:function(e){this.unregisterPosition(e),delete this.entities[e.instance]}},{key:"removeChest",value:function(e){var t=this;e.setSprite(this.game.sprites.getDeath()),e.animateDeath((function(){t.unregisterPosition(e),delete t.entities[e.instance]}))}},{key:"removeNPC",value:function(e){var t=this;e.setSprite(this.game.sprites.getDeath()),e.animateDeath((function(){t.unregisterPosition(e),delete t.entities[e.instance]}))}},{key:"registerPosition",value:function(e){this.grids.addToRenderingGrid(e)}},{key:"unregisterPosition",value:function(e){this.grids.removeFromRenderingGrid(e)}},{key:"clean",value:function(){if(0!==this.decrepit.length){var e,t=w(this.decrepit);try{for(t.s();!(e=t.n()).done;){var i=e.value;i&&this.removeEntity(i)}}catch(zn){t.e(zn)}finally{t.f()}}}},{key:"cleanDisplayInfo",value:function(){for(var e=0,t=Object.values(this.entities);e<t.length;e++){var i=t[e];i.nameColour="",i.customScale=0}}},{key:"clearPlayers",value:function(e){for(var t=0,i=Object.values(this.entities);t<i.length;t++){var n=i[t];n.isPlayer()&&n.instance!==e.instance&&this.removeEntity(n)}}},{key:"getAll",value:function(){return this.entities}},{key:"forEachEntity",value:function(e){for(var t=0,i=Object.values(this.entities);t<i.length;t++){e(i[t])}}}]),e}(),yt=function(){function e(t,i,n,o,a){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;v(this,e),p(this,"opacity",1),p(this,"text",void 0),p(this,"prefix",void 0),p(this,"suffix",void 0),p(this,"lastTime",void 0),p(this,"speed",void 0),p(this,"updateY",void 0),p(this,"duration",void 0),p(this,"colour",void 0),p(this,"fill",void 0),p(this,"stroke",void 0),p(this,"destroyCallback",void 0),this.id=t,this.type=i,this.value=n,this.x=o,this.y=a,this.text="".concat(n),this.prefix="",this.suffix="",this.lastTime=0,this.speed=100,this.updateY=this.isHeal()?2:1,this.duration=this.isHeal()?400:1e3,this.colour=xe[i],s>-1&&(this.colour=we[s]),this.fill=this.colour.fill,this.stroke=this.colour.stroke,r&&this.hasInflicted()&&(this.fill=this.colour.inflicted.fill,this.stroke=this.colour.inflicted.stroke),this.isDamage()&&n<1&&(this.text="MISS"),(this.isPoison()||this.isFreezing())&&(this.prefix="--"),this.isPoints()&&(this.prefix="++"),this.isExperience()&&(this.prefix="+",this.suffix="EXP")}return k(e,[{key:"update",value:function(e){var t;e-this.lastTime>this.speed&&(this.y-=this.updateY,this.lastTime=e,this.opacity-=70/this.duration,this.opacity<0&&(null===(t=this.destroyCallback)||void 0===t||t.call(this,this.id)))}},{key:"getText",value:function(){return"".concat(this.prefix).concat(this.text," ").concat(this.suffix)}},{key:"isHeal",value:function(){return this.type===le.Heal}},{key:"isPoison",value:function(){return this.type===le.Poison}},{key:"isFreezing",value:function(){return this.type===le.Freezing}},{key:"isExperience",value:function(){return this.type===le.Experience||this.type===le.Profession}},{key:"isPoints",value:function(){return this.type===le.Heal||this.type===le.Mana}},{key:"isDamage",value:function(){return this.type===le.Normal||this.type===le.Stun||this.type===le.Critical}},{key:"hasInflicted",value:function(){return void 0!==this.colour.inflicted}},{key:"onDestroy",value:function(e){this.destroyCallback=e}}]),e}(),_t=function(){function e(){v(this,e),p(this,"infos",{})}return k(e,[{key:"create",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];r&&(i+=Be.randomInt(-16,16),n+=Be.randomInt(-10,10));var s=Be.createId(Date.now(),i,n);this.addInfo(new yt(s,e,t,i,n,o,a))}},{key:"addInfo",value:function(e){var t=this;this.infos[e.id]=e,e.onDestroy((function(e){return delete t.infos[e]}))}},{key:"isEmpty",value:function(){return 0===Object.keys(this.infos).length}},{key:"update",value:function(e){this.forEachInfo((function(t){return t.update(e)}))}},{key:"forEachInfo",value:function(e){for(var t=0,i=Object.values(this.infos);t<i.length;t++){e(i[t])}}}]),e}(),St=function(){function e(t){var i=this;v(this,e),p(this,"chatBox",document.querySelector("#chat")),p(this,"log",document.querySelector("#chat-log")),p(this,"input",document.querySelector("#chat-input")),p(this,"button",document.querySelector("#chat-button")),p(this,"fadingDuration",5e3),p(this,"fadingTimeout",void 0),this.game=t,this.button.addEventListener("click",(function(){return i.toggle()})),this.input.addEventListener("blur",(function(){return i.hide()}))}return k(e,[{key:"keyDown",value:function(e){if("Enter"===e&&""!==this.input.value)return this.send();"Escape"!==e&&"Enter"!==e||this.toggle()}},{key:"privateMessage",value:function(e){this.inputVisible()||(this.toggle(),this.input.value="/pm *".concat(e,"* "),this.input.focus())}},{key:"add",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.createElement(e,t);o.style.color=i||"white",n&&(o.style.fontWeight="bold"),this.log.append(o),this.log.scrollTop=this.log.scrollHeight,this.displayChatBox(),this.hideChatBox()}},{key:"createElement",value:function(e,t){var i=document.createElement("p");return i.innerHTML="".concat(e,"  ").concat(t),i}},{key:"send",value:function(){this.game.socket.send(ze.Chat,[this.input.value]),this.hide()}},{key:"toggle",value:function(){this.clearTimeout(),this.inputVisible()?this.hide():this.display()}},{key:"display",value:function(){this.button.classList.add("active"),this.inputVisible()?this.input.style.display="block":Be.fadeIn(this.input),this.displayChatBox(),this.input.focus(),this.input.value="",this.log.scrollTop=this.log.scrollHeight,Be.fadeIn(this.input)}},{key:"displayChatBox",value:function(){Be.fadeIn(this.chatBox)}},{key:"hide",value:function(){this.button.classList.remove("active"),this.hideChatBox(),this.input.blur(),this.input.value="",this.log.scrollTop=this.log.scrollHeight,Be.fadeOut(this.input)}},{key:"hideChatBox",value:function(){var e=this;this.clearTimeout(),this.fadingTimeout=window.setTimeout((function(){e.inputVisible()||Be.fadeOut(e.chatBox)}),this.fadingDuration)}},{key:"inputVisible",value:function(){return"block"===this.input.style.display}},{key:"clear",value:function(){this.inputVisible()&&this.toggle(),this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.fadingTimeout),window.clearTimeout(this.fadingTimeout),this.fadingTimeout=void 0}))}]),e}(),Ct=function(){function e(t){v(this,e),p(this,"hovering",void 0),p(this,"attackInfo",We("#attack-info")),p(this,"name",void 0),p(this,"details",void 0),p(this,"health",void 0),p(this,"updateCallback",void 0),this.input=t,this.name=this.attackInfo.find(".name"),this.details=this.attackInfo.find(".details"),this.health=this.attackInfo.find(".health"),this.onUpdate(this.handleUpdate.bind(this))}return k(e,[{key:"update",value:function(e){var t=this.name,i=this.health,n=this.details;if(!e||!this.validEntity(e))return this.hovering=void 0,this.hide();this.isVisible()||this.display(),this.hovering=e,t.html(e.name),this.hasHealth()?this.setHealth(e.hitPoints):(i.hide(),n.html(""))}},{key:"handleUpdate",value:function(e,t){this.hasHealth()&&this.hovering.instance===e&&(t<1?this.hide():this.setHealth(t))}},{key:"setHealth",value:function(e){if(this.hasHealth()){this.health.show();var t=this.hovering.maxHitPoints;this.health.css("width","".concat(Math.ceil(e/t*100)-10,"%")),this.details.html("".concat(e," / ").concat(t))}}},{key:"validEntity",value:function(e){return e.instance!==this.input.player.instance&&!e.isProjectile()}},{key:"hasHealth",value:function(){return!!this.hovering&&(this.hovering.isMob()||this.hovering.isPlayer())}},{key:"display",value:function(){this.attackInfo.fadeIn("fast")}},{key:"hide",value:function(){this.attackInfo.fadeOut("fast")}},{key:"isVisible",value:function(){return"block"===this.attackInfo.css("display")}},{key:"onUpdate",value:function(e){this.updateCallback=e}}]),e}(),Et=function(){function e(t){var i=this;v(this,e),p(this,"app",void 0),p(this,"map",void 0),p(this,"camera",void 0),p(this,"player",void 0),p(this,"friends",void 0),p(this,"interact",void 0),p(this,"inventory",void 0),p(this,"trade",void 0),p(this,"leaderboards",void 0),p(this,"LeaderboardsFooter",void 0),p(this,"guilds",void 0),p(this,"selectedCellVisible",!1),p(this,"keyMovement",!1),p(this,"targetVisible",!0),p(this,"selectedX",-1),p(this,"selectedY",-1),p(this,"cursor",void 0),p(this,"targetColour","rgba(255, 255, 255, 0.5)"),p(this,"cursors",{}),p(this,"lastMousePosition",{x:0,y:0}),p(this,"hovering",void 0),p(this,"mouse",{x:0,y:0}),p(this,"targetAnimation",new Me("move",4,0,16,16)),p(this,"chatHandler",void 0),p(this,"hud",void 0),p(this,"entity",void 0),p(this,"interactEntity",void 0),this.game=t,this.app=t.app,this.map=t.map,this.camera=t.camera,this.player=t.player,this.friends=t.menu.getFriends(),this.inventory=t.menu.getInventory(),this.interact=t.menu.getInteract(),this.trade=t.menu.getTrade(),this.leaderboards=t.menu.getLeaderboards(),this.LeaderboardsFooter=t.menu.getLeaderboards2(),this.guilds=t.menu.getGuilds(),this.chatHandler=new St(t),this.hud=new Ct(this),this.app.onLeftClick(this.handleLeftClick.bind(this)),this.app.onRightClick(this.handleRightClick.bind(this)),this.app.onKeyDown(this.handleKeyDown.bind(this)),this.app.onKeyUp(this.handleKeyUp.bind(this)),this.app.onMouseMove((function(e){i.game.started&&(i.setCoords(e),i.moveCursor())})),this.interact.onButton(this.handleInteract.bind(this)),this.interact.onClose((function(){return i.interactEntity=void 0})),this.friends.onMessage((function(e){return i.chatHandler.privateMessage(e)})),this.targetAnimation.setSpeed(150)}return k(e,[{key:"loadCursors",value:function(){this.cursors.hand=this.game.sprites.get("hand"),this.cursors.sword=this.game.sprites.get("sword"),this.cursors.loot=this.game.sprites.get("loot"),this.cursors.target=this.game.sprites.get("target"),this.cursors.arrow=this.game.sprites.get("arrow"),this.cursors.talk=this.game.sprites.get("talk"),this.cursors.spell=this.game.sprites.get("spell"),this.cursors.bow=this.game.sprites.get("bow"),this.cursors.axe=this.game.sprites.get("axe_cursor"),this.cursors.pickaxe=this.game.sprites.get("pickaxe_cursor"),this.cursors.cooking=this.game.sprites.get("cooking"),this.cursors.fishing=this.game.sprites.get("fishing"),this.cursors.smithing=this.game.sprites.get("smithing"),this.cursors.crafting=this.game.sprites.get("crafting"),this.cursors.foraging=this.game.sprites.get("foraging"),_.debug("Loaded Cursors!")}},{key:"handleLeftClick",value:function(e){if(this.setCoords(e),this.keyMovement=!1,this.player.disableAction=!1,this.isCtrlKey())return this.game.socket.send(ze.Command,[Z.CtrlClick,this.getCoords()]);this.move(this.getCoords())}},{key:"handleRightClick",value:function(e){this.setCoords(e);var t=this.getCoords(),i=this.game.searchForEntityAt(t);if(!i||i.instance===this.player.instance)return this.interact.hide();this.interact.show(this.mouse,i,this.game.pvp),this.interactEntity=i}},{key:"handleKeyDown",value:function(e){if(this.guilds.isVisible())return this.guilds.keyDown(e.key);if(this.leaderboards.isVisible())return this.leaderboards.keyDown(e.key);if(this.LeaderboardsFooter.isVisible())return this.LeaderboardsFooter.keyDown(e.key);if(this.trade.isInputDialogueVisible())return this.trade.keyDown(e.key);if(this.inventory.isDropDialogVisible())return this.inventory.keyDown(e.key);if(this.friends.isPopupActive())return this.friends.keyDown(e.key);if(this.chatHandler.inputVisible())return this.chatHandler.keyDown(e.key);var t;switch(e.key){case"w":case"":case"ArrowUp":return void(this.player.moveUp=!0);case"a":case"":case"ArrowLeft":return void(this.player.moveLeft=!0);case"s":case"":case"ArrowDown":return void(this.player.moveDown=!0);case"d":case"":case"ArrowRight":return void(this.player.moveRight=!0);case"Enter":return void this.chatHandler.toggle();case"i":return void this.game.menu.getInventory().toggle();case"m":return void this.game.menu.getWarp().toggle();case"p":return void this.game.menu.getProfile().toggle();case"h":this.game.menu.getInventory().selectEdible();break;case"t":if(!(t=this.game.entities.get(this.player.lastTarget)))return;return this.setAttackTarget(),this.setPosition(t.gridX,t.gridY),void this.player.follow(t);case"Escape":return this.game.menu.hide(),void(this.player.moving&&this.player.stop());case"+":case"=":return this.game.zoom(.2);case"-":case"_":return this.game.zoom(-.2);case"0":case")":return this.camera.setZoom(),this.game.zoom(0)}}},{key:"handleKeyUp",value:function(e){switch(e.key){case"w":case"ArrowUp":this.player.moveUp=!1;break;case"a":case"ArrowLeft":this.player.moveLeft=!1;break;case"s":case"ArrowDown":this.player.moveDown=!1;break;case"d":case"ArrowRight":this.player.moveRight=!1}this.player.disableAction=!1}},{key:"handleInteract",value:function(e){if(this.interactEntity){switch(e){case se.Attack:return this.move({x:this.interactEntity.x,y:this.interactEntity.y,gridX:this.interactEntity.gridX,gridY:this.interactEntity.gridY});case se.Trade:this.game.player.trade(this.interactEntity);break;case se.Follow:this.interactEntity instanceof et&&this.game.player.pursue(this.interactEntity);break;case se.Examine:this.game.socket.send(ze.Examine,[this.interactEntity.instance]);break;case se.AddFriend:this.game.socket.send(ze.Friends,{opcode:J.Add,username:this.interactEntity.name})}this.interact.hide()}}},{key:"keyMove",value:function(e){this.player.hasPath()||(this.keyMovement=!0,this.move(e))}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!this.keyMovement;if(!(this.player.stunned||this.player.teleporting||(this.setPassiveTarget(),this.player.disableAction||this.game.zoning.direction||this.game.map.isOutOfBounds(e.gridX,e.gridY)))){if(T()&&this.chatHandler.inputVisible()&&this.chatHandler.toggle(),this.game.menu.hide(),this.game.map.isObject(e.gridX,e.gridY))return this.player.setObjectTarget(e);if(this.player.removeTarget(),this.entity=this.getEntity(e,t),this.entity&&this.entity.instance!==this.player.instance&&(this.setAttackTarget(),this.isTargetable(this.entity)))return this.player.follow(this.entity),this.isAttackable(this.entity)&&this.entity.addAttacker(this.player),void(this.player.isRanged()&&this.game.socket.send(ze.Target,[A.Attack,this.entity.instance]));this.player.go(e.gridX,e.gridY)}}},{key:"moveCursor",value:function(){if(!T()){var e=this.getCoords(),t=this.game.searchForEntityAt(e);if((null==t?void 0:t.instance)!==this.player.instance){if(this.entity=this.getEntity(e),this.hud.update(this.entity),!this.entity){if(this.map.isObject(e.gridX,e.gridY)){var i=this.map.getTileCursor(e.gridX,e.gridY);return this.setCursor(this.cursors[i||"talk"]),void(this.hovering=he.Object)}return this.setCursor(this.cursors.hand),void(this.hovering=null)}switch(this.entity.updateSilhouette(!0),this.entity.type){case oe.Item:case oe.Chest:this.setCursor(this.cursors.loot),this.hovering=he.Item;break;case oe.Mob:this.setCursor(this.getAttackCursor()),this.hovering=he.Mob;break;case oe.NPC:this.setCursor(this.cursors.talk),this.hovering=he.NPC;break;case oe.Player:this.game.pvp&&(this.setCursor(this.getAttackCursor()),this.hovering=he.Player)}}}}},{key:"getEntity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t?this.game.searchForEntityAt(e):this.game.getEntityAt(e.gridX,e.gridY);return!this.entity||i&&i.instance===this.entity.instance||this.entity.updateSilhouette(!1),i}},{key:"saveMouse",value:function(){this.lastMousePosition.x=this.mouse.x,this.lastMousePosition.y=this.mouse.y}},{key:"setPosition",value:function(e,t){this.selectedX=e,this.selectedY=t}},{key:"setCursor",value:function(e){e&&(this.cursor=e)}},{key:"setPassiveTarget",value:function(){this.targetAnimation.setRow(0)}},{key:"setAttackTarget",value:function(){this.targetAnimation.setRow(1)}},{key:"setCoords",value:function(e){var t=this.game.renderer.background,i=t.width,n=t.height;this.mouse.x=e.x,this.mouse.y=e.y,this.mouse.x>=i?this.mouse.x=i-1:this.mouse.x<=0&&(this.mouse.x=0),this.mouse.y>=n?this.mouse.y=n-1:this.mouse.y<=0&&(this.mouse.y=0)}},{key:"getAttackCursor",value:function(){return this.player.isMagic()?this.cursors.spell:this.player.isRanged()?this.cursors.bow:this.cursors.sword}},{key:"getCoords",value:function(){var e=this.mouse.x%this.camera.zoomFactor,t=this.mouse.y%this.camera.zoomFactor,i=(this.mouse.x-e)/this.camera.zoomFactor+this.camera.x,n=(this.mouse.y-t)/this.camera.zoomFactor+this.camera.y;return{x:i,y:n,gridX:Math.floor(i/this.map.tileSize),gridY:Math.floor(n/this.map.tileSize)}}},{key:"getTargetData",value:function(){var e=this.game.sprites.get("target");if(e){var t=this.targetAnimation.frame,i=this.game.map.tileSize,n=this.game.camera.zoomFactor;return e.loaded||e.load(),{sprite:e,x:t.x,y:t.y,width:e.width,height:e.height,dx:this.selectedX*i*n,dy:this.selectedY*i*n,dw:e.width*n,dh:e.height*n}}}},{key:"isCtrlKey",value:function(){return window.event.ctrlKey}},{key:"isTargetable",value:function(e){return this.isAttackable(e)||e.isNPC()||e.isChest()}},{key:"isAttackable",value:function(e){return e.isMob()||e.isPlayer()&&this.game.pvp}},{key:"isMouseRendered",value:function(){return this.mouse.x===this.lastMousePosition.x&&this.mouse.y===this.lastMousePosition.y}}]),e}(),Tt=function(){function e(t,i,n){var o,a;v(this,e),p(this,"hideOnShow",!0),p(this,"container",void 0),p(this,"close",void 0),p(this,"button",void 0),p(this,"showCallback",void 0),this.containerName=t,this.closeButton=i,this.toggleButton=n,this.container=document.querySelector(this.containerName),this.close=document.querySelector(this.closeButton),this.button=document.querySelector(this.toggleButton),null===(o=this.close)||void 0===o||o.addEventListener("click",this.hide.bind(this)),null===(a=this.button)||void 0===a||a.addEventListener("click",this.toggle.bind(this))}return k(e,[{key:"batch",value:function(e){_.debug("Unimplemented menu batch() function.")}},{key:"synchronize",value:function(e){}},{key:"add",value:function(e,t,i,n){_.debug("Unimplemented menu add() function.")}},{key:"remove",value:function(e,t){_.debug("Unimplemented menu remove() function.")}},{key:"show",value:function(e,t,i,n,o,a){var r,s;null===(r=this.showCallback)||void 0===r||r.call(this),null===(s=this.button)||void 0===s||s.classList.add("active"),Be.fadeIn(this.container)}},{key:"hide",value:function(){var e;null===(e=this.button)||void 0===e||e.classList.remove("active"),Be.fadeOut(this.container)}},{key:"toggle",value:function(){this.isVisible()?this.hide():this.show()}},{key:"resize",value:function(){}},{key:"isVisible",value:function(){return"block"===this.container.style.display}},{key:"onShow",value:function(e){this.showCallback=e}}]),e}(),Yt=function(e){a(i,e);var t=s(i);function i(){var e;return v(this,i),p(c(e=t.call(this,"#action-container")),"page",document.querySelector("#action-page")),p(c(e),"list",document.querySelector("#action-page > ul")),p(c(e),"name",document.querySelector("#action-page > .action-item-name")),p(c(e),"description",document.querySelector("#action-page > .action-item-description")),p(c(e),"dropDialog",document.querySelector("#action-drop")),p(c(e),"dropCount",document.querySelector("#action-drop .dialog-count")),p(c(e),"dropAccept",document.querySelector("#action-drop .dialog-accept")),p(c(e),"dropCancel",document.querySelector("#action-drop .dialog-cancel")),p(c(e),"buttonCallback",void 0),p(c(e),"dropCallback",void 0),e.dropCancel.addEventListener("click",e.hideDropDialog.bind(c(e))),e.dropAccept.addEventListener("click",e.handleDrop.bind(c(e))),e}return k(i,[{key:"handleDrop",value:function(){var e,t=this.dropCount.valueAsNumber;this.dropCount.value="",this.hideDropDialog(),this.hide(),null===(e=this.dropCallback)||void 0===e||e.call(this,t)}},{key:"show",value:function(e,t,o,a,r,s){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";this.clear();var c,h=w(e);try{for(h.s();!(c=h.n()).done;){var u=c.value;this.add(u)}}catch(zn){h.e(zn)}finally{h.f()}if(this.name.innerHTML=t,l)this.description.innerHTML=l;else{this.description.innerHTML="";var p=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),m=document.createElement("div");if(p.id="action-description-attack",f.id="action-description-defense",g.id="action-description-bonuses",m.id="action-description-enchantments",p.innerHTML="<u>Attack Stats:</u> <br>\n                Crush: ".concat(o.crush," <br>\n                Slash: ").concat(o.slash," <br>\n                Stab: ").concat(o.stab," <br>\n                Archery: ").concat(o.archery," <br>\n                Magic: ").concat(o.magic," <br>"),f.innerHTML="<u>Defense Stats:</u> <br>\n                Crush: ".concat(a.crush," <br>\n                Slash: ").concat(a.slash," <br>\n                Stab: ").concat(a.stab," <br>\n                Archery: ").concat(a.archery," <br>\n                Magic: ").concat(a.magic," <br>"),g.innerHTML="<u>Bonuses:</u> <br>\n                Accuracy: ".concat(r.accuracy," <br>\n                Strength: ").concat(r.strength," <br>\n                Archery: ").concat(r.archery," <br>\n                Magic: ").concat(r.magic," <br>"),Object.keys(s).length>0)for(var v in m.innerHTML="<u>Enchantments:</u> <br>",s){var b=fe[v];m.innerHTML+="".concat(b,": ").concat(s[v].level," <br>")}this.description.append(p,f,g,m)}n(d(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.hideDropDialog()}},{key:"add",value:function(e){var t=this,i=document.querySelector(".action-".concat(e));i||((i=document.createElement("li")).classList.add("action-button","action-".concat(e)),this.list.append(i)),i.addEventListener("click",(function(i){var n;i.preventDefault(),null===(n=t.buttonCallback)||void 0===n||n.call(t,e)}))}},{key:"showDropDialog",value:function(){Be.fadeIn(this.dropDialog),Be.fadeOut(this.description),this.page.classList.add("dimmed"),this.dropCount.value="1",this.dropCount.focus()}},{key:"hideDropDialog",value:function(){Be.fadeOut(this.dropDialog),Be.fadeIn(this.description),this.page.classList.remove("dimmed")}},{key:"clear",value:function(){this.list.innerHTML=""}},{key:"onButton",value:function(e){this.buttonCallback=e}},{key:"onDrop",value:function(e){this.dropCallback=e}}]),i}(Tt),It=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#inventory",void 0,"#inventory-button")),"list",document.querySelector("#inventory-container > ul")),p(c(n),"selectedSlot",-1),p(c(n),"selectCallback",void 0),p(c(n),"batchCallback",void 0),n.actions=e,n.load(),n.actions.onButton((function(e){return n.handleAction(e)})),n.actions.onDrop((function(e){return n.handleDrop(e)})),n}return k(i,[{key:"load",value:function(){if(!this.list)return _.error("Could not create the skeleton for the inventory.");for(var e=0;e<Te;e++)this.list.append(this.createSlot(e))}},{key:"keyDown",value:function(e){switch(e){case"Escape":return this.actions.hideDropDialog();case"Enter":return this.actions.handleDrop()}}},{key:"handleAction",value:function(e){var t;if(e===se.DropMany)return this.actions.showDropDialog();null===(t=this.selectCallback)||void 0===t||t.call(this,Be.getContainerAction(e),this.selectedSlot,1),this.actions.hide()}},{key:"handleDrop",value:function(e){var t;return null===(t=this.selectCallback)||void 0===t?void 0:t.call(this,D.Remove,this.selectedSlot,e)}},{key:"batch",value:function(e){var t,i,n=w(e);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.key&&this.setSlot(o)}}catch(zn){n.e(zn)}finally{n.f()}null===(t=this.batchCallback)||void 0===t||t.call(this)}},{key:"add",value:function(e){this.setSlot(e)}},{key:"remove",value:function(e){this.setSlot(e)}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getElement(e);if(this.isEmpty(i))return this.actions.hide();if(this.selectedSlot=e,t)return i.edible?this.handleAction(se.Eat):(i.equippable||i.interactable)&&this.handleAction(se.Equip),void this.actions.hide();var n=[];i.edible&&n.push(se.Eat),i.interactable&&n.push(se.Eat2),i.equippable&&n.push(se.Equip),n.push(se.DropOne),i.count>1&&n.push(se.DropMany),this.actions.show(n,i.name,i.attackStats,i.defenseStats,i.bonuses,i.enchantments,i.description)}},{key:"selectEdible",value:function(){var e=this.getFirstEdible();-1!==e&&(this.selectedSlot=e,this.handleAction(se.Eat))}},{key:"swap",value:function(e,t){var i;null===(i=this.selectCallback)||void 0===i||i.call(this,D.Swap,e,t),this.selectedSlot=-1}},{key:"setSlot",value:function(e){var t=this.getElement(e.index);if(!t)return _.error("Could not find slot element at: ".concat(e.index));var i=t.querySelector(".item-image"),n=t.querySelector(".item-count");if(!i)return _.error("Could not find image element at: ".concat(e.index));n&&(n.textContent=Be.getCount(e.count)),i.style.backgroundImage=e.key?Be.getImageURL(e.key):"",t.dataset.key=e.key,t.dataset.count="".concat(e.count),t.edible=e.edible,t.interactable=e.interactable,t.equippable=e.equippable,t.name=e.name,t.count=e.count,t.description=this.formatDescription(e.name,e.count,e.description),t.attackStats=e.attackStats,t.defenseStats=e.defenseStats,t.bonuses=e.bonuses,t.enchantments=e.enchantments}},{key:"createSlot",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");return n.dataset.index="".concat(e),n.classList.add("item-slot"),o.classList.add("item-image"),a.classList.add("item-count"),n.append(o),n.append(a),i.append(n),i.addEventListener("click",(function(){return t.select(e)})),i.addEventListener("dblclick",(function(){return t.select(e,!0)})),Re(n,this.handleHold.bind(this),(function(){return t.isEmpty(t.getElement(e))})),i}},{key:"handleHold",value:function(e,t){var i,n,o=null==e||null===(i=e.dataset)||void 0===i?void 0:i.index,a=null==t||null===(n=t.dataset)||void 0===n?void 0:n.index;o&&a&&this.swap(parseInt(o),parseInt(a))}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.selectedSlot=-1,this.actions.hide()}},{key:"formatDescription",value:function(e,t,i){return t<1e3?i:"".concat(i," You have a stack of ").concat(t.toLocaleString("en-US")," ").concat(e.toLowerCase(),". ")}},{key:"isEmpty",value:function(e){var t=e.querySelector(".item-image");return!t||""===t.style.backgroundImage}},{key:"isDropDialogVisible",value:function(){return"block"===this.actions.dropDialog.style.display}},{key:"getElement",value:function(e){return this.list.children[e].querySelector("div")}},{key:"getCount",value:function(e){var t;return(null===(t=this.getElement(e))||void 0===t?void 0:t.count)||0}},{key:"getFirstEdible",value:function(){for(var e=0;e<this.list.children.length;e++){if(this.getElement(e).edible)return e}return-1}},{key:"forEachSlot",value:function(e){for(var t=0;t<this.list.children.length;t++)e(t,this.getElement(t))}},{key:"onSelect",value:function(e){this.selectCallback=e}},{key:"onBatch",value:function(e){this.batchCallback=e}}]),i}(Tt),Xt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#bank","#close-bank")),"bankList",document.querySelector("#bank-slot > ul")),p(c(n),"inventoryList",document.querySelector("#bank-inventory-slots > ul")),p(c(n),"selectCallback",void 0),n.inventory=e,n.load(),n}return k(i,[{key:"load",value:function(){if(!this.bankList)return _.error("[Bank] Could not find the bank slot list.");if(!this.inventoryList)return _.error("[Bank] Could not find the inventory slot list.");for(var e=0;e<Ye;e++){var t=this.draggableSlot(e,ie.Bank,ie.Inventory);this.bankList.append(t)}for(var i=0;i<Te;i++){var n=this.draggableSlot(i,ie.Inventory,ie.Bank);this.inventoryList.append(n)}this.inventory.onBatch(this.synchronize.bind(this))}},{key:"draggableSlot",value:function(e,t,i){var n=this,o=Be.createSlot(t,e,(function(){return n.select(t,e,i)}));return Re(o.querySelector(".item-slot"),this.handleHold.bind(this),(function(){return n.inventory.isEmpty(n.getElement(e,t))})),o}},{key:"handleHold",value:function(e,t){var i,n,o,a,r=null==e||null===(i=e.dataset)||void 0===i?void 0:i.type,s=null==e||null===(n=e.dataset)||void 0===n?void 0:n.index,l=null==t||null===(o=t.dataset)||void 0===o?void 0:o.type,c=null==t||null===(a=t.dataset)||void 0===a?void 0:a.index;r&&s&&l&&c&&this.select(parseInt(r),parseInt(s),parseInt(l),parseInt(c))}},{key:"select",value:function(e,t,i,n){var o;null===(o=this.selectCallback)||void 0===o||o.call(this,e,t,i,n)}},{key:"setSlot",value:function(e){var t=this.getBankElement(e.index).querySelector(".item-image"),i=this.getBankElement(e.index).querySelector(".item-count");t.style.backgroundImage=Be.getImageURL(e.key),i.textContent=Be.getCount(e.count)}},{key:"synchronize",value:function(){var e=this;this.isVisible()&&this.inventory.forEachSlot((function(t,i){var n=e.getInventoryElement(t),o=n.querySelector(".item-image"),a=n.querySelector(".item-count"),r=i.querySelector(".item-image");r&&(o.style.backgroundImage=r.style.backgroundImage,a.textContent=i.textContent)}))}},{key:"batch",value:function(e){var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.key&&this.setSlot(n)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"add",value:function(e){this.setSlot(e)}},{key:"remove",value:function(e){this.setSlot(e)}},{key:"show",value:function(e){n(d(i.prototype),"show",this).call(this),this.synchronize();var t,o=w(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;this.setSlot(a)}}catch(zn){o.e(zn)}finally{o.f()}}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this)}},{key:"getElement",value:function(e,t){return t===ie.Bank?this.getBankElement(e):this.getInventoryElement(e)}},{key:"getBankElement",value:function(e){return this.bankList.children[e].querySelector("div")}},{key:"getInventoryElement",value:function(e){return this.inventoryList.children[e].querySelector("div")}},{key:"onSelect",value:function(e){this.selectCallback=e}}]),i}(Tt),zt=function(e){a(i,e);var t=s(i);function i(e){var n;v(this,i),p(c(n=t.call(this,"#store","#close-store")),"key",""),p(c(n),"currency","gold"),p(c(n),"selectedIndex",-1),p(c(n),"selectedCount",-1),p(c(n),"selectedBuyIndex",-1),p(c(n),"storeContainer",document.querySelector("#store-container")),p(c(n),"storeHelp",document.querySelector("#store-help")),p(c(n),"confirmSell",document.querySelector("#confirm-sell")),p(c(n),"sellSlot",document.querySelector("#store-sell-slot")),p(c(n),"sellSlotText",document.querySelector("#store-sell-slot-text")),p(c(n),"sellSlotReturn",document.querySelector("#store-sell-slot-return")),p(c(n),"sellSlotReturnText",document.querySelector("#store-sell-slot-return-text")),p(c(n),"storeList",document.querySelector("#store-container")),p(c(n),"inventoryList",document.querySelector("#store-inventory-slots")),p(c(n),"buyDialog",document.querySelector("#store-buy")),p(c(n),"buyCount",document.querySelector("#store-buy .dialog-count")),p(c(n),"buyAccept",document.querySelector("#store-buy .dialog-accept")),p(c(n),"buyCancel",document.querySelector("#store-buy .dialog-cancel")),p(c(n),"selectCallback",void 0),n.inventory=e,n.resize(),n.sellSlot.addEventListener("click",n.synchronize.bind(c(n))),n.confirmSell.addEventListener("click",n.sell.bind(c(n))),n.buyCancel.addEventListener("click",n.hideBuyDialog.bind(c(n))),n.buyAccept.addEventListener("click",n.handleBuy.bind(c(n)));for(var o=0;o<Te;o++)n.inventoryList.append(Be.createSlot(ie.Inventory,o,n.select.bind(c(n))));return n}return k(i,[{key:"resize",value:function(){var e=T()?"Long tap":"Right click";this.storeHelp.textContent="".concat(e," to buy multiple items.")}},{key:"update",value:function(e){this.clear(),this.key=e.key,this.currency=e.currency;for(var t=0;t<e.items.length;t++)this.storeList.append(this.createStoreItem(e.items[t],t))}},{key:"select",value:function(e,t){var i;null===(i=this.selectCallback)||void 0===i||i.call(this,G.Select,this.key,t)}},{key:"sell",value:function(){var e;null===(e=this.selectCallback)||void 0===e||e.call(this,G.Sell,this.key,this.selectedIndex,this.selectedCount)}},{key:"buy",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null===(t=this.selectCallback)||void 0===t||t.call(this,G.Buy,this.key,e,i)}},{key:"handleBuy",value:function(){this.buy(this.selectedBuyIndex,this.buyCount.valueAsNumber),this.hideBuyDialog()}},{key:"showBuyDialog",value:function(){Be.fadeIn(this.buyDialog),this.storeContainer.classList.add("dimmed"),this.buyCount.value="1",this.buyCount.focus()}},{key:"hideBuyDialog",value:function(){Be.fadeOut(this.buyDialog),this.storeContainer.classList.remove("dimmed")}},{key:"synchronize",value:function(){var e=this;this.isVisible()&&(this.clearSellSlot(),this.inventory.forEachSlot((function(t,i){var n=e.getElement(t).querySelector(".item-image"),o=e.getElement(t).querySelector(".item-count"),a=i.querySelector(".item-image");a&&(n.style.backgroundImage=a.style.backgroundImage,o.textContent=i.textContent)})))}},{key:"show",value:function(e){n(d(i.prototype),"show",this).call(this),this.update(e),this.synchronize()}},{key:"clear",value:function(){this.key="",this.currency="gold",this.storeList.innerHTML=""}},{key:"clearSellSlot",value:function(){this.selectedIndex=-1,this.selectedCount=-1,this.sellSlot.style.backgroundImage="",this.sellSlotText.textContent="",this.sellSlotReturn.style.backgroundImage="",this.sellSlotReturnText.textContent=""}},{key:"move",value:function(e){if(e.key!==this.key)return _.error("Invalid store key provided for the select.");this.synchronize();var t=this.getElement(e.item.index).querySelector(".item-image"),i=this.getElement(e.item.index).querySelector(".item-count");if(!t||!i)return _.error("[Store] Could not find image and count elements.");this.sellSlot.style.backgroundImage=t.style.backgroundImage,this.sellSlotText.textContent=i.textContent,this.sellSlotReturn.style.backgroundImage=Be.getImageURL(this.currency),this.sellSlotReturnText.textContent=e.item.price.toString()||"",t.style.backgroundImage="",i.textContent="",this.selectedIndex=e.item.index,this.selectedCount=e.item.count}},{key:"createStoreItem",value:function(e,t){var i=this,n=document.createElement("li"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");return n.classList.add("store-item"),o.classList.add("store-item-image"),a.classList.add("store-item-name","stroke"),r.classList.add("store-item-count","stroke"),s.classList.add("store-item-price","stroke"),-1!==e.count&&(r.textContent="x".concat(e.count.toString())),a.textContent=e.name,s.textContent="".concat(e.price.toString()).concat(this.currency[0]),o.style.backgroundImage=Be.getImageURL(e.key),n.addEventListener("click",(function(){return i.buy(t)})),Pe(n,(function(){i.selectedBuyIndex=t,i.showBuyDialog()})),n.append(o,a,r,s),n}},{key:"getElement",value:function(e){return this.inventoryList.children[e].querySelector("div")}},{key:"onSelect",value:function(e){this.selectCallback=e}}]),i}(Tt),At=function(){function e(t){v(this,e),p(this,"health",document.querySelector("#health")),p(this,"healthBar",document.querySelector("#health-bar")),p(this,"mana",document.querySelector("#mana")),p(this,"manaBar",document.querySelector("#mana-bar")),p(this,"healthText",document.querySelector("#health-bar-text")),p(this,"manaText",document.querySelector("#mana-bar-text")),this.player=t,this.player.onHitPoints(this.handleHitPoints.bind(this)),this.player.onMana(this.handleMana.bind(this)),this.player.onPoison(this.handlePoison.bind(this))}return k(e,[{key:"handleHitPoints",value:function(e,t,i){this.setPoints(this.health,this.healthBar,this.healthText,e,t,i)}},{key:"handleMana",value:function(e,t){this.setPoints(this.mana,this.manaBar,this.manaText,e,t)}},{key:"handlePoison",value:function(e){this.health.style.background=e?"linear-gradient(to right, #046E20, #19B047)":"linear-gradient(to right, #f00, #ef5a5a)"}},{key:"resize",value:function(){this.handleHitPoints(this.player.hitPoints,this.player.maxHitPoints),this.handleMana(this.player.mana,this.player.maxMana)}},{key:"setPoints",value:function(e,t,i,n,o,a){var r=n/o;e.style.width="".concat(Math.floor(t.offsetWidth*r).toString(),"px"),i.textContent="".concat(n,"/").concat(o),a&&this.flash(this.player.poison?"poison":"white")}},{key:"flash",value:function(e){var t=this;this.health.classList.add(e),window.setTimeout((function(){return t.health.classList.remove(e)}),500)}}]),e}();function Lt(e,t){var i;null!==(i=Ve)&&void 0!==i||(Ve=document.createElement("div"));var n=e.getBoundingClientRect();Ve.classList.add("bubble"),Ve.textContent=t,document.querySelector("#bubbles").append(Ve),Ve.style.padding="5px 10px",Ve.style.left="".concat(n.left+n.width/2-Ve.offsetWidth/2,"px"),Ve.style.top="".concat(n.top-Ve.offsetHeight,"px"),e.addEventListener("blur",(function(){return Ve.remove()})),e.addEventListener("mouseout",(function(){return Ve.remove()})),e.addEventListener("mouseleave",(function(){return Ve.remove()})),e.addEventListener("touchend",(function(t){t.target!==e&&Ve.remove()})),e.addEventListener("touchcancel",(function(t){t.target!==e&&Ve.remove()})),document.addEventListener("touchend",(function(t){t.target!==e&&Ve.remove()})),document.addEventListener("touchcancel",(function(t){t.target!==e&&Ve.remove()}))}var qt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#state-page")),"level",document.querySelector("#profile-level")),p(c(n),"experience",document.querySelector("#profile-experience")),p(c(n),"attackStyleList",document.querySelector("#attack-style-list")),p(c(n),"weapon",document.querySelector("#state-page > .weapon-slot")),p(c(n),"weaponSkin",document.querySelector("#state-page > .weapon-skin-slot")),p(c(n),"armour",document.querySelector("#state-page > .armour-slot")),p(c(n),"armourSkin",document.querySelector("#state-page > .armour-skin-slot")),p(c(n),"pendant",document.querySelector("#state-page > .pendant-slot")),p(c(n),"ring",document.querySelector("#state-page > .ring-slot")),p(c(n),"boots",document.querySelector("#state-page > .boots-slot")),p(c(n),"arrow",document.querySelector("#state-page > .arrows-slot")),p(c(n),"unequipCallback",void 0),p(c(n),"styleCallback",void 0),n.player=e,n.weapon.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Weapon)})),n.weaponSkin.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.WeaponSkin)})),n.armour.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Armour)})),n.armourSkin.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.ArmourSkin)})),n.pendant.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Pendant)})),n.ring.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Ring)})),n.boots.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Boots)})),n.arrow.addEventListener("click",(function(){var e,t;return null===(e=(t=n).unequipCallback)||void 0===e?void 0:e.call(t,ce.Arrows)})),n}return k(i,[{key:"synchronize",value:function(){this.level.textContent="Level ".concat(this.player.level),this.experience.textContent="".concat(this.player.getTotalExperience()),this.weapon.style.backgroundImage=Be.getImageURL(this.player.getWeapon().key),this.weaponSkin.style.backgroundImage=Be.getImageURL(this.player.getWeaponSkin().key),this.armour.style.backgroundImage=Be.getImageURL("clotharmor"===this.player.getArmour().key?"":this.player.getArmour().key),this.armourSkin.style.backgroundImage=Be.getImageURL(this.player.getArmourSkin().key),this.pendant.style.backgroundImage=Be.getImageURL(this.player.getPendant().key),this.ring.style.backgroundImage=Be.getImageURL(this.player.getRing().key),this.boots.style.backgroundImage=Be.getImageURL(this.player.getBoots().key),this.arrow.style.backgroundImage=Be.getImageURL(this.player.getArrows().key),this.loadAttackStyles()}},{key:"loadAttackStyles",value:function(){this.attackStyleList.innerHTML="";var e,t=w(this.player.getWeapon().attackStyles);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.attackStyleList.append(this.createStyle(i))}}catch(zn){t.e(zn)}finally{t.f()}}},{key:"createStyle",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("div");return i.classList.add("attack-style-box"),function(e,t){e.addEventListener("focus",(function(){return Lt(e,t)})),e.addEventListener("mouseover",(function(){return Lt(e,t)})),e.addEventListener("mouseenter",(function(){return Lt(e,t)})),e.addEventListener("touchstart",(function(){return Lt(e,t)}))}(i,this.getTooltip(e)),n.classList.add("attack-style","attack-style-".concat(de[e].toLowerCase())),e===this.player.getWeapon().attackStyle&&i.classList.add("active"),i.append(n),i.addEventListener("click",(function(){var i;return null===(i=t.styleCallback)||void 0===i?void 0:i.call(t,e)})),i}},{key:"getTooltip",value:function(e){switch(e){case de.Stab:return"Stab (Accuracy EXP)";case de.Slash:return"Slash (Strength EXP)";case de.Defensive:return"Defensive (Defense EXP)";case de.Crush:return"Crush (Accuracy + Strength EXP)";case de.Shared:return"Shared (Accuracy + Strength + Defense EXP)";case de.Hack:return"Hack (Strength + Defense EXP)";case de.Chop:return"Chop (Accuracy + Defense EXP)";case de.Accurate:return"Accurate (Increased Accuracy)";case de.Fast:return"Fast (Increased Speed)";case de.Focused:return"Focused (Increased Damage)";case de.LongRange:return"Long Range"}return"Report as bug if you see this :)"}},{key:"onUnequip",value:function(e){this.unequipCallback=e}},{key:"onStyle",value:function(e){this.styleCallback=e}}]),i}(Tt),Dt=function(e){a(i,e);var t=s(i);function i(e){var n;v(this,i),p(c(n=t.call(this,"#abilities-page")),"activeAbilities",document.querySelector("#active-abilities")),p(c(n),"passiveAbilities",document.querySelector("#passive-abilities")),p(c(n),"abilityBar",document.querySelector("#ability-shortcut")),p(c(n),"draggedElement",""),p(c(n),"selectCallback",void 0),n.player=e;for(var o=function(e){n.activeAbilities.children[e].addEventListener("click",(function(){return n.handleAction(e)}))},a=0;a<n.activeAbilities.children.length;a++)o(a);for(var r=function(e){var t=n.abilityBar.children[e];t.draggable=!0,t.addEventListener("dragover",(function(e){return n.dragOver(e)})),t.addEventListener("drop",(function(t){return n.dragDrop(t,e)}))},s=0;s<n.abilityBar.children.length;s++)r(s);return n}return k(i,[{key:"synchronize",value:function(){this.hideAll();for(var e=0,t=0,i=0,n=Object.values(this.player.abilities);i<n.length;i++){var o=n[i];switch(o.type){case ae.Active:this.setActiveAbility(e,o.key,o.level,o.active),e++;break;case ae.Passive:this.setPassiveAbility(t,o.key,o.level),t++}}}},{key:"handleAction",value:function(e){var t,i=this.activeAbilities.children[e];"none"!==i.style.display&&i.key&&(null===(t=this.selectCallback)||void 0===t||t.call(this,P.Use,i.key))}},{key:"dragStart",value:function(e){this.draggedElement=e}},{key:"dragDrop",value:function(e,t){var i;null===(i=this.selectCallback)||void 0===i||i.call(this,P.QuickSlot,this.draggedElement,t),this.draggedElement=""}},{key:"dragOver",value:function(e){e.target&&e.target.draggable&&e.preventDefault()}},{key:"dragLeave",value:function(e){}},{key:"setAbility",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.innerHTML="",e.className="ability",e.style.display="block";var a=document.createElement("div");a.classList.add("ability-icon"),a.classList.add("ability-icon-".concat(t)),a.draggable=!0,o||(a.addEventListener("dragleave",(function(e){return i.dragLeave(e)})),a.addEventListener("dragstart",(function(){return i.dragStart(t)}))),n>4&&(n=4),n<1&&(n=1);for(var r=0;r<n;r++){var s=document.createElement("div");s.classList.add("ability-level"),s.classList.add("ability-level".concat(r+1)),e.append(s,a)}}},{key:"setActiveAbility",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.activeAbilities.children[e];if(!o)return _.error("Could not find ability with index ".concat(e,", key: ").concat(t,"."));if(!t)return this.hideAbility(o);this.setAbility(o,t,i),o.key=t;var a=o.querySelector(".ability-icon");a&&(n?a.classList.add("active"):a.classList.remove("active"))}},{key:"setPassiveAbility",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.passiveAbilities.children[e];return n?t?void this.setAbility(n,t,i,!0):this.hideAbility(n):_.error("Could not find ability with index ".concat(e,", key: ").concat(t,"."))}},{key:"hideAbility",value:function(e){e.style.display="none"}},{key:"hideAll",value:function(){var e,t=w(this.activeAbilities.children);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.hideAbility(i)}}catch(zn){t.e(zn)}finally{t.f()}var n,o=w(this.passiveAbilities.children);try{for(o.s();!(n=o.n()).done;){var a=n.value;this.hideAbility(a)}}catch(zn){o.e(zn)}finally{o.f()}}},{key:"onSelect",value:function(e){this.selectCallback=e}}]),i}(Tt),Pt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#skills-page")),"list",document.querySelector("#skills-list > ul")),p(c(n),"info",document.querySelector("#profile-info")),p(c(n),"selectedSkill",void 0),p(c(n),"loaded",!1),n.player=e,n}return k(i,[{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==Object.keys(this.player.skills).length){e&&(this.list.innerHTML="");for(var t=0,i=pe;t<i.length;t++){var n=i[t],o=this.player.skills[n],a=this.get(o.name);a||(a=this.createElement(o),this.list.append(a)),this.update(a,o)}this.isInfoVisible()&&this.showInfo()}}},{key:"show",value:function(){n(d(i.prototype),"show",this).call(this),this.loaded||(this.loaded=!0,this.synchronize())}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.hideInfo()}},{key:"hideInfo",value:function(){Be.fadeOut(this.info)}},{key:"createElement",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");return i.classList.add("skill"),n.classList.add("skill-level","stroke"),o.classList.add("skill-image","skill-image-".concat(e.name.toLowerCase())),a.classList.add("skill-experience"),i.append(n,a,o),i.name=e.name,i.level=e.level,i.percentage=e.percentage,i.addEventListener("click",(function(){return t.showInfo(e)})),i}},{key:"showInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedSkill;Be.fadeIn(this.info);var t=this.info.querySelector(".profile-info-skill-image"),i=this.info.querySelector(".profile-info-title"),n=this.info.querySelector(".profile-info-details");t.className="profile-info-skill-image skill-image-".concat(e.name.toLowerCase()),i.innerHTML=e.name,n.innerHTML="\n            <p><span>Level:</span> ".concat(e.level,"</p>\n            <br>\n            <p><span>Exp:</span> ").concat(e.experience,"</p>\n            <br>\n            <p><span>Next Exp:</span> ").concat(e.nextExperience,"</p>\n            <br>\n            <p><span>Percent:</span> ").concat((100*e.percentage).toFixed(3),"%</p>\n        "),this.selectedSkill=e}},{key:"update",value:function(e,t){var i=e.querySelector(".skill-level"),n=e.querySelector(".skill-experience");i.innerHTML="".concat(t.level,"/").concat(Ee),e.originalWidth||0===n.offsetWidth||(e.originalWidth=n.offsetWidth),e.originalWidth&&(n.style.width="".concat(e.originalWidth*t.percentage,"px"),e.level=t.level,e.percentage=t.percentage)}},{key:"get",value:function(e){var t,i=w(this.list.children);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.name===e)return n}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"isInfoVisible",value:function(){return"block"===this.info.style.display}}]),i}(Tt),Rt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#profile-dialog",void 0,"#profile-button")),"state",void 0),p(c(n),"skills",void 0),p(c(n),"abilities",void 0),p(c(n),"pages",[]),p(c(n),"activePage",0),p(c(n),"previous",document.querySelector("#profile-navigator > .previous")),p(c(n),"next",document.querySelector("#profile-navigator > .next")),p(c(n),"unequipCallback",void 0),p(c(n),"attackStyleCallback",void 0),p(c(n),"abilityCallback",void 0),n.player=e,n.state=new qt(n.player),n.skills=new Pt(n.player),n.abilities=new Dt(n.player),n.pages.push(n.state,n.skills,n.abilities),n.update(),n.previous.addEventListener("click",(function(){return n.handleNavigation("previous")})),n.next.addEventListener("click",(function(){return n.handleNavigation("next")})),n.state.onUnequip((function(e){var t,i;return null===(t=(i=n).unequipCallback)||void 0===t?void 0:t.call(i,e)})),n.state.onStyle((function(e){var t,i;return null===(t=(i=n).attackStyleCallback)||void 0===t?void 0:t.call(i,e)})),n.abilities.onSelect((function(e,t,i){var o,a;return null===(o=(a=n).abilityCallback)||void 0===o?void 0:o.call(a,e,t,i)})),n}return k(i,[{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.skills.hideInfo()}},{key:"handleNavigation",value:function(e){var t;this.isDisabled(e)||(this.previous.classList.remove("disabled"),this.next.classList.remove("disabled"),null===(t=this.pages[this.activePage])||void 0===t||t.hide(),this.activePage+="previous"===e?-1:1,this.update())}},{key:"update",value:function(){var e;this.activePage<=0&&(this.activePage=0,this.previous.classList.add("disabled")),this.activePage>=this.pages.length-1&&(this.activePage=this.pages.length-1,this.next.classList.add("disabled")),null===(e=this.pages[this.activePage])||void 0===e||e.show()}},{key:"synchronize",value:function(){this.forEachPage((function(e){return e.synchronize()}))}},{key:"resize",value:function(){this.skills.synchronize(!0)}},{key:"isDisabled",value:function(e){return"previous"===e&&this.previous.classList.contains("disabled")||"next"===e&&this.next.classList.contains("disabled")}},{key:"forEachPage",value:function(e){var t,i=w(this.pages);try{for(i.s();!(t=i.n()).done;){e(t.value)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"onUnequip",value:function(e){this.unequipCallback=e}},{key:"onAttackStyle",value:function(e){this.attackStyleCallback=e}},{key:"onAbility",value:function(e){this.abilityCallback=e}}]),i}(Tt),Mt=function(e){a(i,e);var t=s(i);function i(e){var n;v(this,i),p(c(n=t.call(this,"#enchant","#close-enchant")),"list",document.querySelector("#enchant-inventory-slots")),p(c(n),"selectedItem",document.querySelector("#enchant-selected-item")),p(c(n),"selectedShards",document.querySelector("#enchant-shards")),p(c(n),"selectedShardsCount",document.querySelector("#shards-count")),p(c(n),"confirmButton",document.querySelector("#confirm-enchant")),p(c(n),"selectedSlot",-1),p(c(n),"selectedShard",-1),p(c(n),"selectCallback",void 0),p(c(n),"confirmCallback",void 0),n.inventory=e,n.selectedItem.addEventListener("click",n.clear.bind(c(n))),n.selectedShards.addEventListener("click",n.clear.bind(c(n))),n.confirmButton.addEventListener("click",n.confirm.bind(c(n)));for(var o=0;o<Te;o++)n.list.append(Be.createSlot(ie.Inventory,o,n.select.bind(c(n))));return n}return k(i,[{key:"synchronize",value:function(){var e=this;this.isVisible()&&(this.clearSelections(),this.inventory.forEachSlot((function(t,i){var n=e.getElement(t).querySelector(".item-image"),o=e.getElement(t).querySelector(".item-count"),a=i.querySelector(".item-image");a&&(n.style.backgroundImage=a.style.backgroundImage,o.textContent=i.textContent)})))}},{key:"show",value:function(){n(d(i.prototype),"show",this).call(this),this.synchronize()}},{key:"confirm",value:function(){var e;-1!==this.selectedSlot&&-1!==this.selectedShard&&(null===(e=this.confirmCallback)||void 0===e||e.call(this,this.selectedSlot,this.selectedShard))}},{key:"select",value:function(e,t){var i;null===(i=this.selectCallback)||void 0===i||i.call(this,t)}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getElement(e).querySelector(".item-image"),n=this.getElement(e).querySelector(".item-count");if(-1!==this.selectedSlot&&!t){var o=this.getElement(this.selectedSlot),a=o.querySelector(".item-image");a.style.backgroundImage=this.selectedItem.style.backgroundImage}if(-1!==this.selectedShard&&t){var r=this.getElement(this.selectedShard),s=r.querySelector(".item-image"),l=r.querySelector(".item-count");s.style.backgroundImage=this.selectedShards.style.backgroundImage,l.textContent=this.selectedShardsCount.textContent}t?this.selectedShard=e:this.selectedSlot=e,(t?this.selectedShards:this.selectedItem).style.backgroundImage=i.style.backgroundImage,t&&(this.selectedShardsCount.textContent=n.textContent),i.style.backgroundImage="",n.textContent=""}},{key:"clear",value:function(){this.clearSelections(),this.synchronize()}},{key:"clearSelections",value:function(){this.selectedSlot=-1,this.selectedShard=-1,this.selectedItem.style.backgroundImage="",this.selectedShards.style.backgroundImage="",this.selectedShardsCount.textContent=""}},{key:"getElement",value:function(e){return this.list.children[e].querySelector("div")}},{key:"onSelect",value:function(e){this.selectCallback=e}},{key:"onConfirm",value:function(e){this.confirmCallback=e}}]),i}(Tt),Nt=function(e){a(i,e);var t=s(i);function i(e){var n;v(this,i),p(c(n=t.call(this,"#map-frame","#close-map-frame","#warp-button")),"list",document.querySelectorAll(".map-button")),p(c(n),"selectCallback",void 0),n.socket=e;var o,a=w(n.list);try{var r=function(){var e=o.value;e.addEventListener("click",(function(){return n.handleWarp(e)}))};for(a.s();!(o=a.n()).done;)r()}catch(zn){a.e(zn)}finally{a.f()}return n}return k(i,[{key:"handleWarp",value:function(e){var t,i=parseInt(e.id.replace("warp",""));if(isNaN(i))return _.error("Invalid warp element clicked.");null===(t=this.selectCallback)||void 0===t||t.call(this,i),this.hide()}},{key:"onSelect",value:function(e){this.selectCallback=e}}]),i}(Tt),Ot=function(e){a(i,e);var t=s(i);function i(){var e;return v(this,i),p(c(e=t.call(this,"#notification")),"title",document.querySelector("#notification-text-title")),p(c(e),"description",document.querySelector("#notification-text-description")),p(c(e),"timeout",void 0),e}return k(i,[{key:"show",value:function(e,t,i){var n=this;if(this.isVisible())return this.hide(!1),void window.setTimeout((function(){return n.show(e,t,i)}),700);this.container.classList.add("active"),this.setPosition(),this.title.style.color=i,this.title.innerHTML=e,this.description.innerHTML=t,clearTimeout(this.timeout),this.timeout=window.setTimeout((function(){return n.hide(!1)}),7e3)}},{key:"hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e||(this.container.classList.remove("active"),this.container.style.top="100%")}},{key:"resize",value:function(){this.isVisible()&&this.setPosition()}},{key:"isVisible",value:function(){return this.container.classList.contains("active")}},{key:"getPosition",value:function(){return window.innerHeight-this.container.offsetHeight}},{key:"setPosition",value:function(){this.container.style.top="".concat(this.getPosition(),"px")}}]),i}(Tt),Bt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#settings-page",void 0,"#settings-button")),"musicSlider",document.querySelector("#music")),p(c(n),"soundSlider",document.querySelector("#sound")),p(c(n),"brightnessSlider",document.querySelector("#brightness")),p(c(n),"audioEnabledCheckbox",document.querySelector("#audio-enabled-checkbox > input")),p(c(n),"lowPowerCheckbox",document.querySelector("#low-power-checkbox > input")),p(c(n),"debugCheckbox",document.querySelector("#debug-mode-checkbox > input")),p(c(n),"showNamesCheckbox",document.querySelector("#show-names-checkbox > input")),p(c(n),"showLevelsCheckbox",document.querySelector("#show-levels-checkbox > input")),p(c(n),"disableCachingCheckbox",document.querySelector("#disable-region-caching-checkbox > input")),n.game=e,n.musicSlider.addEventListener("input",n.handleMusic.bind(c(n))),n.soundSlider.addEventListener("input",n.handleSoundVolume.bind(c(n))),n.brightnessSlider.addEventListener("input",n.handleBrightness.bind(c(n))),n.audioEnabledCheckbox.addEventListener("change",n.handleAudioEnabled.bind(c(n))),n.lowPowerCheckbox.addEventListener("change",n.handleLowPower.bind(c(n))),n.debugCheckbox.addEventListener("change",n.handleDebug.bind(c(n))),n.showNamesCheckbox.addEventListener("change",n.handleName.bind(c(n))),n.showLevelsCheckbox.addEventListener("change",n.handleLevel.bind(c(n))),n.disableCachingCheckbox.addEventListener("change",n.handleCaching.bind(c(n))),n.load(),n}return k(i,[{key:"load",value:function(){var e,t,i,n=this.game.storage.getSettings();this.musicSlider.value=null===(e=n.musicVolume)||void 0===e?void 0:e.toString(),this.soundSlider.value=null===(t=n.soundVolume)||void 0===t?void 0:t.toString(),this.brightnessSlider.value=null===(i=n.brightness)||void 0===i?void 0:i.toString(),this.audioEnabledCheckbox.checked=n.audioEnabled,this.lowPowerCheckbox.checked=n.lowPowerMode,this.debugCheckbox.checked=n.debugMode,this.showNamesCheckbox.checked=n.showNames,this.showLevelsCheckbox.checked=n.showLevels,this.disableCachingCheckbox.checked=n.disableCaching,this.handleBrightness(),this.handleDebug(),this.handleLowPower(),this.handleName(),this.handleLevel()}},{key:"handleMusic",value:function(){this.game.storage.setMusicVolume(this.musicSlider.valueAsNumber),this.game.audio.updateVolume()}},{key:"handleSoundVolume",value:function(){this.game.storage.setSoundVolume(this.soundSlider.valueAsNumber)}},{key:"handleBrightness",value:function(){this.game.storage.setBrightness(this.brightnessSlider.valueAsNumber),this.game.renderer.setBrightness(this.brightnessSlider.valueAsNumber)}},{key:"handleAudioEnabled",value:function(){this.game.storage.setAudioEnabled(this.audioEnabledCheckbox.checked),this.game.audio.updateVolume()}},{key:"handleLowPower",value:function(){this.game.storage.setLowPowerMode(this.lowPowerCheckbox.checked),this.game.renderer.animateTiles=!this.lowPowerCheckbox.checked,this.lowPowerCheckbox.checked?this.game.camera.decenter():(this.game.camera.center(),this.game.camera.centreOn(this.game.player),this.game.renderer.updateAnimatedTiles())}},{key:"handleDebug",value:function(){this.game.storage.setDebug(this.debugCheckbox.checked),this.game.renderer.debugging=this.debugCheckbox.checked}},{key:"handleName",value:function(){this.game.storage.setShowNames(this.showNamesCheckbox.checked),this.game.renderer.drawNames=this.showNamesCheckbox.checked}},{key:"handleLevel",value:function(){this.game.storage.setShowLevels(this.showLevelsCheckbox.checked),this.game.renderer.drawLevels=this.showLevelsCheckbox.checked}},{key:"handleCaching",value:function(){this.game.storage.setDisableCaching(this.disableCachingCheckbox.checked)}}]),i}(Tt),Ft=function(e){a(i,e);var t=s(i);function i(e,n){var o;return v(this,i),p(c(o=t.call(this,"#equipments","#close-equipments","#equipment-button")),"playerArmour",document.querySelector("#player-image-armour")),p(c(o),"playerWeapon",document.querySelector("#player-image-weapon")),p(c(o),"weapon",document.querySelector(".equip-weapon-slot")),p(c(o),"weaponSkin",document.querySelector(".equip-weapon-skin-slot")),p(c(o),"armour",document.querySelector(".equip-armour-slot")),p(c(o),"armourSkin",document.querySelector(".equip-armour-skin-slot")),p(c(o),"pendant",document.querySelector(".equip-pendant-slot")),p(c(o),"ring",document.querySelector(".equip-ring-slot")),p(c(o),"boots",document.querySelector(".equip-boots-slot")),p(c(o),"arrow",document.querySelector(".equip-arrows-slot")),p(c(o),"arrowsCount",document.querySelector("#arrows-count")),p(c(o),"previous",document.querySelector("#player-image-navigator > .previous")),p(c(o),"next",document.querySelector("#player-image-navigator > .next")),p(c(o),"attackStats",document.querySelector("#attack-stats")),p(c(o),"defenseStats",document.querySelector("#defense-stats")),p(c(o),"bonuses",document.querySelector("#bonuses")),p(c(o),"imageOrientation",ne.Down),p(c(o),"unequipCallback",void 0),o.player=e,o.sprites=n,o.previous.addEventListener("click",(function(){return o.handleNavigation("previous")})),o.next.addEventListener("click",(function(){return o.handleNavigation("next")})),o.weapon.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Weapon)})),o.weaponSkin.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.WeaponSkin)})),o.armour.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Armour)})),o.armourSkin.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.ArmourSkin)})),o.pendant.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Pendant)})),o.ring.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Ring)})),o.boots.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Boots)})),o.arrow.addEventListener("click",(function(){var e,t;return null===(e=(t=o).unequipCallback)||void 0===e?void 0:e.call(t,ce.Arrows)})),o}return k(i,[{key:"synchronize",value:function(){this.loadStats(),this.loadPlayerImage(),this.weapon.style.backgroundImage=Be.getImageURL(this.player.getWeapon().key),this.weaponSkin.style.backgroundImage=Be.getImageURL(this.player.getWeaponSkin().key),this.armour.style.backgroundImage=Be.getImageURL("clotharmor"===this.player.getArmour().key?"":this.player.getArmour().key),this.armourSkin.style.backgroundImage=Be.getImageURL(this.player.getArmourSkin().key),this.pendant.style.backgroundImage=Be.getImageURL(this.player.getPendant().key),this.ring.style.backgroundImage=Be.getImageURL(this.player.getRing().key),this.boots.style.backgroundImage=Be.getImageURL(this.player.getBoots().key),this.arrow.style.backgroundImage=Be.getImageURL(this.player.getArrows().key);var e=this.player.getArrows().count;this.arrowsCount.innerHTML=e<1?"":"+".concat(e)}},{key:"resize",value:function(){this.loadPlayerImage()}},{key:"handleNavigation",value:function(e){var t=[ne.Left,ne.Up,ne.Right,ne.Down],i=t.indexOf(this.imageOrientation);switch(e){case"previous":i=0===i?t.length-1:i-1;break;case"next":i=i===t.length-1?0:i+1}this.imageOrientation=t[i],this.loadPlayerImage()}},{key:"loadStats",value:function(){for(var e=Be.getEmptyStats(),t=Be.getEmptyStats(),i=Be.getEmptyBonuses(),n=0,o=Object.values(this.player.equipments);n<o.length;n++){var a=o[n];a.exists()&&(e.crush+=a.attackStats.crush,e.slash+=a.attackStats.slash,e.stab+=a.attackStats.stab,e.archery+=a.attackStats.archery,e.magic+=a.attackStats.magic,t.crush+=a.defenseStats.crush,t.slash+=a.defenseStats.slash,t.stab+=a.defenseStats.stab,t.archery+=a.defenseStats.archery,t.magic+=a.defenseStats.magic,i.accuracy+=a.bonuses.accuracy,i.strength+=a.bonuses.strength,i.archery+=a.bonuses.archery,i.magic+=a.bonuses.magic)}for(var r=0,s=["Crush","Slash","Stab","Archery","Magic"];r<s.length;r++){var l=s[r],c=l.toLowerCase(),d=this.attackStats.querySelector(".".concat(c.toLowerCase())),h=this.defenseStats.querySelector(".".concat(c.toLowerCase())),u=e[c],p=t[c];d.textContent="".concat(l,": ").concat(u>0?"+":"").concat(u),h.textContent="".concat(l,": ").concat(p>0?"+":"").concat(p)}for(var f=0,g=["Accuracy","Strength","Archery","Magic"];f<g.length;f++){var m=g[f],v=m.toLowerCase(),b=this.bonuses.querySelector(".".concat(v.toLowerCase())),k=i[v];b.textContent="".concat(m,": ").concat(k>0?"+":"").concat(k)}}},{key:"loadPlayerImage",value:function(){var e='url("/img/sprites/'.concat(this.player.getArmour().key,'.png")'),t=this.player.sprite,i=this.imageOrientation===ne.Left,n=this.getOrientationIndex();if(t){if(this.playerArmour.style.backgroundImage=e,this.playerArmour.style.backgroundPosition="0 -".concat(n*t.height,"px"),this.player.hasWeapon()){var o='url("/img/sprites/'.concat(this.player.getWeapon().key,'.png")'),a=this.sprites.get(this.player.getWeapon().key),r=Math.floor(a.offsetX/2),s=Math.floor(a.offsetY/2);this.playerWeapon.style.width="".concat(a.width,"px"),this.playerWeapon.style.height="".concat(a.height,"px"),this.playerWeapon.style.marginLeft="".concat(r,"px"),this.playerWeapon.style.marginTop="".concat(s,"px"),this.playerWeapon.style.backgroundImage=o,this.playerWeapon.style.backgroundPosition="0 -".concat(n*a.height,"px")}else this.playerWeapon.style.backgroundImage="none";this.playerArmour.style.transform="scaleX(".concat(i?-1:1,")"),this.playerWeapon.style.transform="scaleX(".concat(i?-1:1,")")}}},{key:"getOrientationIndex",value:function(){switch(this.imageOrientation){case ne.Left:case ne.Right:return 1;case ne.Up:return 4;case ne.Down:return 7}}},{key:"onUnequip",value:function(e){this.unequipCallback=e}}]),i}(Tt),jt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#achievements","#close-achievements","#achievements-button")),"list",document.querySelector("#achievements-container > ul")),n.player=e,n}return k(i,[{key:"handle",value:function(e,t){if(e!==M.Batch){var i=this.player.achievements[t];if(i)return i.secret?this.createAchievement(i,t):void this.update(this.list.children[i.id],i)}else for(var n in this.player.achievements)this.createAchievement(this.player.achievements[n],n)}},{key:"createAchievement",value:function(e,t){var i=document.createElement("li"),n=document.createElement("div"),o=document.createElement("p"),a=document.createElement("p");i.classList.add("achievement-element"),o.classList.add("stroke"),o.classList.add("achievement-title"),a.classList.add("achievement-description"),o.innerHTML=e.name,a.innerHTML=e.description,i.append(o),i.append(a),e.isFinished()?(o.style.color="#fcda1d",n.classList.add("coin",e.secret?"coin-".concat(t):"coin-default"),i.prepend(n)):e.isStarted()&&i.append(this.createProgress(e)),this.list.append(i)}},{key:"createProgress",value:function(e){var t=document.createElement("p");return t.classList.add("stroke"),t.classList.add("achievement-progress"),t.innerHTML=e.isStarted()?"".concat(e.stage-1,"/").concat(e.stageCount-1):"",t}},{key:"update",value:function(e,t){var i=e.querySelector(".achievement-title"),n=e.querySelector(".achievement-description"),o=e.querySelector(".achievement-progress");if(i.innerHTML=t.name,n.innerHTML=t.description,t.isFinished()){var a;i.style.color="#fcda1d",null===(a=o)||void 0===a||a.remove();var r=document.createElement("div");r.classList.add("coin"),r.classList.add("coin-default"),e.prepend(r)}else{i.style.color="#fff";var s=e.querySelector(".coin");null==s||s.remove(),o?o.innerHTML=t.isStarted()?"".concat(t.stage-1,"/").concat(t.stageCount-1):"":(o=this.createProgress(t),e.append(o))}}}]),i}(Tt),Ht=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#quests","#close-quests","#quests-button")),"list",document.querySelector("#quests-container > ul")),p(c(n),"title",document.querySelector("#quest-log-title")),p(c(n),"shortDescription",document.querySelector("#quest-log-shortdesc")),p(c(n),"description",document.querySelector("#quest-log-description")),p(c(n),"rewards",document.querySelector("#quest-log-rewards")),n.player=e,n}return k(i,[{key:"handle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case R.Batch:for(var i=0,n=Object.values(this.player.quests);i<n.length;i++){var o=n[i];this.createElement(o)}break;case R.Progress:return this.handleProgress(t)}this.buildLog(this.player.quests.tutorial)}},{key:"handleProgress",value:function(e){if(e){var t=this.player.quests[e];if(t){var i=this.list.children[t.id].querySelector("p");i&&(i.classList.remove("green","yellow"),t.isFinished()?i.classList.add("green"):t.isStarted()&&i.classList.add("yellow"))}}}},{key:"createElement",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("p");i.classList.add("container-slot"),n.classList.add("stroke"),n.innerHTML=e.name,e.isFinished()?n.classList.add("green"):e.isStarted()&&n.classList.add("yellow"),i.append(n),this.list.append(i),i.addEventListener("click",(function(){return t.buildLog(e)}))}},{key:"buildLog",value:function(e){var t=u(e.description.split("|"),2),i=t[0],n=t[1];this.title.innerHTML=e.name,this.shortDescription.innerHTML=i,this.description.innerHTML=n,e.rewards&&(this.rewards.innerHTML=e.rewards.join("<br>"))}}]),i}(Tt),Ut=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#friends-container",void 0,"#friends-button")),"page",document.querySelector("#friends-page")),p(c(n),"list",document.querySelector("#friends-page > ul")),p(c(n),"addButton",document.querySelector("#add-friend")),p(c(n),"removeButton",document.querySelector("#remove-friend")),p(c(n),"input",document.querySelector("#popup-friend-input")),p(c(n),"confirm",document.querySelector("#popup-friend-confirm")),p(c(n),"cancel",document.querySelector("#popup-friend-cancel")),p(c(n),"popup",document.querySelector("#popup-container")),p(c(n),"confirmCallback",void 0),p(c(n),"messageCallback",void 0),p(c(n),"popupActive",!1),p(c(n),"removeActive",!1),n.player=e,n.addButton.addEventListener("click",(function(){return n.showPopup()})),n.removeButton.addEventListener("click",(function(){return n.showPopup(!0)})),n.confirm.addEventListener("click",n.handleConfirm.bind(c(n))),n.cancel.addEventListener("click",n.hidePopup.bind(c(n))),n}return k(i,[{key:"resize",value:function(){for(var e in this.player.friends){var t=this.player.friends[e],i=this.list.children[t.id];if(!i)return;var n=i.children[0],o=this.getMaxLength();t.username.length>o&&(n.innerHTML="".concat(t.username.slice(0,o),"..."))}}},{key:"handle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;switch(e){case J.List:for(var o=0,a=Object.values(this.player.friends);o<a.length;o++){var r=a[o];this.createElement(r.username,r.online,r.serverId)}break;case J.Add:return this.createElement(t,i,n);case J.Remove:return this.removeElement(t);case J.Status:return this.updateStatus(t,i,n)}}},{key:"handleConfirm",value:function(){var e,t=this.input.value,i=this.removeActive;this.input.value="",this.hidePopup(),!t||t.length>32||null===(e=this.confirmCallback)||void 0===e||e.call(this,t,i)}},{key:"handleMessage",value:function(e){var t;this.player.friends[e].online&&(null===(t=this.messageCallback)||void 0===t||t.call(this,e))}},{key:"keyDown",value:function(e){"Escape"===e&&this.hidePopup(),"Enter"===e&&""!==this.input.value&&this.handleConfirm()}},{key:"showPopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.popupActive=!0,this.removeActive=e,this.input.placeholder=e?"Enter name to remove...":"Enter name to add...",Be.fadeIn(this.popup),this.page.classList.add("dimmed"),this.input.focus()}},{key:"hidePopup",value:function(){this.popupActive=!1,this.removeActive=!1,Be.fadeOut(this.popup),this.page.classList.remove("dimmed")}},{key:"createElement",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=document.createElement("li"),a=document.createElement("p"),r=document.createElement("p");o.classList.add("container-slot"),a.classList.add("stroke","left"),r.classList.add("stroke","right"),i&&r.classList.add(this.player.serverId===n?"green":"yellow");var s=this.getMaxLength();e.length>s&&(e="".concat(e.slice(0,s),"...")),a.innerHTML=Be.formatName(e),r.innerHTML=i?"World ".concat(n):"Offline",o.append(a,r),this.list.append(o),o.addEventListener("click",(function(){return t.handleMessage(e)}))}},{key:"removeElement",value:function(e){var t=this.player.friends[e];t&&(this.list.children[t.id].remove(),delete this.player.friends[e])}},{key:"updateStatus",value:function(e,t,i){var n=this.player.friends[e];if(n){var o=this.list.children[n.id].children[1];t?(o.classList.add(this.player.serverId===i?"green":"yellow"),o.innerHTML="World ".concat(n.serverId)):(o.classList.remove("green","yellow"),o.innerHTML="Offline")}}},{key:"isPopupActive",value:function(){return this.popupActive}},{key:"getMaxLength",value:function(){return window.innerWidth>=1500?16:10}},{key:"onConfirm",value:function(e){this.confirmCallback=e}},{key:"onMessage",value:function(e){this.messageCallback=e}}]),i}(Tt),Gt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#trade-container",void 0,"#close-trade")),"hideOnShow",!1),p(c(n),"inventoryList",document.querySelector("#trade-inventory-slots > ul")),p(c(n),"playerSlots",document.querySelector("#trade-player-slots > ul")),p(c(n),"otherPlayerSlots",document.querySelector("#trade-oplayer-slots > ul")),p(c(n),"playerName",document.querySelector("#trade-player-name")),p(c(n),"otherPlayerName",document.querySelector("#trade-oplayer-name")),p(c(n),"tradeStatus",document.querySelector("#trade-status")),p(c(n),"acceptButton",document.querySelector("#trade-accept")),p(c(n),"tradeDialog",document.querySelector("#trade-count")),p(c(n),"tradeCount",document.querySelector("#trade-count .dialog-count")),p(c(n),"tradeCountAccept",document.querySelector("#trade-count .dialog-accept")),p(c(n),"tradeCountCancel",document.querySelector("#trade-count .dialog-cancel")),p(c(n),"inventoryIndex",-1),p(c(n),"selectCallback",void 0),p(c(n),"acceptCallback",void 0),p(c(n),"closeCallback",void 0),n.inventory=e,n.load(),n.acceptButton.addEventListener("click",(function(){var e,t;return null===(e=(t=n).acceptCallback)||void 0===e?void 0:e.call(t)})),n.tradeCountAccept.addEventListener("click",(function(){return n.sendTradeAmount()})),n.tradeCountCancel.addEventListener("click",(function(){return n.hideTradeAmountDialog()})),n}return k(i,[{key:"load",value:function(){for(var e=0;e<Te;e++)this.inventoryList.append(Be.createSlot(ie.Inventory,e,this.select.bind(this),this.showTradeAmountDialog.bind(this))),this.playerSlots.append(Be.createSlot(ie.Trade,e,this.select.bind(this))),this.otherPlayerSlots.append(Be.createSlot(ie.Trade,e))}},{key:"keyDown",value:function(e){switch(e){case"Escape":return this.hideTradeAmountDialog();case"Enter":return this.sendTradeAmount()}}},{key:"synchronize",value:function(){var e=this;this.isVisible()&&this.inventory.forEachSlot((function(t,i){var n=e.getElement(t).querySelector(".item-image"),o=e.getElement(t).querySelector(".item-count"),a=i.querySelector(".item-image");a&&(n.style.backgroundImage=a.style.backgroundImage,o.textContent=i.textContent)}))}},{key:"show",value:function(e,t){n(d(i.prototype),"show",this).call(this),this.synchronize(),this.playerName.textContent=e.name,this.otherPlayerName.textContent=t.name}},{key:"hide",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(d(i.prototype),"hide",this).call(this),t||null===(e=this.closeCallback)||void 0===e||e.call(this),this.clearAll(),this.inventoryIndex=-1,this.tradeStatus.innerHTML=""}},{key:"add",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n?this.otherPlayerSlots.children[e]:this.playerSlots.children[e],a=o.querySelector(".item-image"),r=o.querySelector(".item-count");if(this.tradeStatus.innerHTML="",a.style.backgroundImage=n?Be.getImageURL(i):this.getElementImage(this.inventoryIndex),r.innerHTML=t>1?Be.getCount(t):"",!n){var s=this.getElement(this.inventoryIndex).querySelector(".item-count"),l=this.inventory.getCount(this.inventoryIndex)-t;if(o.inventoryIndex=this.inventoryIndex,isNaN(l)||l<1)return this.clearSlot(this.inventoryIndex);s.innerHTML=Be.getCount(l)}}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?this.otherPlayerSlots.children[e]:this.playerSlots.children[e],n=i.querySelector(".item-image"),o=i.querySelector(".item-count");if(!t){var a=i.inventoryIndex;this.setSlot(a,n.style.backgroundImage,this.inventory.getCount(a))}n.style.backgroundImage="",o.innerHTML="",this.tradeStatus.innerHTML="",this.inventoryIndex=-1}},{key:"sendTradeAmount",value:function(){var e=this.tradeCount.valueAsNumber;e<1||(this.select(ie.Inventory,this.inventoryIndex,e),this.hideTradeAmountDialog())}},{key:"showTradeAmountDialog",value:function(e,t){this.inventoryIndex=t,Be.fadeIn(this.tradeDialog),this.inventoryList.classList.add("dimmed"),this.tradeCount.value="1",this.tradeCount.focus()}},{key:"hideTradeAmountDialog",value:function(){Be.fadeOut(this.tradeDialog),this.inventoryList.classList.remove("dimmed")}},{key:"accept",value:function(e){this.tradeStatus.innerHTML=e||""}},{key:"select",value:function(e,t,i){var n;this.inventoryIndex=t,null===(n=this.selectCallback)||void 0===n||n.call(this,e,t,i)}},{key:"getElement",value:function(e){return this.inventoryList.children[e].querySelector("div")}},{key:"getElementImage",value:function(e){return this.getElement(e).querySelector(".item-image").style.backgroundImage}},{key:"isInputDialogueVisible",value:function(){return"block"===this.tradeDialog.style.display}},{key:"clearSlot",value:function(e){var t=this.getElement(e),i=t.querySelector(".item-image"),n=t.querySelector(".item-count");i.style.backgroundImage="",n.innerHTML=""}},{key:"clearAll",value:function(){var e,t=w(this.playerSlots.children);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=i.querySelector(".item-image"),o=i.querySelector(".item-count");n.style.backgroundImage="",o.innerHTML=""}}catch(zn){t.e(zn)}finally{t.f()}var a,r=w(this.otherPlayerSlots.children);try{for(r.s();!(a=r.n()).done;){var s=a.value,l=s.querySelector(".item-image"),c=s.querySelector(".item-count");l.style.backgroundImage="",c.innerHTML=""}}catch(zn){r.e(zn)}finally{r.f()}}},{key:"setSlot",value:function(e,t,i){var n=this.getElement(e),o=n.querySelector(".item-image"),a=n.querySelector(".item-count");o.style.backgroundImage=t,a.innerHTML=Be.getCount(i)}},{key:"onSelect",value:function(e){this.selectCallback=e}},{key:"onAccept",value:function(e){this.acceptCallback=e}},{key:"onClose",value:function(e){this.closeCallback=e}}]),i}(Tt),Wt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#interact")),"list",document.querySelector("#interact > ul")),p(c(n),"buttonCallback",void 0),p(c(n),"closeCallback",void 0),n.player=e,n}return k(i,[{key:"show",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.clear();var a=[];t.isItem()&&a.push(se.Examine),t.isMob()&&a.push(se.Attack,se.Examine),t.isPlayer()&&(o?a.push(se.Attack):a.push(se.Follow),a.push(se.Trade),this.player.hasFriend(t.name)||a.push(se.AddFriend));for(var r=0,s=a;r<s.length;r++){var l=s[r];this.add(l)}if(a.length>0){var c=e.x+this.container.offsetWidth>window.innerWidth?window.innerWidth-this.container.offsetWidth:e.x,h=e.y+this.container.offsetHeight>window.innerHeight?window.innerHeight-this.container.offsetHeight:e.y;this.container.style.left="".concat(c,"px"),this.container.style.top="".concat(h,"px"),n(d(i.prototype),"show",this).call(this)}}},{key:"hide",value:function(){var e;n(d(i.prototype),"hide",this).call(this),null===(e=this.closeCallback)||void 0===e||e.call(this)}},{key:"add",value:function(e){var t=this,i=document.createElement("li");i.classList.add("action-button","action-".concat(e)),i.addEventListener("click",(function(){return t.buttonCallback(e)})),this.list.append(i)}},{key:"clear",value:function(){this.list.innerHTML=""}},{key:"onButton",value:function(e){this.buttonCallback=e}},{key:"onClose",value:function(e){this.closeCallback=e}}]),i}(Tt),Vt=function(e){a(i,e);var t=s(i);function i(e){var n;v(this,i),p(c(n=t.call(this,"#leaderboards","#close-leaderboards","#leaderboards-button")),"searchList",document.querySelector("#leaderboards-search")),p(c(n),"resultsList",document.querySelector("#leaderboards-results")),p(c(n),"search",document.querySelector("#leaderboards-search-input")),p(c(n),"searchElements",[{name:"Total Experience",key:"",type:""},{name:"PVP Kills",key:"pvp",type:"pvp"}]),p(c(n),"availableMobs",{}),n.app=e,n.search.addEventListener("input",n.handleInput.bind(c(n)));var o,a=w(pe);try{for(a.s();!(o=a.n()).done;){var r=o.value;n.searchElements.push({name:ue[r],key:r,type:"skill"})}}catch(zn){a.e(zn)}finally{a.f()}return n.app.config.hub?(fetch("".concat(n.app.config.hub,"/leaderboards")).then((function(e){return e.json()})).then((function(e){if(e.availableMobs){for(var t in n.availableMobs=e.availableMobs,n.availableMobs)n.searchElements.push({name:n.availableMobs[t],key:t,type:"mob"});n.load()}})).catch((function(e){_.error(e)})),n):(n.load(),l(n))}return k(i,[{key:"load",value:function(){this.searchList.innerHTML="";var e,t=w(this.searchElements);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.createSearchElement(i)}}catch(zn){t.e(zn)}finally{t.f()}this.handleSearchElement(this.searchElements[0])}},{key:"handleInput",value:function(e){var t,i=e.target.value.toLowerCase(),n=w(this.searchList.children);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.querySelector("p").innerHTML.toLowerCase().includes(i)?o.hidden=!1:o.hidden=!0}}catch(zn){n.e(zn)}finally{n.f()}}},{key:"handleSearchElement",value:function(e){var t=this;if(this.app.config.hub){var i="".concat(this.app.config.hub,"/leaderboards");e.type&&(i+="?".concat(e.type,"=").concat(e.key)),fetch(i).then((function(e){return e.json()})).then((function(i){if(!i.list)return _.info("No results found.");t.resultsList.innerHTML="";var n,o=w(i.list);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.createResultElement(a,e.type)}}catch(zn){o.e(zn)}finally{o.f()}})).catch((function(e){_.error(e)}))}}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.search.value=""}},{key:"keyDown",value:function(e){"Escape"===e&&this.hide()}},{key:"createSearchElement",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("p");i.classList.add("container-slot"),n.classList.add("stroke","white"),n.innerHTML=e.name,i.append(n),i.addEventListener("click",(function(){return t.handleSearchElement(e)})),this.searchList.append(i)}},{key:"createResultElement",value:function(e,t){var i=document.createElement("li"),n=document.createElement("p"),o=document.createElement("p");i.classList.add("container-slot-large"),n.classList.add("stroke",e.cheater?"red":"white","left"),o.classList.add("stroke",e.cheater?"red":"white","right"),n.innerHTML=e._id,o.innerHTML="".concat("skill"===t||""===t?e.experience:e.kills),i.append(n,o),this.resultsList.append(i)}}]),i}(Tt),Zt=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,"#guilds","#close-guilds","#guilds-button")),"banner",document.querySelector("#guilds > .banner")),p(c(n),"listContainer",document.querySelector("#guilds-list-container")),p(c(n),"createButton",document.querySelector("#create-guild")),p(c(n),"create",document.querySelector("#guilds-create-container")),p(c(n),"createError",document.querySelector("#create-error")),p(c(n),"backButton",document.querySelector("#guild-back")),p(c(n),"createConfirmButton",document.querySelector("#guild-create")),p(c(n),"bannerColours",document.querySelector("#banner-colours")),p(c(n),"bannerOutlines",document.querySelector("#banner-outline-colours")),p(c(n),"bannerCrests",document.querySelector("#banner-crests")),p(c(n),"nameInput",document.querySelector("#guild-name-input")),p(c(n),"bannerColour",_e.Grey),p(c(n),"bannerOutline",""),p(c(n),"bannerCrest",Ce.None),p(c(n),"infoContainer",document.querySelector("#guilds-info-container")),p(c(n),"chatLog",document.querySelector("#guild-chat-log")),p(c(n),"chatInput",document.querySelector("#guild-chat-input")),p(c(n),"guildName",document.querySelector("#guild-name")),p(c(n),"leaveButton",document.querySelector("#guild-leave")),p(c(n),"guildList",document.querySelector("#guilds-list-container > ul")),p(c(n),"memberList",document.querySelector("#member-list")),p(c(n),"sidebarList",document.querySelector("#sidebar-list")),p(c(n),"from",0),p(c(n),"to",10),p(c(n),"currentSidebar","sidebar-members"),n.game=e,n.createButton.addEventListener("click",n.handleCreate.bind(c(n))),n.backButton.addEventListener("click",n.handleBackButton.bind(c(n))),n.createConfirmButton.addEventListener("click",n.handleCreateConfirm.bind(c(n))),n.leaveButton.addEventListener("click",n.handleLeave.bind(c(n))),n.loadSidebar(),n.loadDecorations(),n}return k(i,[{key:"handle",value:function(e,t){switch(e){case H.Join:return this.handleMemberJoin(t.username,t.serverId);case H.Login:return this.handleConnect(t);case H.Leave:return null!=t&&t.username?this.handleMemberLeave(t.username):this.handleBackButton();case H.Rank:console.log(t);break;case H.Update:return this.loadMembers(t.members);case H.Experience:console.log(t);break;case H.List:return this.loadList(t.guilds,t.total);case H.Error:return this.setError(t.message);case H.Chat:return this.handleChat(t)}}},{key:"handleCreate",value:function(){this.listContainer.style.display="none",this.infoContainer.style.display="none",this.create.style.display="block"}},{key:"handleBackButton",value:function(){this.bannerColour=_e.Grey,this.bannerOutline="",this.bannerCrest=Ce.None,this.updateBanner(),this.cleanSelectedCrests(!0),this.setError(),this.memberList.innerHTML="",this.chatLog.innerHTML="",this.create.style.display="none",this.infoContainer.style.display="none",this.listContainer.style.display="block",this.requestList()}},{key:"handleCreateConfirm",value:function(){return this.setError(),""===this.bannerOutline?this.setError("Please select an outline colour."):this.nameInput.value.length<3||this.nameInput.value.length>16?this.setError("Guild name must be between 3 and 15 characters."):void this.game.socket.send(ze.Guild,{opcode:H.Create,name:this.nameInput.value,colour:this.bannerColour,outline:this.bannerOutline,crest:this.bannerCrest})}},{key:"handleLeave",value:function(){this.game.socket.send(ze.Guild,{opcode:H.Leave})}},{key:"handleConnect",value:function(e){var t,i,n;this.setError(),this.listContainer.style.display="none",this.create.style.display="none",this.infoContainer.style.display="block",this.bannerColour=(null===(t=e.decoration)||void 0===t?void 0:t.banner)||_e.Grey,this.bannerOutline=(null===(i=e.decoration)||void 0===i?void 0:i.outline)||"",this.bannerCrest=null===(n=e.decoration)||void 0===n?void 0:n.crest,this.updateBanner(),this.guildName.innerHTML="",this.memberList.innerHTML="";var o=document.createElement("p");o.className="stroke",o.innerHTML=e.name||"Unknown",this.guildName.append(o),this.game.player.name.toLowerCase()===e.owner&&(this.leaveButton.innerHTML="Disband");var a,r=w(e.members);try{for(r.s();!(a=r.n()).done;){var s=a.value;this.createElement(this.memberList,s.rank,s.username)}}catch(zn){r.e(zn)}finally{r.f()}}},{key:"handleMemberJoin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e!==this.game.player.name.toLowerCase()&&(this.createElement(this.memberList,ye.Fledgling,e),this.loadMembers([{username:e,serverId:t}]))}},{key:"handleMemberLeave",value:function(e){var t=this.getElement(this.memberList,e);null==t||t.remove()}},{key:"handleSidebar",value:function(e){if(this.game.player.guild&&this.currentSidebar!==e){switch(e){case"sidebar-members":this.memberList.style.display="block",this.infoContainer.className="",this.chatInput.style.display="none",this.chatLog.style.display="none";break;case"sidebar-chat":this.memberList.style.display="none",this.infoContainer.className="guild-chat",this.chatInput.style.display="block",this.chatLog.style.display="block"}this.currentSidebar=e}}},{key:"handleChat",value:function(e){if(e.username&&e.serverId){var t="[W".concat(e.serverId,"] ").concat(Be.formatName(e.username)),i=document.createElement("p");i.innerHTML="".concat(t,"  ").concat(e.message),this.chatLog.append(i)}}},{key:"keyDown",value:function(e){"Enter"===e&&"sidebar-chat"===this.currentSidebar&&0!==this.chatInput.value.length&&this.sendChat()}},{key:"requestList",value:function(){if(!this.game.player.guild)return this.game.socket.send(ze.Guild,{opcode:H.List,from:this.from,to:this.to})}},{key:"sendChat",value:function(){0!==this.chatInput.value.length&&(this.game.socket.send(ze.Guild,{opcode:H.Chat,message:this.chatInput.value}),this.chatInput.value="")}},{key:"loadList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t){this.guildList.innerHTML="";var i=this.listContainer.querySelector("#guilds-info");i.innerHTML="";var n,o=w(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;this.createElement(this.guildList,"guild",a.name,a.members)}}catch(zn){o.e(zn)}finally{o.f()}}}},{key:"loadSidebar",value:function(){var e,t=this,i=w(this.sidebarList.children);try{var n=function(){var i=e.value;i.addEventListener("click",(function(){t.cleanSidebar(),i.classList.add("active"),t.handleSidebar(i.id)}))};for(i.s();!(e=i.n()).done;)n()}catch(zn){i.e(zn)}finally{i.f()}}},{key:"loadDecorations",value:function(){this.loadColours(),this.loadOutlines(),this.loadCrests()}},{key:"loadColours",value:function(){var e=this,t=function(){var t=document.createElement("li"),n=_e[i];t.className="banner-colour-button banner-colour-button-".concat(n),t.addEventListener("click",(function(){e.bannerColour=n,e.updateBanner()})),e.bannerColours.append(t)};for(var i in _e)t()}},{key:"loadOutlines",value:function(){var e=this,t=function(){var t=document.createElement("li"),n=Se[i];t.className="banner-outline-button banner-outline-button-".concat(n),t.addEventListener("click",(function(){e.bannerOutline=n,e.updateBanner()})),e.bannerOutlines.append(t)};for(var i in Se)t()}},{key:"loadCrests",value:function(){var e=this,t=function(){var t=document.createElement("li"),n=document.createElement("div"),o=Ce[i];t.className="crest-element",n.className="banner-crest-icon banner-crest-icon-".concat(o),t.append(n),"none"===o&&t.classList.add("active"),t.addEventListener("click",(function(){e.cleanSelectedCrests(),e.bannerCrest=o,e.updateBanner(),t.classList.add("active")})),e.bannerCrests.append(t)};for(var i in Ce)t()}},{key:"loadMembers",value:function(e){var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=this.getElement(this.memberList,n.username);if(o){var a=o.querySelector(".name"),r=o.querySelector(".server"),s=-1===n.serverId?"red":n.serverId===this.game.player.serverId?"green":"yellow";a.className="name",r.className="server ".concat(s),r.innerHTML=-1===n.serverId?"Offline":"".concat(this.game.app.config.name," ").concat(n.serverId)}}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"show",value:function(){n(d(i.prototype),"show",this).call(this),this.requestList()}},{key:"hide",value:function(){n(d(i.prototype),"hide",this).call(this),this.from=0,this.to=10,this.game.player.guild||this.handleBackButton()}},{key:"createElement",value:function(e,t,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document.createElement("li"),r=document.createElement("span"),s="guild"===t,l="guild"===t?"guild":ye[t].toLowerCase();if(a.identifier=i,a.className="slot-element slot-".concat(l," stroke"),r.className="name",r.innerHTML=s?i:Be.formatName(i,14),s){if(o>0){var c=document.createElement("span");c.classList.add("count"),c.innerHTML="".concat(o,"/").concat(Xe),a.append(c)}var d=document.createElement("div");d.className="element-button stroke",d.innerHTML="Join",d.addEventListener("click",(function(){n.game.socket.send(ze.Guild,{opcode:H.Join,identifier:i.toLowerCase()})})),a.append(r,d)}if(!s){a.append(r);var h=document.createElement("span"),u=this.game.player.name.toLowerCase()===a.identifier;h.className="server ".concat(u?"green":"red"),h.innerHTML=u?"Online":"Offline",a.append(h)}e.append(a)}},{key:"cleanSelectedCrests",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=w(this.bannerCrests.children);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.classList.remove("active")}}catch(zn){i.e(zn)}finally{i.f()}t&&this.bannerCrests.children[0].classList.add("active")}},{key:"cleanSidebar",value:function(){var e,t=w(this.sidebarList.children);try{for(t.s();!(e=t.n()).done;){e.value.classList.remove("active")}}catch(zn){t.e(zn)}finally{t.f()}}},{key:"updateBanner",value:function(){var e=this.banner.querySelector(".banner-outline"),t=this.banner.querySelector(".banner-crest");this.banner.className="banner banner-".concat(this.bannerColour),e.className="banner-outline".concat(this.bannerOutline?" banner-outline-".concat(this.bannerOutline):""),this.bannerCrest&&(t.className="banner-crest banner-crest-".concat(this.bannerCrest))}},{key:"getElement",value:function(e,t){var i,n=w(e.children);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o.identifier===t)return o}}catch(zn){n.e(zn)}finally{n.f()}}},{key:"setError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.createError.innerHTML=e}}]),i}(Tt),Kt=function(e){a(h,e);var o,r=s(h);function h(e){var t;v(this,h),p(c(t=r.call(this,"#leaderboards","#close-leaderboards","#leaderboards-button2")),"searchList",document.querySelector("#leaderboards-search")),p(c(t),"resultsList",document.querySelector("#leaderboards-results")),p(c(t),"search",document.querySelector("#leaderboards-search-input")),p(c(t),"searchElements",[{name:"Total Experience",key:"",type:"totalExperience"},{name:"Rank",key:"rank",type:"rank"}]),p(c(t),"availableMobs",{}),t.app=e,t.search.addEventListener("input",t.handleInput.bind(c(t)));var i,n=w(pe);try{for(n.s();!(i=n.n()).done;){var o=i.value;t.searchElements.push({name:ue[o],key:o,type:"skill"})}}catch(zn){n.e(zn)}finally{n.f()}return t.app.config.hub?(fetch("".concat(t.app.config.hub,"/leaderboards")).then((function(e){return e.json()})).then((function(e){if(e.availableMobs){for(var i in t.availableMobs=e.availableMobs,t.availableMobs)t.searchElements.push({name:t.availableMobs[i],key:i,type:"mob"});t.load()}})).catch((function(e){_.error(e)})),t):(t.load(),l(t))}return k(h,[{key:"load",value:function(){this.searchList.innerHTML="";var e,t=w(this.searchElements);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.createSearchElement(i)}}catch(zn){t.e(zn)}finally{t.f()}this.handleSearchElement(this.searchElements[0])}},{key:"handleInput",value:function(e){var t,i=e.target.value.toLowerCase(),n=w(this.searchList.children);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.querySelector("p").innerHTML.toLowerCase().includes(i)?o.hidden=!1:o.hidden=!0}}catch(zn){n.e(zn)}finally{n.f()}}},{key:"handleSearchElement",value:(o=m(f().mark((function e(n){var o,a,r,s,l,c,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resultsList.innerHTML="",e.next=3,fetch("http://localhost:9003/").then((function(e){return e.json()}));case 3:if(o=e.sent,(a=o.data).forEach((function(e){var n=0;e.skills.skills.forEach((function(e){n+=e.experience})),a=[].concat(i(a.filter((function(t){return t._id!==e._id}))),[t(t({},e),{},{totalExperience:n})])})),this.app.config.hub){e.next=10;break}r=w(a.sort((function(e,t){return t[n.type]-e[n.type]})));try{for(r.s();!(s=r.n()).done;)l=s.value,this.createResultElement(l,n.type)}catch(zn){r.e(zn)}finally{r.f()}return e.abrupt("return");case 10:c="".concat(this.app.config.hub,"/leaderboards"),n.type&&(c+="?".concat(n.type,"=").concat(n.key)),fetch(c).then((function(e){return e.json()})).then((function(e){if(!e.list)return _.info("No results found.");d.resultsList.innerHTML="";var t,i=w(e.list);try{for(i.s();!(t=i.n()).done;){var o=t.value;d.createResultElement(o,n.type)}}catch(zn){i.e(zn)}finally{i.f()}})).catch((function(e){_.error(e)}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"hide",value:function(){n(d(h.prototype),"hide",this).call(this),this.search.value=""}},{key:"keyDown",value:function(e){"Escape"===e&&this.hide()}},{key:"createSearchElement",value:function(e){var t=this,i=document.createElement("li"),n=document.createElement("p");i.classList.add("container-slot"),n.classList.add("stroke","white"),n.innerHTML=e.name,i.append(n),i.addEventListener("click",(function(){return t.handleSearchElement(e)})),this.searchList.append(i)}},{key:"createResultElement",value:function(e,t){console.log(e);var i=document.createElement("li"),n=document.createElement("p"),o=document.createElement("p");i.classList.add("container-slot-large"),n.classList.add("stroke",e.cheater?"red":"white","left"),o.classList.add("stroke",e.cheater?"red":"white","right"),n.innerHTML=e.username,o.innerHTML=e[t]||0,i.append(n,o),this.resultsList.append(i)}}]),h}(Tt),$t=function(e){a(i,e);var t=s(i);function i(){var e;return v(this,i),p(c(e=t.call(this,"#crafting","#close-crafting")),"options",document.querySelector("#crafting-options")),p(c(e),"requirements",document.querySelector("#crafting-requirements")),p(c(e),"result",document.querySelector("#crafting-result")),p(c(e),"level",document.querySelector("#crafting-level")),p(c(e),"name",document.querySelector("#crafting-result-name")),p(c(e),"craftOne",document.querySelector("#craft-one")),p(c(e),"craftFive",document.querySelector("#craft-five")),p(c(e),"craftTen",document.querySelector("#craft-ten")),p(c(e),"craftButton",document.querySelector("#craft-button")),p(c(e),"selectedKey",""),p(c(e),"craftAmount",1),p(c(e),"type",ue.Crafting),p(c(e),"selectCallback",void 0),p(c(e),"craftCallback",void 0),e.craftOne.addEventListener("click",(function(){return e.handleAmount(1)})),e.craftFive.addEventListener("click",(function(){return e.handleAmount(5)})),e.craftTen.addEventListener("click",(function(){return e.handleAmount(10)})),e.craftButton.addEventListener("click",(function(){var t,i;null===(t=(i=e).craftCallback)||void 0===t||t.call(i,e.selectedKey,e.craftAmount),e.hide()})),e}return k(i,[{key:"handle",value:function(e,t){switch(e){case ee.Open:return this.show(t.type,t.keys);case ee.Select:return this.handleSelect(t.key,t.name,t.level,t.result,t.requirements)}}},{key:"handleSelect",value:function(e,t,i,n,o){this.requirements.innerHTML="",this.selectedKey=e;var a=this.result.querySelector(".crafting-option-icon"),r=this.result.querySelector(".crafting-option-count"),s=this.level.querySelector(".crafting-option-icon"),l=this.level.querySelector(".crafting-option-count");a.style.backgroundImage=Be.getImageURL(e),s.style.backgroundImage=this.getSkillIcon(),r.innerHTML="x".concat(n),l.innerHTML="".concat(i),this.name.innerHTML=t;var c,d=w(o);try{for(d.s();!(c=d.n()).done;){var h=c.value;this.requirements.append(this.createSlot(h.key,h.count,!0))}}catch(zn){d.e(zn)}finally{d.f()}}},{key:"handleAmount",value:function(e){switch(this.craftAmount=e,this.craftOne.classList.remove("active"),this.craftFive.classList.remove("active"),this.craftTen.classList.remove("active"),e){case 1:this.craftOne.classList.add("active");break;case 5:this.craftFive.classList.add("active");break;case 10:this.craftTen.classList.add("active")}}},{key:"show",value:function(e,t){n(d(i.prototype),"show",this).call(this),this.options.innerHTML="",this.type=e;var o,a,r=w(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;this.options.append(this.createSlot(s))}}catch(zn){r.e(zn)}finally{r.f()}t.length>0&&(null===(a=this.selectCallback)||void 0===a||a.call(this,t[0]),this.options.children[0].classList.add("active"));var l="Craft";switch(e){case ue.Cooking:l="Cook";break;case ue.Crafting:l="Craft";break;case ue.Fletching:l="Fletch";break;case ue.Smithing:l="Smith";break;case ue.Smelting:l="Smelt"}this.craftButton.innerHTML=l}},{key:"createSlot",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("li"),a=document.createElement("div");if(o.classList.add("crafting-option"),a.classList.add("crafting-option-icon"),a.style.backgroundImage=Be.getImageURL(e),o.append(a),t){var r=document.createElement("div");r.classList.add("crafting-option-count","stroke"),r.innerHTML="x".concat(t),o.append(r)}return n?o.classList.add("disabled"):o.addEventListener("click",(function(){var t,n,a=w(i.options.children);try{for(a.s();!(n=a.n()).done;){n.value.classList.remove("active")}}catch(zn){a.e(zn)}finally{a.f()}o.classList.add("active"),null===(t=i.selectCallback)||void 0===t||t.call(i,e)})),o}},{key:"getSkillIcon",value:function(){var e=ue[this.type].toLowerCase();switch(this.type){case ue.Smelting:case ue.Smithing:return"url(/img/interface/skills/smithing.png)"}return"url(/img/interface/skills/".concat(e,".png)")}},{key:"onSelect",value:function(e){this.selectCallback=e}},{key:"onCraft",value:function(e){this.craftCallback=e}}]),i}(Tt),Qt=function(){function e(t){v(this,e),p(this,"actions",new Yt),p(this,"crafting",new $t),p(this,"inventory",void 0),p(this,"bank",void 0),p(this,"store",void 0),p(this,"profile",void 0),p(this,"enchant",void 0),p(this,"warp",void 0),p(this,"notification",void 0),p(this,"settings",void 0),p(this,"equipments",void 0),p(this,"achievements",void 0),p(this,"quests",void 0),p(this,"friends",void 0),p(this,"trade",void 0),p(this,"interact",void 0),p(this,"leaderboards",void 0),p(this,"LeaderboardsFooter",void 0),p(this,"guilds",void 0),p(this,"header",void 0),p(this,"menus",void 0),this.game=t,this.inventory=new It(this.actions),this.bank=new Xt(this.inventory),this.store=new zt(this.inventory),this.profile=new Rt(t.player),this.enchant=new Mt(this.inventory),this.warp=new Nt(t.socket),this.notification=new Ot,this.settings=new Bt(t),this.header=new At(t.player),this.equipments=new Ft(t.player,t.sprites),this.achievements=new jt(t.player),this.quests=new Ht(t.player),this.friends=new Ut(t.player),this.trade=new Gt(this.inventory),this.interact=new Wt(t.player),this.leaderboards=new Vt(t.app),this.LeaderboardsFooter=new Kt(t.app),this.guilds=new Zt(t),this.menus={inventory:this.inventory,bank:this.bank,store:this.store,profile:this.profile,enchant:this.enchant,warp:this.warp,notification:this.notification,settings:this.settings,equipments:this.equipments,achievements:this.achievements,quests:this.quests,friends:this.friends,trade:this.trade,interact:this.interact,leaderboards:this.leaderboards,LeaderboardsFooter:this.LeaderboardsFooter,guilds:this.guilds,crafting:this.crafting},this.inventory.onSelect(this.handleInventorySelect.bind(this)),this.bank.onSelect(this.handleBankSelect.bind(this)),this.store.onSelect(this.handleStoreSelect.bind(this)),this.equipments.onUnequip(this.handleProfileUnequip.bind(this)),this.profile.onUnequip(this.handleProfileUnequip.bind(this)),this.profile.onAttackStyle(this.handleProfileAttackStyle.bind(this)),this.profile.onAbility(this.handleAbility.bind(this)),this.enchant.onSelect(this.handleEnchantSelect.bind(this)),this.enchant.onConfirm(this.handleEnchantConfirm.bind(this)),this.warp.onSelect(this.handleWarp.bind(this)),this.friends.onConfirm(this.handleFriendConfirm.bind(this)),this.trade.onSelect(this.handleTradeSelect.bind(this)),this.trade.onAccept(this.handleTradeAccept.bind(this)),this.trade.onClose(this.handleTradeClose.bind(this)),this.crafting.onSelect(this.handleCraftingSelect.bind(this)),this.crafting.onCraft(this.handleCraftingConfirm.bind(this)),this.load()}return k(e,[{key:"load",value:function(){var e=this;this.forEachMenu((function(t){return t.onShow((function(){return e.hide()}))}))}},{key:"hide",value:function(){this.forEachMenu((function(e){e.isVisible()&&e.hide()}))}},{key:"synchronize",value:function(e){var t;if(e)return null===(t=this.menus[e])||void 0===t?void 0:t.synchronize();this.forEachMenu((function(e){return e.synchronize()}))}},{key:"resize",value:function(){this.header.resize(),this.forEachMenu((function(e){return e.resize()}))}},{key:"getInteract",value:function(){return this.interact}},{key:"getInventory",value:function(){return this.inventory}},{key:"getBank",value:function(){return this.bank}},{key:"getStore",value:function(){return this.store}},{key:"getProfile",value:function(){return this.profile}},{key:"getNotification",value:function(){return this.notification}},{key:"getEnchant",value:function(){return this.enchant}},{key:"getWarp",value:function(){return this.warp}},{key:"getAchievements",value:function(){return this.achievements}},{key:"getQuests",value:function(){return this.quests}},{key:"getFriends",value:function(){return this.friends}},{key:"getTrade",value:function(){return this.trade}},{key:"getLeaderboards",value:function(){return this.leaderboards}},{key:"getLeaderboards2",value:function(){return this.LeaderboardsFooter}},{key:"getGuilds",value:function(){return this.guilds}},{key:"getCrafting",value:function(){return this.crafting}},{key:"handleInventorySelect",value:function(e,t,i){this.game.socket.send(ze.Container,{opcode:e,type:ie.Inventory,fromIndex:t,value:i})}},{key:"handleBankSelect",value:function(e,t,i,n){this.game.socket.send(ze.Container,{opcode:D.Select,type:ie.Bank,fromContainer:e,fromIndex:t,toContainer:i,value:n})}},{key:"handleStoreSelect",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.game.socket.send(ze.Store,{opcode:e,key:t,index:i,count:n})}},{key:"handleProfileUnequip",value:function(e){this.game.socket.send(ze.Equipment,{opcode:X.Unequip,type:e})}},{key:"handleProfileAttackStyle",value:function(e){this.game.socket.send(ze.Equipment,{opcode:X.Style,style:e})}},{key:"handleAbility",value:function(e,t,i){this.game.socket.send(ze.Ability,{opcode:e,key:t,index:i})}},{key:"handleEnchantSelect",value:function(e){this.game.socket.send(ze.Enchant,{opcode:j.Select,index:e})}},{key:"handleEnchantConfirm",value:function(e,t){this.game.socket.send(ze.Enchant,{opcode:j.Confirm,index:e,shardIndex:t})}},{key:"handleWarp",value:function(e){this.game.socket.send(ze.Warp,{id:e})}},{key:"handleFriendConfirm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.game.socket.send(ze.Friends,{opcode:t?J.Remove:J.Add,username:e})}},{key:"handleTradeSelect",value:function(e,t,i){switch(e){case ie.Inventory:return this.game.socket.send(ze.Trade,{opcode:F.Add,index:t,count:i});case ie.Trade:return this.game.socket.send(ze.Trade,{opcode:F.Remove,index:t,count:i})}}},{key:"handleTradeAccept",value:function(){this.game.socket.send(ze.Trade,{opcode:F.Accept})}},{key:"handleTradeClose",value:function(){this.game.socket.send(ze.Trade,{opcode:F.Close})}},{key:"handleCraftingSelect",value:function(e){this.game.socket.send(ze.Crafting,{opcode:ee.Select,key:e})}},{key:"handleCraftingConfirm",value:function(e,t){this.game.socket.send(ze.Crafting,{opcode:ee.Craft,key:e,count:t})}},{key:"forEachMenu",value:function(e){for(var t=0,i=Object.values(this.menus);t<i.length;t++){e(i[t])}}}]),e}(),Jt=function(){function e(t,i,n){v(this,e),p(this,"x",-1),p(this,"y",-1),p(this,"blinkInterval",void 0),p(this,"visible",!0),this.id=t,this.element=i,this.type=n,this.load()}return k(e,[{key:"load",value:function(){var e=this;this.blinkInterval=window.setInterval((function(){e.visible?e.hide():e.show(),e.visible=!e.visible}),600)}},{key:"setPosition",value:function(e,t){this.x=e,this.y=t}},{key:"destroy",value:function(){clearInterval(this.blinkInterval),this.type===U.Button?this.hide():this.element.remove()}},{key:"show",value:function(){this.type===U.Button?this.element.addClass("active"):this.element.show()}},{key:"hide",value:function(){this.type===U.Button?this.element.removeClass("active"):this.element.hide()}}]),e}(),ei=function(){function e(t){v(this,e),p(this,"camera",void 0),p(this,"pointers",{}),p(this,"container",We("#bubbles")),this.game=t,this.camera=this.game.camera}return k(e,[{key:"create",value:function(e,t,i){var n=this.pointers,o=this.container;if(!(e in n))if(t===U.Button)n[e]=new Jt(e,We("#".concat(i)),t);else{var a=We('<div id="'.concat(e,'" class="pointer"></div>'));this.setSize(a),o.append(a),n[e]=new Jt(e,a,t)}}},{key:"resize",value:function(){for(var e=0,t=Object.values(this.pointers);e<t.length;e++){var i=t[e],n=i.type,o=i.x,a=i.y,r=i.element;if(n===U.Relative){var s=this.getZoom();r.css({left:"".concat(o*s-0,"px"),top:"".concat(a*s-0,"px")})}}}},{key:"setSize",value:function(e){e.css({top:"30px",width:"64px",height:"64px",margin:"inherit",marginTop:"-18px",background:'url("'.concat("/img/pointer.png",'") no-repeat -4px')})}},{key:"clean",value:function(){for(var e=0,t=Object.values(this.pointers);e<t.length;e++){t[e].destroy()}this.pointers={}}},{key:"destroy",value:function(e){delete this.pointers[e.id],e.destroy()}},{key:"set",value:function(e,t,i){var n=this.camera,o=this.game;if(n){var a=e.element,r=o.renderer,s=r.canvasWidth,l=r.canvasHeight,c=o.map.tileSize*this.getZoom(),d=(t-n.x)*this.getZoom(),h=parseInt(a.css("width"))/2-c/2,u=(i-n.y)*this.getZoom()-c,p=d/s,f=u/l;p>=1.5?a.css({left:"",right:0,top:"50%",bottom:"",transform:"rotate(-90deg)"}):f>=1.5?a.css({left:"50%",right:"",top:"",bottom:0,transform:""}):p<=0?a.css({left:0,right:"",top:"50%",bottom:"",transform:"rotate(90deg)"}):f<=0?a.css({left:"",right:"50%",top:0,bottom:"",transform:"rotate(180deg)"}):a.css({left:"".concat(d-h,"px"),right:"",top:"".concat(u,"px"),bottom:"",transform:""})}}},{key:"setToEntity",value:function(e){var t=this.get(e.instance);t&&this.set(t,e.x,e.y)}},{key:"setToPosition",value:function(e,t,i){var n=this.get(e);n&&(n.setPosition(t,i),this.set(n,t,i))}},{key:"setRelative",value:function(e,t,i){var n=this.get(e);if(n){var o=this.getZoom();n.setPosition(t,i),n.element.css({left:"".concat(t*o-0,"px"),top:"".concat(i*o-0,"px")})}}},{key:"update",value:function(){for(var e=0,t=Object.values(this.pointers);e<t.length;e++){var i=t[e];switch(i.type){case U.Entity:var n=this.game.entities.get(i.id);n?this.setToEntity(n):this.destroy(i);break;case U.Location:-1!==i.x&&-1!==i.y&&this.set(i,i.x,i.y)}}}},{key:"get",value:function(e){var t=this.pointers;return e in t?t[e]:null}},{key:"getZoom",value:function(){return this.game.camera.zoomFactor}}]),e}(),ti=[{id:"adhererarcherarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"angel",width:32,height:32,offsetX:-8,offsetY:-13},{id:"card",width:32,height:32,offsetX:-8,offsetY:-13},{id:"card2",width:32,height:32,offsetX:-8,offsetY:-13},{id:"snowman2",width:32,height:32,offsetX:-8,offsetY:-13},{id:"rabbitman",width:32,height:32,offsetX:-8,offsetY:-13},{id:"cowwarrior",width:42,height:42,offsetX:-13,offsetY:-18},{id:"rooster",width:42,height:42,offsetX:-13,offsetY:-18},{id:"cowarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"adherer",width:32,height:32,offsetX:-8,offsetY:-12},{id:"adhererrobe",width:32,height:32,offsetX:-8,offsetY:-13},{id:"adminarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"agent",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ancientmanumentnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"angelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-28},{id:"archerarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"archerschooluniform",width:32,height:32,offsetX:-8,offsetY:-12},{id:"axe",width:48,height:48,offsetX:-16,offsetY:-20},{id:"pickaxe",width:48,height:48,offsetX:-16,offsetY:-20},{id:"fireaxe",width:48,height:48,offsetX:-16,offsetY:-20},{id:"poisonaxe",width:48,height:48,offsetX:-16,offsetY:-20},{id:"rustedaxe",width:48,height:48,offsetX:-16,offsetY:-20},{id:"babyspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"bamboospear",width:48,height:48,offsetX:-17,offsetY:-21},{id:"bastardsword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"bat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"icebat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"beachnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bearseonbiarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"beautifullife",width:32,height:32,offsetX:-8,offsetY:-12},{id:"beearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bee",width:20,height:19,animations:{death:{length:1,row:4},atk_right:{length:4,row:1},walk_right:{length:4,row:1},idle_right:{length:2,row:1},atk_up:{length:4,row:3},idle_up:{length:2,row:3},walk_up:{length:4,row:3},atk_down:{length:4,row:2},walk_down:{length:4,row:2},idle_down:{length:2,row:2}},offsetX:-8,offsetY:-8},{id:"beetlearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"beetle",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"blackpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"blackspiderarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"blackwizard",width:48,height:48,offsetX:-16,offsetY:-22},{id:"icewizard",width:48,height:48,offsetX:-16,offsetY:-22},{id:"ancientwizard",width:48,height:48,offsetX:-16,offsetY:-22},{id:"blazespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"bloodbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"bluebikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"greencockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"bluedamboarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"piratearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenpiratearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"purplepiratearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redpiratearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bluepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"bluescimitar",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bluestoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bluesword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"bluewingarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bluewingarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"boss",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"boxingman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"breaker",width:48,height:48,offsetX:-17,offsetY:-21},{id:"samuraiarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bronzemedal",width:12,height:12},{id:"brownmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"bucklerbenef",width:32,height:32,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-9,offsetY:-32},{id:"burgerarmor",width:32,height:32,offsetX:-8,offsetY:-16},{id:"butcherknife",width:48,height:48,offsetX:-17,offsetY:-21},{id:"cactusaxe",width:48,height:48,offsetX:-17,offsetY:-21},{id:"goldaxe",width:48,height:48,offsetX:-17,offsetY:-21},{id:"carnelianaxe",width:48,height:48,offsetX:-17,offsetY:-21},{id:"cactus",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:1,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-16,offsetY:-28},{id:"wolfsword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"deathflail",width:48,height:48,offsetX:-17,offsetY:-21},{id:"candybar",width:48,height:48,offsetX:-17,offsetY:-21},{id:"candybow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"captainbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"catarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"cat",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:4,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-25},{id:"cheoliarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"cheoliarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"chest",animations:{idle_down:{length:1,row:0}},offsetX:0,offsetY:0},{id:"seachest",animations:{idle_down:{length:1,row:0}},offsetX:0,offsetY:0},{id:"christmasarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"clam",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"pickle",width:32,height:32,offsetX:-8,offsetY:-12},{id:"picklemob",width:32,height:32,offsetX:-8,offsetY:-12},{id:"clotharmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"magicarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"metalscarabarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"superheroarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"tigerarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"ghost",width:32,height:32,offsetX:-8,offsetY:-12},{id:"cobra",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"cockroachsuit",width:32,height:32,offsetX:-8,offsetY:-12},{id:"coder",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-7},{id:"cokearmor",width:32,height:32,offsetX:-8,offsetY:-16},{id:"combatuniform",width:32,height:32,offsetX:-8,offsetY:-12},{id:"comb",width:48,height:48,offsetX:-17,offsetY:-21},{id:"conferencecall",width:48,height:48,offsetX:-17,offsetY:-21},{id:"crab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"icecrab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"effect-critical",width:48,height:48,animations:{effect:{length:10,row:0}},offsetX:-17,offsetY:-21},{id:"crystalarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"crystalarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"crystalbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"crystalscorpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"cursedhahoemask",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-21,offsetY:-49},{id:"cursedjangseung",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"damboarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"darkogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"darkregionillusion",width:42,height:42,offsetX:-14,offsetY:-21},{id:"darkregion",width:42,height:42,offsetX:-14,offsetY:-21},{id:"darkscorpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"darkskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"daywalker",width:48,height:48,offsetX:-17,offsetY:-21},{id:"deathbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"death",width:24,height:24,animations:{death:{length:6,row:0}},offsetX:-4,offsetY:-4},{id:"deathknight",width:42,height:42,offsetX:-13,offsetY:-17},{id:"desertnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"desertscorpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"devilkazyaarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"devilkazya",width:32,height:32,offsetX:-8,offsetY:-12},{id:"devilkazyasword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"dinosaurarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"doctor",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"dovakinarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"dovakinarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"dragonarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"earthworm",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"elfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"eliminator",width:42,height:42,offsetX:-14,offsetY:-21},{id:"enelarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"enel",width:32,height:32,offsetX:-8,offsetY:-12},{id:"eneltrident",width:32,height:32,offsetX:-8,offsetY:-12},{id:"evilarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"eye",width:40,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:14,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:14,row:5},atk_down:{length:8,row:6},walk_down:{length:4,row:7},idle_down:{length:14,row:8}},offsetX:-12,offsetY:-18},{id:"fairynpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fallenarcherarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"fallenarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"firebenef",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:0},idle_right:{length:5,row:0},atk_up:{length:5,row:0},walk_up:{length:5,row:0},idle_up:{length:5,row:0},atk_down:{length:5,row:0},walk_down:{length:5,row:0},idle_down:{length:5,row:0}},offsetX:-17,offsetY:-21},{id:"firefox",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:8,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"fireplay",width:48,height:48,offsetX:-17,offsetY:-21},{id:"fireshot",width:48,height:48,offsetX:-17,offsetY:-21},{id:"firespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"firesword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"firstsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fisherman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"effect-flaredance",width:48,height:48,animations:{effect:{length:4,row:0}},offsetX:-17,offsetY:-21},{id:"effect-feathers",width:48,height:48,animations:{effect:{length:7,row:0}},offsetX:-17,offsetY:-21},{id:"flaredeathknight",width:42,height:42,offsetX:-13,offsetY:-17},{id:"fluffy",width:28,height:32,animations:{death:{length:1,row:8},atk_right:{length:4,row:7},walk_right:{length:6,row:3},idle_right:{length:1,row:3},atk_up:{length:4,row:6},idle_up:{length:1,row:2},walk_up:{length:6,row:2},atk_down:{length:4,row:4},walk_down:{length:6,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"forestbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"forestdragon",width:64,height:72,animations:{atk_right:{length:7,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:7,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:7,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-30,offsetY:-30},{id:"forestguardiansword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"forestnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"frankensteinarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"friedpotatoarmor",width:32,height:32,offsetX:-8,offsetY:-16},{id:"frogarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"frog",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-13},{id:"frostarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"frostqueen",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-22},{id:"gayarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"gayarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"gaybow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"gbwingarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"gbwingarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"ghostrider",width:32,height:32,offsetX:-8,offsetY:-12},{id:"goblin",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-9},{id:"goldenarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"goldenarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"platinumarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"goldenbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"goldensword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"platinumsword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"goldgolem",width:32,height:32,offsetX:-8,offsetY:-24},{id:"goldmedal",width:12,height:12},{id:"crown-artist",width:16,height:16},{id:"crown-tier1",width:16,height:16},{id:"crown-tier2",width:16,height:16},{id:"crown-tier3",width:16,height:16},{id:"crown-tier4",width:16,height:16},{id:"crown-tier5",width:16,height:16},{id:"crown-tier6",width:16,height:16},{id:"crown-tier7",width:17,height:16},{id:"pointer",width:32,height:32},{id:"golem",width:32,height:32,offsetX:-8,offsetY:-17},{id:"greenarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"greendamboarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenfish",width:32,height:32,offsetX:-5,offsetY:-13},{id:"greenlightbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"greenlightsaber",width:48,height:48,offsetX:-17,offsetY:-21},{id:"greenpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"greenwingarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenwingarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"guardarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"guardarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"guardmace",width:32,height:32,offsetX:-8,offsetY:-12},{id:"guardsword",width:32,height:32,offsetX:-8,offsetY:-12},{id:"guard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"guard2",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"royalguard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"royalguard2",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-20},{id:"royalguard3",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-12,offsetY:-20},{id:"ratnpc",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-10},{id:"halberd",width:48,height:48,offsetX:-17,offsetY:-21},{id:"halloweenjkarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"hammer",width:32,height:32,offsetX:-8,offsetY:-12},{id:"hand",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"cooking",width:16,height:16,animations:{idle_down:{length:1,row:0}}},{id:"smithing",width:16,height:16,animations:{idle_down:{length:1,row:0}}},{id:"crafting",width:16,height:16,animations:{idle_down:{length:1,row:0}}},{id:"foraging",width:16,height:16,animations:{idle_down:{length:1,row:0}}},{id:"fishing",width:16,height:16,animations:{idle_down:{length:1,row:0}}},{id:"effect-heal2",width:32,height:32,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-10},{id:"hellspider",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-33},{id:"hermitcrab",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-10},{id:"hobgoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"hongcheolarmor",width:32,height:32,offsetX:-8,offsetY:-15},{id:"hongcheol",width:32,height:32,offsetX:-8,offsetY:-15},{id:"huniarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"hunterbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"iamverycoldnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"oldlady",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"oldlady2",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"iceelfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"guildnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"picklenpc",width:16,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-2,offsetY:-8},{id:"santaelfnpc",width:16,height:24,animations:{idle_down:{length:2,row:0}},offsetX:0,offsetY:-10},{id:"icegolem",width:32,height:32,offsetX:-5,offsetY:-12},{id:"iceknight",width:42,height:42,offsetX:-13,offsetY:-17},{id:"icerose",width:32,height:32,offsetX:-8,offsetY:-13},{id:"icevulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"infectedguard",width:32,height:32,offsetX:-7,offsetY:-13},{id:"ironbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"ironknightarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"ironogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"lightningguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"jirisanmoonbear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-26},{id:"justicebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"justicehammer",width:48,height:48,offsetX:-17,offsetY:-21},{id:"kaonashi",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"king",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"king2",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"lavanpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"leatherarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"leatherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"legolasarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"windguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"livingarmor",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"loot",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"machete",width:48,height:48,offsetX:-16,offsetY:-20},{id:"magicspear",width:52,height:48,offsetX:-19,offsetY:-21},{id:"mailarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"mailarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"mantis",width:42,height:42,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"marinebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"memme",width:48,height:48,offsetX:-17,offsetY:-21},{id:"mermaidbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"mermaid",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"mermaidnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"mimic",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:1,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-8,offsetY:-11},{id:"minidragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"miniemperor",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"miniiceknight1",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniiceknight2",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniiceknight3",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniiceknight4",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniiceknight5",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight1",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight2",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight3",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight4",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight5",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight6",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniseadragonarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"miniseadragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"mojojojonpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"moleking",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"momangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"morningstar",width:38,height:38,offsetX:-11,offsetY:-15},{id:"nightmareregion",width:42,height:42,offsetX:-14,offsetY:-21},{id:"ninjaarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"nyan",width:49,height:24,animations:{idle_down:{length:6,row:0}},offsetX:-22,offsetY:-6},{id:"octocat",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"octopus",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"oddeyecat",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-24},{id:"ogrelord",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"hellhound",width:64,height:72,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-48},{id:"oldogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"orc",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"paewoldo",width:48,height:48,offsetX:-17,offsetY:-21},{id:"pain",width:32,height:32,offsetX:-8,offsetY:-12},{id:"paladinarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"penguin",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"pierrot",width:32,height:32,offsetX:-5,offsetY:-13},{id:"pinkcockroacharmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"pinkelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pinksword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"piratearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"blackpiratearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"greenpiratearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"purplepiratearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redpiratearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"piratecaptain",width:64,height:64,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"pirategirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"pirateking",width:32,height:32,offsetX:-8,offsetY:-12},{id:"pirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"plasticbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"platearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"platearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"plunger",width:48,height:48,offsetX:-17,offsetY:-21},{id:"poisonspider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"portalarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"powerarmour",width:32,height:32,offsetX:-8,offsetY:-12},{id:"powersword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"preta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"priest",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"effect-provocation",width:32,height:64,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"purplecloudkallege",width:48,height:48,offsetX:-17,offsetY:-21},{id:"purplepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"queenant",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"queenspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"rabbitarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"radisharmor",width:32,height:32,offsetX:-8,offsetY:-17},{id:"rainbowapro",width:32,height:32,offsetX:-8,offsetY:-12},{id:"rainbowsword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"ratarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"ratarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"rat",width:48,height:48,idleSpeed:250,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"icerat",width:48,height:48,idleSpeed:200,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"redarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bluearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redcockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"reddamboarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redenelbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redfish",width:32,height:32,offsetX:-5,offsetY:-13},{id:"redguardarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redguardarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redguard",width:32,height:32,offsetX:-8,offsetY:-13},{id:"redlightbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redlightsaber",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redmetalbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redmetalsword",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"redpirateskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-23},{id:"redsicklebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redsickle",width:48,height:48,offsetX:-17,offsetY:-21},{id:"redstoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"purplestoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"greenstoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redsword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"icesword",width:48,height:48,offsetX:-16,offsetY:-20},{id:"redwingarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"redwingarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"regionarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"regionhenchman",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:5,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-39},{id:"rhaphidophoridae",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"rick",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"robotarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"rosebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"rose",width:32,height:32,offsetX:-8,offsetY:-13},{id:"rudolfarmor",width:32,height:32,offsetX:-8,offsetY:-16},{id:"rudolf",width:42,height:42,offsetX:-14,offsetY:-21},{id:"santaelf",width:32,height:32,offsetX:-8,offsetY:-12},{id:"santa",width:64,height:72,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-55},{id:"schooluniform",width:32,height:32,offsetX:-8,offsetY:-12},{id:"scientist",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"scimitar",width:32,height:32,offsetX:-8,offsetY:-12},{id:"seadragonarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"seadragon",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-39},{id:"seahorsebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"searage",width:48,height:48,offsetX:-17,offsetY:-21},{id:"secondsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shadow16",width:16,height:16},{id:"shadowregionarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"shadowregion",width:42,height:42,offsetX:-14,offsetY:-21},{id:"shepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shieldbenef",width:32,height:30,animations:{atk_right:{length:8,row:0},walk_right:{length:8,row:0},idle_right:{length:8,row:0},atk_up:{length:8,row:0},walk_up:{length:8,row:0},idle_up:{length:8,row:0},atk_down:{length:8,row:0},walk_down:{length:8,row:0},idle_down:{length:8,row:0}},offsetX:-6,offsetY:-10},{id:"sicklebow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"sickle",width:48,height:48,offsetX:-17,offsetY:-21},{id:"sidesword",width:48,height:48,offsetX:-16,offsetY:-25},{id:"silvermedal",width:12,height:12},{id:"skeleton2",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeletonking",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"skydinosaur",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:5,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"skyelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"skylightbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"skylightsaber",width:48,height:48,offsetX:-17,offsetY:-21},{id:"slime",width:32,height:32,offsetX:-6,offsetY:-12},{id:"smalldevil",width:42,height:42,animations:{atk_right:{length:4,row:0},walk_right:{length:2,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:2,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:2,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-16},{id:"snek",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"snowelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowfoxarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"snowfoxarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"snowlady",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"snowmanarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"snowman",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"snowrabbit",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"snowshepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"snowwolf",width:42,height:42,offsetX:-14,offsetY:-21},{id:"soldierant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-27},{id:"soldier",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sorcerer",width:26,height:26,animations:{idle_down:{length:6,row:0}},offsetX:-5,offsetY:-9},{id:"soybeanbug",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"sparks",offsetX:0,offsetY:0},{id:"spear",width:32,height:32,offsetX:-8,offsetY:-12},{id:"spectre",width:34,height:34,animations:{atk_right:{length:8,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:8,row:4},idle_up:{length:8,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-9,offsetY:-13},{id:"spider",width:35,height:35,animations:{death:{length:1,row:8},atk_right:{length:2,row:7},walk_right:{length:5,row:3},idle_right:{length:1,row:3},atk_up:{length:2,row:6},idle_up:{length:1,row:2},walk_up:{length:5,row:2},atk_down:{length:2,row:4},walk_down:{length:5,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"sponge",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"squeakyhammer",width:32,height:32,offsetX:-8,offsetY:-12},{id:"squidarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"squid",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"effect-stun",width:48,height:48,animations:{effect:{length:6,row:0}},offsetX:-15,offsetY:-38},{id:"suicideghost",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"effect-supercat",width:32,height:64,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"superiorangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sword1",width:32,height:32,offsetX:-8,offsetY:-12},{id:"sword2",width:48,height:48,offsetX:-16,offsetY:-20},{id:"fishingpole",width:32,height:32,offsetX:-8,offsetY:-12},{id:"lightningscimitar",width:48,height:48,offsetX:-16,offsetY:-20},{id:"sword",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"taekwondo",width:32,height:32,offsetX:-8,offsetY:-12},{id:"talk",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"axe_cursor",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"pickaxe_cursor",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"target",animations:{move:{length:4,row:0},atk:{length:4,row:1}}},{id:"thiefarmor",width:32,height:32,offsetX:-8,offsetY:-13},{id:"tigerarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"trident",width:32,height:32,offsetX:-8,offsetY:-12},{id:"typhoon",width:48,height:48,offsetX:-17,offsetY:-21},{id:"vampire",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"vendingmachine",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villagegirl",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villagegirl2",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villagegirl3",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villager",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"miner",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"violetbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"vulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"watermelonbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"staff",width:48,height:48,offsetX:-17,offsetY:-21},{id:"lightningstaff",width:48,height:48,offsetX:-17,offsetY:-21},{id:"naturestaff",width:48,height:48,offsetX:-17,offsetY:-21},{id:"firestaff",width:48,height:48,offsetX:-17,offsetY:-21},{id:"icestaff",width:48,height:48,offsetX:-17,offsetY:-21},{id:"whip",width:48,height:48,offsetX:-17,offsetY:-21},{id:"whitearcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"whitearmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"whitebear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"whitemouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"whitetiger",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"wizard",width:26,height:26,animations:{death:{length:3,row:0},atk_right:{length:4,row:1},atk_up:{length:4,row:2},atk_down:{length:4,row:3},walk_right:{length:4,row:4},walk_up:{length:4,row:5},walk_down:{length:4,row:6},idle_right:{length:6,row:7},idle_up:{length:6,row:8},idle_down:{length:6,row:9}},offsetX:-5,offsetY:-9},{id:"wizardrobe",width:32,height:32,offsetX:-8,offsetY:-12},{id:"bluewizardrobe",width:32,height:32,offsetX:-8,offsetY:-12},{id:"darkwizardrobe",width:32,height:32,offsetX:-8,offsetY:-12},{id:"darkwolf",width:42,height:42,offsetX:-14,offsetY:-21},{id:"greenwizardrobe",width:32,height:32,offsetX:-8,offsetY:-12},{id:"orangewizardrobe",width:32,height:32,offsetX:-8,offsetY:-12},{id:"wolfarcherarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"wolfarmor",width:32,height:32,offsetX:-8,offsetY:-12},{id:"wolf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-13},{id:"woodenbow",width:48,height:48,offsetX:-17,offsetY:-21},{id:"yellowbat",width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"yellowfish",width:32,height:32,offsetX:-5,offsetY:-13},{id:"yellowmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"yellowpreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"zombiegf",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"zombie",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"projectile-fireball",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24},{id:"projectile-fireball2",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24},{id:"projectile-iceball",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24},{id:"projectile-bluelightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-redlightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-greenbolt",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-purplebolt",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-yellowlightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-poisonball",width:40,height:40,animations:{travel:{length:10,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-boulder",idleSpeed:75,width:32,height:32,animations:{travel:{length:8,row:0}}},{id:"projectile-arrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-firearrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-poisonarrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-icearrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-lightningarrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-nisocarrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-cinnabararrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-pythararrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-iboarrow",idleSpeed:75,width:16,height:16,animations:{travel:{length:4,row:0}},offsetX:0,offsetY:0},{id:"projectile-none",idleSpeed:75,width:64,height:64,animations:{travel:{length:1,row:0}},offsetX:-32,offsetY:-32},{id:"projectile-tornado",idleSpeed:75,width:48,height:64,animations:{travel:{length:8,row:0}},offsetX:-29,offsetY:-37},{id:"projectile-terror",idleSpeed:75,width:64,height:64,animations:{travel:{length:8,row:0}},offsetX:-32,offsetY:-32},{id:"projectile-gift",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"projectile-gift2",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"projectile-gift3",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"projectile-gift4",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"projectile-gift5",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"projectile-gift6",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24},{id:"effect-fireball",width:48,height:48,animations:{effect:{length:8,row:0}},offsetX:-17,offsetY:-16},{id:"effect-poisonball",width:40,height:40,animations:{effect:{length:10,row:0}},offsetX:-13,offsetY:-14},{id:"effect-burn",width:32,height:32,animations:{effect:{length:5,row:0}},offsetX:-8,offsetY:-16},{id:"effect-freeze",width:32,height:32,animations:{effect:{length:6,row:0}},offsetX:-8,offsetY:-16},{id:"effect-lavaball",width:48,height:48,animations:{effect:{length:8,row:0}},offsetX:-16,offsetY:-24},{id:"effect-heal",width:48,height:48,animations:{effect:{length:8,row:0}}},{id:"effect-iceball",width:48,height:48,animations:{effect:{length:9,row:0}},offsetX:-18,offsetY:-15},{id:"effect-boulder",width:32,height:32,animations:{effect:{length:7,row:0}},offsetX:-9,offsetY:-12},{id:"spell",animations:{idle_down:{length:1,row:0}}},{id:"bow",animations:{idle_down:{length:1,row:0}}},{id:"effect-terror",width:64,height:64,animations:{effect:{length:8,row:0}},offsetX:-24,offsetY:-32},{id:"effect-terror2",width:32,height:32,animations:{effect:{length:5,row:0}},offsetX:-8,offsetY:-16},{id:"icegoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"items/accuracypotion",offsetX:0,offsetY:0},{id:"items/adhererarcherarmor",offsetX:0,offsetY:0},{id:"items/adhererrobe",offsetX:0,offsetY:0},{id:"items/adminarmor",offsetX:0,offsetY:0},{id:"items/apple",offsetX:0,offsetY:0},{id:"items/archerarmor",offsetX:0,offsetY:0},{id:"items/archerschooluniform",offsetX:0,offsetY:0},{id:"items/arrow",offsetX:0,offsetY:0},{id:"items/avocado",offsetX:0,offsetY:0},{id:"items/axe",offsetX:0,offsetY:0},{id:"items/bamboospear",offsetX:0,offsetY:0},{id:"items/banana",offsetX:0,offsetY:0},{id:"items/barley",offsetX:0,offsetY:0},{id:"items/basket",offsetX:0,offsetY:0},{id:"items/bastardsword",offsetX:0,offsetY:0},{id:"items/bead",offsetX:0,offsetY:0},{id:"items/bearseonbiarmor",offsetX:0,offsetY:0},{id:"items/beautifullife",offsetX:0,offsetY:0},{id:"items/beearmor",offsetX:0,offsetY:0},{id:"items/beer",offsetX:0,offsetY:0},{id:"items/beermug",offsetX:0,offsetY:0},{id:"items/beetlearmor",offsetX:0,offsetY:0},{id:"items/bigflask",offsetX:0,offsetY:0},{id:"items/bigmanaflask",offsetX:0,offsetY:0},{id:"items/blackberry",offsetX:0,offsetY:0},{id:"items/blackpiratearcherarmor",offsetX:0,offsetY:0},{id:"items/blackpotion",offsetX:0,offsetY:0},{id:"items/blackspiderarmor",offsetX:0,offsetY:0},{id:"items/bloodbow",offsetX:0,offsetY:0},{id:"items/bloodwoodlogs",offsetX:0,offsetY:0},{id:"items/bluearmor",offsetX:0,offsetY:0},{id:"items/blueberry",offsetX:0,offsetY:0},{id:"items/bluebow",offsetX:0,offsetY:0},{id:"items/bluedamboarmor",offsetX:0,offsetY:0},{id:"items/bluelily",offsetX:0,offsetY:0},{id:"items/bluescimitar",offsetX:0,offsetY:0},{id:"items/bluesword",offsetX:0,offsetY:0},{id:"items/bluewingarcherarmor",offsetX:0,offsetY:0},{id:"items/bluewingarmor",offsetX:0,offsetY:0},{id:"items/bluewizardrobe",offsetX:0,offsetY:0},{id:"items/book",offsetX:0,offsetY:0},{id:"items/boostpotion",offsetX:0,offsetY:0},{id:"items/borth",offsetX:0,offsetY:0},{id:"items/bowcommon",offsetX:0,offsetY:0},{id:"items/bowlimb",offsetX:0,offsetY:0},{id:"items/bowrare",offsetX:0,offsetY:0},{id:"items/string",offsetX:0,offsetY:0},{id:"items/bowuncommon",offsetX:0,offsetY:0},{id:"items/branch",offsetX:0,offsetY:0},{id:"items/breaker",offsetX:0,offsetY:0},{id:"items/bronzebar",offsetX:0,offsetY:0},{id:"items/bronzeore",offsetX:0,offsetY:0},{id:"items/bucket",offsetX:0,offsetY:0},{id:"items/burger",offsetX:0,offsetY:0},{id:"items/burgerarmor",offsetX:0,offsetY:0},{id:"items/butcherknife",offsetX:0,offsetY:0},{id:"items/cactusaxe",offsetX:0,offsetY:0},{id:"items/cake",offsetX:0,offsetY:0},{id:"items/candybar",offsetX:0,offsetY:0},{id:"items/candybow",offsetX:0,offsetY:0},{id:"items/candykey",offsetX:0,offsetY:0},{id:"items/captainbow",offsetX:0,offsetY:0},{id:"items/carnelianaxe",offsetX:0,offsetY:0},{id:"items/catarmor",offsetX:0,offsetY:0},{id:"items/cd",offsetX:0,offsetY:0},{id:"items/cheese",offsetX:0,offsetY:0},{id:"items/cheoliarcherarmor",offsetX:0,offsetY:0},{id:"items/cheoliarmor",offsetX:0,offsetY:0},{id:"items/christmasarmor",offsetX:0,offsetY:0},{id:"items/cilantro",offsetX:0,offsetY:0},{id:"items/cinnabararrow",offsetX:0,offsetY:0},{id:"items/cinnabarore",offsetX:0,offsetY:0},{id:"items/clamobject",offsetX:0,offsetY:0},{id:"items/clamchowder",offsetX:0,offsetY:0},{id:"items/cloth",offsetX:0,offsetY:0},{id:"items/clotharmor",offsetX:0,offsetY:0},{id:"items/cloudberry",offsetX:0,offsetY:0},{id:"items/coal",offsetX:0,offsetY:0},{id:"items/cockroachsuit",offsetX:0,offsetY:0},{id:"items/cokearmor",offsetX:0,offsetY:0},{id:"items/comb",offsetX:0,offsetY:0},{id:"items/combatuniform",offsetX:0,offsetY:0},{id:"items/conferencecall",offsetX:0,offsetY:0},{id:"items/cookedbeef",offsetX:0,offsetY:0},{id:"items/cookedchicken",offsetX:0,offsetY:0},{id:"items/cookedpork",offsetX:0,offsetY:0},{id:"items/cookedsausage",offsetX:0,offsetY:0},{id:"items/cookedshrimp",offsetX:0,offsetY:0},{id:"items/copperbar",offsetX:0,offsetY:0},{id:"items/copperore",offsetX:0,offsetY:0},{id:"items/corn",offsetX:0,offsetY:0},{id:"items/crystalarcherarmor",offsetX:0,offsetY:0},{id:"items/crystalarmor",offsetX:0,offsetY:0},{id:"items/crystalbow",offsetX:0,offsetY:0},{id:"items/cure",offsetX:0,offsetY:0},{id:"items/damboarmor",offsetX:0,offsetY:0},{id:"items/dandelion",offsetX:0,offsetY:0},{id:"items/darkwizardrobe",offsetX:0,offsetY:0},{id:"items/daywalker",offsetX:0,offsetY:0},{id:"items/deathbow",offsetX:0,offsetY:0},{id:"items/deathflail",offsetX:0,offsetY:0},{id:"items/defencepotion",offsetX:0,offsetY:0},{id:"items/devilkazyaarmor",offsetX:0,offsetY:0},{id:"items/devilkazyasword",offsetX:0,offsetY:0},{id:"items/diamondring",offsetX:0,offsetY:0},{id:"items/dinosaurarmor",offsetX:0,offsetY:0},{id:"items/dolring",offsetX:0,offsetY:0},{id:"items/dovakinarcherarmor",offsetX:0,offsetY:0},{id:"items/dovakinarmor",offsetX:0,offsetY:0},{id:"items/dragonarmor",offsetX:0,offsetY:0},{id:"items/egg",offsetX:0,offsetY:0},{id:"items/element",offsetX:0,offsetY:0},{id:"items/emeraldpendant",offsetX:0,offsetY:0},{id:"items/emeraldring",offsetX:0,offsetY:0},{id:"items/enelarmor",offsetX:0,offsetY:0},{id:"items/eneltrident",offsetX:0,offsetY:0},{id:"items/essentialrage",offsetX:0,offsetY:0},{id:"items/evilarmor",offsetX:0,offsetY:0},{id:"items/fallenarcherarmor",offsetX:0,offsetY:0},{id:"items/fallenarmor",offsetX:0,offsetY:0},{id:"items/feather",offsetX:0,offsetY:0},{id:"items/firearrow",offsetX:0,offsetY:0},{id:"items/fireaxe",offsetX:0,offsetY:0},{id:"items/firebead",offsetX:0,offsetY:0},{id:"items/fireplay",offsetX:0,offsetY:0},{id:"items/firepotion",offsetX:0,offsetY:0},{id:"items/fireshot",offsetX:0,offsetY:0},{id:"items/firestaff",offsetX:0,offsetY:0},{id:"items/firesword",offsetX:0,offsetY:0},{id:"items/flask",offsetX:0,offsetY:0},{id:"items/forestbow",offsetX:0,offsetY:0},{id:"items/forestguardiansword",offsetX:0,offsetY:0},{id:"items/frankensteinarmor",offsetX:0,offsetY:0},{id:"items/friedpotatoarmor",offsetX:0,offsetY:0},{id:"items/frogarmor",offsetX:0,offsetY:0},{id:"items/frostarmor",offsetX:0,offsetY:0},{id:"items/frostring",offsetX:0,offsetY:0},{id:"items/gayarcherarmor",offsetX:0,offsetY:0},{id:"items/gayarmor",offsetX:0,offsetY:0},{id:"items/gaybow",offsetX:0,offsetY:0},{id:"items/gbwingarcherarmor",offsetX:0,offsetY:0},{id:"items/gbwingarmor",offsetX:0,offsetY:0},{id:"items/ghostrider",offsetX:0,offsetY:0},{id:"items/gold",offsetX:0,offsetY:0},{id:"items/goldaxe",offsetX:0,offsetY:0},{id:"items/goldbar",offsetX:0,offsetY:0},{id:"items/goldboots",offsetX:0,offsetY:0},{id:"items/goldenarcherarmor",offsetX:0,offsetY:0},{id:"items/goldenarmor",offsetX:0,offsetY:0},{id:"items/goldenbow",offsetX:0,offsetY:0},{id:"items/goldensword",offsetX:0,offsetY:0},{id:"items/goldnugget",offsetX:0,offsetY:0},{id:"items/goldore",offsetX:0,offsetY:0},{id:"items/goldring",offsetX:0,offsetY:0},{id:"items/gooseberry",offsetX:0,offsetY:0},{id:"items/greenarcherarmor",offsetX:0,offsetY:0},{id:"items/greenarmor",offsetX:0,offsetY:0},{id:"items/greenbow",offsetX:0,offsetY:0},{id:"items/greendamboarmor",offsetX:0,offsetY:0},{id:"items/greenlightbow",offsetX:0,offsetY:0},{id:"items/greenlightsaber",offsetX:0,offsetY:0},{id:"items/greenpendant",offsetX:0,offsetY:0},{id:"items/greenpiratearcherarmor",offsetX:0,offsetY:0},{id:"items/greenpiratearmor",offsetX:0,offsetY:0},{id:"items/greenwingarcherarmor",offsetX:0,offsetY:0},{id:"items/greenwingarmor",offsetX:0,offsetY:0},{id:"items/greenwizardrobe",offsetX:0,offsetY:0},{id:"items/guardarcherarmor",offsetX:0,offsetY:0},{id:"items/guardarmor",offsetX:0,offsetY:0},{id:"items/halberd",offsetX:0,offsetY:0},{id:"items/halloweenjkarmor",offsetX:0,offsetY:0},{id:"items/hammer",offsetX:0,offsetY:0},{id:"items/hongcheolarmor",offsetX:0,offsetY:0},{id:"items/hotsauce",offsetX:0,offsetY:0},{id:"items/huniarmor",offsetX:0,offsetY:0},{id:"items/hunterbow",offsetX:0,offsetY:0},{id:"items/iboarrow",offsetX:0,offsetY:0},{id:"items/iboore",offsetX:0,offsetY:0},{id:"items/icearrow",offsetX:0,offsetY:0},{id:"items/icebead",offsetX:0,offsetY:0},{id:"items/icelogs",offsetX:0,offsetY:0},{id:"items/icepalmlogs",offsetX:0,offsetY:0},{id:"items/icepinelogs",offsetX:0,offsetY:0},{id:"items/icerose",offsetX:0,offsetY:0},{id:"items/icestaff",offsetX:0,offsetY:0},{id:"items/icesword",offsetX:0,offsetY:0},{id:"items/ironbar",offsetX:0,offsetY:0},{id:"items/ironbow",offsetX:0,offsetY:0},{id:"items/ironknightarmor",offsetX:0,offsetY:0},{id:"items/ironore",offsetX:0,offsetY:0},{id:"items/jellyfish",offsetX:0,offsetY:0},{id:"items/jellyfishsmoothie",offsetX:0,offsetY:0},{id:"items/justicebow",offsetX:0,offsetY:0},{id:"items/justicehammer",offsetX:0,offsetY:0},{id:"items/kelp",offsetX:0,offsetY:0},{id:"items/kiwi",offsetX:0,offsetY:0},{id:"items/knife",offsetX:0,offsetY:0},{id:"items/lavaboots",offsetX:0,offsetY:0},{id:"items/leaf",offsetX:0,offsetY:0},{id:"items/leatherarcherarmor",offsetX:0,offsetY:0},{id:"items/leatherarmor",offsetX:0,offsetY:0},{id:"items/leatherboots",offsetX:0,offsetY:0},{id:"items/legolasarmor",offsetX:0,offsetY:0},{id:"items/lightningarrow",offsetX:0,offsetY:0},{id:"items/lightningbead",offsetX:0,offsetY:0},{id:"items/lightningscimitar",offsetX:0,offsetY:0},{id:"items/lightningstaff",offsetX:0,offsetY:0},{id:"items/logs",offsetX:0,offsetY:0},{id:"items/loveactring",offsetX:0,offsetY:0},{id:"items/machete",offsetX:0,offsetY:0},{id:"items/magicspear",offsetX:0,offsetY:0},{id:"items/mailarcherarmor",offsetX:0,offsetY:0},{id:"items/mailarmor",offsetX:0,offsetY:0},{id:"items/manaflask",offsetX:0,offsetY:0},{id:"items/mango",offsetX:0,offsetY:0},{id:"items/berylpendant",offsetX:0,offsetY:0},{id:"items/marinebow",offsetX:0,offsetY:0},{id:"items/melon-slice",offsetX:0,offsetY:0},{id:"items/memme",offsetX:0,offsetY:0},{id:"items/mermaidbow",offsetX:0,offsetY:0},{id:"items/milkbottle",offsetX:0,offsetY:0},{id:"items/mineral",offsetX:0,offsetY:0},{id:"items/miniseadragonarmor",offsetX:0,offsetY:0},{id:"items/moonrockore",offsetX:0,offsetY:0},{id:"items/morningstar",offsetX:0,offsetY:0},{id:"items/mulberry",offsetX:0,offsetY:0},{id:"items/mushroom1",offsetX:0,offsetY:0},{id:"items/mushroom2",offsetX:0,offsetY:0},{id:"items/mushroom3",offsetX:0,offsetY:0},{id:"items/mushroom4",offsetX:0,offsetY:0},{id:"items/mushroom5",offsetX:0,offsetY:0},{id:"items/mushroom6",offsetX:0,offsetY:0},{id:"items/naturebead",offsetX:0,offsetY:0},{id:"items/naturestaff",offsetX:0,offsetY:0},{id:"items/ninjaarmor",offsetX:0,offsetY:0},{id:"items/nisocarrow",offsetX:0,offsetY:0},{id:"items/nisocore",offsetX:0,offsetY:0},{id:"items/nisocring",offsetX:0,offsetY:0},{id:"items/null",offsetX:0,offsetY:0},{id:"items/oat",offsetX:0,offsetY:0},{id:"items/onion",offsetX:0,offsetY:0},{id:"items/orange",offsetX:0,offsetY:0},{id:"items/orangewizardrobe",offsetX:0,offsetY:0},{id:"items/paewoldo",offsetX:0,offsetY:0},{id:"items/paladinarmor",offsetX:0,offsetY:0},{id:"items/palmlogs",offsetX:0,offsetY:0},{id:"items/peach",offsetX:0,offsetY:0},{id:"items/pearlpendant",offsetX:0,offsetY:0},{id:"items/pearlring",offsetX:0,offsetY:0},{id:"items/pendant1",offsetX:0,offsetY:0},{id:"items/pickaxe",offsetX:0,offsetY:0},{id:"items/pickle",offsetX:0,offsetY:0},{id:"items/pineapple",offsetX:0,offsetY:0},{id:"items/pinelogs",offsetX:0,offsetY:0},{id:"items/pinkcockroacharmor",offsetX:0,offsetY:0},{id:"items/pinksword",offsetX:0,offsetY:0},{id:"items/piratearcherarmor",offsetX:0,offsetY:0},{id:"items/piratearmor",offsetX:0,offsetY:0},{id:"items/pirateking",offsetX:0,offsetY:0},{id:"items/plasticbow",offsetX:0,offsetY:0},{id:"items/platearcherarmor",offsetX:0,offsetY:0},{id:"items/platearmor",offsetX:0,offsetY:0},{id:"items/platinumarmor",offsetX:0,offsetY:0},{id:"items/platinumsword",offsetX:0,offsetY:0},{id:"items/plum",offsetX:0,offsetY:0},{id:"items/plunger",offsetX:0,offsetY:0},{id:"items/poisonarrow",offsetX:0,offsetY:0},{id:"items/poisonaxe",offsetX:0,offsetY:0},{id:"items/portalarmor",offsetX:0,offsetY:0},{id:"items/potato",offsetX:0,offsetY:0},{id:"items/powerarmour",offsetX:0,offsetY:0},{id:"items/powersword",offsetX:0,offsetY:0},{id:"items/purplecloudkallege",offsetX:0,offsetY:0},{id:"items/purplepiratearcherarmor",offsetX:0,offsetY:0},{id:"items/purplepiratearmor",offsetX:0,offsetY:0},{id:"items/pythararrow",offsetX:0,offsetY:0},{id:"items/pytharore",offsetX:0,offsetY:0},{id:"items/pytharring",offsetX:0,offsetY:0},{id:"items/quinoa",offsetX:0,offsetY:0},{id:"items/rabbitarmor",offsetX:0,offsetY:0},{id:"items/radisharmor",offsetX:0,offsetY:0},{id:"items/rainbowapro",offsetX:0,offsetY:0},{id:"items/rainbowsword",offsetX:0,offsetY:0},{id:"items/raspberry",offsetX:0,offsetY:0},{id:"items/ratarcherarmor",offsetX:0,offsetY:0},{id:"items/ratarmor",offsetX:0,offsetY:0},{id:"items/rawbeef",offsetX:0,offsetY:0},{id:"items/rawchicken",offsetX:0,offsetY:0},{id:"items/rawpork",offsetX:0,offsetY:0},{id:"items/rawsausage",offsetX:0,offsetY:0},{id:"items/rawshrimp",offsetX:0,offsetY:0},{id:"items/redarcherarmor",offsetX:0,offsetY:0},{id:"items/redarmor",offsetX:0,offsetY:0},{id:"items/redbow",offsetX:0,offsetY:0},{id:"items/reddamboarmor",offsetX:0,offsetY:0},{id:"items/redenelbow",offsetX:0,offsetY:0},{id:"items/redguardarcherarmor",offsetX:0,offsetY:0},{id:"items/redguardarmor",offsetX:0,offsetY:0},{id:"items/redlightbow",offsetX:0,offsetY:0},{id:"items/redlightsaber",offsetX:0,offsetY:0},{id:"items/redmetalbow",offsetX:0,offsetY:0},{id:"items/redmetalsword",offsetX:0,offsetY:0},{id:"items/redpiratearcherarmor",offsetX:0,offsetY:0},{id:"items/redpiratearmor",offsetX:0,offsetY:0},{id:"items/redsickle",offsetX:0,offsetY:0},{id:"items/redsicklebow",offsetX:0,offsetY:0},{id:"items/redsword",offsetX:0,offsetY:0},{id:"items/redwingarcherarmor",offsetX:0,offsetY:0},{id:"items/redwingarmor",offsetX:0,offsetY:0},{id:"items/regionarmor",offsetX:0,offsetY:0},{id:"items/rice",offsetX:0,offsetY:0},{id:"items/ring1",offsetX:0,offsetY:0},{id:"items/robotarmor",offsetX:0,offsetY:0},{id:"items/rock",offsetX:0,offsetY:0},{id:"items/rockfish",offsetX:0,offsetY:0},{id:"items/rose",offsetX:0,offsetY:0},{id:"items/rosebow",offsetX:0,offsetY:0},{id:"items/royalazalea",offsetX:0,offsetY:0},{id:"items/rubypendant",offsetX:0,offsetY:0},{id:"items/rubyring",offsetX:0,offsetY:0},{id:"items/rudolfarmor",offsetX:0,offsetY:0},{id:"items/rustedaxe",offsetX:0,offsetY:0},{id:"items/samuraiarmor",offsetX:0,offsetY:0},{id:"items/sapphirering",offsetX:0,offsetY:0},{id:"items/sausage",offsetX:0,offsetY:0},{id:"items/schooluniform",offsetX:0,offsetY:0},{id:"items/scimitar",offsetX:0,offsetY:0},{id:"items/seadragonarmor",offsetX:0,offsetY:0},{id:"items/seahorsebow",offsetX:0,offsetY:0},{id:"items/searage",offsetX:0,offsetY:0},{id:"items/seed",offsetX:0,offsetY:0},{id:"items/shadowregionarmor",offsetX:0,offsetY:0},{id:"items/shardt1",offsetX:0,offsetY:0},{id:"items/shardt2",offsetX:0,offsetY:0},{id:"items/shardt3",offsetX:0,offsetY:0},{id:"items/shardt4",offsetX:0,offsetY:0},{id:"items/shardt5",offsetX:0,offsetY:0},{id:"items/sickle",offsetX:0,offsetY:0},{id:"items/sicklebow",offsetX:0,offsetY:0},{id:"items/sidesword",offsetX:0,offsetY:0},{id:"items/silverring",offsetX:0,offsetY:0},{id:"items/skylightbow",offsetX:0,offsetY:0},{id:"items/skylightsaber",offsetX:0,offsetY:0},{id:"items/snowfoxarcherarmor",offsetX:0,offsetY:0},{id:"items/snowfoxarmor",offsetX:0,offsetY:0},{id:"items/snowmanarmor",offsetX:0,offsetY:0},{id:"items/snowpotion",offsetX:0,offsetY:0},{id:"items/spear",offsetX:0,offsetY:0},{id:"items/spiritring",offsetX:0,offsetY:0},{id:"items/sproutring",offsetX:0,offsetY:0},{id:"items/squeakyhammer",offsetX:0,offsetY:0},{id:"items/squidarmor",offsetX:0,offsetY:0},{id:"items/staff",offsetX:0,offsetY:0},{id:"items/steelboots",offsetX:0,offsetY:0},{id:"items/stew",offsetX:0,offsetY:0},{id:"items/stew2",offsetX:0,offsetY:0},{id:"items/stick",offsetX:0,offsetY:0},{id:"items/strawberry",offsetX:0,offsetY:0},{id:"items/strengthpotion",offsetX:0,offsetY:0},{id:"items/swiftboots",offsetX:0,offsetY:0},{id:"items/sword1",offsetX:0,offsetY:0},{id:"items/sword2",offsetX:0,offsetY:0},{id:"items/taekwondo",offsetX:0,offsetY:0},{id:"items/tamagotchiring",offsetX:0,offsetY:0},{id:"items/thiefarmor",offsetX:0,offsetY:0},{id:"items/tigerarmor",offsetX:0,offsetY:0},{id:"items/tinbar",offsetX:0,offsetY:0},{id:"items/tinore",offsetX:0,offsetY:0},{id:"items/tofu",offsetX:0,offsetY:0},{id:"items/token",offsetX:0,offsetY:0},{id:"items/tomato",offsetX:0,offsetY:0},{id:"items/topazring",offsetX:0,offsetY:0},{id:"items/trident",offsetX:0,offsetY:0},{id:"items/rawtuna",offsetX:0,offsetY:0},{id:"items/tunasushi",offsetX:0,offsetY:0},{id:"items/typhoon",offsetX:0,offsetY:0},{id:"items/undefined",offsetX:0,offsetY:0},{id:"items/violetbow",offsetX:0,offsetY:0},{id:"items/waterbucket",offsetX:0,offsetY:0},{id:"items/watermelon",offsetX:0,offsetY:0},{id:"items/watermelonbow",offsetX:0,offsetY:0},{id:"items/watermelonslice",offsetX:0,offsetY:0},{id:"items/whip",offsetX:0,offsetY:0},{id:"items/whitearcherarmor",offsetX:0,offsetY:0},{id:"items/whitearmor",offsetX:0,offsetY:0},{id:"items/willowlogs",offsetX:0,offsetY:0},{id:"items/wizardrobe",offsetX:0,offsetY:0},{id:"items/wolfarcherarmor",offsetX:0,offsetY:0},{id:"items/wolfarmor",offsetX:0,offsetY:0},{id:"items/wolfsword",offsetX:0,offsetY:0},{id:"items/woodenbow",offsetX:0,offsetY:0},{id:"items/amethyst",offsetX:0,offsetY:0},{id:"items/beryl",offsetX:0,offsetY:0},{id:"items/citrine",offsetX:0,offsetY:0},{id:"items/emerald",offsetX:0,offsetY:0},{id:"items/lapislazuli",offsetX:0,offsetY:0},{id:"items/opal",offsetX:0,offsetY:0},{id:"items/peridot",offsetX:0,offsetY:0},{id:"items/ruby",offsetX:0,offsetY:0},{id:"items/taaffeite",offsetX:0,offsetY:0},{id:"items/topaz",offsetX:0,offsetY:0},{id:"cinnamonbowlsmall",offsetX:0,offsetY:0},{id:"basil",offsetX:0,offsetY:0},{id:"basilbowlmedium",offsetX:0,offsetY:0},{id:"basilpowder",offsetX:0,offsetY:0},{id:"basilshaker",offsetX:0,offsetY:0},{id:"bayleaves",offsetX:0,offsetY:0},{id:"bayleavesbottle",offsetX:0,offsetY:0},{id:"bayleavesbowlmedium",offsetX:0,offsetY:0},{id:"blackpepperplant",offsetX:0,offsetY:0},{id:"bowlsmall",offsetX:0,offsetY:0},{id:"bowlmedium",offsetX:0,offsetY:0},{id:"cayennebowlsmall",offsetX:0,offsetY:0},{id:"cayennepepper",offsetX:0,offsetY:0},{id:"cayenneshaker",offsetX:0,offsetY:0},{id:"chilli",offsetX:0,offsetY:0},{id:"cinnamon",offsetX:0,offsetY:0},{id:"cinnamonbark",offsetX:0,offsetY:0},{id:"cinnamonshaker",offsetX:0,offsetY:0},{id:"cumin",offsetX:0,offsetY:0},{id:"cuminbowlsmall",offsetX:0,offsetY:0},{id:"cuminplant",offsetX:0,offsetY:0},{id:"cuminshaker",offsetX:0,offsetY:0},{id:"emptybottle",offsetX:0,offsetY:0},{id:"emptyshaker",offsetX:0,offsetY:0},{id:"ginderpowderbowlsmall",offsetX:0,offsetY:0},{id:"ginger",offsetX:0,offsetY:0},{id:"gingerbottle",offsetX:0,offsetY:0},{id:"gingerpowder",offsetX:0,offsetY:0},{id:"horseradish",offsetX:0,offsetY:0},{id:"horseradishbottle",offsetX:0,offsetY:0},{id:"horseradishbowlsmall",offsetX:0,offsetY:0},{id:"horseradishsmashedbowlsmall",offsetX:0,offsetY:0},{id:"lavender",offsetX:0,offsetY:0},{id:"lavenderbowlsmall",offsetX:0,offsetY:0},{id:"lavenderseeds",offsetX:0,offsetY:0},{id:"lavendershaker",offsetX:0,offsetY:0},{id:"mint",offsetX:0,offsetY:0},{id:"mintbowlsmall",offsetX:0,offsetY:0},{id:"mustardbottle",offsetX:0,offsetY:0},{id:"mustardbowlsmall",offsetX:0,offsetY:0},{id:"mustardplant",offsetX:0,offsetY:0},{id:"paprika",offsetX:0,offsetY:0},{id:"paprikabowlsmall",offsetX:0,offsetY:0},{id:"paprikapowder",offsetX:0,offsetY:0},{id:"paprikashaker",offsetX:0,offsetY:0},{id:"pepper",offsetX:0,offsetY:0},{id:"pepperbowlsmall",offsetX:0,offsetY:0},{id:"peppershaker",offsetX:0,offsetY:0},{id:"rosemary",offsetX:0,offsetY:0},{id:"rosemarybottle",offsetX:0,offsetY:0},{id:"rosemarybowlsmall",offsetX:0,offsetY:0},{id:"rosemarypowder",offsetX:0,offsetY:0},{id:"sage",offsetX:0,offsetY:0},{id:"sagebowlsmall",offsetX:0,offsetY:0},{id:"sagepowder",offsetX:0,offsetY:0},{id:"sageshaker",offsetX:0,offsetY:0},{id:"salt",offsetX:0,offsetY:0},{id:"saltbowlsmall",offsetX:0,offsetY:0},{id:"saltcrystal",offsetX:0,offsetY:0},{id:"saltshaker",offsetX:0,offsetY:0},{id:"vanila",offsetX:0,offsetY:0},{id:"vanillabottle",offsetX:0,offsetY:0},{id:"vanillabowlsmall",offsetX:0,offsetY:0},{id:"hilt1",offsetX:0,offsetY:0},{id:"hilt2",offsetX:0,offsetY:0}],ii=function(){function e(){v(this,e),p(this,"sprites",{}),p(this,"sparksAnimation",new Me("idle_down",6,0,16,16)),this.sparksAnimation.setSpeed(120),this.load()}return k(e,[{key:"load",value:function(){for(var e=0,t=ti;e<t.length;e++){var i=t[e],n=new Ne(i);this.sprites[i.id]=n}_.debug("Finished loading sprite data..."),this.preloadSprites()}},{key:"preloadSprites",value:function(){this.get("death").load()}},{key:"get",value:function(e){return this.sprites[e]}},{key:"getDeath",value:function(){return this.get("death")}}]),e}(),ni=function(){function e(){v(this,e),p(this,"direction",void 0)}return k(e,[{key:"reset",value:function(){this.direction=null}},{key:"setUp",value:function(){this.direction=ne.Up}},{key:"setDown",value:function(){this.direction=ne.Down}},{key:"setRight",value:function(){this.direction=ne.Right}},{key:"setLeft",value:function(){this.direction=ne.Left}},{key:"getDirection",value:function(){return this.direction}}]),e}(),oi=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,e)),"map",void 0),p(c(n),"lastStepX",-1),p(c(n),"lastStepY",-1),p(c(n),"game",void 0),p(c(n),"entities",void 0),n.map=e.game.map,n.game=e.game,n.entities=e.game.entities,n}return k(i,[{key:"handleRequestPath",value:function(e,t){var i;if(this.character.gridX===e&&this.character.gridY===t)return[];if(this.character.dead||this.character.frozen)return[];if(this.character.canAttackTarget()&&!this.character.trading)return[];var n=this.map.isObject(e,t);if(this.map.isColliding(e,t)&&!n)return[];this.game.socket.send(ze.Movement,{opcode:z.Request,requestX:e,requestY:t,playerX:this.character.gridX,playerY:this.character.gridY,targetInstance:null===(i=this.character.target)||void 0===i?void 0:i.instance,following:this.character.following});var o=[],a="";return n&&(o.push({x:e,y:t}),"fishing"===(a=this.map.getTileCursor(e,t))&&o.push({x:e+1,y:t},{x:e-1,y:t},{x:e,y:t+1},{x:e,y:t-1})),this.game.findPath(this.character,e,t,o,a)}},{key:"handleStartPathing",value:function(e){var t,i=u(e[e.length-1],2);this.game.input.selectedX=i[0],this.game.input.selectedY=i[1],this.character.moving=!0,this.game.input.selectedCellVisible=!0,this.game.socket.send(ze.Movement,{opcode:z.Started,requestX:this.game.input.selectedX,requestY:this.game.input.selectedY,playerX:this.character.gridX,playerY:this.character.gridY,movementSpeed:this.character.movementSpeed,targetInstance:null===(t=this.character.target)||void 0===t?void 0:t.instance})}},{key:"handleStopPathing",value:function(e,t){var i,n,o,a;this.entities.registerPosition(this.character),this.game.input.selectedCellVisible=!1,this.game.camera.clip(),this.game.socket.send(ze.Movement,{opcode:z.Stop,playerX:this.character.gridX,playerY:this.character.gridY,targetInstance:(null===(i=this.character.target)||void 0===i?void 0:i.instance)||(null===(n=this.game.getEntityAt(e,t))||void 0===n?void 0:n.instance),orientation:this.character.orientation}),this.character.trading&&this.game.socket.send(ze.Trade,{opcode:F.Request,instance:null===(o=this.character.target)||void 0===o?void 0:o.instance}),this.game.socket.send(ze.Target,[this.getTargetType(),(null===(a=this.character.target)||void 0===a?void 0:a.instance)||""]),this.character.target&&(this.character.lookAt(this.character.target),this.character.target.isObject()&&this.character.removeTarget(),this.character.disableAction=!0),this.game.input.setPassiveTarget(),this.game.storage.setOrientation(this.character.orientation),this.game.renderer.resetAnimatedTiles(),this.character.moving=!1,this.character.trading=!1}},{key:"handleStep",value:function(){this.character.hasNextStep()&&this.entities.registerPosition(this.character),this.game.camera.isCentered()||this.game.updateCameraBounds(),this.lastStepX===this.character.gridX&&this.lastStepY===this.character.gridY||(this.game.socket.send(ze.Movement,{opcode:z.Step,playerX:this.character.gridX,playerY:this.character.gridY,timestamp:Date.now()}),this.lastStepX=this.character.gridX,this.lastStepY=this.character.gridY,this.character.canAttackTarget()&&!this.character.trading&&this.character.stop(!0))}},{key:"handleSecondStep",value:function(){this.game.renderer.updateAnimatedTiles()}},{key:"handleMove",value:function(){this.game.camera.isCentered()&&this.game.camera.centreOn(this.character)}},{key:"getTargetType",value:function(){return this.character.target?this.character.target.isNPC()||this.character.target.isChest()?A.Talk:this.character.target.isObject()?A.Object:this.character.target.isMob()||this.character.target.isPlayer()&&this.game.pvp?A.Attack:A.None:A.None}}]),i}($e),ai=1056,ri=768,si=16,li=[5,18,19,20,132,133,134,135,136,137,138,139,185,186,187,193,196,197,198,199,200,201,202,203,321,646,647,648,653,654,655,656,709,710,711,712,713,717,718,719,720,739,740,772,773,774,775,776,777,778,781,782,783,784,802,803,804,805,845,848,865,866,867,868,869,870,897,898,928,929,930,931,932,933,934,935,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,961,962,1036,1037,1100,1101,1109,1110,1111,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1173,1174,1175,1217,1218,1219,1259,1260,1261,1262,1263,1264,1265,1266,1267,1268,1281,1282,1283,1434,1435,1437,1438,1439,1446,1447,1448,1510,1511,1512,1525,1526,1527,1537,1538,1589,1590,1591,1592,1653,1654,1655,1656,1665,1711,1712,1714,1715,1717,1718,1719,1720,1793,1901,1914,1915,1916,1921,1922,1923,1938,1939,1941,1942,1943,1985,1986,1987,2001,2002,2003,2004,2005,2006,2007,2021,2022,2023,2065,2066,2067,2068,2069,2070,2071,2085,2086,2087,2089,2133,2158,2160,2217,2221,2222,2223,2224,2225,2241,2242,2243,2244,2285,2286,2287,2288,2289,2290,2291,2305,2306,2307,2308,2349,2350,2351,2352,2353,2354,2355,2369,2370,2371,2372,2385,2386,2387,2389,2390,2391,2429,2430,2431,2432,2453,2454,2455,2493,2494,2495,2496,2497,2498,2499,2500,2511,2549,2550,2551,2557,2558,2559,2560,2561,2562,2564,2574,2575,2576,2613,2614,2615,2616,2638,2639,2640,2671,2673,2677,2678,2679,2680,2709,2710,2711,2712,2734,2735,2736,2737,2738,2741,2742,2743,2744,2773,2774,2775,2776,2793,2794,2796,2797,2798,2799,2800,2801,2802,2821,2822,2823,2837,2838,2839,2840,2857,2858,2860,2861,2862,2863,2864,2865,2866,2924,2925,2926,2927,2928,2929,2930,2931,2932,2933,2979,2988,2989,2990,2991,2992,2993,2994,2995,2996,2997,3042,3043,3044,3106,3107,3108,3113,3114,3115,3177,3178,3179,3289,3290,3291,3433,3434,3561,3562,3710,3711,3712,3774,3775,3776,3897,3898,3900,3901,3996,3998,3999,4028,4029,5199,5200,5262,5263,5264,5265,5271,5272,5275,5276,5325,5326,5327,5328,5329,5330,5335,5336,5388,5389,5390,5391,5392,5393,5394,5395,5569,5570,5571,5633,5634,5635,5697,5698,5699,5906,5907,5908,5970,5971,5972,6401,6402,6403,6465,6466,6467,6481,6482,6483,6529,6530,6531,6593,7110,7111,7112,7126,7127,7128,7129,7134,7135,7136,7137,7138,7139,7140,7141,7144,7173,7174,7175,7176,7190,7191,7192,7193,7198,7199,7200,7201,7202,7203,7204,7205,7237,7238,7239,7240,7241,7242,7243,7244,7369,7370,7371,7372,7433,7434,7435,7436,7497,7498,7499,7500,7621,7685,7693,7749,7757,9723,9788,9833,9834,9835,9836,9837,9838,9839,9840,9841,9842,9843,9844,9852,9897,9898,9899,9900,9901,9902,9903,9904,9905,9906,9908,9909,9916,9974,9980,10038,10044,10102,10108,10172,10230,10236,10294,10300,10358,10425,10427,10489,10490,10491,12329,12330,12331,12332,12333,12355,12356,12393,12394,12395,12396,12397,12417,12418,12419,12420,12421,12422,12457,12458,12459,12460,12461,12481,12482,12483,12484,12485,12486,12521,12522,12523,12524,12525,12545,12546,12547,12548,12549,12609,12610,12611,12612,12613,12943,12944,12998,13128,13129,13130,13131,13132,13133,13134,13135,13192,13193,13194,13195,13196,13197,13198,13199,13256,13257,13258,13259,13260,13320,13321,13322,13323,13398,13399,13461,13462,13463,13464,13465,13466,13467,13468,13525,13526,13527,13528,13529,13530,13531,13532,13534,13535,13536,13538,13539,13540,13541,13569,13570,13571,13572,13573,13574,13575,13589,13590,13591,13592,13593,13594,13595,13596,13597,13598,13599,13600,13601,13602,13603,13604,13605,13606,13633,13634,13635,13636,13637,13638,13639,13661,13662,13663,13664,13665,13666,13667,13668,13669,13670,13697,13698,13699,13700,13701,13702,13703,13725,13729,13730,13731,13732,13733,13921,13922,13923,13924,13925,13926,13985,13986,13987,13988,13989,14049,14050,14051,14052,14113,14116,14209,14210,14211,14273,14274,14275,14294,14295,14298,14299,14302,14358,14359,14361,14362,14363,14364,14365,14366,14367,14421,14422,14423,14424,14425,14426,14427,14428,14429,14430,14431,14432,14467,14468,14469,14470,14471,14472,14473,14485,14486,14487,14488,14489,14490,14491,14492,14493,14494,14495,14496,14531,14532,14533,14534,14535,14536,14537,14538,14549,14550,14551,14552,14553,14554,14555,14556,14557,14558,14559,14560,14657,14658,14666,14667,14669,14670,14819,14820,14821,14925,14926,14927,14928,14929,14930,14931,14932,14989,14990,14991,14992,14993,14994,14995,14996,15005,15006,15007,15008,15009,15069,15070,15071,15072,15073,15117,15120,15121,15124,15206,15207,15208,15309,15310,15311,15746,15747,15810,15811,15820,15821,15822,15873,15874,15875,15876,15877,15878,15879,15880,15882,15883,15884,15885,15886,15887,15937,15938,15939,15940,15941,15942,15943,15944,15946,15947,15948,15949,15950,15951,16010,16011,16012,16013,16014,16647,16648,16649,16664,16665,16689,16690,16691,16692,16693,16694,16695,16696,16697,16698,16699,16700,16702,16710,16711,16712,16713,16714,16728,16729,16767,16773,16774,16775,16776,16777,16778,16779,16792,16793,16830,16837,16838,16839,16840,16841,16842,16843,16895,17495,17511,17559,19462,19463,19526,19527,19528],ci=[{firstGid:0,lastGid:4095,path:"tilesheet-1.png"},{firstGid:4096,lastGid:8191,path:"tilesheet-2.png"},{firstGid:8192,lastGid:12287,path:"tilesheet-3.png"},{firstGid:12288,lastGid:16383,path:"tilesheet-4.png"},{firstGid:16644,lastGid:20739,path:"tilesheet-5.png"}],di={1:[{duration:150,tileId:0},{duration:150,tileId:1},{duration:150,tileId:2}],37:[{duration:200,tileId:36},{duration:200,tileId:37},{duration:200,tileId:38},{duration:200,tileId:39}],95:[{duration:200,tileId:94},{duration:200,tileId:95},{duration:200,tileId:96},{duration:200,tileId:97},{duration:200,tileId:98},{duration:200,tileId:99}],101:[{duration:200,tileId:100},{duration:200,tileId:101},{duration:200,tileId:102},{duration:200,tileId:103}],159:[{duration:200,tileId:158},{duration:200,tileId:159},{duration:200,tileId:160},{duration:200,tileId:161},{duration:200,tileId:162},{duration:200,tileId:163}],223:[{duration:200,tileId:222},{duration:200,tileId:223},{duration:200,tileId:224},{duration:200,tileId:225}],287:[{duration:200,tileId:286},{duration:200,tileId:287},{duration:200,tileId:288},{duration:200,tileId:289}],351:[{duration:200,tileId:350},{duration:200,tileId:351},{duration:200,tileId:352},{duration:200,tileId:353}],570:[{duration:150,tileId:569},{duration:150,tileId:570},{duration:150,tileId:571},{duration:150,tileId:572},{duration:150,tileId:573},{duration:150,tileId:574}],597:[{duration:200,tileId:596},{duration:200,tileId:597},{duration:200,tileId:598},{duration:200,tileId:599},{duration:200,tileId:600},{duration:200,tileId:601},{duration:200,tileId:602},{duration:200,tileId:603},{duration:200,tileId:604},{duration:200,tileId:605},{duration:200,tileId:606},{duration:200,tileId:607},{duration:200,tileId:608},{duration:200,tileId:609},{duration:200,tileId:610},{duration:200,tileId:611},{duration:200,tileId:612}],634:[{duration:150,tileId:633},{duration:150,tileId:634},{duration:150,tileId:635},{duration:150,tileId:636},{duration:150,tileId:637},{duration:150,tileId:638}],661:[{duration:200,tileId:660},{duration:200,tileId:661},{duration:200,tileId:662},{duration:200,tileId:663},{duration:200,tileId:664},{duration:200,tileId:665},{duration:200,tileId:666},{duration:200,tileId:667},{duration:200,tileId:668},{duration:200,tileId:669},{duration:200,tileId:670},{duration:200,tileId:671},{duration:200,tileId:672},{duration:200,tileId:673},{duration:200,tileId:674}],762:[{duration:150,tileId:761},{duration:150,tileId:762},{duration:150,tileId:763},{duration:150,tileId:764},{duration:150,tileId:765},{duration:150,tileId:766}],769:[{duration:150,tileId:768},{duration:150,tileId:769},{duration:150,tileId:770}],826:[{duration:150,tileId:825},{duration:150,tileId:826},{duration:150,tileId:827},{duration:150,tileId:828},{duration:150,tileId:829},{duration:150,tileId:830}],917:[{duration:200,tileId:916},{duration:200,tileId:917},{duration:200,tileId:918}],954:[{duration:150,tileId:953},{duration:150,tileId:954},{duration:150,tileId:955},{duration:150,tileId:956},{duration:150,tileId:957},{duration:150,tileId:958}],981:[{duration:200,tileId:980},{duration:200,tileId:981},{duration:200,tileId:982}],1018:[{duration:150,tileId:1017},{duration:150,tileId:1018},{duration:150,tileId:1019},{duration:150,tileId:1020},{duration:150,tileId:1021},{duration:150,tileId:1022}],1178:[{duration:200,tileId:1177},{duration:200,tileId:1178},{duration:200,tileId:1179},{duration:200,tileId:1180},{duration:200,tileId:1181},{duration:200,tileId:1182}],1210:[{duration:150,tileId:1209},{duration:150,tileId:1210},{duration:150,tileId:1211},{duration:150,tileId:1212},{duration:150,tileId:1213},{duration:150,tileId:1214}],1274:[{duration:150,tileId:1273},{duration:150,tileId:1274},{duration:150,tileId:1275},{duration:150,tileId:1276},{duration:150,tileId:1277},{duration:150,tileId:1278}],1621:[{duration:200,tileId:1620},{duration:200,tileId:1621},{duration:200,tileId:1622}],1685:[{duration:200,tileId:1684},{duration:200,tileId:1685},{duration:200,tileId:1686}],1691:[{duration:200,tileId:1690},{duration:200,tileId:1691},{duration:200,tileId:1692}],1813:[{duration:100,tileId:1812},{duration:100,tileId:1813},{duration:100,tileId:1814},{duration:100,tileId:1815},{duration:100,tileId:1816},{duration:100,tileId:1817},{duration:100,tileId:1818},{duration:100,tileId:1819},{duration:100,tileId:1820},{duration:100,tileId:1821},{duration:100,tileId:1822},{duration:100,tileId:1823},{duration:100,tileId:1824},{duration:100,tileId:1825},{duration:100,tileId:1826},{duration:100,tileId:1827},{duration:100,tileId:1828},{duration:100,tileId:1829},{duration:100,tileId:1830}],1877:[{duration:100,tileId:1876},{duration:100,tileId:1877},{duration:100,tileId:1878},{duration:100,tileId:1879},{duration:100,tileId:1880},{duration:100,tileId:1881},{duration:100,tileId:1882},{duration:100,tileId:1883},{duration:100,tileId:1884},{duration:100,tileId:1885},{duration:100,tileId:1886},{duration:100,tileId:1887},{duration:100,tileId:1888},{duration:100,tileId:1889},{duration:100,tileId:1890},{duration:100,tileId:1891},{duration:100,tileId:1892},{duration:100,tileId:1893},{duration:100,tileId:1894}],1897:[{duration:200,tileId:1896},{duration:200,tileId:1897},{duration:200,tileId:1898}],1926:[{duration:400,tileId:1925},{duration:400,tileId:1926},{duration:400,tileId:1927}],1990:[{duration:400,tileId:1989},{duration:400,tileId:1990}],2054:[{duration:400,tileId:2053},{duration:400,tileId:2054}],2246:[{duration:200,tileId:2245},{duration:200,tileId:2246},{duration:200,tileId:2247},{duration:200,tileId:2248}],2310:[{duration:200,tileId:2309},{duration:200,tileId:2310},{duration:200,tileId:2311},{duration:200,tileId:2312}],2376:[{duration:300,tileId:2375},{duration:300,tileId:2376}],2394:[{duration:400,tileId:2393},{duration:400,tileId:2394},{duration:400,tileId:2395}],2458:[{duration:400,tileId:2457},{duration:400,tileId:2458}],2522:[{duration:400,tileId:2521},{duration:400,tileId:2522}],2665:[{duration:200,tileId:2664},{duration:200,tileId:2665},{duration:200,tileId:2666}],2714:[{duration:150,tileId:2713},{duration:150,tileId:2714},{duration:150,tileId:2715},{duration:150,tileId:2716}],2778:[{duration:200,tileId:2777},{duration:200,tileId:2778},{duration:200,tileId:2779},{duration:200,tileId:2780}],2844:[{duration:300,tileId:2843},{duration:300,tileId:2844}],3201:[{duration:200,tileId:3200},{duration:200,tileId:3201},{duration:200,tileId:3202},{duration:200,tileId:3203}],3265:[{duration:200,tileId:3264},{duration:200,tileId:3265},{duration:200,tileId:3266},{duration:200,tileId:3267}],3329:[{duration:200,tileId:3328},{duration:200,tileId:3329},{duration:200,tileId:3330},{duration:200,tileId:3331}],3393:[{duration:200,tileId:3392},{duration:200,tileId:3393},{duration:200,tileId:3394},{duration:200,tileId:3395}],3669:[{duration:150,tileId:3668},{duration:150,tileId:3669},{duration:150,tileId:3670},{duration:150,tileId:3671}],3733:[{duration:150,tileId:3732},{duration:150,tileId:3733},{duration:150,tileId:3734},{duration:150,tileId:3735}],3797:[{duration:150,tileId:3796},{duration:150,tileId:3797},{duration:150,tileId:3798},{duration:150,tileId:3799}],3861:[{duration:150,tileId:3860},{duration:150,tileId:3861},{duration:150,tileId:3862},{duration:150,tileId:3863}],3922:[{duration:200,tileId:3921},{duration:200,tileId:3922},{duration:200,tileId:3923}],3947:[{duration:200,tileId:3946},{duration:200,tileId:3947},{duration:200,tileId:3948},{duration:200,tileId:3949},{duration:200,tileId:3950},{duration:200,tileId:3951}],3954:[{duration:200,tileId:3953},{duration:200,tileId:3954},{duration:200,tileId:3955},{duration:200,tileId:3956},{duration:200,tileId:3957},{duration:200,tileId:3958}],3998:[{duration:250,tileId:3997},{duration:250,tileId:4e3},{duration:250,tileId:4003},{duration:250,tileId:4006}],4011:[{duration:200,tileId:4010},{duration:200,tileId:4011},{duration:200,tileId:4012},{duration:200,tileId:4013},{duration:200,tileId:4014},{duration:200,tileId:4015}],4018:[{duration:200,tileId:4017},{duration:200,tileId:4018},{duration:200,tileId:4019},{duration:200,tileId:4020},{duration:200,tileId:4021},{duration:200,tileId:4022}],4555:[{duration:400,tileId:4554},{duration:400,tileId:4555},{duration:400,tileId:4556},{duration:400,tileId:4557},{duration:400,tileId:4558}],4561:[{duration:200,tileId:4560},{duration:200,tileId:4561},{duration:200,tileId:4562},{duration:200,tileId:4563}],4619:[{duration:400,tileId:4618},{duration:400,tileId:4619},{duration:400,tileId:4620},{duration:400,tileId:4621},{duration:400,tileId:4622},{duration:400,tileId:4623}],4683:[{duration:400,tileId:4682},{duration:400,tileId:4683},{duration:400,tileId:4684},{duration:400,tileId:4685}],4747:[{duration:400,tileId:4746},{duration:400,tileId:4747},{duration:400,tileId:4748},{duration:400,tileId:4749}],4811:[{duration:400,tileId:4810},{duration:400,tileId:4811},{duration:400,tileId:4812},{duration:400,tileId:4813}],5057:[{duration:200,tileId:5056},{duration:200,tileId:5057},{duration:200,tileId:5058},{duration:200,tileId:5059},{duration:200,tileId:5060},{duration:200,tileId:5061},{duration:200,tileId:5062},{duration:200,tileId:5063},{duration:200,tileId:5064},{duration:200,tileId:5065},{duration:200,tileId:5066},{duration:200,tileId:5067},{duration:200,tileId:5068},{duration:200,tileId:5069},{duration:200,tileId:5070},{duration:200,tileId:5071},{duration:200,tileId:5072}],5121:[{duration:200,tileId:5120},{duration:200,tileId:5121},{duration:200,tileId:5122},{duration:200,tileId:5123},{duration:200,tileId:5124},{duration:200,tileId:5125},{duration:200,tileId:5126},{duration:200,tileId:5127},{duration:200,tileId:5128},{duration:200,tileId:5129},{duration:200,tileId:5130},{duration:200,tileId:5131},{duration:200,tileId:5132},{duration:200,tileId:5133},{duration:200,tileId:5134}],5377:[{duration:200,tileId:5376},{duration:200,tileId:5377},{duration:200,tileId:5378}],5441:[{duration:200,tileId:5440},{duration:200,tileId:5441},{duration:200,tileId:5442}],5638:[{duration:200,tileId:5637},{duration:200,tileId:5638},{duration:200,tileId:5639},{duration:200,tileId:5640},{duration:200,tileId:5641},{duration:200,tileId:5642}],6081:[{duration:200,tileId:6080},{duration:200,tileId:6081},{duration:200,tileId:6082}],6145:[{duration:200,tileId:6144},{duration:200,tileId:6145},{duration:200,tileId:6146}],6151:[{duration:200,tileId:6150},{duration:200,tileId:6151},{duration:200,tileId:6152}],6273:[{duration:200,tileId:6272},{duration:200,tileId:6273},{duration:200,tileId:6274},{duration:200,tileId:6275},{duration:200,tileId:6276},{duration:200,tileId:6277},{duration:200,tileId:6278},{duration:200,tileId:6279},{duration:200,tileId:6280},{duration:200,tileId:6281},{duration:200,tileId:6282},{duration:200,tileId:6283},{duration:200,tileId:6284},{duration:200,tileId:6285},{duration:200,tileId:6286},{duration:200,tileId:6287},{duration:200,tileId:6288},{duration:200,tileId:6289},{duration:200,tileId:6290}],6337:[{duration:200,tileId:6336},{duration:200,tileId:6337},{duration:200,tileId:6338},{duration:200,tileId:6339},{duration:200,tileId:6340},{duration:200,tileId:6341},{duration:200,tileId:6342},{duration:200,tileId:6343},{duration:200,tileId:6344},{duration:200,tileId:6345},{duration:200,tileId:6346},{duration:200,tileId:6347},{duration:200,tileId:6348},{duration:200,tileId:6349},{duration:200,tileId:6350},{duration:200,tileId:6351},{duration:200,tileId:6352},{duration:200,tileId:6353},{duration:200,tileId:6354}],7621:[{duration:200,tileId:7620},{duration:200,tileId:7621},{duration:200,tileId:7622},{duration:200,tileId:7623}],7685:[{duration:200,tileId:7684},{duration:200,tileId:7685},{duration:200,tileId:7686},{duration:200,tileId:7687}],7693:[{duration:200,tileId:7692},{duration:200,tileId:7693},{duration:200,tileId:7694},{duration:200,tileId:7695},{duration:200,tileId:7696},{duration:200,tileId:7697},{duration:200,tileId:7698},{duration:200,tileId:7699}],7749:[{duration:200,tileId:7748},{duration:200,tileId:7749},{duration:200,tileId:7750},{duration:200,tileId:7751}],7757:[{duration:200,tileId:7756},{duration:200,tileId:7757},{duration:200,tileId:7758},{duration:200,tileId:7759},{duration:200,tileId:7760},{duration:200,tileId:7761},{duration:200,tileId:7762},{duration:200,tileId:7763}],7813:[{duration:200,tileId:7812},{duration:200,tileId:7813},{duration:200,tileId:7814},{duration:200,tileId:7815}],8076:[{duration:200,tileId:6150},{duration:200,tileId:6151},{duration:200,tileId:6152}],13354:[{duration:150,tileId:13353},{duration:150,tileId:13417},{duration:150,tileId:13481},{duration:150,tileId:13545},{duration:150,tileId:13609},{duration:150,tileId:13673}],13355:[{duration:150,tileId:13354},{duration:150,tileId:13418},{duration:150,tileId:13482},{duration:150,tileId:13546},{duration:150,tileId:13610},{duration:150,tileId:13674}],16936:[{duration:250,tileId:16935},{duration:250,tileId:16936},{duration:250,tileId:16937},{duration:250,tileId:16938}],17487:[{duration:250,tileId:17486},{duration:250,tileId:17488},{duration:250,tileId:17490},{duration:250,tileId:17492}],17488:[{duration:250,tileId:17487},{duration:250,tileId:17489},{duration:250,tileId:17491},{duration:250,tileId:17493}],17495:[{duration:250,tileId:17494},{duration:250,tileId:17495},{duration:250,tileId:17496},{duration:250,tileId:17497}],17506:[{duration:150,tileId:17505},{duration:150,tileId:17506},{duration:150,tileId:17507},{duration:150,tileId:17508}],17551:[{duration:250,tileId:17550},{duration:250,tileId:17552},{duration:250,tileId:17554},{duration:250,tileId:17556}],17552:[{duration:250,tileId:17551},{duration:250,tileId:17553},{duration:250,tileId:17555},{duration:250,tileId:17557}],17559:[{duration:250,tileId:17558},{duration:250,tileId:17559},{duration:250,tileId:17560},{duration:250,tileId:17561}],17570:[{duration:150,tileId:17569},{duration:150,tileId:17570},{duration:150,tileId:17571},{duration:150,tileId:17572}],17615:[{duration:250,tileId:17614},{duration:250,tileId:17615},{duration:250,tileId:17616},{duration:250,tileId:17617},{duration:250,tileId:17618},{duration:250,tileId:17619}],17634:[{duration:150,tileId:17633},{duration:150,tileId:17634},{duration:150,tileId:17635},{duration:150,tileId:17636}],17679:[{duration:250,tileId:17678},{duration:250,tileId:17679},{duration:250,tileId:17680},{duration:250,tileId:17681}],17698:[{duration:150,tileId:17697},{duration:150,tileId:17698},{duration:150,tileId:17699},{duration:150,tileId:17700}],17743:[{duration:250,tileId:17742},{duration:250,tileId:17743},{duration:250,tileId:17744},{duration:250,tileId:17745},{duration:250,tileId:17746},{duration:250,tileId:17747}],17807:[{duration:250,tileId:17806},{duration:250,tileId:17807},{duration:250,tileId:17808},{duration:250,tileId:17809}],17871:[{duration:250,tileId:17870},{duration:250,tileId:17871},{duration:250,tileId:17872},{duration:250,tileId:17873},{duration:250,tileId:17874},{duration:250,tileId:17875}]},hi=function(){function e(t){v(this,e),p(this,"width",ai),p(this,"height",ri),p(this,"tileSize",si),p(this,"data",[]),p(this,"grid",[]),p(this,"high",li),p(this,"objects",[]),p(this,"lights",[]),p(this,"tilesets",[]),p(this,"rawTilesets",ci),p(this,"cursorTiles",{}),p(this,"animatedTiles",di),p(this,"mapLoaded",!1),p(this,"regionsLoaded",0),p(this,"tilesetsLoaded",!1),this.game=t,this.load()}return k(e,[{key:"ready",value:function(){var e,t=this;this.mapLoaded&&this.tilesetsLoaded?null===(e=this.readyCallback)||void 0===e||e.call(this):window.setTimeout((function(){return t.ready()}),100)}},{key:"load",value:function(){var e=this;_.debug("Parsing map with Web Workers..."),Be.tileSize=this.tileSize,Be.sideLength=this.width/Ie,Be.thirdTile=this.tileSize/3,Be.tileAndAQuarter=1.25*this.tileSize;var t=new Worker(new URL("/assets/mapworker-ab6f3cd5.js",self.location),{type:"classic"});t.postMessage([this.width,this.height]),t.addEventListener("message",(function(t){t.data.data&&(e.data=t.data.data),t.data.grid&&(e.grid=t.data.grid),e.loadRegionData(),e.mapLoaded=!0})),this.loadTilesets(),this.ready()}},{key:"loadRegions",value:function(e){for(var t in e)this.loadRegion(e[t],parseInt(t));this.saveMapData(),this.game.useWebGl&&this.game.renderer.bindTileLayers()}},{key:"loadRegion",value:function(e,t){var i,n=w(e);try{for(n.s();!(i=n.n()).done;){var o=i.value,a=this.coordToIndex(o.x,o.y),r=this.objects.indexOf(a);this.data[a]=o.data,o.c&&!this.isColliding(o.x,o.y)&&(this.grid[o.y][o.x]=1),!o.c&&this.isColliding(o.x,o.y)&&(this.grid[o.y][o.x]=0),o.cur&&(this.cursorTiles[a]=o.cur),!o.cur&&a in this.cursorTiles&&(this.cursorTiles[a]=""),o.o&&r<0&&this.objects.push(a),!o.o&&r>-1&&this.objects.splice(r,1),this.game.useWebGl&&this.game.renderer.setTile(a,o.data)}}catch(zn){n.e(zn)}finally{n.f()}this.game.storage.setRegionData(e,t)}},{key:"loadTilesets",value:function(){var e=this;for(var t in this.rawTilesets)this.loadTileset(this.rawTilesets[t],parseInt(t),(function(t){e.tilesets.push(t),e.tilesets.length===e.rawTilesets.length&&(e.tilesets=e.tilesets.sort((function(e,t){return e.firstGid-t.firstGid})),e.tilesetsLoaded=!0)}))}},{key:"loadTileset",value:function(e,t,i){var n=this,o=new Image,a="/img/tilesets/".concat(e.path);o.crossOrigin="Anonymous",o.path=a,o.src=a,o.index=t,o.firstGid=e.firstGid,o.lastGid=e.lastGid,o.addEventListener("load",(function(){if(o.width%n.tileSize>0)throw new Error("The tile size is malformed in the tile set: ".concat(e.path));o.loaded=!0,i(o)})),o.addEventListener("error",(function(){throw new Error("Could not find tile set: ".concat(e.path))})),setTimeout((function(){o.loaded||(n.loadTileset(e,t,i),_.debug("Retrying to load tileset: ".concat(e.path)))}),500)}},{key:"loadRegionData",value:function(){var e=this;this.game.storage.getRegionData((function(t){var i=Object.keys(t.regionData);if(i.length>0){try{e.loadRegions(t.regionData)}catch(n){e.game.storage.clear()}e.objects=t.objects,e.cursorTiles=t.cursorTiles,e.regionsLoaded=i.length,_.info("Preloaded map data with ".concat(i.length," regions."))}e.game.renderer.load()}))}},{key:"saveMapData",value:function(){this.game.storage.setMapData(this.objects,this.cursorTiles)}},{key:"coordToIndex",value:function(e,t){return t*this.width+e}},{key:"indexToCoord",value:function(e){return{x:e%this.width,y:Math.floor(e/this.width)}}},{key:"isColliding",value:function(e,t){return!!this.isOutOfBounds(e,t)||(this.data[this.coordToIndex(e,t)]<1||1===this.grid[t][e])}},{key:"isObject",value:function(e,t){var i=this.coordToIndex(e,t);return this.objects.includes(i)}},{key:"getTileCursor",value:function(e,t){var i=this.coordToIndex(e,t);return this.cursorTiles[i]}},{key:"isHighTile",value:function(e){return this.high.includes(e)}},{key:"isLightTile",value:function(e){return this.lights.includes(e)}},{key:"isAnimatedTile",value:function(e){return e in this.animatedTiles}},{key:"hasCachedDate",value:function(){return this.regionsLoaded>0}},{key:"isOutOfBounds",value:function(e,t){return Oe(e)&&Oe(t)&&(e<0||e>=this.width||t<0||t>=this.height)}},{key:"getTileAnimation",value:function(e){return this.animatedTiles[e]}},{key:"getTilesetFromId",value:function(e){var t,i=w(this.tilesets);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(e>=n.firstGid&&e<=n.lastGid)return n}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"onReady",value:function(e){this.readyCallback=e}}]),e}();function ui(e){for(var t=e.length;--t>=0;)e[t]=0}var pi=256,fi=286,gi=30,mi=15,vi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),bi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ki=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),xi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wi=new Array(576);ui(wi);var yi=new Array(60);ui(yi);var _i=new Array(512);ui(_i);var Si=new Array(256);ui(Si);var Ci=new Array(29);ui(Ci);var Ei,Ti,Yi,Ii=new Array(gi);function Xi(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function zi(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ui(Ii);var Ai=function(e){return e<256?_i[e]:_i[256+(e>>>7)]},Li=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},qi=function(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,Li(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},Di=function(e,t,i){qi(e,i[2*t],i[2*t+1])},Pi=function(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},Ri=function(e,t,i){var n,o,a=new Array(16),r=0;for(n=1;n<=mi;n++)r=r+i[n-1]<<1,a[n]=r;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=Pi(a[s]++,s))}},Mi=function(e){var t;for(t=0;t<fi;t++)e.dyn_ltree[2*t]=0;for(t=0;t<gi;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ni=function(e){e.bi_valid>8?Li(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Oi=function(e,t,i,n){var o=2*t,a=2*i;return e[o]<e[a]||e[o]===e[a]&&n[t]<=n[i]},Bi=function(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&Oi(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Oi(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n},Fi=function(e,t,i){var n,o,a,r,s=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,o=e.pending_buf[e.sym_buf+s++],0===n?Di(e,o,t):(a=Si[o],Di(e,a+pi+1,t),0!==(r=vi[a])&&(o-=Ci[a],qi(e,o,r)),n--,a=Ai(n),Di(e,a,i),0!==(r=bi[a])&&(n-=Ii[a],qi(e,n,r)))}while(s<e.sym_next);Di(e,256,t)},ji=function(e,t){var i,n,o,a=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<l;i++)0!==a[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len<2;)a[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=r[2*o+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)Bi(e,a,i);o=l;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Bi(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,a[2*o]=a[2*i]+a[2*n],e.depth[o]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,a[2*i+1]=a[2*n+1]=o,e.heap[1]=o++,Bi(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,n,o,a,r,s,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(a=0;a<=mi;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)(a=l[2*l[2*(n=e.heap[i])+1]+1]+1)>f&&(a=f,g++),l[2*n+1]=a,n>c||(e.bl_count[a]++,r=0,n>=p&&(r=u[n-p]),s=l[2*n],e.opt_len+=s*(a+r),h&&(e.static_len+=s*(d[2*n+1]+r)));if(0!==g){do{for(a=f-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[f]--,g-=2}while(g>0);for(a=f;0!==a;a--)for(n=e.bl_count[a];0!==n;)(o=e.heap[--i])>c||(l[2*o+1]!==a&&(e.opt_len+=(a-l[2*o+1])*l[2*o],l[2*o+1]=a),n--)}}(e,t),Ri(a,c,e.bl_count)},Hi=function(e,t,i){var n,o,a=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)o=r,r=t[2*(n+1)+1],++s<l&&o===r||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=o,0===r?(l=138,c=3):o===r?(l=6,c=3):(l=7,c=4))},Ui=function(e,t,i){var n,o,a=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),n=0;n<=i;n++)if(o=r,r=t[2*(n+1)+1],!(++s<l&&o===r)){if(s<c)do{Di(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(Di(e,o,e.bl_tree),s--),Di(e,16,e.bl_tree),qi(e,s-3,2)):s<=10?(Di(e,17,e.bl_tree),qi(e,s-3,3)):(Di(e,18,e.bl_tree),qi(e,s-11,7));s=0,a=o,0===r?(l=138,c=3):o===r?(l=6,c=3):(l=7,c=4)}},Gi=!1,Wi=function(e,t,i,n){qi(e,0+(n?1:0),3),Ni(e),Li(e,i),Li(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i},Vi=function(e){Gi||(!function(){var e,t,i,n,o,a=new Array(16);for(i=0,n=0;n<28;n++)for(Ci[n]=i,e=0;e<1<<vi[n];e++)Si[i++]=n;for(Si[i-1]=n,o=0,n=0;n<16;n++)for(Ii[n]=o,e=0;e<1<<bi[n];e++)_i[o++]=n;for(o>>=7;n<gi;n++)for(Ii[n]=o<<7,e=0;e<1<<bi[n]-7;e++)_i[256+o++]=n;for(t=0;t<=mi;t++)a[t]=0;for(e=0;e<=143;)wi[2*e+1]=8,e++,a[8]++;for(;e<=255;)wi[2*e+1]=9,e++,a[9]++;for(;e<=279;)wi[2*e+1]=7,e++,a[7]++;for(;e<=287;)wi[2*e+1]=8,e++,a[8]++;for(Ri(wi,287,a),e=0;e<gi;e++)yi[2*e+1]=5,yi[2*e]=Pi(e,5);Ei=new Xi(wi,vi,257,fi,mi),Ti=new Xi(yi,bi,0,gi,mi),Yi=new Xi(new Array(0),ki,0,19,7)}(),Gi=!0),e.l_desc=new zi(e.dyn_ltree,Ei),e.d_desc=new zi(e.dyn_dtree,Ti),e.bl_desc=new zi(e.bl_tree,Yi),e.bi_buf=0,e.bi_valid=0,Mi(e)},Zi=function(e,t,i,n){var o,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<pi;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),ji(e,e.l_desc),ji(e,e.d_desc),r=function(e){var t;for(Hi(e,e.dyn_ltree,e.l_desc.max_code),Hi(e,e.dyn_dtree,e.d_desc.max_code),ji(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*xi[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=i+5,i+4<=o&&-1!==t?Wi(e,t,i,n):4===e.strategy||a===o?(qi(e,2+(n?1:0),3),Fi(e,wi,yi)):(qi(e,4+(n?1:0),3),function(e,t,i,n){var o;for(qi(e,t-257,5),qi(e,i-1,5),qi(e,n-4,4),o=0;o<n;o++)qi(e,e.bl_tree[2*xi[o]+1],3);Ui(e,e.dyn_ltree,t-1),Ui(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),Fi(e,e.dyn_ltree,e.dyn_dtree)),Mi(e),n&&Ni(e)},Ki={_tr_init:Vi,_tr_stored_block:Wi,_tr_flush_block:Zi,_tr_tally:function(e,t,i){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(Si[i]+pi+1)]++,e.dyn_dtree[2*Ai(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){qi(e,2,3),Di(e,256,wi),function(e){16===e.bi_valid?(Li(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},$i=function(e,t,i,n){for(var o=65535&e|0,a=e>>>16&65535|0,r=0;0!==i;){i-=r=i>2e3?2e3:i;do{a=a+(o=o+t[n++]|0)|0}while(--r);o%=65521,a%=65521}return o|a<<16|0},Qi=new Uint32Array(function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}()),Ji=function(e,t,i,n){var o=Qi,a=n+i;e^=-1;for(var r=n;r<a;r++)e=e>>>8^o[255&(e^t[r])];return-1^e},en={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},nn=Ki._tr_init,on=Ki._tr_stored_block,an=Ki._tr_flush_block,rn=Ki._tr_tally,sn=Ki._tr_align,ln=tn.Z_NO_FLUSH,cn=tn.Z_PARTIAL_FLUSH,dn=tn.Z_FULL_FLUSH,hn=tn.Z_FINISH,un=tn.Z_BLOCK,pn=tn.Z_OK,fn=tn.Z_STREAM_END,gn=tn.Z_STREAM_ERROR,mn=tn.Z_DATA_ERROR,vn=tn.Z_BUF_ERROR,bn=tn.Z_DEFAULT_COMPRESSION,kn=tn.Z_FILTERED,xn=tn.Z_HUFFMAN_ONLY,wn=tn.Z_RLE,yn=tn.Z_FIXED,_n=tn.Z_DEFAULT_STRATEGY,Sn=tn.Z_UNKNOWN,Cn=tn.Z_DEFLATED,En=258,Tn=262,Yn=42,In=113,Xn=666,zn=function(e,t){return e.msg=en[t],t},An=function(e){return 2*e-(e>4?9:0)},Ln=function(e){for(var t=e.length;--t>=0;)e[t]=0},qn=function(e){var t,i,n,o=e.w_size;n=t=e.hash_size;do{i=e.head[--n],e.head[n]=i>=o?i-o:0}while(--t);n=t=o;do{i=e.prev[--n],e.prev[n]=i>=o?i-o:0}while(--t)},Dn=function(e,t,i){return(t<<e.hash_shift^i)&e.hash_mask},Pn=function(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},Rn=function(e,t){an(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Pn(e.strm)},Mn=function(e,t){e.pending_buf[e.pending++]=t},Nn=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},On=function(e,t,i,n){var o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),i),1===e.state.wrap?e.adler=$i(e.adler,t,o,i):2===e.state.wrap&&(e.adler=Ji(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)},Bn=function(e,t){var i,n,o=e.max_chain_length,a=e.strstart,r=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-Tn?e.strstart-(e.w_size-Tn):0,c=e.window,d=e.w_mask,h=e.prev,u=e.strstart+En,p=c[a+r-1],f=c[a+r];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(i=t)+r]===f&&c[i+r-1]===p&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<u);if(n=En-(u-a),a=u-En,n>r){if(e.match_start=t,r=n,n>=s)break;p=c[a+r-1],f=c[a+r]}}}while((t=h[t&d])>l&&0!=--o);return r<=e.lookahead?r:e.lookahead},Fn=function(e){var t,i,n,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-Tn)&&(e.window.set(e.window.subarray(o,o+o-i),0),e.match_start-=o,e.strstart-=o,e.block_start-=o,e.insert>e.strstart&&(e.insert=e.strstart),qn(e),i+=o),0===e.strm.avail_in)break;if(t=On(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Dn(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Dn(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Tn&&0!==e.strm.avail_in)},jn=function(e,t){var i,n,o,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r=0,s=e.strm.avail_in;do{if(i=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,i>(n=e.strstart-e.block_start)+e.strm.avail_in&&(i=n+e.strm.avail_in),i>o&&(i=o),i<a&&(0===i&&t!==hn||t===ln||i!==n+e.strm.avail_in))break;r=t===hn&&i===n+e.strm.avail_in?1:0,on(e,0,0,r),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,Pn(e.strm),n&&(n>i&&(n=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,i-=n),i&&(On(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===r);return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?4:t!==ln&&t!==hn&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(On(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,a=(o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o)>e.w_size?e.w_size:o,((n=e.strstart-e.block_start)>=a||(n||t===hn)&&t!==ln&&0===e.strm.avail_in&&n<=o)&&(i=n>o?o:n,r=t===hn&&0===e.strm.avail_in&&i===n?1:0,on(e,e.block_start,i,r),e.block_start+=i,Pn(e.strm)),r?3:1)},Hn=function(e,t){for(var i,n;;){if(e.lookahead<Tn){if(Fn(e),e.lookahead<Tn&&t===ln)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-Tn&&(e.match_length=Bn(e,i)),e.match_length>=3)if(n=rn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+1]);else n=rn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Rn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===hn?(Rn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rn(e,!1),0===e.strm.avail_out)?1:2},Un=function(e,t){for(var i,n,o;;){if(e.lookahead<Tn){if(Fn(e),e.lookahead<Tn&&t===ln)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Tn&&(e.match_length=Bn(e,i),e.match_length<=5&&(e.strategy===kn||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=rn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Rn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=rn(e,0,e.window[e.strstart-1]))&&Rn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=rn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===hn?(Rn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rn(e,!1),0===e.strm.avail_out)?1:2};function Gn(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}var Wn=[new Gn(0,0,0,0,jn),new Gn(4,4,8,4,Hn),new Gn(4,5,16,8,Hn),new Gn(4,6,32,32,Hn),new Gn(4,4,16,16,Un),new Gn(8,16,32,32,Un),new Gn(8,16,128,128,Un),new Gn(8,32,128,256,Un),new Gn(32,128,258,1024,Un),new Gn(32,258,258,4096,Un)];function Vn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ln(this.dyn_ltree),Ln(this.dyn_dtree),Ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ln(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Zn=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==Yn&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==In&&t.status!==Xn?1:0},Kn=function(e){if(Zn(e))return zn(e,gn);e.total_in=e.total_out=0,e.data_type=Sn;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Yn:In,e.adler=2===t.wrap?0:1,t.last_flush=-2,nn(t),pn},$n=function(e){var t,i=Kn(e);return i===pn&&((t=e.state).window_size=2*t.w_size,Ln(t.head),t.max_lazy_match=Wn[t.level].max_lazy,t.good_match=Wn[t.level].good_length,t.nice_match=Wn[t.level].nice_length,t.max_chain_length=Wn[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),i},Qn=function(e,t,i,n,o,a){if(!e)return gn;var r=1;if(t===bn&&(t=6),n<0?(r=0,n=-n):n>15&&(r=2,n-=16),o<1||o>9||i!==Cn||n<8||n>15||t<0||t>9||a<0||a>yn||8===n&&1!==r)return zn(e,gn);8===n&&(n=9);var s=new Vn;return e.state=s,s.strm=e,s.status=Yn,s.wrap=r,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=i,$n(e)},Jn=function(e,t){var i=t.length;if(Zn(e))return gn;var n=e.state,o=n.wrap;if(2===o||1===o&&n.status!==Yn||n.lookahead)return gn;if(1===o&&(e.adler=$i(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===o&&(Ln(n.head),n.strstart=0,n.block_start=0,n.insert=0);var a=new Uint8Array(n.w_size);a.set(t.subarray(i-n.w_size,i),0),t=a,i=n.w_size}var r=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,Fn(n);n.lookahead>=3;){var c=n.strstart,d=n.lookahead-2;do{n.ins_h=Dn(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++}while(--d);n.strstart=c,n.lookahead=2,Fn(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=r,n.wrap=o,pn},eo={deflateInit:function(e,t){return Qn(e,t,Cn,15,8,_n)},deflateInit2:Qn,deflateReset:$n,deflateResetKeep:Kn,deflateSetHeader:function(e,t){return Zn(e)||2!==e.state.wrap?gn:(e.state.gzhead=t,pn)},deflate:function(e,t){if(Zn(e)||t>un||t<0)return e?zn(e,gn):gn;var i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===Xn&&t!==hn)return zn(e,0===e.avail_out?vn:gn);var n=i.last_flush;if(i.last_flush=t,0!==i.pending){if(Pn(e),0===e.avail_out)return i.last_flush=-1,pn}else if(0===e.avail_in&&An(t)<=An(n)&&t!==hn)return zn(e,vn);if(i.status===Xn&&0!==e.avail_in)return zn(e,vn);if(i.status===Yn&&0===i.wrap&&(i.status=In),i.status===Yn){var o=Cn+(i.w_bits-8<<4)<<8;if(o|=(i.strategy>=xn||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(o|=32),Nn(i,o+=31-o%31),0!==i.strstart&&(Nn(i,e.adler>>>16),Nn(i,65535&e.adler)),e.adler=1,i.status=In,Pn(e),0!==i.pending)return i.last_flush=-1,pn}if(57===i.status)if(e.adler=0,Mn(i,31),Mn(i,139),Mn(i,8),i.gzhead)Mn(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Mn(i,255&i.gzhead.time),Mn(i,i.gzhead.time>>8&255),Mn(i,i.gzhead.time>>16&255),Mn(i,i.gzhead.time>>24&255),Mn(i,9===i.level?2:i.strategy>=xn||i.level<2?4:0),Mn(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Mn(i,255&i.gzhead.extra.length),Mn(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Ji(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Mn(i,0),Mn(i,0),Mn(i,0),Mn(i,0),Mn(i,0),Mn(i,9===i.level?2:i.strategy>=xn||i.level<2?4:0),Mn(i,3),i.status=In,Pn(e),0!==i.pending)return i.last_flush=-1,pn;if(69===i.status){if(i.gzhead.extra){for(var a=i.pending,r=(65535&i.gzhead.extra.length)-i.gzindex;i.pending+r>i.pending_buf_size;){var s=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+s),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>a&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex+=s,Pn(e),0!==i.pending)return i.last_flush=-1,pn;a=0,r-=s}var l=new Uint8Array(i.gzhead.extra);i.pending_buf.set(l.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending+=r,i.gzhead.hcrc&&i.pending>a&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){var c,d=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>d&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-d,d)),Pn(e),0!==i.pending)return i.last_flush=-1,pn;d=0}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Mn(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>d&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-d,d)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){var h,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-u,u)),Pn(e),0!==i.pending)return i.last_flush=-1,pn;u=0}h=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Mn(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>u&&(e.adler=Ji(e.adler,i.pending_buf,i.pending-u,u))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Pn(e),0!==i.pending))return i.last_flush=-1,pn;Mn(i,255&e.adler),Mn(i,e.adler>>8&255),e.adler=0}if(i.status=In,Pn(e),0!==i.pending)return i.last_flush=-1,pn}if(0!==e.avail_in||0!==i.lookahead||t!==ln&&i.status!==Xn){var p=0===i.level?jn(i,t):i.strategy===xn?function(e,t){for(var i;;){if(0===e.lookahead&&(Fn(e),0===e.lookahead)){if(t===ln)return 1;break}if(e.match_length=0,i=rn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(Rn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===hn?(Rn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rn(e,!1),0===e.strm.avail_out)?1:2}(i,t):i.strategy===wn?function(e,t){for(var i,n,o,a,r=e.window;;){if(e.lookahead<=En){if(Fn(e),e.lookahead<=En&&t===ln)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=r[o=e.strstart-1])===r[++o]&&n===r[++o]&&n===r[++o]){a=e.strstart+En;do{}while(n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&o<a);e.match_length=En-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=rn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=rn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(Rn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===hn?(Rn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rn(e,!1),0===e.strm.avail_out)?1:2}(i,t):Wn[i.level].func(i,t);if(3!==p&&4!==p||(i.status=Xn),1===p||3===p)return 0===e.avail_out&&(i.last_flush=-1),pn;if(2===p&&(t===cn?sn(i):t!==un&&(on(i,0,0,!1),t===dn&&(Ln(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Pn(e),0===e.avail_out))return i.last_flush=-1,pn}return t!==hn?pn:i.wrap<=0?fn:(2===i.wrap?(Mn(i,255&e.adler),Mn(i,e.adler>>8&255),Mn(i,e.adler>>16&255),Mn(i,e.adler>>24&255),Mn(i,255&e.total_in),Mn(i,e.total_in>>8&255),Mn(i,e.total_in>>16&255),Mn(i,e.total_in>>24&255)):(Nn(i,e.adler>>>16),Nn(i,65535&e.adler)),Pn(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?pn:fn)},deflateEnd:function(e){if(Zn(e))return gn;var t=e.state.status;return e.state=null,t===In?zn(e,mn):pn},deflateSetDictionary:Jn,deflateInfo:"pako deflate (from Nodeca project)"},to=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},io=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==h(i))throw new TypeError(i+"must be non-object");for(var n in i)to(i,n)&&(e[n]=i[n])}}return e},no=function(e){for(var t=0,i=0,n=e.length;i<n;i++)t+=e[i].length;for(var o=new Uint8Array(t),a=0,r=0,s=e.length;a<s;a++){var l=e[a];o.set(l,r),r+=l.length}return o},oo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(kl){oo=!1}for(var ao=new Uint8Array(256),ro=0;ro<256;ro++)ao[ro]=ro>=252?6:ro>=248?5:ro>=240?4:ro>=224?3:ro>=192?2:1;ao[254]=ao[254]=1;var so=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,i,n,o,a,r=e.length,s=0;for(o=0;o<r;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),a=0,o=0;a<s;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},lo=function(e,t){var i,n,o=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*o);for(n=0,i=0;i<o;){var r=e[i++];if(r<128)a[n++]=r;else{var s=ao[r];if(s>4)a[n++]=65533,i+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&i<o;)r=r<<6|63&e[i++],s--;s>1?a[n++]=65533:r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|1023&r)}}}return function(e,t){if(t<65534&&e.subarray&&oo)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var i="",n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i}(a,n)},co=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+ao[e[i]]>t?i:t};var ho=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},uo=Object.prototype.toString,po=tn.Z_NO_FLUSH,fo=tn.Z_SYNC_FLUSH,go=tn.Z_FULL_FLUSH,mo=tn.Z_FINISH,vo=tn.Z_OK,bo=tn.Z_STREAM_END,ko=tn.Z_DEFAULT_COMPRESSION,xo=tn.Z_DEFAULT_STRATEGY,wo=tn.Z_DEFLATED;function yo(e){this.options=io({level:ko,method:wo,chunkSize:16384,windowBits:15,memLevel:8,strategy:xo},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ho,this.strm.avail_out=0;var i=eo.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==vo)throw new Error(en[i]);if(t.header&&eo.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?so(t.dictionary):"[object ArrayBuffer]"===uo.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=eo.deflateSetDictionary(this.strm,n))!==vo)throw new Error(en[i]);this._dict_set=!0}}yo.prototype.push=function(e,t){var i,n,o=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?mo:po,"string"==typeof e?o.input=so(e):"[object ArrayBuffer]"===uo.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;)if(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(n===fo||n===go)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if((i=eo.deflate(o,n))===bo)return o.next_out>0&&this.onData(o.output.subarray(0,o.next_out)),i=eo.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===vo;if(0!==o.avail_out){if(n>0&&o.next_out>0)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(0===o.avail_in)break}else this.onData(o.output)}return!0},yo.prototype.onData=function(e){this.chunks.push(e)},yo.prototype.onEnd=function(e){e===vo&&(this.result=no(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var _o=16209,So=function(e,t){var i,n,o,a,r,s,l,c,d,h,u,p,f,g,m,v,b,k,x,w,y,_,S,C,E=e.state;i=e.next_in,S=e.input,n=i+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),r=o+(e.avail_out-257),s=E.dmax,l=E.wsize,c=E.whave,d=E.wnext,h=E.window,u=E.hold,p=E.bits,f=E.lencode,g=E.distcode,m=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;e:do{p<15&&(u+=S[i++]<<p,p+=8,u+=S[i++]<<p,p+=8),b=f[u&m];t:for(;;){if(u>>>=k=b>>>24,p-=k,0===(k=b>>>16&255))C[o++]=65535&b;else{if(!(16&k)){if(0==(64&k)){b=f[(65535&b)+(u&(1<<k)-1)];continue t}if(32&k){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=_o;break e}x=65535&b,(k&=15)&&(p<k&&(u+=S[i++]<<p,p+=8),x+=u&(1<<k)-1,u>>>=k,p-=k),p<15&&(u+=S[i++]<<p,p+=8,u+=S[i++]<<p,p+=8),b=g[u&v];i:for(;;){if(u>>>=k=b>>>24,p-=k,!(16&(k=b>>>16&255))){if(0==(64&k)){b=g[(65535&b)+(u&(1<<k)-1)];continue i}e.msg="invalid distance code",E.mode=_o;break e}if(w=65535&b,p<(k&=15)&&(u+=S[i++]<<p,(p+=8)<k&&(u+=S[i++]<<p,p+=8)),(w+=u&(1<<k)-1)>s){e.msg="invalid distance too far back",E.mode=_o;break e}if(u>>>=k,p-=k,w>(k=o-a)){if((k=w-k)>c&&E.sane){e.msg="invalid distance too far back",E.mode=_o;break e}if(y=0,_=h,0===d){if(y+=l-k,k<x){x-=k;do{C[o++]=h[y++]}while(--k);y=o-w,_=C}}else if(d<k){if(y+=l+d-k,(k-=d)<x){x-=k;do{C[o++]=h[y++]}while(--k);if(y=0,d<x){x-=k=d;do{C[o++]=h[y++]}while(--k);y=o-w,_=C}}}else if(y+=d-k,k<x){x-=k;do{C[o++]=h[y++]}while(--k);y=o-w,_=C}for(;x>2;)C[o++]=_[y++],C[o++]=_[y++],C[o++]=_[y++],x-=3;x&&(C[o++]=_[y++],x>1&&(C[o++]=_[y++]))}else{y=o-w;do{C[o++]=C[y++],C[o++]=C[y++],C[o++]=C[y++],x-=3}while(x>2);x&&(C[o++]=C[y++],x>1&&(C[o++]=C[y++]))}break}}break}}while(i<n&&o<r);i-=x=p>>3,u&=(1<<(p-=x<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=o<r?r-o+257:257-(o-r),E.hold=u,E.bits=p},Co=15,Eo=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),To=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Yo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Io=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Xo=function(e,t,i,n,o,a,r,s){var l,c,d,h,u,p,f,g,m,v=s.bits,b=0,k=0,x=0,w=0,y=0,_=0,S=0,C=0,E=0,T=0,Y=null,I=new Uint16Array(16),X=new Uint16Array(16),z=null;for(b=0;b<=Co;b++)I[b]=0;for(k=0;k<n;k++)I[t[i+k]]++;for(y=v,w=Co;w>=1&&0===I[w];w--);if(y>w&&(y=w),0===w)return o[a++]=20971520,o[a++]=20971520,s.bits=1,0;for(x=1;x<w&&0===I[x];x++);for(y<x&&(y=x),C=1,b=1;b<=Co;b++)if(C<<=1,(C-=I[b])<0)return-1;if(C>0&&(0===e||1!==w))return-1;for(X[1]=0,b=1;b<Co;b++)X[b+1]=X[b]+I[b];for(k=0;k<n;k++)0!==t[i+k]&&(r[X[t[i+k]]++]=k);if(0===e?(Y=z=r,p=20):1===e?(Y=Eo,z=To,p=257):(Y=Yo,z=Io,p=0),T=0,k=0,b=x,u=a,_=y,S=0,d=-1,h=(E=1<<y)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){f=b-S,r[k]+1<p?(g=0,m=r[k]):r[k]>=p?(g=z[r[k]-p],m=Y[r[k]-p]):(g=96,m=0),l=1<<b-S,x=c=1<<_;do{o[u+(T>>S)+(c-=l)]=f<<24|g<<16|m|0}while(0!==c);for(l=1<<b-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,k++,0==--I[b]){if(b===w)break;b=t[i+r[k]]}if(b>y&&(T&h)!==d){for(0===S&&(S=y),u+=x,C=1<<(_=b-S);_+S<w&&!((C-=I[_+S])<=0);)_++,C<<=1;if(E+=1<<_,1===e&&E>852||2===e&&E>592)return 1;o[d=T&h]=y<<24|_<<16|u-a|0}}return 0!==T&&(o[u+T]=b-S<<24|64<<16|0),s.bits=y,0},zo=tn.Z_FINISH,Ao=tn.Z_BLOCK,Lo=tn.Z_TREES,qo=tn.Z_OK,Do=tn.Z_STREAM_END,Po=tn.Z_NEED_DICT,Ro=tn.Z_STREAM_ERROR,Mo=tn.Z_DATA_ERROR,No=tn.Z_MEM_ERROR,Oo=tn.Z_BUF_ERROR,Bo=tn.Z_DEFLATED,Fo=16180,jo=16190,Ho=16191,Uo=16192,Go=16194,Wo=16199,Vo=16200,Zo=16206,Ko=16209,$o=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Qo(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Jo,ea,ta=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<Fo||t.mode>16211?1:0},ia=function(e){if(ta(e))return Ro;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Fo,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,qo},na=function(e){if(ta(e))return Ro;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ia(e)},oa=function(e,t){var i;if(ta(e))return Ro;var n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ro:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,na(e))},aa=function(e,t){if(!e)return Ro;var i=new Qo;e.state=i,i.strm=e,i.window=null,i.mode=Fo;var n=oa(e,t);return n!==qo&&(e.state=null),n},ra=!0,sa=function(e){if(ra){Jo=new Int32Array(512),ea=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Xo(1,e.lens,0,288,Jo,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Xo(2,e.lens,0,32,ea,0,e.work,{bits:5}),ra=!1}e.lencode=Jo,e.lenbits=9,e.distcode=ea,e.distbits=5},la=function(e,t,i,n){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>n&&(o=n),a.window.set(t.subarray(i-n,i-n+o),a.wnext),(n-=o)?(a.window.set(t.subarray(i-n,i),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},ca=function(e,t){var i,n,o,a,r,s,l,c,d,h,u,p,f,g,m,v,b,k,x,w,y,_,S,C,E=0,T=new Uint8Array(4),Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ta(e)||!e.output||!e.input&&0!==e.avail_in)return Ro;(i=e.state).mode===Ho&&(i.mode=Uo),r=e.next_out,o=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=i.hold,d=i.bits,h=s,u=l,_=qo;e:for(;;)switch(i.mode){case Fo:if(0===i.wrap){i.mode=Uo;break}for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(2&i.wrap&&35615===c){0===i.wbits&&(i.wbits=15),i.check=0,T[0]=255&c,T[1]=c>>>8&255,i.check=Ji(i.check,T,2,0),c=0,d=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=Ko;break}if((15&c)!==Bo){e.msg="unknown compression method",i.mode=Ko;break}if(d-=4,y=8+(15&(c>>>=4)),0===i.wbits&&(i.wbits=y),y>15||y>i.wbits){e.msg="invalid window size",i.mode=Ko;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&c?16189:Ho,c=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(i.flags=c,(255&i.flags)!==Bo){e.msg="unknown compression method",i.mode=Ko;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=Ko;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&4&i.wrap&&(T[0]=255&c,T[1]=c>>>8&255,i.check=Ji(i.check,T,2,0)),c=0,d=0,i.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.head&&(i.head.time=c),512&i.flags&&4&i.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,i.check=Ji(i.check,T,4,0)),c=0,d=0,i.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&4&i.wrap&&(T[0]=255&c,T[1]=c>>>8&255,i.check=Ji(i.check,T,2,0)),c=0,d=0,i.mode=16184;case 16184:if(1024&i.flags){for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&4&i.wrap&&(T[0]=255&c,T[1]=c>>>8&255,i.check=Ji(i.check,T,2,0)),c=0,d=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&((p=i.length)>s&&(p=s),p&&(i.head&&(y=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(a,a+p),y)),512&i.flags&&4&i.wrap&&(i.check=Ji(i.check,n,p,a)),s-=p,a+=p,i.length-=p),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===s)break e;p=0;do{y=n[a+p++],i.head&&y&&i.length<65536&&(i.head.name+=String.fromCharCode(y))}while(y&&p<s);if(512&i.flags&&4&i.wrap&&(i.check=Ji(i.check,n,p,a)),s-=p,a+=p,y)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===s)break e;p=0;do{y=n[a+p++],i.head&&y&&i.length<65536&&(i.head.comment+=String.fromCharCode(y))}while(y&&p<s);if(512&i.flags&&4&i.wrap&&(i.check=Ji(i.check,n,p,a)),s-=p,a+=p,y)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(4&i.wrap&&c!==(65535&i.check)){e.msg="header crc mismatch",i.mode=Ko;break}c=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Ho;break;case 16189:for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}e.adler=i.check=$o(c),c=0,d=0,i.mode=jo;case jo:if(0===i.havedict)return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=c,i.bits=d,Po;e.adler=i.check=1,i.mode=Ho;case Ho:if(t===Ao||t===Lo)break e;case Uo:if(i.last){c>>>=7&d,d-=7&d,i.mode=Zo;break}for(;d<3;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}switch(i.last=1&c,d-=1,3&(c>>>=1)){case 0:i.mode=16193;break;case 1:if(sa(i),i.mode=Wo,t===Lo){c>>>=2,d-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=Ko}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=Ko;break}if(i.length=65535&c,c=0,d=0,i.mode=Go,t===Lo)break e;case Go:i.mode=16195;case 16195:if(p=i.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;o.set(n.subarray(a,a+p),r),s-=p,a+=p,l-=p,r+=p,i.length-=p;break}i.mode=Ho;break;case 16196:for(;d<14;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(i.nlen=257+(31&c),c>>>=5,d-=5,i.ndist=1+(31&c),c>>>=5,d-=5,i.ncode=4+(15&c),c>>>=4,d-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=Ko;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;d<3;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.lens[Y[i.have++]]=7&c,c>>>=3,d-=3}for(;i.have<19;)i.lens[Y[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},_=Xo(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,_){e.msg="invalid code lengths set",i.mode=Ko;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;v=(E=i.lencode[c&(1<<i.lenbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(b<16)c>>>=m,d-=m,i.lens[i.have++]=b;else{if(16===b){for(C=m+2;d<C;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(c>>>=m,d-=m,0===i.have){e.msg="invalid bit length repeat",i.mode=Ko;break}y=i.lens[i.have-1],p=3+(3&c),c>>>=2,d-=2}else if(17===b){for(C=m+3;d<C;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}d-=m,y=0,p=3+(7&(c>>>=m)),c>>>=3,d-=3}else{for(C=m+7;d<C;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}d-=m,y=0,p=11+(127&(c>>>=m)),c>>>=7,d-=7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=Ko;break}for(;p--;)i.lens[i.have++]=y}}if(i.mode===Ko)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=Ko;break}if(i.lenbits=9,S={bits:i.lenbits},_=Xo(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,_){e.msg="invalid literal/lengths set",i.mode=Ko;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},_=Xo(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,_){e.msg="invalid distances set",i.mode=Ko;break}if(i.mode=Wo,t===Lo)break e;case Wo:i.mode=Vo;case Vo:if(s>=6&&l>=258){e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=c,i.bits=d,So(e,u),r=e.next_out,o=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=i.hold,d=i.bits,i.mode===Ho&&(i.back=-1);break}for(i.back=0;v=(E=i.lencode[c&(1<<i.lenbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(v&&0==(240&v)){for(k=m,x=v,w=b;v=(E=i.lencode[w+((c&(1<<k+x)-1)>>k)])>>>16&255,b=65535&E,!(k+(m=E>>>24)<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=k,d-=k,i.back+=k}if(c>>>=m,d-=m,i.back+=m,i.length=b,0===v){i.mode=16205;break}if(32&v){i.back=-1,i.mode=Ho;break}if(64&v){e.msg="invalid literal/length code",i.mode=Ko;break}i.extra=15&v,i.mode=16201;case 16201:if(i.extra){for(C=i.extra;d<C;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;v=(E=i.distcode[c&(1<<i.distbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(0==(240&v)){for(k=m,x=v,w=b;v=(E=i.distcode[w+((c&(1<<k+x)-1)>>k)])>>>16&255,b=65535&E,!(k+(m=E>>>24)<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=k,d-=k,i.back+=k}if(c>>>=m,d-=m,i.back+=m,64&v){e.msg="invalid distance code",i.mode=Ko;break}i.offset=b,i.extra=15&v,i.mode=16203;case 16203:if(i.extra){for(C=i.extra;d<C;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=Ko;break}i.mode=16204;case 16204:if(0===l)break e;if(p=u-l,i.offset>p){if((p=i.offset-p)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=Ko;break}p>i.wnext?(p-=i.wnext,f=i.wsize-p):f=i.wnext-p,p>i.length&&(p=i.length),g=i.window}else g=o,f=r-i.offset,p=i.length;p>l&&(p=l),l-=p,i.length-=p;do{o[r++]=g[f++]}while(--p);0===i.length&&(i.mode=Vo);break;case 16205:if(0===l)break e;o[r++]=i.length,l--,i.mode=Vo;break;case Zo:if(i.wrap){for(;d<32;){if(0===s)break e;s--,c|=n[a++]<<d,d+=8}if(u-=l,e.total_out+=u,i.total+=u,4&i.wrap&&u&&(e.adler=i.check=i.flags?Ji(i.check,o,u,r-u):$i(i.check,o,u,r-u)),u=l,4&i.wrap&&(i.flags?c:$o(c))!==i.check){e.msg="incorrect data check",i.mode=Ko;break}c=0,d=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(4&i.wrap&&c!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=Ko;break}c=0,d=0}i.mode=16208;case 16208:_=Do;break e;case Ko:_=Mo;break e;case 16210:return No;default:return Ro}return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=c,i.bits=d,(i.wsize||u!==e.avail_out&&i.mode<Ko&&(i.mode<Zo||t!==zo))&&la(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,i.total+=u,4&i.wrap&&u&&(e.adler=i.check=i.flags?Ji(i.check,o,u,e.next_out-u):$i(i.check,o,u,e.next_out-u)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Ho?128:0)+(i.mode===Wo||i.mode===Go?256:0),(0===h&&0===u||t===zo)&&_===qo&&(_=Oo),_},da={inflateReset:na,inflateReset2:oa,inflateResetKeep:ia,inflateInit:function(e){return aa(e,15)},inflateInit2:aa,inflate:ca,inflateEnd:function(e){if(ta(e))return Ro;var t=e.state;return t.window&&(t.window=null),e.state=null,qo},inflateGetHeader:function(e,t){if(ta(e))return Ro;var i=e.state;return 0==(2&i.wrap)?Ro:(i.head=t,t.done=!1,qo)},inflateSetDictionary:function(e,t){var i,n=t.length;return ta(e)||0!==(i=e.state).wrap&&i.mode!==jo?Ro:i.mode===jo&&$i(1,t,n,0)!==i.check?Mo:la(e,t,n,n)?(i.mode=16210,No):(i.havedict=1,qo)},inflateInfo:"pako inflate (from Nodeca project)"};var ha=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ua=Object.prototype.toString,pa=tn.Z_NO_FLUSH,fa=tn.Z_FINISH,ga=tn.Z_OK,ma=tn.Z_STREAM_END,va=tn.Z_NEED_DICT,ba=tn.Z_STREAM_ERROR,ka=tn.Z_DATA_ERROR,xa=tn.Z_MEM_ERROR;function wa(e){this.options=io({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ho,this.strm.avail_out=0;var i=da.inflateInit2(this.strm,t.windowBits);if(i!==ga)throw new Error(en[i]);if(this.header=new ha,da.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=so(t.dictionary):"[object ArrayBuffer]"===ua.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=da.inflateSetDictionary(this.strm,t.dictionary))!==ga))throw new Error(en[i])}function ya(e,t){var i=new wa(t);if(i.push(e),i.err)throw i.msg||en[i.err];return i.result}wa.prototype.push=function(e,t){var i,n,o,a=this.strm,r=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?fa:pa,"[object ArrayBuffer]"===ua.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),(i=da.inflate(a,n))===va&&s&&((i=da.inflateSetDictionary(a,s))===ga?i=da.inflate(a,n):i===ka&&(i=va));a.avail_in>0&&i===ma&&a.state.wrap>0&&0!==e[a.next_in];)da.inflateReset(a),i=da.inflate(a,n);switch(i){case ba:case ka:case va:case xa:return this.onEnd(i),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||i===ma))if("string"===this.options.to){var l=co(a.output,a.next_out),c=a.next_out-l,d=lo(a.output,l);a.next_out=c,a.avail_out=r-c,c&&a.output.set(a.output.subarray(l,l+c),0),this.onData(d)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(i!==ga||0!==o){if(i===ma)return i=da.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},wa.prototype.onData=function(e){this.chunks.push(e)},wa.prototype.onEnd=function(e){e===ga&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=no(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var _a={Inflate:wa,inflate:ya,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ya(e,t)},ungzip:ya,constants:tn},Sa=_a.inflate,Ca=function(){function e(t){var i=this;v(this,e),p(this,"app",void 0),p(this,"overlays",void 0),p(this,"info",void 0),p(this,"map",void 0),p(this,"camera",void 0),p(this,"renderer",void 0),p(this,"input",void 0),p(this,"socket",void 0),p(this,"pointer",void 0),p(this,"audio",void 0),p(this,"entities",void 0),p(this,"bubble",void 0),p(this,"menu",void 0),p(this,"sprites",void 0),p(this,"messages",void 0),p(this,"lastEntityListRequest",Date.now()),this.game=t,this.app=t.app,this.overlays=t.overlays,this.info=t.info,this.map=t.map,this.camera=t.camera,this.renderer=t.renderer,this.input=t.input,this.socket=t.socket,this.pointer=t.pointer,this.audio=t.audio,this.entities=t.entities,this.bubble=t.bubble,this.menu=t.menu,this.sprites=t.sprites,this.messages=this.socket.messages,this.app.onFocus((function(){return i.socket.send(ze.Focus)})),this.messages.onHandshake(this.handleHandshake.bind(this)),this.messages.onWelcome(this.handleWelcome.bind(this)),this.messages.onMap(this.handleMap.bind(this)),this.messages.onEquipment(this.handleEquipment.bind(this)),this.messages.onSpawn(this.entities.create.bind(this.entities)),this.messages.onEntityList(this.handleEntityList.bind(this)),this.messages.onSync(this.handleSync.bind(this)),this.messages.onMovement(this.handleMovement.bind(this)),this.messages.onTeleport(this.handleTeleport.bind(this)),this.messages.onDespawn(this.handleDespawn.bind(this)),this.messages.onCombat(this.handleCombat.bind(this)),this.messages.onAnimation(this.handleAnimation.bind(this)),this.messages.onPoints(this.handlePoints.bind(this)),this.messages.onNetwork(this.handleNetwork.bind(this)),this.messages.onChat(this.handleChat.bind(this)),this.messages.onCommand(this.handleCommand.bind(this)),this.messages.onContainer(this.handleContainer.bind(this)),this.messages.onAbility(this.handleAbility.bind(this)),this.messages.onQuest(this.handleQuest.bind(this)),this.messages.onAchievement(this.handleAchievement.bind(this)),this.messages.onNotification(this.handleNotification.bind(this)),this.messages.onBlink(this.handleBlink.bind(this)),this.messages.onHeal(this.handleHeal.bind(this)),this.messages.onExperience(this.handleExperience.bind(this)),this.messages.onDeath(this.handleDeath.bind(this)),this.messages.onMusic(this.handleMusic.bind(this)),this.messages.onNPC(this.handleNPC.bind(this)),this.messages.onRespawn(this.handleRespawn.bind(this)),this.messages.onTrade(this.handleTrade.bind(this)),this.messages.onEnchant(this.handleEnchant.bind(this)),this.messages.onGuild(this.handleGuild.bind(this)),this.messages.onPointer(this.handlePointer.bind(this)),this.messages.onPVP(this.handlePVP.bind(this)),this.messages.onPoison(this.handlePoison.bind(this)),this.messages.onStore(this.handleStore.bind(this)),this.messages.onOverlay(this.handleOverlay.bind(this)),this.messages.onCamera(this.handleCamera.bind(this)),this.messages.onBubble(this.handleBubble.bind(this)),this.messages.onSkill(this.handleSkill.bind(this)),this.messages.onUpdate(this.handleUpdate.bind(this)),this.messages.onMinigame(this.handleMinigame.bind(this)),this.messages.onEffect(this.handleEffect.bind(this)),this.messages.onFriends(this.handleFriends.bind(this)),this.messages.onRank(this.handleRank.bind(this)),this.messages.onCrafting(this.handleCrafting.bind(this))}return k(e,[{key:"handleHandshake",value:function(e){if(this.app.updateLoader("Connecting to server"),this.game.player.instance=e.instance,this.game.player.serverId=e.serverId,this.app.isGuest())return this.socket.send(ze.Login,{opcode:Y.Guest});var t=this.app.getUsername(),i=this.app.getPassword(),n=this.app.getEmail();if(this.game.player.name=t.toLowerCase(),this.app.isRegistering())return this.socket.send(ze.Login,{opcode:Y.Register,username:t,password:i,email:n});this.socket.send(ze.Login,{opcode:Y.Login,username:t,password:i})}},{key:"handleWelcome",value:function(e){this.game.player.load(e),this.game.start(),this.game.postLoad()}},{key:"handleMap",value:function(e){var t=window.atob(e).split("").map((function(e){return e.charCodeAt(0)})),i=Sa(new Uint8Array(t),{to:"string"}),n=JSON.parse(i);this.map.loadRegions(n),this.renderer.forceRendering=!0,this.renderer.updateAnimatedTiles(),this.map.hasCachedDate()||this.app.fadeMenu()}},{key:"handleEquipment",value:function(e,t){switch(e){case X.Batch:var i,n=w(t.data.equipments);try{for(n.s();!(i=n.n()).done;){var o=i.value;this.game.player.equip(o)}}catch(zn){n.e(zn)}finally{n.f()}break;case X.Equip:this.game.player.equip(t.data);break;case X.Unequip:this.game.player.unequip(t.type,t.count);break;case X.Style:this.game.player.setAttackStyle(t.attackStyle),this.game.player.attackRange=t.attackRange}this.game.player.sync()}},{key:"handleEntityList",value:function(e,t){var i=this;switch(e){case I.Spawns:var n=new Set(Object.values(this.entities.getAll()).map((function(e){return e.instance}))),o=new Set(t.entities.filter((function(e){return n.has(e)}))),a=t.entities.filter((function(e){return!o.has(e)}));this.entities.decrepit=Object.values(this.entities.getAll()).filter((function(e){return!o.has(e.instance)&&e.instance!==i.game.player.instance})),this.entities.clean(),this.socket.send(ze.Who,a);break;case I.Positions:for(var r in t.positions){var s=t.positions[r],l=this.entities.get(r);if(!l||l.moving||l.hasPath())return;l.gridX===s.x&&l.gridY===s.y||this.game.teleport(l,s.x,s.y)}}}},{key:"handleSync",value:function(e){var t=this.entities.get(e.instance);t&&!t.teleporting&&!t.dead&&t.ready&&(t.load(e,!0),t.setSprite(this.game.sprites.get(t.getSpriteName())))}},{key:"handleMovement",value:function(e,t){var i,n=this.entities.get(t.instance);if(!n){if(!this.canRequestEntityList())return;return this.lastEntityListRequest=Date.now(),this.socket.send(ze.List)}switch(e){case z.Move:t.forced&&n.stop(!0),n.go(t.x,t.y,!1,t.instance!==this.game.player.instance);break;case z.Follow:if(i=this.entities.get(t.target)){if(n.instance===this.game.player.instance&&!this.game.player.hasTarget()&&!t.forced)return;n.follow(i)}break;case z.Stop:t.forced&&n.stop(!0);break;case z.Speed:n.movementSpeed=t.movementSpeed}}},{key:"handleTeleport",value:function(e){var t=this,i=this.entities.get(e.instance);if(null!=i&&i.isMob()||null!=i&&i.isPlayer()){this.input.selectedCellVisible=!1;var n=i.instance===this.game.player.instance;if(i.stop(!0),i.frozen=!0,n?(this.bubble.clean(),this.game.player.disableAction=!0):this.bubble.clear(i.instance),!e.withAnimation)return this.game.teleport(i,e.x,e.y);var o=i.sprite.key;i.teleporting=!0,i.setSprite(this.sprites.getDeath()),i.animateDeath((function(){t.game.teleport(i,e.x,e.y),i.animation=null,i.setSprite(t.sprites.get(o)),i.idle(i.orientation,!0)}),160)}}},{key:"handleDespawn",value:function(e){var t=this,i=this.entities.get(e.instance);if(i&&(!e.regions||e.regions.includes(i.region))){if(i.isItem())return this.entities.removeItem(i);if(i.isChest())return this.entities.removeChest(i);if(i.isNPC())return this.entities.removeNPC(i);i.despawn(),this.bubble.clear(i.instance),this.game.player.hasTarget(i)&&this.game.player.removeTarget(),this.audio.playKillSound(i),i.sprite.hasDeathAnimation||i.setSprite(this.sprites.getDeath()),i.animateDeath((function(){return t.entities.removeEntity(i)}))}}},{key:"handleCombat",value:function(e,t){var i=this.entities.get(t.instance),n=this.entities.get(t.target);if(i&&n&&e===L.Hit){var o=n.instance===this.game.player.instance,a=i.instance===this.game.player.instance,r=t.hit.type===le.Poison,s=t.hit.type===le.Freezing,l=t.hit.type===le.Burning;r&&n.addEffect(ge.Poisonball),t.hit.type===le.Critical&&n.addEffect(ge.Critical),t.hit.aoe||r||s||l||(i.lookAt(n),i.performAction(i.orientation,re.Attack)),a&&t.hit.damage>0&&this.audio.playHitSound(n),o&&t.hit.damage>0&&this.audio.playSound("hurt"),this.info.create(t.hit.type,t.hit.damage,n.x,n.y,o),t.hit.damage>0&&n.toggleHurt(),i.triggerHealthBar(),n.triggerHealthBar()}}},{key:"handleAnimation",value:function(e){var t=this.entities.get(e.instance);t&&t.performAction(t.orientation,e.action)}},{key:"handlePoints",value:function(e){var t,i,n=this.entities.get(e.instance);n&&!n.dead&&(e.mana&&n.setMana(e.mana,e.maxMana),e.hitPoints&&(n.setHitPoints(e.hitPoints,e.maxHitPoints),null===(t=(i=this.input.hud).updateCallback)||void 0===t||t.call(i,e.instance,e.hitPoints)))}},{key:"handleNetwork",value:function(){this.socket.send(ze.Network,[q.Pong])}},{key:"handleChat",value:function(e){if(e.source)return this.input.chatHandler.add(e.source,e.message,e.colour,!0);var t=this.entities.get(e.instance);if(t){var i=t.name,n=t.rank,o=t.x,a=t.y;n!==ve.None&&(i="[".concat(ke[n],"] ").concat(i)),this.input.chatHandler.add(i,e.message,e.colour),e.withBubble&&(this.bubble.create(e.instance,e.message),this.bubble.setTo(e.instance,o,a),this.audio.playSound("npctalk",t))}}},{key:"handleCommand",value:function(e){if(e.command.includes("toggle")&&this.game.player.hasActiveEffect())return this.game.player.removeAllEffects();"debug"!==e.command||(this.renderer.debugging=!this.renderer.debugging)}},{key:"handleContainer",value:function(e,t){var i=t.type===ie.Inventory?this.menu.getInventory():this.menu.getBank();switch(e){case D.Batch:i.batch(t.data.slots);break;case D.Add:i.add(t.slot);break;case D.Remove:i.remove(t.slot)}this.menu.synchronize()}},{key:"handleAbility",value:function(e,t){switch(e){case P.Batch:this.game.player.loadAbilities(t.abilities);break;case P.Add:case P.Update:this.game.player.setAbility(t.key,t.level,t.type,t.quickSlot);break;case P.Toggle:this.game.player.toggleAbility(t.key)}this.menu.synchronize("profile")}},{key:"handleQuest",value:function(e,t){switch(e){case R.Batch:this.game.player.loadQuests(t.quests);break;case R.Progress:this.game.player.setQuest(t.key,t.stage,t.subStage)}this.menu.getQuests().handle(e,t.key)}},{key:"handleAchievement",value:function(e,t){switch(e){case M.Batch:this.game.player.loadAchievements(t.achievements);break;case M.Progress:this.game.player.setAchievement(t.key,t.stage,t.name,t.description)}this.menu.getAchievements().handle(e,t.key)}},{key:"handleNotification",value:function(e,t){switch(e){case N.Text:return this.input.chatHandler.add(t.source||"WORLD",t.message,t.colour,!0);case N.Popup:return this.menu.getNotification().show(t.title,t.message,t.colour)}}},{key:"handleBlink",value:function(e){var t=this.entities.get(e);null==t||t.blink()}},{key:"handleHeal",value:function(e){var t=this.entities.get(e.instance);if(t){switch(e.type){case"hitpoints":this.info.create(le.Heal,e.amount,t.x,t.y),t.addEffect(ge.Healing);break;case"mana":this.info.create(le.Mana,e.amount,t.x,t.y)}t.triggerHealthBar()}}},{key:"handleExperience",value:function(e,t){var i=this.entities.get(t.instance);if(i){var n=i.instance===this.game.player.instance;switch(e){case O.Sync:i.level=t.level;break;case O.Skill:n&&this.info.create(le.Profession,t.amount,i.x,i.y,!1,t.skill,!0)}}}},{key:"handleDeath",value:function(){var e=this;this.game.player.stop(!0),this.game.player.removeAllEffects(),this.game.minigame.reset(),this.game.player.teleporting=!0,this.game.player.setSprite(this.sprites.getDeath()),this.game.player.setHitPoints(0),this.game.player.setMana(0),this.audio.stopMusic(),this.game.player.animateDeath((function(){e.game.entities.unregisterPosition(e.game.player),e.game.player.despawn(),e.app.body.classList.add("death")}))}},{key:"handleMusic",value:function(e){this.audio.playMusic(e)}},{key:"handleNPC",value:function(e,t){var i,n;switch(e){case B.Talk:if(!(i=this.entities.get(t.instance)))return;if(n=t.text?"npc":"npc-end",this.audio.playSound(n,i),this.game.player.disableAction=!0,!t.text)return this.bubble.clear(i.instance);this.bubble.create(i.instance,t.text),this.bubble.setTo(i.instance,i.x,i.y);break;case B.Bank:return this.menu.getBank().show(t.slots);case B.Enchant:this.menu.getEnchant().show()}}},{key:"handleRespawn",value:function(e){this.game.player.setGridPosition(e.x,e.y),this.camera.centreOn(this.game.player),this.game.player.animation=null,this.game.player.setSprite(this.game.sprites.get(this.game.player.getSpriteName())),this.game.player.idle(),this.entities.addEntity(this.game.player),this.game.player.dead=!1,this.game.player.teleporting=!1}},{key:"handleTrade",value:function(e,t){switch(e){case F.Open:var i=this.entities.get(t.instance);if(!i)return;return this.menu.getTrade().show(this.game.player,i);case F.Close:return this.menu.getTrade().hide(!0);case F.Add:return this.menu.getTrade().add(t.index,t.count,t.key,t.instance!==this.game.player.instance);case F.Remove:return this.menu.getTrade().remove(t.index,t.instance!==this.game.player.instance);case F.Accept:return this.menu.getTrade().accept(t.message)}}},{key:"handleEnchant",value:function(e,t){if(e===j.Select)return this.menu.getEnchant().move(t.index,t.isShard)}},{key:"handleGuild",value:function(e,t){switch(e){case H.Login:this.game.player.setGuild(t);break;case H.Leave:this.game.player.setGuild()}this.menu.getGuilds().handle(e,t)}},{key:"handlePointer",value:function(e,t){var i;switch(e){case U.Entity:if(!(i=this.entities.get(t.instance)))return;this.pointer.create(i.instance,e),this.pointer.setToEntity(i);break;case U.Location:this.pointer.create(t.instance,e),this.pointer.setToPosition(t.instance,t.x*this.map.tileSize,t.y*this.map.tileSize);break;case U.Relative:this.pointer.create(t.instance,e),this.pointer.setRelative(t.instance,t.x,t.y);break;case U.Remove:this.pointer.clean();break;case U.Button:this.pointer.create(t.instance,e,t.button)}}},{key:"handlePVP",value:function(e){this.game.pvp=e.state}},{key:"handlePoison",value:function(e){this.game.player.setPoison(-1!==e)}},{key:"handleStore",value:function(e,t){switch(e){case G.Open:return this.menu.getStore().show(t);case G.Update:return this.menu.getStore().update(t);case G.Select:return this.menu.getStore().move(t)}}},{key:"handleOverlay",value:function(e,t){switch(e){case V.Set:this.overlays.update(t.image),this.renderer.updateDarkMask(t.colour);break;case V.Remove:this.renderer.removeAllLights(),this.overlays.update();break;case V.Lamp:return this.renderer.addLight(t.light)}}},{key:"handleCamera",value:function(e){}},{key:"handleBubble",value:function(e,t){if(!t.text)return this.bubble.clear(t.instance);var i=this.entities.get(t.instance);if(e!==$.Entity||i){var n=i?void 0:{x:t.x*this.map.tileSize,y:t.y*this.map.tileSize};this.bubble.create(t.instance,t.text,t.duration,n),this.bubble.setTo(t.instance,n?n.x:i.x,n?n.y:i.y)}}},{key:"handleSkill",value:function(e,t){switch(e){case K.Batch:this.game.player.loadSkills(t.skills);break;case K.Update:this.game.player.setSkill(t)}this.game.menu.synchronize("profile")}},{key:"handleUpdate",value:function(e){this.entities.cleanDisplayInfo();var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=this.entities.get(n.instance);o&&(n.colour&&(o.nameColour=n.colour),n.scale&&(o.customScale=n.scale))}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"handleMinigame",value:function(e,t){var i=this.game,n=i.minigame,o=i.player;switch(n.type=e,n.started=!!t.started,t.countdown&&(n.countdown=t.countdown),t.action){case W.Score:return isNaN(t.redTeamKills)||isNaN(t.blueTeamKills)||n.setScore(t.redTeamKills,t.blueTeamKills),n.setStatus("ingame");case W.End:case W.Lobby:return o.nameColour="",n.setStatus("lobby");case W.Exit:return n.reset()}}},{key:"handleEffect",value:function(e,t){var i=t.instance===this.game.player.instance?this.game.player:this.entities.get(t.instance);if(i)switch(e){case Q.Add:return i.addEffect(t.effect);case Q.Remove:return i.removeEffect(t.effect)}}},{key:"handleFriends",value:function(e,t){switch(e){case J.List:this.game.player.loadFriends(t.list);break;case J.Add:this.game.player.addFriend(t.username,t.status,t.serverId);break;case J.Status:this.game.player.setFriendStatus(t.username,t.status,t.serverId)}this.menu.getFriends().handle(e,t.username,t.status,t.serverId)}},{key:"handleCrafting",value:function(e,t){this.menu.getCrafting().handle(e,t)}},{key:"handleRank",value:function(e){this.game.player.setRank(e)}},{key:"canRequestEntityList",value:function(){return Date.now()-this.lastEntityListRequest>5e3}}]),e}(),Ea=function(){function e(t){var i=this;v(this,e),p(this,"messages",[]),p(this,"handshakeCallback",void 0),p(this,"welcomeCallback",void 0),p(this,"mapCallback",void 0),p(this,"spawnCallback",void 0),p(this,"equipmentCallback",void 0),p(this,"entityListCallback",void 0),p(this,"syncCallback",void 0),p(this,"movementCallback",void 0),p(this,"teleportCallback",void 0),p(this,"despawnCallback",void 0),p(this,"combatCallback",void 0),p(this,"animationCallback",void 0),p(this,"pointsCallback",void 0),p(this,"networkCallback",void 0),p(this,"chatCallback",void 0),p(this,"commandCallback",void 0),p(this,"containerCallback",void 0),p(this,"abilityCallback",void 0),p(this,"questCallback",void 0),p(this,"achievementCallback",void 0),p(this,"notificationCallback",void 0),p(this,"blinkCallback",void 0),p(this,"healCallback",void 0),p(this,"experienceCallback",void 0),p(this,"deathCallback",void 0),p(this,"musicCallback",void 0),p(this,"npcCallback",void 0),p(this,"respawnCallback",void 0),p(this,"tradeCallback",void 0),p(this,"enchantCallback",void 0),p(this,"guildCallback",void 0),p(this,"pointerCallback",void 0),p(this,"pvpCallback",void 0),p(this,"poisonCallback",void 0),p(this,"storeCallback",void 0),p(this,"overlayCallback",void 0),p(this,"cameraCallback",void 0),p(this,"bubbleCallback",void 0),p(this,"skillCallback",void 0),p(this,"updateCallback",void 0),p(this,"minigameCallback",void 0),p(this,"effectCallback",void 0),p(this,"friendsCallback",void 0),p(this,"rankCallback",void 0),p(this,"craftingCallback",void 0),this.app=t,this.messages[ze.Handshake]=function(){return i.handshakeCallback},this.messages[ze.Welcome]=function(){return i.welcomeCallback},this.messages[ze.Spawn]=function(){return i.spawnCallback},this.messages[ze.Equipment]=function(){return i.equipmentCallback},this.messages[ze.List]=function(){return i.entityListCallback},this.messages[ze.Sync]=function(){return i.syncCallback},this.messages[ze.Movement]=function(){return i.movementCallback},this.messages[ze.Teleport]=function(){return i.teleportCallback},this.messages[ze.Despawn]=function(){return i.despawnCallback},this.messages[ze.Combat]=function(){return i.combatCallback},this.messages[ze.Animation]=function(){return i.animationCallback},this.messages[ze.Points]=function(){return i.pointsCallback},this.messages[ze.Network]=function(){return i.networkCallback},this.messages[ze.Chat]=function(){return i.chatCallback},this.messages[ze.Command]=function(){return i.commandCallback},this.messages[ze.Container]=function(){return i.containerCallback},this.messages[ze.Ability]=function(){return i.abilityCallback},this.messages[ze.Quest]=function(){return i.questCallback},this.messages[ze.Achievement]=function(){return i.achievementCallback},this.messages[ze.Notification]=function(){return i.notificationCallback},this.messages[ze.Blink]=function(){return i.blinkCallback},this.messages[ze.Heal]=function(){return i.healCallback},this.messages[ze.Experience]=function(){return i.experienceCallback},this.messages[ze.Death]=function(){return i.deathCallback},this.messages[ze.Music]=function(){return i.musicCallback},this.messages[ze.NPC]=function(){return i.npcCallback},this.messages[ze.Respawn]=function(){return i.respawnCallback},this.messages[ze.Trade]=function(){return i.tradeCallback},this.messages[ze.Enchant]=function(){return i.enchantCallback},this.messages[ze.Guild]=function(){return i.guildCallback},this.messages[ze.Pointer]=function(){return i.pointerCallback},this.messages[ze.PVP]=function(){return i.pvpCallback},this.messages[ze.Poison]=function(){return i.poisonCallback},this.messages[ze.Store]=function(){return i.storeCallback},this.messages[ze.Map]=function(){return i.mapCallback},this.messages[ze.Overlay]=function(){return i.overlayCallback},this.messages[ze.Camera]=function(){return i.cameraCallback},this.messages[ze.Bubble]=function(){return i.bubbleCallback},this.messages[ze.Skill]=function(){return i.skillCallback},this.messages[ze.Update]=function(){return i.updateCallback},this.messages[ze.Minigame]=function(){return i.minigameCallback},this.messages[ze.Effect]=function(){return i.effectCallback},this.messages[ze.Friends]=function(){return i.friendsCallback},this.messages[ze.Rank]=function(){return i.rankCallback},this.messages[ze.Crafting]=function(){return i.craftingCallback}}return k(e,[{key:"handleData",value:function(e){var t=e.shift(),n=this.messages[t]();n&&"function"==typeof n&&n.call.apply(n,[this].concat(i(e)))}},{key:"handleBulkData",value:function(e){var t,i=w(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.handleData(n)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"handleUTF8",value:function(e){switch(this.app.toggleLogin(!1),e){case"worldfull":this.app.sendError("The servers are currently full!");break;case"error":this.app.sendError("The server has responded with an error!");break;case"development":this.app.sendError("The game is currently in development mode.");break;case"disallowed":this.app.sendError("The server is currently not accepting connections!");break;case"maintenance":this.app.sendError("Kaetram is currently under maintenance.");break;case"userexists":this.app.sendError("The username you have entered already exists.");break;case"emailexists":this.app.sendError("The email you have entered is not available.");break;case"invalidinput":this.app.sendError("The input you have entered is invalid. Please do not use special characters.");break;case"loggedin":this.app.sendError("The player is already logged in!");break;case"invalidlogin":this.app.sendError("You have entered the wrong username or password.");break;case"toofast":this.app.sendError("You are trying to log in too fast from the same connection.");break;case"timeout":this.app.sendError("You have been disconnected for being inactive for too long.");break;case"updated":this.app.sendError("The game has been updated. Please clear your browser cache.");break;case"cheating":this.app.sendError("An error in client-server syncing has occurred.");break;case"lost":this.app.sendError("The connection to the server has been lost.");break;case"toomany":this.app.sendError("Too many devices from your IP address are connected.");break;case"ratelimit":this.app.sendError("You are sending packets too fast.");break;default:this.app.sendError("An unknown error has occurred, please submit a bug report.")}}},{key:"onHandshake",value:function(e){this.handshakeCallback=e}},{key:"onWelcome",value:function(e){this.welcomeCallback=e}},{key:"onSpawn",value:function(e){this.spawnCallback=e}},{key:"onEquipment",value:function(e){this.equipmentCallback=e}},{key:"onEntityList",value:function(e){this.entityListCallback=e}},{key:"onSync",value:function(e){this.syncCallback=e}},{key:"onMovement",value:function(e){this.movementCallback=e}},{key:"onTeleport",value:function(e){this.teleportCallback=e}},{key:"onDespawn",value:function(e){this.despawnCallback=e}},{key:"onCombat",value:function(e){this.combatCallback=e}},{key:"onAnimation",value:function(e){this.animationCallback=e}},{key:"onPoints",value:function(e){this.pointsCallback=e}},{key:"onNetwork",value:function(e){this.networkCallback=e}},{key:"onChat",value:function(e){this.chatCallback=e}},{key:"onCommand",value:function(e){this.commandCallback=e}},{key:"onContainer",value:function(e){this.containerCallback=e}},{key:"onAbility",value:function(e){this.abilityCallback=e}},{key:"onQuest",value:function(e){this.questCallback=e}},{key:"onAchievement",value:function(e){this.achievementCallback=e}},{key:"onNotification",value:function(e){this.notificationCallback=e}},{key:"onBlink",value:function(e){this.blinkCallback=e}},{key:"onHeal",value:function(e){this.healCallback=e}},{key:"onExperience",value:function(e){this.experienceCallback=e}},{key:"onDeath",value:function(e){this.deathCallback=e}},{key:"onMusic",value:function(e){this.musicCallback=e}},{key:"onNPC",value:function(e){this.npcCallback=e}},{key:"onRespawn",value:function(e){this.respawnCallback=e}},{key:"onTrade",value:function(e){this.tradeCallback=e}},{key:"onEnchant",value:function(e){this.enchantCallback=e}},{key:"onGuild",value:function(e){this.guildCallback=e}},{key:"onPointer",value:function(e){this.pointerCallback=e}},{key:"onPVP",value:function(e){this.pvpCallback=e}},{key:"onPoison",value:function(e){this.poisonCallback=e}},{key:"onStore",value:function(e){this.storeCallback=e}},{key:"onMap",value:function(e){this.mapCallback=e}},{key:"onOverlay",value:function(e){this.overlayCallback=e}},{key:"onCamera",value:function(e){this.cameraCallback=e}},{key:"onBubble",value:function(e){this.bubbleCallback=e}},{key:"onSkill",value:function(e){this.skillCallback=e}},{key:"onUpdate",value:function(e){this.updateCallback=e}},{key:"onMinigame",value:function(e){this.minigameCallback=e}},{key:"onEffect",value:function(e){this.effectCallback=e}},{key:"onFriends",value:function(e){this.friendsCallback=e}},{key:"onRank",value:function(e){this.rankCallback=e}},{key:"onCrafting",value:function(e){this.craftingCallback=e}}]),e}(),Ta=function(){function e(t){v(this,e),p(this,"messages",void 0),p(this,"config",void 0),p(this,"connection",void 0),p(this,"listening",!1),this.game=t,this.config=t.app.config,this.messages=new Ea(t.app)}var t,i;return k(e,[{key:"getServer",value:(i=m(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.hub){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("".concat(this.config.hub,"/server"));case 5:return t=e.sent,e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return i.apply(this,arguments)})},{key:"connect",value:(t=m(f().mark((function e(t){var i,n,o,a,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=t,e.t1){e.next=5;break}return e.next=4,this.getServer();case 4:e.t1=e.sent;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}e.t0=this.config;case 8:i=e.t0,n=i.host,o=i.port,a=this.config.ssl?"wss://".concat(n):"ws://".concat(n,":").concat(o),this.connection=new WebSocket(a),this.connection.addEventListener("open",this.handleConnection.bind(this)),this.connection.addEventListener("message",(function(e){return r.receive(e.data)})),this.connection.addEventListener("error",(function(){return r.handleConnectionError(n,o)})),this.connection.addEventListener("close",(function(){return r.game.handleDisconnection()})),this.game.audio.createContext();case 18:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"receive",value:function(e){if(this.listening)if(e.startsWith("[")){var t=JSON.parse(e);t.length>1?this.messages.handleBulkData(t):this.messages.handleData(t.shift())}else this.messages.handleUTF8(e)}},{key:"send",value:function(e,t){var i;(null===(i=this.connection)||void 0===i?void 0:i.readyState)===WebSocket.OPEN&&this.connection.send(JSON.stringify([e,t]))}},{key:"handleConnection",value:function(){this.listening=!0,_.info("Connection established..."),this.game.app.updateLoader("Preparing handshake"),this.send(ze.Handshake,{gVer:this.config.version})}},{key:"handleConnectionError",value:function(e,t){_.info("Failed to connect to: ".concat(e)),this.listening=!1,this.game.app.toggleLogin(!1),this.game.app.sendError("Could not connect to the game server.")}}]),e}(),Ya=2.6,Ia=function(){function e(t,i,n){v(this,e),p(this,"border",We("#border")),p(this,"x",0),p(this,"y",0),p(this,"gridX",0),p(this,"gridY",0),p(this,"gridWidth",0),p(this,"gridHeight",0),p(this,"borderX",0),p(this,"borderY",0),p(this,"zoomFactor",3),p(this,"centered",!0),p(this,"lockX",!1),p(this,"lockY",!1),this.width=t,this.height=i,this.tileSize=n,this.update()}return k(e,[{key:"update",value:function(){var e=this.border.width(),t=this.border.height();this.gridWidth=Math.ceil(e/this.tileSize/this.zoomFactor),this.gridHeight=Math.ceil(t/this.tileSize/this.zoomFactor),this.clamp(),this.borderX=(this.width-this.gridWidth)*this.tileSize,this.borderY=(this.height-this.gridHeight)*this.tileSize}},{key:"clamp",value:function(){this.gridWidth>52&&(this.gridWidth=52),this.gridHeight>28&&(this.gridHeight=28)}},{key:"setGridPosition",value:function(e,t){this.gridX=e,this.gridY=t,this.x=e*this.tileSize,this.y=t*this.tileSize}},{key:"setZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.zoomFactor=e,isNaN(this.zoomFactor)&&(this.zoomFactor=3),this.zoomFactor>6&&(this.zoomFactor=6),this.zoomFactor<Ya&&(this.zoomFactor=Ya)}},{key:"clip",value:function(){this.setGridPosition(Math.round(this.x/this.tileSize),Math.round(this.y/this.tileSize))}},{key:"center",value:function(){this.centered=!0}},{key:"decenter",value:function(){this.centered=!1,this.clip()}},{key:"centreOn",value:function(e){var t=Math.floor(this.gridWidth/2),i=Math.floor(this.gridHeight/2),n=e.x-t*this.tileSize,o=e.y-i*this.tileSize;n>=0&&n<=this.borderX&&!this.lockX?(this.x=n,this.gridX=Math.round(e.x/this.tileSize)-t):this.offsetX(n),o>=0&&o<=this.borderY&&!this.lockY?(this.y=o,this.gridY=Math.round(e.y/this.tileSize)-i):this.offsetY(o)}},{key:"offsetX",value:function(e){e<=this.tileSize?(this.x=0,this.gridX=0):e>=this.borderX&&(this.x=this.borderX,this.gridX=Math.round(this.borderX/this.tileSize))}},{key:"offsetY",value:function(e){e<=this.tileSize?(this.y=0,this.gridY=0):e>=this.borderY&&(this.y=this.borderY,this.gridY=Math.round(this.borderY/this.tileSize))}},{key:"zone",value:function(e){switch(e){case ne.Up:this.setGridPosition(this.gridX,this.gridY-this.gridHeight+3);break;case ne.Down:this.setGridPosition(this.gridX,this.gridY+this.gridHeight-3);break;case ne.Right:this.setGridPosition(this.gridX+this.gridWidth-3,this.gridY);break;case ne.Left:this.setGridPosition(this.gridX-this.gridWidth+3,this.gridY)}this.zoneClip()}},{key:"zoneClip",value:function(){this.gridX<0&&this.setGridPosition(0,this.gridY),this.gridX>this.width&&this.setGridPosition(this.width,this.gridY),this.gridY<0&&this.setGridPosition(this.gridX,0),this.gridY>this.height&&this.setGridPosition(this.gridX,this.height)}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=parseFloat((this.zoomFactor+e).toFixed(1));this.setZoom(t)}},{key:"updateMinimumZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ya=e?2:2.6,this.zoom()}},{key:"isCentered",value:function(){return this.centered}},{key:"isVisible",value:function(e,t,i,n){return e>this.gridX-i&&e<this.gridX+this.gridWidth&&t>this.gridY-i&&t<this.gridY+this.gridHeight+n}},{key:"forEachVisiblePosition",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.gridY-t,n=i+this.gridHeight+2*t;i<n;i++)for(var o=this.gridX-t,a=o+this.gridWidth+2*t;o<a;o++)e(o,i)}}]),e}(),Xa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exit",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180;v(this,e),p(this,"redTeamScore",0),p(this,"blueTeamScore",0),p(this,"started",!1),this.type=t,this.status=i,this.countdown=n}return k(e,[{key:"reset",value:function(){this.type=-1,this.status="exit",this.started=!1}},{key:"setStatus",value:function(e){this.status=e}},{key:"setScore",value:function(e,t){this.redTeamScore=e,this.blueTeamScore=t}},{key:"exists",value:function(){return this.type>-1}}]),e}(),za=function(){function e(){v(this,e),p(this,"currentOverlay",""),p(this,"overlays",{fog:this.load("fog")})}return k(e,[{key:"load",value:function(e){var t=new Image,i="/img/overlays/".concat(e,".png");return t.crossOrigin="Anonymous",t.src=i,t.addEventListener("load",(function(){return _.debug("Loaded ".concat(e))})),t}},{key:"hasOverlay",value:function(){return""!==this.currentOverlay}},{key:"get",value:function(){return this.overlays[this.currentOverlay]}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.currentOverlay=e}}]),e}(),Aa=function(){function e(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};v(this,e),p(this,"id",""),p(this,"program",void 0),p(this,"attributes",{}),p(this,"uniforms",{}),this.id=t.canvas.id,this.program=this.compile(t,i,n,o);for(var a=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),r=0;r<a;r++){var s=t.getActiveAttrib(this.program,r);s&&(this.attributes[s.name]=t.getAttribLocation(this.program,s.name))}a=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(var l=0;l<a;l++){var c=t.getActiveUniform(this.program,l);if(c){var d=c.name.replace("[0]",""),h=t.getUniformLocation(this.program,d);h&&(this.uniforms[d]=h)}}}return k(e,[{key:"compile",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.compileShader(e,e.VERTEX_SHADER,t),a=this.compileShader(e,e.FRAGMENT_SHADER,i),r=e.createProgram();if(r){for(var s in e.attachShader(r,o),e.attachShader(r,a),n)e.bindAttribLocation(r,n[s],s);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?(e.deleteShader(o),e.deleteShader(a),r):(_.error("Could not link the WebGL program: ".concat(e.getProgramInfoLog(r))),e.deleteProgram(r),e.deleteShader(o),void e.deleteShader(a))}_.error("Could not create WebGL program.")}},{key:"compileShader",value:function(e,t,i){var n=e.createShader(t);if(n){if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;_.error("Failed to compile shader: ".concat(e.getShaderInfoLog(n)))}else _.error("Failed to create shader of type ".concat(t))}}]),e}(),La=function(){function e(t,i){v(this,e),p(this,"textures",[]),this.map=t,this.context=i;var n,o=w(this.map.tilesets);try{for(o.s();!(n=o.n()).done;){var a=n.value;this.createTexture(a)}}catch(zn){o.e(zn)}finally{o.f()}}return k(e,[{key:"createTexture",value:function(e){var t=this.context.createTexture();if(!t||!e)return _.error("Failed to create texture for tileset: ".concat(e.src));this.context.bindTexture(this.context.TEXTURE_2D,t),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,e),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,this.context.NEAREST),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.NEAREST),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,this.context.CLAMP_TO_EDGE),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE),this.textures.push(t),_.debug("Created texture for tileset: ".concat(e.src))}},{key:"forEachTexture",value:function(e){for(var t=0;t<this.textures.length;t++)e(this.textures[t],t)}}]),e}(),qa=function(){function e(t){v(this,e),p(this,"backgroundData",void 0),p(this,"foregroundData",void 0),p(this,"backgroundTexture",void 0),p(this,"foregroundTexture",void 0),this.map=t,this.backgroundData=new Uint8Array(this.map.width*this.map.height*4),this.foregroundData=new Uint8Array(this.map.width*this.map.height*4),this.backgroundData.fill(255),this.foregroundData.fill(255)}return k(e,[{key:"bindTexture",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.backgroundTexture||i||(this.backgroundTexture=e.createTexture()),!this.foregroundTexture&&i&&(this.foregroundTexture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,i?this.foregroundTexture:this.backgroundTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.useProgram(t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.map.width,this.map.height,0,e.RGBA,e.UNSIGNED_BYTE,i?this.foregroundData:this.backgroundData)}},{key:"clear",value:function(e){e*=4,this.backgroundData[e]=this.backgroundData[e+1]=this.backgroundData[e+2]=this.backgroundData[e+3]=255,this.foregroundData[e]=this.foregroundData[e+1]=this.foregroundData[e+2]=this.foregroundData[e+3]=255}},{key:"addTile",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=i?t.tileId:t,o=this.map.isHighTile(n)?this.foregroundData:this.backgroundData,a=4*e;if(n){var r=this.map.getTilesetFromId(n);if(r){var s=n-r.firstGid-1,l=r.width/this.map.tileSize;o[a]=s%l,o[a+1]=Math.floor(s/l),o[a+2]=r.index,o[a+3]=i?this.getFlippedFlag(t):0}}else o[a]=o[a+1]=o[a+2]=o[a+3]=255}},{key:"getFlippedFlag",value:function(e){return(e.h?-8:0)|(e.v?4:0)|(e.d?2:0)}}]),e}(),Da=function(){function e(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,e),p(this,"animationIndex",0),p(this,"lastTime",0),this.id=t,this.index=i,this.animationInfo=n,this.isFlipped=o}return k(e,[{key:"animate",value:function(e){e-this.lastTime>this.animationInfo[this.animationIndex].duration&&(this.id=this.animationInfo[this.animationIndex].tileId,this.lastTime=e,this.animationIndex>=Object.keys(this.animationInfo).length-1?this.animationIndex=0:this.animationIndex++)}}]),e}(),Pa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.x=t,this.y=i}return k(e,[{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"dot",value:function(e){return e.x*this.x+e.y*this.y}},{key:"sub",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"mul",value:function(t){return new e(this.x*t,this.y*t)}},{key:"inv",value:function(){return this.mul(-1)}},{key:"dist2",value:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)}},{key:"normalize",value:function(){var t=Math.sqrt(this.length2());return new e(this.x/t||0,this.y/t||0)}},{key:"length2",value:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}},{key:"inBound",value:function(e,t){return e.x<this.x&&this.x<t.x&&e.y<this.y&&this.y<t.y}}]),e}();function Ra(e,t,i){var n="illuminated-".concat(e),o=document.querySelector("#".concat(n));o||((o=document.createElement("canvas")).id=n,o.width=t,o.height=i,o.style.display="none",document.body.append(o));var a=o.getContext("2d");return a.clearRect(0,0,o.width,o.height),o.width=t,o.height=i,{canvas:o,ctx:a,w:t,h:i}}var Ma=function(){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.clearRect(0,0,1,1),t.fillStyle=e,t.fillRect(0,0,1,1);var n=u(t.getImageData(0,0,1,1).data,3),o=n[0],a=n[1],r=n[2];return"rgba(".concat([o,a,r,i],")")}}();!function(){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");function i(e){var t=e.toString(16);return 1===t.length&&"0".concat(t),t}}();var Na,Oa=function(e,t,i){if(!t.has(e))throw TypeError("Cannot "+i)},Ba=function(e,t,i){return Oa(e,t,"read from private field"),i?i.call(e):t.get(e)},Fa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),function(e,t,i){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,void 0)}(this,Na);var i=t.lights,n=t.color;this.lights=null!=i?i:[],this.color=null!=n?n:"rgba(0,0,0,0.9)"}return k(e,[{key:"compute",value:function(e,t){var i,n;Ba(this,Na)&&Ba(this,Na).w===e&&Ba(this,Na).h===t||(this,i=Na,n=Ra("dm",e,t),Oa(this,i,"write to private field"),i.set(this,n));var o,a=Ba(this,Na).ctx,r=w((a.save(),a.clearRect(0,0,e,t),a.fillStyle=this.color,a.fillRect(0,0,e,t),a.globalCompositeOperation="destination-out",this.lights));try{for(r.s();!(o=r.n()).done;){o.value.mask(a)}}catch(zn){r.e(zn)}finally{r.f()}a.restore()}},{key:"render",value:function(e){e.drawImage(Ba(this,Na).canvas,0,0)}},{key:"getCanvas",value:function(){return Ba(this,Na).canvas}}]),e}();Na=new WeakMap;var ja,Ha,Ua=Math.PI*(3-Math.sqrt(5)),Ga=function(e,t,i){if(!t.has(e))throw TypeError("Cannot "+i)},Wa=function(e,t,i){return Ga(e,t,"read from private field"),i?i.call(e):t.get(e)},Va=function(e,t,i){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},Za=function(e,t,i,n){return Ga(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i},Ka=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),Va(this,ja,void 0),Va(this,Ha,void 0);var i=t.position,n=t.distance,o=t.diffuse;this.position=null!=i?i:new Pa,this.distance=null!=n?n:100,this.diffuse=null!=o?o:.8}return k(e,[{key:"render",value:function(e){}},{key:"mask",value:function(e){var t=this.getVisibleMaskCache(),i=this.position,n=i.x,o=i.y;e.drawImage(t.canvas,Math.round(n-t.w/2),Math.round(o-t.h/2))}},{key:"bounds",value:function(){var e=this.position,t=this.distance,i=e.x,n=e.y;return{topLeft:new Pa(i-t,n-t),bottomRight:new Pa(i+t,n+t)}}},{key:"center",value:function(){var e=this.distance;return new Pa(e,e)}},{key:"forEachSample",value:function(e){e(this.position)}},{key:"getVisibleMaskCache",value:function(){var e=Math.floor(1.4*this.distance),t="".concat(e);if(Wa(this,ja)!==t){Za(this,ja,t),Za(this,Ha,Ra("vm".concat(this.id),2*e,2*e));var i=Wa(this,Ha),n=i.ctx,o=i.w,a=i.h,r=n.createRadialGradient(e,e,0,e,e,e);r.addColorStop(0,"rgba(0,0,0,1)"),r.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=r,n.fillRect(0,0,o,a)}return Wa(this,Ha)}},{key:"getHashCache",value:function(){return[this.distance,this.diffuse].toString()}}]),e}();ja=new WeakMap,Ha=new WeakMap;var $a,Qa,Ja,er=function(e,t,i){if(!t.has(e))throw TypeError("Cannot "+i)},tr=function(e,t,i){return er(e,t,"read from private field"),i?i.call(e):t.get(e)},ir=function(e,t,i){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},nr=function(e,t,i,n){return er(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i},or=function(e){a(i,e);var t=s(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,i),e=t.call(this,n),ir(c(e),$a,0),ir(c(e),Qa,void 0),ir(c(e),Ja,void 0);var o,a,r,s,l=n.id,d=n.color,h=n.radius,u=n.samples,p=n.angle,f=n.roughness;return e.id=null!=l?l:0,e.color=null!=d?d:"rgba(250,220,150,0.8)",e.radius=null!=h?h:0,e.samples=null!=u?u:1,e.angle=null!=p?p:0,e.roughness=null!=f?f:0,0===e.id&&(e.id=++(o=c(e),a=$a,{set _(e){nr(o,a,e,r)},get _(){return tr(o,a,s)}})._),e}return k(i,[{key:"getHashCache",value:function(){return[this.color,this.distance,this.diffuse,this.angle,this.roughness,this.samples,this.radius].toString()}},{key:"center",value:function(){var e=this.angle,t=this.roughness,i=this.distance;return new Pa((1-Math.cos(e)*t)*i,(1+Math.sin(e)*t)*i)}},{key:"bounds",value:function(){var e=this.angle,t=this.roughness,i=this.distance,n=this.position,o=new Pa(Math.cos(e),-Math.sin(e)).mul(t*i),a=o.x,r=o.y;return{topLeft:new Pa(n.x+a-i,n.y+r-i),bottomRight:new Pa(n.x+a+i,n.y+r+i)}}},{key:"mask",value:function(e){var t=this.angle,i=this.roughness,n=this.distance,o=this.position,a=this.getVisibleMaskCache(),r=a.canvas,s=a.w,l=a.h,c=new Pa(Math.cos(t),-Math.sin(t)).mul(i*n),d=c.x,h=c.y;e.drawImage(r,Math.round(o.x+d-s/2),Math.round(o.y+h-l/2))}},{key:"getGradientCache",value:function(e){var t=this.getHashCache();if(tr(this,Qa)===t)return tr(this,Ja);nr(this,Qa,t);var i=this.distance,n=this.id,o=this.radius,a=this.color,r=Math.round(i),s=2*r,l=Ra("gc".concat(n),s,s),c=l.ctx,d=l.w,h=l.h,u=c.createRadialGradient(e.x,e.y,0,r,r,r);return u.addColorStop(Math.min(1,o/i),a),u.addColorStop(1,Ma(a,0)),c.fillStyle=u,c.fillRect(0,0,d,h),nr(this,Ja,l),l}},{key:"render",value:function(e){var t=this.position,i=t.x,n=t.y,o=this.center(),a=this.getGradientCache(o).canvas;e.drawImage(a,Math.round(i-o.x),Math.round(n-o.y))}},{key:"forEachSample",value:function(e){for(var t=this.samples,i=this.radius,n=this.position,o=0,a=t;o<a;++o){var r=o*Ua,s=Math.sqrt(o/t)*i,l=new Pa(Math.cos(r)*s,Math.sin(r)*s);e(n.add(l))}}}]),i}(Ka);$a=new WeakMap,Qa=new WeakMap,Ja=new WeakMap;var ar,rr,sr=function(e,t,i){if(!t.has(e))throw TypeError("Cannot "+i)},lr=function(e,t,i){return sr(e,t,"read from private field"),i?i.call(e):t.get(e)},cr=function(e,t,i){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},dr=function(e,t,i,n){return sr(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i},hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),cr(this,ar,void 0),cr(this,rr,void 0);var i=t.light,n=t.objects;this.light=null!=i?i:new Ka,this.objects=null!=n?n:[]}return k(e,[{key:"createCache",value:function(e,t){dr(this,ar,Ra("lc",e,t)),dr(this,rr,Ra("lcc",e,t))}},{key:"compute",value:function(e,t){lr(this,ar)&&lr(this,ar).w===e&&lr(this,ar).h===t||this.createCache(e,t);var i=lr(this,ar).ctx;i.save(),i.clearRect(0,0,i.canvas.width,i.canvas.height),this.light.render(i),i.globalCompositeOperation="destination-out",this.cast(i),i.restore()}},{key:"cast",value:function(e){var t=lr(this,rr),i=t.ctx,n=t.w,o=t.h,a=t.canvas,r=this.light,s=r.samples;i.clearRect(0,0,n,o),i.fillStyle="rgba(0,0,0,".concat(Math.round(100/s)/100,")");var l,c=r.bounds(),d=c.topLeft,h=c.bottomRight,u=this.objects,p=w((r.forEachSample((function(e){for(var t=0,n=u.length;t<n;++t)if(u[t].contains(e))return void i.fillRect(d.x,d.y,h.x-d.x,h.y-d.y);var o,a=w(u);try{for(a.s();!(o=a.n()).done;){o.value.cast(i,e,c)}}catch(zn){a.e(zn)}finally{a.f()}})),u));try{for(p.s();!(l=p.n()).done;){var f=l.value,g=f.diffuse;g*=r.diffuse,i.fillStyle="rgba(0,0,0,".concat(1-g,")"),i.beginPath(),f.path(i),i.fill()}}catch(zn){p.e(zn)}finally{p.f()}e.drawImage(a,0,0)}},{key:"render",value:function(e){e.drawImage(lr(this,ar).canvas,0,0)}},{key:"getCanvas",value:function(){return lr(this,ar).canvas}}]),e}();ar=new WeakMap,rr=new WeakMap;var ur=function(){function e(t){var i,n,o=this;v(this,e),p(this,"background",document.querySelector("#background")),p(this,"foreground",document.querySelector("#foreground")),p(this,"overlay",document.querySelector("#overlay")),p(this,"textCanvas",document.querySelector("#text-canvas")),p(this,"entities",document.querySelector("#entities")),p(this,"cursor",document.querySelector("#cursor")),p(this,"canvases",[this.background,this.foreground,this.overlay,this.textCanvas,this.entities,this.cursor]),p(this,"entitiesContext",this.entities.getContext("2d")),p(this,"overlayContext",this.overlay.getContext("2d")),p(this,"textContext",this.textCanvas.getContext("2d")),p(this,"cursorContext",this.cursor.getContext("2d")),p(this,"allContexts",[this.entitiesContext,this.overlayContext,this.textContext,this.cursorContext]),p(this,"contexts",[this.entitiesContext,this.textContext,this.overlayContext]),p(this,"zoomIn",document.querySelector("#zoom-in")),p(this,"zoomOut",document.querySelector("#zoom-out")),p(this,"map",void 0),p(this,"camera",void 0),p(this,"tileSize",Be.tileSize),p(this,"actualTileSize",Be.tileSize),p(this,"screenWidth",0),p(this,"screenHeight",0),p(this,"canvasWidth",0),p(this,"canvasHeight",0),p(this,"animateTiles",!0),p(this,"animatedTiles",{}),p(this,"lightings",[]),p(this,"darkMask",new Fa({lights:[],color:"rgba(0, 0, 0, 0.84)"})),p(this,"debugging",!1),p(this,"stopRendering",!1),p(this,"forceRendering",!1),p(this,"drawNames",!0),p(this,"drawLevels",!0),p(this,"fontSize",10),p(this,"mobile",T()),p(this,"tablet",(i=E.includes("ipad"),n=E.includes("android"),(i||n)&&window.innerWidth>=640)),p(this,"time",Date.now()),p(this,"fps",0),p(this,"frameCount",0),p(this,"shadowSprite",void 0),p(this,"sparksSprite",void 0),p(this,"silverMedal",void 0),p(this,"goldMedal",void 0),p(this,"crownArtist",void 0),p(this,"crownTier1",void 0),p(this,"crownTier2",void 0),p(this,"crownTier3",void 0),p(this,"crownTier4",void 0),p(this,"crownTier5",void 0),p(this,"crownTier6",void 0),p(this,"crownTier7",void 0),this.game=t,this.map=t.map,this.camera=t.camera,this.tileSize=t.map.tileSize,this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.loadSizes(),this.loadStaticSprites(),this.zoomIn.addEventListener("click",(function(){return o.game.zoom(.2)})),this.zoomOut.addEventListener("click",(function(){return o.game.zoom(-.2)}))}return k(e,[{key:"load",value:function(){}},{key:"loadSizes",value:function(){var e=this;this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.screenWidth=this.camera.gridWidth*this.tileSize,this.screenHeight=this.camera.gridHeight*this.tileSize,this.canvasWidth=this.screenWidth*this.camera.zoomFactor,this.canvasHeight=this.screenHeight*this.camera.zoomFactor,this.darkMask.compute(this.canvasWidth,this.canvasHeight),this.forEachCanvas((function(t){t.width=e.canvasWidth,t.height=e.canvasHeight}))}},{key:"loadStaticSprites",value:function(){this.shadowSprite=this.game.sprites.get("shadow16"),this.shadowSprite.loaded||this.shadowSprite.load(),this.sparksSprite=this.game.sprites.get("sparks"),this.sparksSprite.loaded||this.sparksSprite.load(),this.silverMedal=this.game.sprites.get("silvermedal"),this.silverMedal.loaded||this.silverMedal.load(),this.goldMedal=this.game.sprites.get("goldmedal"),this.goldMedal.loaded||this.goldMedal.load(),this.crownArtist=this.game.sprites.get("crown-artist"),this.crownArtist.loaded||this.crownArtist.load(),this.crownTier1=this.game.sprites.get("crown-tier1"),this.crownTier1.loaded||this.crownTier1.load(),this.crownTier2=this.game.sprites.get("crown-tier2"),this.crownTier2.loaded||this.crownTier2.load(),this.crownTier3=this.game.sprites.get("crown-tier3"),this.crownTier3.loaded||this.crownTier3.load(),this.crownTier4=this.game.sprites.get("crown-tier4"),this.crownTier4.loaded||this.crownTier4.load(),this.crownTier5=this.game.sprites.get("crown-tier5"),this.crownTier5.loaded||this.crownTier5.load(),this.crownTier6=this.game.sprites.get("crown-tier6"),this.crownTier6.loaded||this.crownTier6.load(),this.crownTier7=this.game.sprites.get("crown-tier7"),this.crownTier7.loaded||this.crownTier7.load()}},{key:"resize",value:function(){this.mobile=T(),this.camera.update(),this.camera.updateMinimumZoom(this.mobile),this.loadSizes(),this.updateAnimatedTiles(),this.camera.centreOn(this.game.player),this.forceRendering=!0,this.clearScreen(this.cursorContext)}},{key:"render",value:function(){this.clear(),this.save(),this.removeSmoothing(),this.drawDebugging(),this.drawOverlays(),this.drawHoveringCell(),this.drawSelectedCell(),this.drawEntities(),this.drawInfos(),this.drawCursor(),this.drawMinigameGUI(),this.restore()}},{key:"drawDebugging",value:function(){this.debugging&&(this.drawFPS(),this.drawPathing(),this.mobile||(this.drawPosition(),this.drawCollisions()))}},{key:"drawOverlays",value:function(){var e=this;if(this.game.overlays.hasOverlay()){var t=this.game.overlays.get();t&&this.overlayContext.drawImage(t,0,0,this.canvasWidth,this.canvasHeight),this.overlayContext.globalCompositeOperation="lighter",this.forEachLighting((function(t){e.inRadius(t)&&e.drawLighting(t)})),this.overlayContext.globalCompositeOperation="source-over",this.darkMask.render(this.overlayContext)}}},{key:"drawHoveringCell",value:function(){if(!this.mobile){var e=this.game.input,t=e.getCoords();if(!this.isSelectedCell(t.gridX,t.gridY)){var i=this.map.isColliding(t.gridX,t.gridY);this.drawCellHighlight(t.gridX,t.gridY,i?"rgba(230, 0, 0, 0.7)":e.targetColour)}}}},{key:"drawSelectedCell",value:function(){if(this.game.input.selectedCellVisible&&!this.game.input.keyMovement){var e=this.game.input.getTargetData();e&&(this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.drawImage(e.sprite.image,e.x,e.y,e.width,e.height,e.dx,e.dy,e.dw,e.dh),this.entitiesContext.restore())}}},{key:"drawEntities",value:function(){var e=this;this.game.player.dead||(this.setCameraView(this.entitiesContext),this.forEachVisibleEntity((function(t){var i;null!==(i=t.sprite)&&void 0!==i&&i.loaded&&t.animation&&t.isVisible()&&e.drawEntity(t)})))}},{key:"drawInfos",value:function(){var e=this;this.game.info.isEmpty()||this.game.info.forEachInfo((function(t){e.textContext.save(),e.setCameraView(e.textContext),e.textContext.globalAlpha=t.opacity,e.drawText("".concat(t.getText()),Math.floor(t.x+8),Math.floor(t.y),!0,t.fill,t.stroke,26),e.textContext.restore()}))}},{key:"drawCursor",value:function(){if(!(this.tablet||this.mobile||this.game.input.isMouseRendered())){var e=this.game.input,t=e.cursor,i=e.mouse;t&&i&&(this.clearScreen(this.cursorContext),this.cursorContext.save(),t.loaded?this.cursorContext.drawImage(t.image,0,0,this.tileSize,this.tileSize,i.x,i.y,this.actualTileSize,this.actualTileSize):t.load(),this.cursorContext.restore(),this.game.input.saveMouse())}}},{key:"drawFPS",value:function(){this.calculateFPS(),this.drawText("FPS: ".concat(this.fps),10,61,!1,"white")}},{key:"calculateFPS",value:function(){var e=Date.now();e-this.time>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.time=e),this.frameCount++}},{key:"drawPosition",value:function(){var e=this.game,t=e.player,i=e.input;this.drawText("x: ".concat(t.gridX," y: ").concat(t.gridY," tileIndex: ").concat(this.map.coordToIndex(t.gridX,t.gridY)," movementSpeed: ").concat(t.movementSpeed),10,81,!1,"white"),this.drawText("zoomFactor: ".concat(this.camera.zoomFactor),10,141,!1,"white"),i.hovering&&i.entity&&(this.drawText("x: ".concat(i.entity.gridX," y: ").concat(i.entity.gridY," instance: ").concat(i.entity.instance),10,101,!1,"white"),i.entity.attackRange&&this.drawText("att range: ".concat(i.entity.attackRange),10,121,!1,"white"))}},{key:"drawCollisions",value:function(){var e=this;this.camera.forEachVisiblePosition((function(t,i){e.map.isOutOfBounds(t,i)||0!==e.map.grid[i][t]&&e.drawCellHighlight(t,i,"rgba(50, 50, 255, 0.5)")}))}},{key:"drawPathing",value:function(){if(this.game.player.hasPath()){var e,t=w(this.game.player.path);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.drawCellHighlight(i[0],i[1],"rgba(50, 255, 50, 0.5)")}}catch(zn){t.e(zn)}finally{t.f()}}}},{key:"drawEntity",value:function(e){var t,i=null===(t=e.animation)||void 0===t?void 0:t.frame,n=e.x*this.camera.zoomFactor,o=e.y*this.camera.zoomFactor,a=n+this.actualTileSize,r=o+e.sprite.height;this.entitiesContext.save(),e.angled&&!e.isProjectile()&&(e.angle*=Math.PI/180),e.fading&&(this.entitiesContext.globalAlpha=e.fadingAlpha),e.spriteFlipX?(this.entitiesContext.translate(a,o),this.entitiesContext.scale(-1,1)):e.spriteFlipY?(this.entitiesContext.translate(n,r),this.entitiesContext.scale(1,-1)):this.entitiesContext.translate(n,o),this.entitiesContext.scale(this.camera.zoomFactor,this.camera.zoomFactor),e.customScale&&this.entitiesContext.scale(e.customScale,e.customScale),e.angled&&this.entitiesContext.rotate(e.getAngle()),e.hasShadow()&&(this.entitiesContext.globalCompositeOperation="source-over",this.entitiesContext.drawImage(this.shadowSprite.image,0,0,this.shadowSprite.width,this.shadowSprite.height,0,e.shadowOffsetY,this.shadowSprite.width,this.shadowSprite.height)),this.entitiesContext.drawImage(e.sprite.image,i.x,i.y,e.sprite.width,e.sprite.height,e.sprite.offsetX,e.sprite.offsetY,e.sprite.width,e.sprite.height),this.drawEntityFore(e),this.entitiesContext.restore(),this.drawHealth(e),this.game.overlays.hasOverlay()||this.drawName(e)}},{key:"drawEntityFore",value:function(e){if(e.isItem())return this.drawSparks();e instanceof et&&(e.isPlayer()&&this.drawWeapon(e),e.hasActiveEffect()&&this.drawEffects(e))}},{key:"drawWeapon",value:function(e){if(e.hasWeapon()&&!e.dead&&!e.teleporting){var t=this.game.sprites.get(e.getWeaponSpriteName());if(t){t.loaded||t.load();var i=e.animation,n=t.animations[i.name];if(n){var o=i.frame,a=i.row,r=o.index<n.length?o.index:o.index%n.length,s=t.width*r,l=t.height*a,c=t.width,d=t.height;this.entitiesContext.drawImage(t.image,s,l,c,d,t.offsetX,t.offsetY,c,d)}}}}},{key:"drawEffects",value:function(e){var t,i=w(e.statusEffects);try{for(i.s();!(t=i.n()).done;){var n=t.value;if((n!==ge.Freezing||!e.hasEffect(ge.SnowPotion))&&(n!==ge.Burning||!e.hasEffect(ge.FirePotion))){var o=e.getEffect(n);if(o){var a=this.game.sprites.get(o.key);a.loaded||a.load();var r=o.animation,s=r.frame.index,l=a.width*s,c=a.height*r.row;this.entitiesContext.drawImage(a.image,l,c,a.width,a.height,a.offsetX,a.offsetY,a.width,a.height),r.update(this.game.time)}}}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"drawSparks",value:function(){var e=this.game.entities.sprites.sparksAnimation,t=e.frame;this.entitiesContext.drawImage(this.sparksSprite.image,this.sparksSprite.width*t.index,this.sparksSprite.height*e.row,this.sparksSprite.width,this.sparksSprite.height,0,0,this.sparksSprite.width,this.sparksSprite.height)}},{key:"drawMedal",value:function(e,t,i){var n=this.getMedal(e);n&&this.textContext.drawImage(n.image,0,0,n.width,n.height,(t-5)*this.camera.zoomFactor,(i-17)*this.camera.zoomFactor,2*n.width,2*n.height)}},{key:"drawHealth",value:function(e){if(e.hitPoints&&!(e.hitPoints<0)&&e.healthBarVisible){var t=this.tileSize,i=e.x*this.camera.zoomFactor-t/2+8,n=(e.y-e.sprite.height/4)*this.camera.zoomFactor,o=Math.round(e.hitPoints/e.maxHitPoints*t*this.camera.zoomFactor),a=2*this.camera.zoomFactor;this.textContext.save(),this.setCameraView(this.textContext),this.textContext.strokeStyle="rbga(0, 0, 0, 1)",this.textContext.lineWidth=1,this.textContext.strokeRect(i,n,t*this.camera.zoomFactor,a),this.textContext.fillStyle="rgba(253, 0, 0, 1)",this.textContext.fillRect(i,n,o,a),this.textContext.restore()}}},{key:"drawName",value:function(e){if(!e.hidden&&!e.healthBarVisible&&e.level&&e.drawNames()&&(this.drawNames||this.drawLevels)){var t=e.wanted?"red":"white";if(e.rank!==ve.None&&(t=be[e.rank]),e.instance===this.game.player.instance&&(t="rgba(252,218,92, 1)"),e.nameColour&&(t=e.nameColour),this.textContext.save(),this.setCameraView(this.textContext),this.textContext.font="11px AdvoCut",e.hasCounter)this.game.time-e.countdownTime>1e3&&(e.countdownTime=this.game.time,e.counter--),e.counter<=0&&(e.hasCounter=!1),this.drawText(e.counter.toString(),e.x+8,e.y-10,!0,t);else{var i=e.x+8,n=e.y-Math.floor(e.sprite.height/5);if(this.drawNames&&e instanceof et){var o=this.drawLevels&&!e.isNPC()?n-7:n-4;this.drawText(e.name,i,o,!0,t,"rbga(0, 0, 0, 1)"),e.hasMedal()&&this.drawMedal(e.getMedalKey(),i,o)}this.drawLevels&&(e.isMob()||e.isPlayer())&&this.drawText("Level ".concat(e.level),i,n,!0,t,"rbga(0, 0, 0, 1)"),e.isItem()&&e.count>1&&this.drawText(e.count.toString(),i,n,!0,t)}this.textContext.restore()}}},{key:"drawMinigameGUI",value:function(){if(this.game.minigame.exists())switch(this.game.minigame.status){case"lobby":return void this.drawText(this.game.minigame.started?"There is a game in progress: ".concat(this.game.minigame.countdown," seconds"):"Game starts in ".concat(this.game.minigame.countdown," seconds"),this.textCanvas.width/6,30,!0,"white");case"ingame":return this.drawText("Red: ".concat(this.game.minigame.redTeamScore),this.textCanvas.width/6-20,30,!0,"red"),this.drawText("Blue: ".concat(this.game.minigame.blueTeamScore),this.textCanvas.width/6+20,30,!0,"blue"),void this.drawText("Time left: ".concat(this.game.minigame.countdown," seconds"),this.textCanvas.width/6,50,!0,"white")}}},{key:"drawLighting",value:function(e){if(e.relative){var t=(e.light.origX-this.camera.x/this.tileSize)*this.actualTileSize,i=(e.light.origY-this.camera.y/this.tileSize)*this.actualTileSize;e.light.position=new Pa(t,i),e.compute(this.canvasWidth,this.canvasHeight),this.darkMask.compute(this.canvasWidth,this.canvasHeight)}else e.computed||(e.compute(this.canvasWidth,this.canvasHeight),e.computed=!0);e.render(this.overlayContext)}},{key:"drawCellHighlight",value:function(e,t,i){this.drawCellRect(e*this.actualTileSize,t*this.actualTileSize,i)}},{key:"drawCellRect",value:function(e,t,i){this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.lineWidth=2*this.camera.zoomFactor,this.entitiesContext.translate(e+4,t+2),this.entitiesContext.strokeStyle=i,this.entitiesContext.strokeRect(0,0,this.actualTileSize-8,this.actualTileSize-8),this.entitiesContext.restore()}},{key:"drawText",value:function(e,t,i,n,o,a){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.fontSize,s=3,l=this.textContext;l.save(),n&&(l.textAlign="center"),r+=2*this.camera.zoomFactor,l.strokeStyle=a||"rgba(55, 55, 55, 1)",l.lineWidth=s,l.font="".concat(r,"px AdvoCut"),l.strokeText(e,t*this.camera.zoomFactor,i*this.camera.zoomFactor),l.fillStyle=o||"white",l.fillText(e,t*this.camera.zoomFactor,i*this.camera.zoomFactor),l.restore()}},{key:"updateDarkMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(0, 0, 0, 0.5)";this.darkMask.color=e,this.darkMask.compute(this.canvasWidth,this.canvasHeight)}},{key:"addLight",value:function(e){var t=new or(this.getLightData(e.x,e.y,e.distance,e.diffuse,e.colour)),i=new hr({light:t});t.origX=t.position.x,t.origY=t.position.y,t.diff=Math.round(t.distance/this.tileSize),this.hasLighting(i)||(i.relative=!0,this.lightings.push(i),this.darkMask.lights.push(t),this.drawLighting(i),this.darkMask.compute(this.canvasWidth,this.canvasHeight))}},{key:"removeAllLights",value:function(){this.lightings=[],this.darkMask.lights=[],this.darkMask.compute(this.canvasWidth,this.canvasHeight)}},{key:"removeNonRelativeLights",value:function(){for(var e in this.lightings)if(!this.lightings[e].light.relative){var t=parseInt(e);this.lightings.splice(t,1),this.darkMask.lights.splice(t,1)}this.darkMask.compute(this.canvasWidth,this.canvasHeight)}},{key:"hasLighting",value:function(e){var t,i=w(this.lightings);try{for(i.s();!(t=i.n()).done;){var n=t.value.light;if(e.light.origX===n.origX&&e.light.origY===n.origY&&e.light.distance===n.distance)return!0}}catch(zn){i.e(zn)}finally{i.f()}return!1}},{key:"removeSmoothing",value:function(){this.forAllContexts((function(e){e.imageSmoothingQuality="low",e.imageSmoothingEnabled=!1}))}},{key:"clear",value:function(){this.forEachContext(this.clearScreen)}},{key:"clearScreen",value:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"save",value:function(){this.forEachContext((function(e){return e.save()}))}},{key:"restore",value:function(){this.forEachContext((function(e){return e.restore()}))}},{key:"setBrightness",value:function(e){e<0||e>100||this.forEachCanvas((function(t){t.style.background="rgba(0,0,0,".concat(.25-e/200,")")}))}},{key:"setCameraView",value:function(e){this.camera&&!this.stopRendering&&e.translate(-this.camera.x*this.camera.zoomFactor,-this.camera.y*this.camera.zoomFactor)}},{key:"getX",value:function(e,t){return 0===e?0:e%t==0?t-1:e%t-1}},{key:"inRadius",value:function(e){var t=e.light.origX,i=e.light.origY,n=e.light.diff;return t>this.camera.gridX-n&&t<this.camera.gridX+this.camera.gridWidth+n&&i>this.camera.gridY-n&&i<this.camera.gridY+this.camera.gridHeight+n}},{key:"isFlipped",value:function(e){return!!e&&(e.v||e.h||e.d)}},{key:"isLowPowerMode",value:function(){return!this.camera.isCentered()&&!this.animateTiles}},{key:"isSelectedCell",value:function(e,t){return this.game.input.selectedX===e&&this.game.input.selectedY===t}},{key:"getMedal",value:function(e){switch(e){case"goldmedal":return this.goldMedal;case"silvermedal":return this.silverMedal;case"crown-artist":return this.crownArtist;case"crown-tier1":return this.crownTier1;case"crown-tier2":return this.crownTier2;case"crown-tier3":return this.crownTier3;case"crown-tier4":return this.crownTier4;case"crown-tier5":return this.crownTier5;case"crown-tier6":return this.crownTier6;case"crown-tier7":return this.crownTier7}}},{key:"getLightData",value:function(e,t,i,n,o){return{position:new Pa(e,t),distance:i,diffuse:n,color:o,radius:0,samples:2,roughness:0,angle:0}}},{key:"resetAnimatedTiles",value:function(){for(var e in this.animatedTiles)this.animatedTiles[e].animationIndex=0}},{key:"updateAnimatedTiles",value:function(){var e=this;this.animateTiles&&this.forEachVisibleTile((function(t,i){var n=e.isFlipped(t);n&&(t=t.tileId),e.map.isAnimatedTile(t)&&(i in e.animatedTiles||(e.animatedTiles[i]=new Da(t,i,e.map.getTileAnimation(t),n)))}),2)}},{key:"setTile",value:function(e,t){}},{key:"bindTileLayers",value:function(){}},{key:"forEachAnimatedTile",value:function(e){for(var t in this.animatedTiles)e(this.animatedTiles[t])}},{key:"forEachVisibleIndex",value:function(e,t){var i=this;this.camera.forEachVisiblePosition((function(t,n){i.map.isOutOfBounds(t,n)||e(i.map.coordToIndex(t,n))}),t)}},{key:"forEachVisibleTile",value:function(e,t){var i,n=this;null!==(i=this.map)&&void 0!==i&&i.mapLoaded&&this.forEachVisibleIndex((function(t){var i=n.map.data[t];if(Array.isArray(i)){var o,a=w(i);try{for(a.s();!(o=a.n()).done;){var r=o.value;e(r,t)}}catch(zn){a.e(zn)}finally{a.f()}}else n.map.data[t]&&e(n.map.data[t],t)}),t)}},{key:"forEachVisibleEntity",value:function(e){var t=this,i=this.game.entities.grids;this.camera.forEachVisiblePosition((function(n,o){if(!t.map.isOutOfBounds(n,o)&&i.renderingGrid[o][n])for(var a=0,r=Object.values(i.renderingGrid[o][n]);a<r.length;a++){var s=r[a];e(s)}}))}},{key:"forEachLighting",value:function(e){for(var t in this.lightings)e(this.lightings[t])}},{key:"forEachCanvas",value:function(e){for(var t in this.canvases)e(this.canvases[t])}},{key:"forAllContexts",value:function(e){for(var t in this.allContexts)e(this.allContexts[t])}},{key:"forEachContext",value:function(e){for(var t in this.contexts)e(this.contexts[t])}}]),e}(),pr="precision highp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexture;\n\nuniform float uInverseTileScale;\n\nuniform vec2 uOffset;\nuniform vec2 uViewportSize;\nuniform vec2 uInverseLayerTileCount;\nuniform vec2 uInverseLayerTileSize;\n\nvarying vec2 vPixelCoord;\nvarying vec2 vTextureCoord;\n\nvoid main()\n{\n    \n    \n    vec2 offset = uOffset + (uInverseTileScale / 2.0);\n    offset -= mod(offset, uInverseTileScale);\n\n    vPixelCoord = (aTexture * uViewportSize) + offset;\n    vTextureCoord = vPixelCoord * uInverseLayerTileCount * uInverseLayerTileSize;\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n}",fr=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,e)),"backContext",n.background.getContext("webgl")),p(c(n),"foreContext",n.foreground.getContext("webgl")),p(c(n),"drawingContexts",[n.backContext,n.foreContext]),p(c(n),"backShader",void 0),p(c(n),"foreShader",void 0),p(c(n),"tilesets",{}),p(c(n),"layers",[]),p(c(n),"tilesetIndices",new Int32Array),p(c(n),"tilesetTileSizeBuffer",new Float32Array),p(c(n),"tilesetOffsetBuffer",new Float32Array),p(c(n),"inverseTilesetTextureSizeBuffer",new Float32Array),p(c(n),"inverseTileCount",new Float32Array(2)),p(c(n),"backQuadBuffer",n.backContext.createBuffer()),p(c(n),"foreQuadBuffer",n.foreContext.createBuffer()),p(c(n),"quadVertices",new Float32Array([-1,-1,0,1,1,-1,1,1,1,1,1,0,-1,-1,0,1,1,1,1,0,-1,1,0,0])),p(c(n),"attributeIndices",{aPosition:0,aTexture:1}),p(c(n),"blendMode",{func:[WebGLRenderingContext.SRC_ALPHA,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA],equation:WebGLRenderingContext.FUNC_ADD}),n}return k(i,[{key:"load",value:function(){var e=this,t=this.map.tilesets.length;this.backShader=new Aa(this.backContext,pr,this.getFragmentShader(t)),this.foreShader=new Aa(this.foreContext,pr,this.getFragmentShader(t)),this.tilesetIndices=new Int32Array(t),this.tilesetTileSizeBuffer=new Float32Array(2*t),this.tilesetOffsetBuffer=new Float32Array(2*t),this.inverseTilesetTextureSizeBuffer=new Float32Array(2*t);for(var i=0;i<t;i++)this.tilesetIndices[i]=i+1,this.tilesetTileSizeBuffer[2*i]=this.map.tileSize,this.tilesetTileSizeBuffer[2*i+1]=this.map.tileSize,this.tilesetOffsetBuffer[2*i]=0,this.tilesetOffsetBuffer[2*i+1]=0,this.inverseTilesetTextureSizeBuffer[2*i]=1/this.map.tilesets[i].width,this.inverseTilesetTextureSizeBuffer[2*i+1]=1/this.map.tilesets[i].height;this.inverseTileCount[0]=1/this.map.width,this.inverseTileCount[1]=1/this.map.height,this.forEachDrawingContext((function(t){e.tilesets[t.canvas.id]=new La(e.map,t),e.bindBuffer(t),e.bindTexture(t),e.bindTileShaders(t)}))}},{key:"setTile",value:function(e,t){if(this.clearTile(e),!Array.isArray(t))return this.addTile(e,t);for(var i in t)this.addTile(e,t[i],parseInt(i))}},{key:"bindBuffer",value:function(e){e.bindBuffer(e.ARRAY_BUFFER,this.getQuadBuffer(e)),e.bufferData(e.ARRAY_BUFFER,this.quadVertices,e.STATIC_DRAW)}},{key:"bindTexture",value:function(e){var t,i=w(this.layers);try{for(i.s();!(t=i.n()).done;){t.value.bindTexture(e,this.getShader(e).program,!this.isBackgroundContext(e))}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"bindTileShaders",value:function(e){var t=this.getShader(e);e.useProgram(t.program);var i=new Float32Array([1/this.map.tileSize,1/this.map.tileSize]);e.uniform1i(t.uniforms.uLayer,0),e.uniform2fv(t.uniforms.uInverseLayerTileSize,i);for(var n=0;n<this.tilesetIndices.length;n++)e.uniform1i(e.getUniformLocation(t.program,"uTilesets[".concat(n,"]")),this.tilesetIndices[n]);e.uniform2fv(t.uniforms.uTilesetTileSize,this.tilesetTileSizeBuffer),e.uniform2fv(t.uniforms.uTilesetTileOffset,this.tilesetOffsetBuffer),e.uniform2fv(t.uniforms.uInverseTilesetTextureSize,this.inverseTilesetTextureSizeBuffer)}},{key:"bindTileLayers",value:function(){var e=this;this.forEachDrawingContext((function(t){return e.bindTexture(t)}))}},{key:"resize",value:function(){var e=this;n(d(i.prototype),"resize",this).call(this),this.forEachDrawingContext((function(t){var i=new Float32Array([e.screenWidth,e.screenHeight]),n=e.getShader(t);t.viewport(0,0,t.canvas.width,t.canvas.height),t.uniform2fv(n.uniforms.uViewportSize,i),t.uniform1f(n.uniforms.uInverseTileScale,1/e.camera.zoomFactor)}))}},{key:"render",value:function(){this.draw(),n(d(i.prototype),"render",this).call(this)}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.camera.x,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.camera.y;this.forEachDrawingContext((function(n){n.enable(n.BLEND),n.blendEquation(e.blendMode.equation),n.blendFunc(e.blendMode.func[0],e.blendMode.func[1]),n.bindBuffer(n.ARRAY_BUFFER,e.getQuadBuffer(n)),n.enableVertexAttribArray(e.attributeIndices.aPosition),n.enableVertexAttribArray(e.attributeIndices.aTexture),n.vertexAttribPointer(e.attributeIndices.aPosition,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(e.attributeIndices.aTexture,2,n.FLOAT,!1,16,8),e.tilesets[n.canvas.id].forEachTexture((function(e,t){n.activeTexture(n.TEXTURE1+t),n.bindTexture(n.TEXTURE_2D,e)})),n.activeTexture(n.TEXTURE0);var o=e.getShader(n);n.useProgram(o.program),n.uniform1f(o.uniforms.uAlpha,1),n.uniform1i(o.uniforms.uRepeatTiles,1),n.uniform2fv(o.uniforms.uInverseLayerTileCount,e.inverseTileCount),n.uniform2f(o.uniforms.uOffset,t,i);var a,r=w(e.layers);try{for(r.s();!(a=r.n()).done;){var s=a.value;n.bindTexture(n.TEXTURE_2D,e.isBackgroundContext(n)?s.backgroundTexture:s.foregroundTexture),n.drawArrays(n.TRIANGLES,0,6)}}catch(zn){r.e(zn)}finally{r.f()}}))}},{key:"addTile",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.layers[i]||(this.layers[i]=new qa(this.map)),this.layers[i].addTile(e,t,this.isFlipped(t))}},{key:"clearTile",value:function(e){var t,i=w(this.layers);try{for(i.s();!(t=i.n()).done;){t.value.clear(e)}}catch(zn){i.e(zn)}finally{i.f()}}},{key:"isBackgroundContext",value:function(e){return"background"===e.canvas.id}},{key:"getShader",value:function(e){return this.isBackgroundContext(e)?this.backShader:this.foreShader}},{key:"getQuadBuffer",value:function(e){return this.isBackgroundContext(e)?this.backQuadBuffer:this.foreQuadBuffer}},{key:"getFragmentShader",value:function(e){return"precision mediump float;\n\nconst int uTilesetCount = TILESET_COUNT;\n\nvarying vec2 vPixelCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uLayer;\n\nuniform sampler2D uTilesets0;\nuniform sampler2D uTilesets1;\nuniform sampler2D uTilesets2;\nuniform sampler2D uTilesets3;\nuniform sampler2D uTilesets4;\nuniform sampler2D uTilesets5;\nuniform sampler2D uTilesets[uTilesetCount];\n\nuniform vec2 uTilesetTileSize[uTilesetCount];\nuniform vec2 uTilesetTileOffset[uTilesetCount];\nuniform vec2 uInverseTilesetTextureSize[uTilesetCount];\nuniform float uAlpha;\nuniform int uRepeatTiles;\n\nconst float Flag_FlippedAntiDiagonal = 2.0;\nconst float Flag_FlippedVertical = 4.0;\nconst float Flag_FlippedHorizontal = 8.0;\nconst vec4 c_one4 = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat hasFlag(float value, float flag)\n{\n    float byteVal = 1.0;\n\n    \n    if (value == 0.0)\n        return 0.0;\n\n    \n    for (int i = 0; i < 4; ++i)\n    {\n        if (mod(value, 2.0) > 0.0 && mod(flag, 2.0) > 0.0)\n            return 1.0;\n\n        value = floor(value / 2.0);\n        flag = floor(flag / 2.0);\n\n        if (!(value > 0.0 && flag > 0.0))\n            return 0.0;\n    }\n\n    return 0.0;\n}\n\nvec2 getTilesetTileSize(int index)\n{\n    for (int i = 0; i < uTilesetCount; ++i)\n        if (i == index)\n            return uTilesetTileSize[i];\n\n    return vec2(0.0, 0.0);\n}\n\nvec2 getTilesetTileOffset(int index)\n{\n    for (int i = 0; i < uTilesetCount; ++i)\n        if (i == index)\n            return uTilesetTileOffset[i];\n\n    return vec2(0.0, 0.0);\n}\n\nvec4 getColor(int index, vec2 coord) {\n    for (int i = 0; i < uTilesetCount; ++i)\n        if (i == index)\n            return texture2D(uTilesets[i], coord * uInverseTilesetTextureSize[i]);\n\n    return vec4(0.0, 0.0, 0.0, 0.0);\n}\n\nvoid main()\n{\n    if (uRepeatTiles == 0 && (vTextureCoord.x < 0.0 || vTextureCoord.x > 1.0 || vTextureCoord.y < 0.0 || vTextureCoord.y > 1.0))\n        discard;\n\n    vec4 tile = texture2D(uLayer, vTextureCoord);\n\n    if (tile == c_one4)\n        discard;\n\n    float flipFlags = floor(tile.w * 255.0);\n\n    \n    \n    \n    \n\n    int imgIndex = int(floor(tile.z * 255.0));\n    vec2 tileSize = getTilesetTileSize(imgIndex);\n    vec2 tileOffset = getTilesetTileOffset(imgIndex);\n\n    vec2 flipVec = vec2(hasFlag(flipFlags, Flag_FlippedHorizontal), hasFlag(flipFlags, Flag_FlippedVertical));\n\n    vec2 tileCoord = floor(tile.xy * 255.0);\n\n    \n    tileCoord.x = (tileCoord.x * tileSize.x) + (tileCoord.x * tileOffset.x) + tileOffset.y;\n    tileCoord.y = (tileCoord.y * tileSize.y) + (tileCoord.y * tileOffset.x) + tileOffset.y;\n\n    vec2 offsetInTile = mod(vPixelCoord, tileSize);\n    vec2 offsetInTileFlipped = abs((tileSize * flipVec) - offsetInTile);\n\n    \n    if (hasFlag(flipFlags, Flag_FlippedAntiDiagonal) == 1.0)\n    {\n        float x = offsetInTileFlipped.x;\n        offsetInTileFlipped.x = offsetInTileFlipped.y;\n        offsetInTileFlipped.y = x;\n    }\n\n    vec4 color = getColor(imgIndex, tileCoord + offsetInTileFlipped);\n\n    gl_FragColor = vec4(color.rgb, color.a * uAlpha);\n}".replace("TILESET_COUNT",e.toString())}},{key:"forEachDrawingContext",value:function(e){for(var t in this.drawingContexts)e(this.drawingContexts[t])}}]),i}(ur),gr=function(e){a(i,e);var t=s(i);function i(e){var n;return v(this,i),p(c(n=t.call(this,e)),"renderedFrame",[-1,-1]),p(c(n),"tiles",{}),p(c(n),"cells",{}),p(c(n),"backContext",n.background.getContext("2d")),p(c(n),"foreContext",n.foreground.getContext("2d")),p(c(n),"drawingContexts",[n.backContext,n.foreContext]),n.allContexts.push(n.backContext,n.foreContext),n}return k(i,[{key:"resize",value:function(){n(d(i.prototype),"resize",this).call(this),this.cells={}}},{key:"render",value:function(){this.stopRendering||(n(d(i.prototype),"render",this).call(this),this.draw())}},{key:"draw",value:function(){var e=this;this.hasRenderedFrame()||(this.clearDrawing(),this.saveDrawing(),this.backContext.fillStyle="rgba(9, 10, 20, 1)",this.backContext.fillRect(0,0,this.background.width,this.background.height),this.updateDrawingView(),this.forEachVisibleTile((function(t,i){var n=e.getFlipped(t);n.length>0&&(t=t.tileId);var o=e.map.isHighTile(t)?e.foreContext:e.backContext;e.game.overlays.hasOverlay()&&(o=e.map.isLightTile(t)?e.overlayContext:o);if(i in e.animatedTiles&&e.animateTiles){if(e.animatedTiles[i].animate(e.game.time),0===n.length&&e.animatedTiles[i].isFlipped)return;e.drawTile(o,e.animatedTiles[i].id,e.animatedTiles[i].index,n)}e.map.isAnimatedTile(t)&&e.animateTiles||e.drawTile(o,t-1,i,n)})),this.saveFrame(),this.restoreDrawing())}},{key:"drawTile",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!(t<0)){var o=this.map.getTilesetFromId(t);if(o){if(!(t in this.tiles)){var a=o.width/this.tileSize,r=t-o.firstGid;this.tiles[t]={relativeTileId:r,setWidth:a,x:this.getX(r+1,a)*this.tileSize,y:Math.floor(r/a)*this.tileSize,width:this.tileSize,height:this.tileSize}}(!(i in this.cells)||n.length>0)&&(this.cells[i]={dx:this.getX(i+1,this.map.width)*this.actualTileSize,dy:Math.floor(i/this.map.width)*this.actualTileSize,width:this.actualTileSize,height:this.actualTileSize}),this.drawImage(e,o,this.tiles[t],this.cells[i],n)}}}},{key:"drawImage",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=0,r=0,s=o.length>0;if(s){a=n.dx,r=n.dy,e.save();for(var l=a,c=0;c<o.length;c++)switch(o[c]){case 0:a=-a-n.width,e.scale(-1,1);break;case 1:r=-r-n.height,e.scale(1,-1);break;case 2:e.rotate(Math.PI/2),e.translate(0,-n.height),a=r,r=-l,0===o[c+1]?o.push(0):o.push(1)}}e.drawImage(t,i.x,i.y,i.width,i.height,a||n.dx,r||n.dy,n.width,n.height),s&&e.restore()}},{key:"hasRenderedFrame",value:function(){return!(this.forceRendering||!this.isLowPowerMode())&&(!!this.stopRendering||this.renderedFrame[0]===this.camera.x&&this.renderedFrame[1]===this.camera.y)}},{key:"clearDrawing",value:function(){this.forEachDrawingContext(this.clearScreen)}},{key:"saveDrawing",value:function(){this.forEachDrawingContext((function(e){return e.save()}))}},{key:"saveFrame",value:function(){this.isLowPowerMode()&&(this.renderedFrame[0]=this.camera.x,this.renderedFrame[1]=this.camera.y,this.forceRendering=!1)}},{key:"restoreDrawing",value:function(){this.forEachDrawingContext((function(e){return e.restore()}))}},{key:"updateDrawingView",value:function(){var e=this;this.forEachDrawingContext((function(t){return e.setCameraView(t)}))}},{key:"getFlipped",value:function(e){var t=[];return this.isFlipped(e)?(e.v&&t.push(1),e.d&&t.push(2),e.h&&t.push(0),t):t}},{key:"forEachDrawingContext",value:function(e){for(var t in this.drawingContexts)e(this.drawingContexts[t])}}]),i}(ur),mr=function(){function e(t){v(this,e),p(this,"tileSize",void 0),p(this,"sprites",void 0),this.game=t,this.tileSize=t.map.tileSize,this.sprites=t.sprites}return k(e,[{key:"update",value:function(){this.game.player.dead||(this.updateEntities(),this.updateKeyboard(),this.updateAnimations(),this.updateInfos(),this.updateBubbles(),this.updateSounds())}},{key:"updateEntities",value:function(){var e=this;this.game.entities.forEachEntity((function(t){var i,n;if(null!==(i=t.sprite)&&void 0!==i&&i.loaded){if(e.updateFading(t),null===(n=t.animation)||void 0===n||n.update(e.game.time),t instanceof kt){var o=t.speed*t.getTimeDiff(),a=t.target.x-t.x,r=t.target.y-t.y,s=Math.sqrt(a*a+r*r),l=o/s;return t.updateAngle(),l>1&&(l=1),t.x+=a*l,t.y+=r*l,s<5&&t.impact(),void(t.lastUpdate=e.game.time)}if(t instanceof et){if(t.movement.inProgress)return t.movement.step(e.game.time);if(t.hasPath()){var c,d,h=t.orientation===ne.Left||t.orientation===ne.Right,u=t.orientation===ne.Up||t.orientation===ne.Down;h&&(c=t.orientation===ne.Left),u&&(d=t.orientation===ne.Up),t.movement.start(e.game.time,h?t.x+(c?-1:1):t.y+(d?-1:1),h?t.x+(c?-e.tileSize:e.tileSize):t.y+(d?-e.tileSize:e.tileSize),t.movementSpeed,(function(e){h&&(t.x=e),u&&(t.y=e),t.moved()}),(function(){h&&(t.x=t.movement.endValue),u&&(t.y=t.movement.endValue),t.moved(),t.nextStep()}))}}}}))}},{key:"updateFading",value:function(e){if(e.fading){var t=this.game.time-e.fadingTime;t>e.fadingDuration?(e.fading=!1,e.fadingAlpha=1):e.fadingAlpha=t/e.fadingDuration}}},{key:"updateKeyboard",value:function(){var e=this.game,t=e.player,i=e.input,n={x:-1,y:-1,gridX:t.gridX,gridY:t.gridY};t.moving||t.teleporting||t.frozen||!t.hasKeyboardMovement()||(t.moveUp?n.gridY--:t.moveDown?n.gridY++:t.moveRight?n.gridX++:t.moveLeft&&n.gridX--,i.keyMove(n))}},{key:"updateAnimations",value:function(){var e=this.game.input.targetAnimation;if(e&&this.game.input.selectedCellVisible&&e.update(this.game.time),this.sprites){var t=this.sprites.sparksAnimation;null==t||t.update(this.game.time)}}},{key:"updateInfos",value:function(){this.game.info.update(this.game.time)}},{key:"updateBubbles",value:function(){var e,t;null===(e=this.game.bubble)||void 0===e||e.update(this.game.time),null===(t=this.game.pointer)||void 0===t||t.update()}},{key:"updateSounds",value:function(){this.game.audio.updatePlayerListener()}}]),e}();
/**
             * A* (A-Star) algorithm for a path finder
             * @author  Andrea Giammarchi
             * @license Mit Style License
             */
function vr(e,t,i,n){var o,a,r,s,l=e[0].length,c=e.length,d=l*c,h=Math.max,p={},f=[],g=[{x:t[0],y:t[1],f:0,g:0,v:t[0]+t[1]*l}],m=1,v={x:i[0],y:i[1],v:i[0]+i[1]*l};switch(n){case"Diagonal":case"Euclidean":a=br;case"DiagonalFree":o=yr;break;case"EuclideanFree":h=Math.sqrt,o=_r;break;default:o=Sr,a=xr}a||(a=kr);do{if(m>100)return[];for(var b=d,k=0,x=0;x<m;++x){var w=g[x].f;w<b&&(b=w,k=x)}if((r=u(g.splice(k,1),1)[0]).v===v.v){var y=m=0;do{f[y++]=[r.x,r.y]}while(r=r.p);f.reverse()}else{--m;for(var _=0,S=(s=wr(a,r.x,r.y,e,c,l)).length;_<S;++_){var C=s[_];C.p=r,C.f=C.g=0,C.v=C.x+C.y*l,C.v in p||(C.f=(C.g=r.g+o(C,r,Math.abs,h))+o(C,v,Math.abs,h),g[m++]=C,p[C.v]=1)}}}while(m);return f}var br=function(e,t,i,n,o,a,r,s,l,c,d,h,u){return e&&(i&&!l[o][r]&&(h[u++]={x:r,y:o}),n&&!l[o][s]&&(h[u++]={x:s,y:o})),t&&(i&&!l[a][r]&&(h[u++]={x:r,y:a}),n&&!l[a][s]&&(h[u++]={x:s,y:a})),h},kr=function(e,t,i,n,o,a,r,s,l,c,d,h,u){return e=o>-1,t=a<c,n=s>-1,r<d&&(e&&!l[o][r]&&(h[u++]={x:r,y:o}),t&&!l[a][r]&&(h[u++]={x:r,y:a})),n&&(e&&!l[o][s]&&(h[u++]={x:s,y:o}),t&&!l[a][s]&&(h[u++]={x:s,y:a})),h},xr=function(e,t,i,n,o,a,r,s,l,c,d,h){return h};function wr(e,t,i,n,o,a){var r=i-1,s=i+1,l=t+1,c=t-1,d=r>-1&&!n[r][t],h=s<o&&!n[s][t],u=l<a&&!n[i][l],p=c>-1&&!n[i][c],f=[],g=0;return d&&(f[g++]={x:t,y:r}),u&&(f[g++]={x:l,y:i}),h&&(f[g++]={x:t,y:s}),p&&(f[g++]={x:c,y:i}),e(d,h,u,p,r,s,l,c,n,o,a,f,g)}var yr=function(e,t,i,n){return n(i(e.x-t.x),i(e.y-t.y))},_r=function(e,t,i,n){var o=e.x-t.x,a=e.y-t.y;return n(o*o+a*a)},Sr=function(e,t,i){return i(e.x-t.x)+i(e.y-t.y)},Cr=function(){function e(){v(this,e),p(this,"mode","DEFAULT")}return k(e,[{key:"find",value:function(e,t,i,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.handleIgnore(e,a,!0);var r=vr(e,[t,i],[n,o],this.mode);return this.handleIgnore(e,a),r}},{key:"handleIgnore",value:function(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=w(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.x<0||a.y<0||(a.fake||(0===e[a.y][a.x]&&(a.fake=!0),e[a.y][a.x]=n?0:1))}}catch(zn){o.e(zn)}finally{o.f()}}}]),e}(),Er=function(){function e(t){v(this,e),p(this,"player",void 0),p(this,"storage",void 0),p(this,"map",void 0),p(this,"camera",void 0),p(this,"zoning",new ni),p(this,"overlays",new za),p(this,"pathfinder",new Cr),p(this,"info",new _t),p(this,"sprites",void 0),p(this,"minigame",new Xa),p(this,"renderer",void 0),p(this,"input",void 0),p(this,"socket",void 0),p(this,"pointer",void 0),p(this,"updater",void 0),p(this,"audio",void 0),p(this,"entities",void 0),p(this,"bubble",void 0),p(this,"menu",void 0),p(this,"connection",void 0),p(this,"time",Date.now()),p(this,"lastTime",Date.now()),p(this,"started",!1),p(this,"ready",!1),p(this,"pvp",!1),p(this,"useWebGl",!1),this.app=t,this.storage=t.storage,this.player=new mt("",this),this.map=new hi(this),this.camera=new Ia(this.map.width,this.map.height,this.map.tileSize),this.sprites=new ii,this.renderer=this.useWebGl?new fr(this):new gr(this),this.menu=new Qt(this),this.input=new Et(this),this.socket=new Ta(this),this.pointer=new ei(this),this.updater=new mr(this),this.audio=new He(this),this.entities=new wt(this),this.bubble=new Ke(this),this.connection=new Ca(this),t.sendStatus("Loading game"),this.map.onReady((function(){return t.ready()})),t.onLogin(this.socket.connect.bind(this.socket)),t.onResize(this.resize.bind(this)),t.onRespawn(this.respawn.bind(this)),this.player.onSync(this.handlePlayerSync.bind(this))}return k(e,[{key:"start",value:function(){this.started||(this.started=!0,this.tick())}},{key:"tick",value:function(){var e=this;this.time=Date.now(),this.renderer.render(),this.updater.update(),this.started&&requestAnimationFrame((function(){return e.tick()}))}},{key:"handleDisconnection",value:function(){this.app.isMenuHidden()&&location.reload()}},{key:"handlePlayerSync",value:function(){this.menu.synchronize(),this.player.setSprite(this.sprites.get(this.player.getSpriteName()))}},{key:"postLoad",value:function(){this.entities.addEntity(this.player),this.player.setSprite(this.sprites.get(this.player.getSpriteName())),this.player.idle(),this.storage&&(this.player.setOrientation(this.storage.data.player.orientation),this.camera.setZoom(this.storage.data.player.zoom),this.renderer.resize()),this.camera.centreOn(this.player),this.player.handler=new oi(this.player),this.renderer.updateAnimatedTiles(),this.socket.send(ze.Ready,{regionsLoaded:this.map.regionsLoaded,userAgent:E}),this.storage.data.new&&(this.storage.data.new=!1,this.storage.save()),this.map.hasCachedDate()&&this.app.fadeMenu()}},{key:"findPath",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=[];if(0===(a=this.pathfinder.find(this.map.grid,e.gridX,e.gridY,t,i,n)).length)return a;if("fishing"===o){var r=a[a.length-2];this.map.isColliding(r[0],r[1])&&a.pop()}return a}},{key:"updateCameraBounds",value:function(){if(this.zoning){var e=this.player.gridX-this.camera.gridX,t=this.player.gridY-this.camera.gridY;0===e?this.zoning.setLeft():e===this.camera.gridWidth-2?this.zoning.setRight():0===t?this.zoning.setUp():t===this.camera.gridHeight-2&&this.zoning.setDown(),null!==this.zoning.direction&&(this.camera.zone(this.zoning.getDirection()),this.renderer.updateAnimatedTiles(),this.zoning.reset())}}},{key:"respawn",value:function(){this.audio.playSound("revive"),this.app.body.classList.remove("death"),this.socket.send(ze.Respawn,[])}},{key:"resize",value:function(){this.renderer.resize(),this.pointer.resize(),this.menu.resize()}},{key:"getEntityAt",value:function(e,t){if(this.entities){var i=this.entities.grids.renderingGrid[t][e],n=Object.keys(i),o=n.indexOf(this.player.instance);return-1!==o&&n.splice(o,1),i[n[0]]}}},{key:"searchForEntityAt",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=this.entities.grids.getEntitiesAround(e.gridX,e.gridY,i),o=w(n);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(e.x>=a.x+a.sprite.offsetX&&e.x<=a.x+a.sprite.offsetX+a.sprite.width&&e.y>=a.y+a.sprite.offsetY&&e.y<=a.y+a.sprite.offsetY+a.sprite.height)return a}}catch(zn){o.e(zn)}finally{o.f()}}},{key:"teleport",value:function(e,t,i){this.entities.unregisterPosition(e),e.setGridPosition(t,i),this.entities.registerPosition(e),e.frozen=!1,e.teleporting=!1,e.instance===this.player.instance&&(e.clearHealthBar(),this.player.moving=!1,this.player.disableAction=!1,this.camera.centreOn(this.player),this.renderer.updateAnimatedTiles())}},{key:"zoom",value:function(e){this.camera.zoom(e),this.storage.setZoom(this.camera.zoomFactor),this.renderer.resize()}}]),e}(),Tr=Object.prototype.toString;function Yr(e,t){return Tr.call(e)==="[object ".concat(t,"]")}function Ir(e){return Yr(e,"String")}function Xr(e){return Yr(e,"Object")}function zr(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Ar(e,t){try{return e instanceof t}catch(i){return!1}}function Lr(e){return e&&e.Math==Math?e:void 0}var qr="object"==("undefined"==typeof globalThis?"undefined":h(globalThis))&&Lr(globalThis)||"object"==("undefined"==typeof window?"undefined":h(window))&&Lr(window)||"object"==("undefined"==typeof self?"undefined":h(self))&&Lr(self)||"object"==("undefined"==typeof global?"undefined":h(global))&&Lr(global)||function(){return this}()||{};function Dr(){return qr}function Pr(e,t,i){var n=i||qr,o=n.__SENTRY__=n.__SENTRY__||{};return o[e]||(o[e]=t())}var Rr,Mr="Sentry Logger ",Nr=["debug","info","warn","error","log","assert","trace"];function Or(e){if(!("console"in qr))return e();var t=qr.console,i={};Nr.forEach((function(e){var n=t[e]&&t[e].__sentry_original__;e in t&&n&&(i[e]=t[e],t[e]=n)}));try{return e()}finally{Object.keys(i).forEach((function(e){t[e]=i[e]}))}}function Br(){var e=!1,t={enable:function(){e=!0},disable:function(){e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Nr.forEach((function(i){t[i]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e&&Or((function(){var e;(e=qr.console)[i].apply(e,["".concat(Mr,"[").concat(i,"]:")].concat(n))}))}})):Nr.forEach((function(e){t[e]=function(){}})),t}function Fr(e,t,i){if(t in e){var n=e[t],o=i(n);if("function"==typeof o)try{!function(e,t){var i=t.prototype||{};e.prototype=t.prototype=i,function(e,t,i){Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0})}(e,"__sentry_original__",t)}(o,n)}catch(a){}e[t]=o}}function jr(e){return Hr(e,new Map)}function Hr(e,t){if(Xr(e)){var i=t.get(e);if(void 0!==i)return i;var n={};t.set(e,n);for(var o=0,a=Object.keys(e);o<a.length;o++){var r=a[o];void 0!==e[r]&&(n[r]=Hr(e[r],t))}return n}if(Array.isArray(e)){var s=t.get(e);if(void 0!==s)return s;var l=[];return t.set(e,l),e.forEach((function(e){l.push(Hr(e,t))})),l}return e}Rr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Pr("logger",Br):Br();var Ur="<anonymous>";function Gr(e){try{return e&&"function"==typeof e&&e.name||Ur}catch(Ra){return Ur}}var Wr=Dr();function Vr(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Zr(){if(!function(){if(!("fetch"in Wr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(Ra){return!1}}())return!1;if(Vr(Wr.fetch))return!0;var e=!1,t=Wr.document;if(t&&"function"==typeof t.createElement)try{var i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(e=Vr(i.contentWindow.fetch)),t.head.removeChild(i)}catch(zn){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",zn)}return e}var Kr,$r=Dr(),Qr={},Jr={};function es(e){if(!Jr[e])switch(Jr[e]=!0,e){case"console":!function(){if(!("console"in $r))return;Nr.forEach((function(e){e in $r.console&&Fr($r.console,e,(function(t){return function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];is("console",{args:n,level:e}),t&&t.apply($r.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in $r))return;var e=is.bind(null,"dom"),t=cs(e,!0);$r.document.addEventListener("click",t,!1),$r.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var i=$r[t]&&$r[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(Fr(i,"addEventListener",(function(t){return function(i,n,o){if("click"===i||"keypress"==i)try{var a=this,r=a.__sentry_instrumentation_handlers__=a.__sentry_instrumentation_handlers__||{},s=r[i]=r[i]||{refCount:0};if(!s.handler){var l=cs(e);s.handler=l,t.call(this,i,l,o)}s.refCount++}catch(Ra){}return t.call(this,i,n,o)}})),Fr(i,"removeEventListener",(function(e){return function(t,i,n){if("click"===t||"keypress"==t)try{var o=this,a=o.__sentry_instrumentation_handlers__||{},r=a[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,n),r.handler=void 0,delete a[t]),0===Object.keys(a).length&&delete o.__sentry_instrumentation_handlers__)}catch(Ra){}return e.call(this,t,i,n)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in $r))return;var e=XMLHttpRequest.prototype;Fr(e,"open",(function(e){return function(){for(var t=this,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=n[1],r=this.__sentry_xhr__={method:Ir(n[0])?n[0].toUpperCase():n[0],url:n[1]};Ir(a)&&"POST"===r.method&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);var s=function(){var e=t.__sentry_xhr__;if(e&&4===t.readyState){try{e.status_code=t.status}catch(Ra){}is("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:t})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Fr(this,"onreadystatechange",(function(e){return function(){s();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i)}})):this.addEventListener("readystatechange",s),e.apply(this,n)}})),Fr(e,"send",(function(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.__sentry_xhr__&&void 0!==i[0]&&(this.__sentry_xhr__.body=i[0]),is("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),e.apply(this,i)}}))}();break;case"fetch":!function(){if(!Zr())return;Fr($r,"fetch",(function(e){return function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var a={args:n,fetchData:{method:ns(n),url:os(n)},startTimestamp:Date.now()};return is("fetch",t({},a)),e.apply($r,n).then((function(e){return is("fetch",t(t({},a),{},{endTimestamp:Date.now(),response:e})),e}),(function(e){throw is("fetch",t(t({},a),{},{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function(){if(e=Wr.chrome,t=e&&e.app&&e.app.runtime,i="history"in Wr&&!!Wr.history.pushState&&!!Wr.history.replaceState,t||!i)return;var e,t,i;var n=$r.onpopstate;function o(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var o=i.length>2?i[2]:void 0;if(o){var a=Kr,r=String(o);Kr=r,is("history",{from:a,to:r})}return e.apply(this,i)}}$r.onpopstate=function(){var e=$r.location.href,t=Kr;if(Kr=e,is("history",{from:t,to:e}),n)try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n.apply(this,o)}catch(r){}},Fr($r.history,"pushState",o),Fr($r.history,"replaceState",o)}();break;case"error":ds=$r.onerror,$r.onerror=function(e,t,i,n,o){return is("error",{column:n,error:o,line:i,msg:e,url:t}),!!ds&&ds.apply(this,arguments)};break;case"unhandledrejection":us=$r.onunhandledrejection,$r.onunhandledrejection=function(e){return is("unhandledrejection",e),!us||us.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("unknown instrumentation type:",e))}}function ts(e,t){Qr[e]=Qr[e]||[],Qr[e].push(t),es(e)}function is(e,t){if(e&&Qr[e]){var i,n=w(Qr[e]||[]);try{for(n.s();!(i=n.n()).done;){var o=i.value;try{o(t)}catch(Ra){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Gr(o),"\nError:"),Ra)}}}catch(zn){n.e(zn)}finally{n.f()}}}function ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"Request"in $r&&Ar(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"string"==typeof e[0]?e[0]:"Request"in $r&&Ar(e[0],Request)?e[0].url:String(e[0])}var as,rs;function ss(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(Ra){}return!1}function ls(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(Ra){}return!0}function cs(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(i){if(i&&rs!==i&&!ls(i)){var n="keypress"===i.type?"input":i.type;(void 0===as||ss(rs,i))&&(e({event:i,name:n,global:t}),rs=i),clearTimeout(as),as=$r.setTimeout((function(){as=void 0}),1e3)}}}var ds=null;var hs,us=null;function ps(){var e=qr,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");var i=t&&t.getRandomValues?function(){return t.getRandomValues(new Uint8Array(1))[0]}:function(){return 16*Math.random()};return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(function(e){return(e^(15&i())>>e/4).toString(16)}))}function fs(e){return Array.isArray(e)?e:[e]}function gs(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function ms(e,t){return e.require(t)}function vs(e){var t;try{t=ms(o,e)}catch(Ra){}try{var i=ms(o,"process").cwd;t=ms(o,"".concat(i(),"/node_modules/").concat(e))}catch(Ra){}return t}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(hs||(hs={}));var bs=function(){function e(t){v(this,e),e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),e.prototype.__init5.call(this),e.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(Ra){this._reject(Ra)}}return k(e,[{key:"__init",value:function(){this._state=hs.PENDING}},{key:"__init2",value:function(){this._handlers=[]}},{key:"then",value:function(t,i){var n=this;return new e((function(e,o){n._handlers.push([!1,function(i){if(t)try{e(t(i))}catch(Ra){o(Ra)}else e(i)},function(t){if(i)try{e(i(t))}catch(Ra){o(Ra)}else o(t)}]),n._executeHandlers()}))}},{key:"catch",value:function(e){return this.then((function(e){return e}),e)}},{key:"finally",value:function(t){var i=this;return new e((function(e,n){var o,a;return i.then((function(e){a=!1,o=e,t&&t()}),(function(e){a=!0,o=e,t&&t()})).then((function(){a?n(o):e(o)}))}))}},{key:"__init3",value:function(){var e=this;this._resolve=function(t){e._setResult(hs.RESOLVED,t)}}},{key:"__init4",value:function(){var e=this;this._reject=function(t){e._setResult(hs.REJECTED,t)}}},{key:"__init5",value:function(){var e=this;this._setResult=function(t,i){e._state===hs.PENDING&&(zr(i)?i.then(e._resolve,e._reject):(e._state=t,e._value=i,e._executeHandlers()))}}},{key:"__init6",value:function(){var e=this;this._executeHandlers=function(){if(e._state!==hs.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t[0]||(e._state===hs.RESOLVED&&t[1](e._value),e._state===hs.REJECTED&&t[2](e._value),t[0]=!0)}))}}}}]),e}();function ks(e){return e.split(/[\?#]/,1)[0]}function xs(e){return e.split(/\\?\//).filter((function(e){return e.length>0&&","!==e})).length}var ws=Dr(),ys={nowSeconds:function(){return Date.now()/1e3}};var _s=gs()?function(){try{return ms(o,"perf_hooks").performance}catch(e){return}}():function(){var e=ws.performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),Ss=void 0===_s?ys:{nowSeconds:function(){return(_s.timeOrigin+_s.now())/1e3}},Cs=ys.nowSeconds.bind(ys),Es=Ss.nowSeconds.bind(Ss),Ts=Es;!function(){var e=ws.performance;if(e&&e.now){var t=36e5,i=e.now(),n=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+i-n):t,a=o<t,r=e.timing&&e.timing.navigationStart,s="number"==typeof r?Math.abs(r+i-n):t;(a||s<t)&&(o<=s&&e.timeOrigin)}}();var Ys="production";function Is(e){var t=Es(),i={sid:ps(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:function(){return function(e){return jr({sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?"".concat(e.did):void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(i)}};return e&&Xs(i,e),i}function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Es(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ps()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{var i=e.timestamp-e.started;e.duration=i>=0?i:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}var zs=function(){function e(){v(this,e),this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return k(e,[{key:"addScopeListener",value:function(e){this._scopeListeners.push(e)}},{key:"addEventProcessor",value:function(e){return this._eventProcessors.push(e),this}},{key:"setUser",value:function(e){return this._user=e||{},this._session&&Xs(this._session,{user:e}),this._notifyScopeListeners(),this}},{key:"getUser",value:function(){return this._user}},{key:"getRequestSession",value:function(){return this._requestSession}},{key:"setRequestSession",value:function(e){return this._requestSession=e,this}},{key:"setTags",value:function(e){return this._tags=t(t({},this._tags),e),this._notifyScopeListeners(),this}},{key:"setTag",value:function(e,i){return this._tags=t(t({},this._tags),{},p({},e,i)),this._notifyScopeListeners(),this}},{key:"setExtras",value:function(e){return this._extra=t(t({},this._extra),e),this._notifyScopeListeners(),this}},{key:"setExtra",value:function(e,i){return this._extra=t(t({},this._extra),{},p({},e,i)),this._notifyScopeListeners(),this}},{key:"setFingerprint",value:function(e){return this._fingerprint=e,this._notifyScopeListeners(),this}},{key:"setLevel",value:function(e){return this._level=e,this._notifyScopeListeners(),this}},{key:"setTransactionName",value:function(e){return this._transactionName=e,this._notifyScopeListeners(),this}},{key:"setContext",value:function(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}},{key:"setSpan",value:function(e){return this._span=e,this._notifyScopeListeners(),this}},{key:"getSpan",value:function(){return this._span}},{key:"getTransaction",value:function(){var e=this.getSpan();return e&&e.transaction}},{key:"setSession",value:function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}},{key:"getSession",value:function(){return this._session}},{key:"update",value:function(i){if(!i)return this;if("function"==typeof i){var n=i(this);return n instanceof e?n:this}return i instanceof e?(this._tags=t(t({},this._tags),i._tags),this._extra=t(t({},this._extra),i._extra),this._contexts=t(t({},this._contexts),i._contexts),i._user&&Object.keys(i._user).length&&(this._user=i._user),i._level&&(this._level=i._level),i._fingerprint&&(this._fingerprint=i._fingerprint),i._requestSession&&(this._requestSession=i._requestSession)):Xr(i)&&(this._tags=t(t({},this._tags),i.tags),this._extra=t(t({},this._extra),i.extra),this._contexts=t(t({},this._contexts),i.contexts),i.user&&(this._user=i.user),i.level&&(this._level=i.level),i.fingerprint&&(this._fingerprint=i.fingerprint),i.requestSession&&(this._requestSession=i.requestSession)),this}},{key:"clear",value:function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}},{key:"addBreadcrumb",value:function(e,n){var o="number"==typeof n?n:100;if(o<=0)return this;var a=t({timestamp:Cs()},e);return this._breadcrumbs=[].concat(i(this._breadcrumbs),[a]).slice(-o),this._notifyScopeListeners(),this}},{key:"getLastBreadcrumb",value:function(){return this._breadcrumbs[this._breadcrumbs.length-1]}},{key:"clearBreadcrumbs",value:function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}},{key:"addAttachment",value:function(e){return this._attachments.push(e),this}},{key:"getAttachments",value:function(){return this._attachments}},{key:"clearAttachments",value:function(){return this._attachments=[],this}},{key:"applyToEvent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._extra&&Object.keys(this._extra).length&&(e.extra=t(t({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=t(t({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=t(t({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=t(t({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=t({trace:this._span.getTraceContext()},e.contexts);var o=this._span.transaction&&this._span.transaction.name;o&&(e.tags=t({transaction:o},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=[].concat(i(e.breadcrumbs||[]),i(this._breadcrumbs)),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=t(t({},e.sdkProcessingMetadata),this._sdkProcessingMetadata),this._notifyEventProcessors([].concat(i(As()),i(this._eventProcessors)),e,n)}},{key:"setSDKProcessingMetadata",value:function(e){return this._sdkProcessingMetadata=t(t({},this._sdkProcessingMetadata),e),this}},{key:"_notifyEventProcessors",value:function(e,i,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new bs((function(r,s){var l=e[a];if(null===i||"function"!=typeof l)r(i);else{var c=l(t({},i),n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.id&&null===c&&Rr.log('Event processor "'.concat(l.id,'" dropped event')),zr(c)?c.then((function(t){return o._notifyEventProcessors(e,t,n,a+1).then(r)})).then(null,s):o._notifyEventProcessors(e,c,n,a+1).then(r).then(null,s)}}))}},{key:"_notifyScopeListeners",value:function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)}},{key:"_applyFingerprint",value:function(e){e.fingerprint=e.fingerprint?fs(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}],[{key:"clone",value:function(n){var o=new e;return n&&(o._breadcrumbs=i(n._breadcrumbs),o._tags=t({},n._tags),o._extra=t({},n._extra),o._contexts=t({},n._contexts),o._user=n._user,o._level=n._level,o._span=n._span,o._session=n._session,o._transactionName=n._transactionName,o._fingerprint=n._fingerprint,o._eventProcessors=i(n._eventProcessors),o._requestSession=n._requestSession,o._attachments=i(n._attachments),o._sdkProcessingMetadata=t({},n._sdkProcessingMetadata)),o}}]),e}();function As(){return Pr("globalEventProcessors",(function(){return[]}))}var Ls=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;v(this,e),this._version=n,this._stack=[{scope:i}],t&&this.bindClient(t)}return k(e,[{key:"isOlderThan",value:function(e){return this._version<e}},{key:"bindClient",value:function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}},{key:"pushScope",value:function(){var e=zs.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}},{key:"popScope",value:function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}},{key:"withScope",value:function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}}},{key:"getClient",value:function(){return this.getStackTop().client}},{key:"getScope",value:function(){return this.getStackTop().scope}},{key:"getStack",value:function(){return this._stack}},{key:"getStackTop",value:function(){return this._stack[this._stack.length-1]}},{key:"captureException",value:function(e,i){var n=this._lastEventId=i&&i.event_id?i.event_id:ps(),o=new Error("Sentry syntheticException");return this._withClient((function(a,r){a.captureException(e,t(t({originalException:e,syntheticException:o},i),{},{event_id:n}),r)})),n}},{key:"captureMessage",value:function(e,i,n){var o=this._lastEventId=n&&n.event_id?n.event_id:ps(),a=new Error(e);return this._withClient((function(r,s){r.captureMessage(e,i,t(t({originalException:e,syntheticException:a},n),{},{event_id:o}),s)})),o}},{key:"captureEvent",value:function(e,i){var n=i&&i.event_id?i.event_id:ps();return e.type||(this._lastEventId=n),this._withClient((function(o,a){o.captureEvent(e,t(t({},i),{},{event_id:n}),a)})),n}},{key:"lastEventId",value:function(){return this._lastEventId}},{key:"addBreadcrumb",value:function(e,i){var n=this.getStackTop(),o=n.scope,a=n.client;if(a){var r=a.getOptions&&a.getOptions()||{},s=r.beforeBreadcrumb,l=void 0===s?null:s,c=r.maxBreadcrumbs,d=void 0===c?100:c;if(!(d<=0)){var h=t({timestamp:Cs()},e),u=l?Or((function(){return l(h,i)})):h;null!==u&&(a.emit&&a.emit("beforeAddBreadcrumb",u,i),o.addBreadcrumb(u,d))}}}},{key:"setUser",value:function(e){this.getScope().setUser(e)}},{key:"setTags",value:function(e){this.getScope().setTags(e)}},{key:"setExtras",value:function(e){this.getScope().setExtras(e)}},{key:"setTag",value:function(e,t){this.getScope().setTag(e,t)}},{key:"setExtra",value:function(e,t){this.getScope().setExtra(e,t)}},{key:"setContext",value:function(e,t){this.getScope().setContext(e,t)}},{key:"configureScope",value:function(e){var t=this.getStackTop(),i=t.scope;t.client&&e(i)}},{key:"run",value:function(e){var t=Ds(this);try{e(this)}finally{Ds(t)}}},{key:"getIntegration",value:function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(i){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Cannot retrieve integration ".concat(e.id," from the current Hub")),null}}},{key:"startTransaction",value:function(e,t){return this._callExtensionMethod("startTransaction",e,t)}},{key:"traceHeaders",value:function(){return this._callExtensionMethod("traceHeaders")}},{key:"captureSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return this.endSession();this._sendSessionUpdate()}},{key:"endSession",value:function(){var e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){var i={};t?i={status:t}:"ok"===e.status&&(i={status:"exited"}),Xs(e,i)}(t),this._sendSessionUpdate(),e.setSession()}},{key:"startSession",value:function(e){var i=this.getStackTop(),n=i.scope,o=i.client,a=o&&o.getOptions()||{},r=a.release,s=a.environment,l=void 0===s?Ys:s,c=(qr.navigator||{}).userAgent,d=Is(t(t({release:r,environment:l,user:n.getUser()},c&&{userAgent:c}),e)),h=n.getSession&&n.getSession();return h&&"ok"===h.status&&Xs(h,{status:"exited"}),this.endSession(),n.setSession(d),d}},{key:"shouldSendDefaultPii",value:function(){var e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}},{key:"_sendSessionUpdate",value:function(){var e=this.getStackTop(),t=e.scope,i=e.client;if(t){var n=t.getSession();n&&i&&i.captureSession&&i.captureSession(n)}}},{key:"_withClient",value:function(e){var t=this.getStackTop(),i=t.scope,n=t.client;n&&e(n,i)}},{key:"_callExtensionMethod",value:function(e){var t=qs(),i=t.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e]){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return i.extensions[e].apply(this,o)}("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Extension method ".concat(e," couldn't be found, doing nothing."))}}]),e}();function qs(){return qr.__SENTRY__=qr.__SENTRY__||{extensions:{},hub:void 0},qr}function Ds(e){var t=qs(),i=Ms(t);return Ns(t,e),i}function Ps(){var e=qs();return Rs(e)&&!Ms(e).isOlderThan(4)||Ns(e,new Ls),gs()?function(e){try{var t=qs().__SENTRY__,i=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!i)return Ms(e);if(!Rs(i)||Ms(i).isOlderThan(4)){var n=Ms(e).getStackTop();Ns(i,new Ls(n.client,zs.clone(n.scope)))}return Ms(i)}catch(o){return Ms(e)}}(e):Ms(e)}function Rs(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Ms(e){return Pr("hub",(function(){return new Ls}),e)}function Ns(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}var Os=!1;function Bs(){var e,t=(e||Ps()).getScope().getTransaction();if(t){var i="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Transaction: ".concat(i," -> Global error occured")),t.setStatus(i)}}Bs.tag="sentry_tracingErrorCallback";var Fs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;v(this,e),e.prototype.__init.call(this),this._maxlen=t}return k(e,[{key:"__init",value:function(){this.spans=[]}},{key:"add",value:function(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}]),e}();var js=function(e){a(o,e);var i=s(o);function o(e,n){var a;v(this,o),a=i.call(this,e),o.prototype.__init.call(c(a)),o.prototype.__init2.call(c(a)),o.prototype.__init3.call(c(a)),a._hub=n||Ps(),a._name=e.name||"",a.metadata=t(t({source:"custom"},e.metadata),{},{spanMetadata:{}}),a._trimEnd=e.trimEnd,a.transaction=c(a);var r=a.metadata.dynamicSamplingContext;return r&&(a._frozenDynamicSamplingContext=t({},r)),a}return k(o,[{key:"__init",value:function(){this._measurements={}}},{key:"__init2",value:function(){this._contexts={}}},{key:"__init3",value:function(){this._frozenDynamicSamplingContext=void 0}},{key:"name",get:function(){return this._name},set:function(e){this.setName(e)}},{key:"setName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";this._name=e,this.metadata.source=t}},{key:"initSpanRecorder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.spanRecorder||(this.spanRecorder=new Fs(e)),this.spanRecorder.add(this)}},{key:"setContext",value:function(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}},{key:"setMeasurement",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._measurements[e]={value:t,unit:i}}},{key:"setMetadata",value:function(e){this.metadata=t(t({},this.metadata),e)}},{key:"finish",value:function(e){var i=this;if(void 0===this.endTimestamp){this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),n(d(o.prototype),"finish",this).call(this,e);var a=this._hub.getClient();if(a&&a.emit&&a.emit("finishTransaction",this),!0!==this.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(a&&a.recordDroppedEvent("sample_rate","transaction"));var r=this.spanRecorder?this.spanRecorder.spans.filter((function(e){return e!==i&&e.endTimestamp})):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((function(e,t){return e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e})).endTimestamp);var s=this.metadata,l=t({contexts:t(t({},this._contexts),{},{trace:this.getTraceContext()}),spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:t(t({},s),{},{dynamicSamplingContext:this.getDynamicSamplingContext()})},s.source&&{transaction_info:{source:s.source}});return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),l.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Finishing ".concat(this.op," transaction: ").concat(this.name,".")),this._hub.captureEvent(l)}}},{key:"toContext",value:function(){return jr(t(t({},n(d(o.prototype),"toContext",this).call(this)),{},{name:this.name,trimEnd:this._trimEnd}))}},{key:"updateWithContext",value:function(e){return n(d(o.prototype),"updateWithContext",this).call(this,e),this.name=e.name||"",this._trimEnd=e.trimEnd,this}},{key:"getDynamicSamplingContext",value:function(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;var e=this._hub||Ps(),t=e&&e.getClient();if(!t)return{};var i=t.getOptions()||{},n=i.environment,o=i.release,a=(t.getDsn()||{}).publicKey,r=this.metadata.sampleRate,s=void 0!==r?r.toString():void 0,l=(e.getScope().getUser()||{}).segment,c=this.metadata.source,d=c&&"url"!==c?this.name:void 0,h=jr({environment:n||Ys,release:o,transaction:d,user_segment:l,public_key:a,trace_id:this.traceId,sample_rate:s});return t.emit&&t.emit("createDsc",h),h}},{key:"setHub",value:function(e){this._hub=e}}]),o}(function(){function e(t){if(v(this,e),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),e.prototype.__init5.call(this),e.prototype.__init6.call(this),e.prototype.__init7.call(this),!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp),t.instrumenter&&(this.instrumenter=t.instrumenter)}return k(e,[{key:"__init2",value:function(){this.traceId=ps()}},{key:"__init3",value:function(){this.spanId=ps().substring(16)}},{key:"__init4",value:function(){this.startTimestamp=Ts()}},{key:"__init5",value:function(){this.tags={}}},{key:"__init6",value:function(){this.data={}}},{key:"__init7",value:function(){this.instrumenter="sentry"}},{key:"startChild",value:function(i){var n=new e(t(t({},i),{},{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.transaction){var o=i&&i.op||"< unknown op >",a=n.transaction.name||"< unknown name >",r=n.transaction.spanId,s="[Tracing] Starting '".concat(o,"' span on transaction '").concat(a,"' (").concat(r,").");n.transaction.metadata.spanMetadata[n.spanId]={logMessage:s},Rr.log(s)}return n}},{key:"setTag",value:function(e,i){return this.tags=t(t({},this.tags),{},p({},e,i)),this}},{key:"setData",value:function(e,i){return this.data=t(t({},this.data),{},p({},e,i)),this}},{key:"setStatus",value:function(e){return this.status=e,this}},{key:"setHttpStatus",value:function(e){this.setTag("http.status_code",String(e));var t=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(e);return"unknown_error"!==t&&this.setStatus(t),this}},{key:"isSuccess",value:function(){return"ok"===this.status}},{key:"finish",value:function(e){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){var t=this.transaction.metadata.spanMetadata[this.spanId].logMessage;t&&Rr.log(t.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof e?e:Ts()}},{key:"toTraceparent",value:function(){var e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),"".concat(this.traceId,"-").concat(this.spanId).concat(e)}},{key:"toContext",value:function(){return jr({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}},{key:"updateWithContext",value:function(e){return this.data=e.data||{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=e.spanId||this.spanId,this.startTimestamp=e.startTimestamp||this.startTimestamp,this.status=e.status,this.tags=e.tags||{},this.traceId=e.traceId||this.traceId,this}},{key:"getTraceContext",value:function(){return jr({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}},{key:"toJSON",value:function(){return jr({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}]),e}()),Hs={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3};function Us(){var e=this.getScope().getSpan();return e?{"sentry-trace":e.toTraceparent()}:{}}function Gs(e,t,i){return function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;var t=Ps().getClient(),i=e||t&&t.getOptions();return!!i&&(i.enableTracing||"tracesSampleRate"in i||"tracesSampler"in i)}(t)?void 0!==e.sampled?(e.setMetadata({sampleRate:Number(e.sampled)}),e):("function"==typeof t.tracesSampler?(n=t.tracesSampler(i),e.setMetadata({sampleRate:Number(n)})):void 0!==i.parentSampled?n=i.parentSampled:void 0!==t.tracesSampleRate?(n=t.tracesSampleRate,e.setMetadata({sampleRate:Number(n)})):(n=1,e.setMetadata({sampleRate:n})),function(e){if(t=e,"number"==typeof t&&t!=t||"number"!=typeof e&&"boolean"!=typeof e)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(e)," of type ").concat(JSON.stringify(h(e)),".")),!1;var t;if(e<0||e>1)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ".concat(e,".")),!1;return!0}(n)?n?(e.sampled=Math.random()<n,e.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] starting ".concat(e.op," transaction - ").concat(e.name)),e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(n),")")),e)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Discarding transaction because ".concat("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)):(e.sampled=!1,e);var n}function Ws(e,i){var n=this.getClient(),o=n&&n.getOptions()||{},a=o.instrumenter||"sentry",r=e.instrumenter||"sentry";a!==r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("A transaction was started with instrumenter=`".concat(r,"`, but the SDK is configured with the `").concat(a,"` instrumenter.\nThe transaction will not be sampled. Please use the ").concat(a," instrumentation to start transactions.")),e.sampled=!1);var s=new js(e,this);return(s=Gs(s,o,t({parentSampled:e.parentSampled,transactionContext:e},i))).sampled&&s.initSpanRecorder(o._experiments&&o._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",s),s}function Vs(){var e=qs();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Ws),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Us),Os||(Os=!0,ts("error",Bs),ts("unhandledrejection",Bs)))}function Zs(e){for(var t=void 0,i=e[0],n=1;n<e.length;){var o=e[n],a=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==i)return;"access"===o||"optionalAccess"===o?(t=i,i=a(i)):"call"!==o&&"optionalCall"!==o||(i=a((function(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=i).call.apply(e,[t].concat(o))})),t=void 0)}return i}function Ks(e){var t=Zs([e,"call",function(e){return e()},"access",function(e){return e.getClient},"call",function(e){return e()},"optionalAccess",function(e){return e.getOptions},"call",function(e){return e()}]);return"sentry"!==(Zs([t,"optionalAccess",function(e){return e.instrumenter}])||"sentry")}var $s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),e.prototype.__init.call(this),this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){this._router?Ks(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Express Integration is skipped because of instrumenter configuration."):(function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){return el(e,t)}))}(this._router,this._methods),function(e){var t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();var n=t?e._router:e;if(!n)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.debug("Routing instrumentation is currently only supported in Express 4."));var o=Object.getPrototypeOf(n),a=o.process_params;o.process_params=function(e,t,n,o,r){n._reconstructedRoute||(n._reconstructedRoute="");var s=function(e){var t=Zs([e,"access",function(e){return e.route},"optionalAccess",function(e){return e.path}]),i=(o=t,Yr(o,"RegExp")),n=Array.isArray(t);var o;if(!t)return{isRegex:i,isArray:n,numExtraSegments:0};var a=n?Math.max((r=t,r.reduce((function(e,t){return e+xs(t.toString())}),0)-xs(e.path||"")),0):0;var r;return{layerRoutePath:tl(n,t),isRegex:i,isArray:n,numExtraSegments:a}}(e),l=s.layerRoutePath,c=s.isRegex,d=s.isArray,h=s.numExtraSegments;(l||c||d)&&(n._hasParameters=!0);var u=(l||e.path||"").split("/").filter((function(e){return e.length>0&&(c||d||!e.includes("*"))})).join("/");if(u&&u.length>0&&(n._reconstructedRoute+="/".concat(u).concat(c?"/":"")),xs(n.originalUrl||"")+h===xs(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl);var p=o.__sentry_transaction;if(p&&"custom"!==p.metadata.source){var f=n._reconstructedRoute||"/";p.setName.apply(p,i(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.method&&e.method.toUpperCase(),n="",o="url";t.customRoute||e.route?(n=t.customRoute||"".concat(e.baseUrl||"").concat(e.route&&e.route.path),o="route"):(e.originalUrl||e.url)&&(n=ks(e.originalUrl||e.url||""));var a="";return t.method&&i&&(a+=i),t.method&&t.path&&(a+=" "),t.path&&n&&(a+=n),[a,o]}(n,{path:!0,method:!0,customRoute:f})))}}return a.call(this,e,t,n,o,r)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("ExpressIntegration is missing an Express instance")}}],[{key:"__initStatic",value:function(){this.id="Express"}}]),e}();function Qs(e,t){var i=e.length;switch(i){case 2:return function(i,n){var o=n.__sentry_transaction;if(o){var a=o.startChild({description:e.name,op:"middleware.express.".concat(t)});n.once("finish",(function(){a.finish()}))}return e.call(this,i,n)};case 3:return function(i,n,o){var a=Zs([n.__sentry_transaction,"optionalAccess",function(e){return e.startChild},"call",function(i){return i({description:e.name,op:"middleware.express.".concat(t)})}]);e.call(this,i,n,(function(){Zs([a,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.call.apply(o,[this].concat(t))}))};case 4:return function(i,n,o,a){var r=Zs([o.__sentry_transaction,"optionalAccess",function(e){return e.startChild},"call",function(i){return i({description:e.name,op:"middleware.express.".concat(t)})}]);e.call(this,i,n,o,(function(){Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.call.apply(a,[this].concat(t))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: ".concat(i))}}function Js(e,t){return e.map((function(e){return"function"==typeof e?Qs(e,t):Array.isArray(e)?e.map((function(e){return"function"==typeof e?Qs(e,t):e})):e}))}function el(e,t){var n=e[t];return e[t]=function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n.call.apply(n,[this].concat(i(Js(o,t))))},e}function tl(e,t){return e?t.map((function(e){return e.toString()})).join(","):t&&t.toString()}$s.__initStatic();var il=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),e.prototype.__init.call(this),this._usePgNative=!!t.usePgNative}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){if(Ks(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Postgres Integration is skipped because of instrumenter configuration.");else{var i=vs("pg");if(i)if(!this._usePgNative||Zs([i,"access",function(e){return e.native},"optionalAccess",function(e){return e.Client}]))Fr((this._usePgNative?i.native:i).Client.prototype,"query",(function(e){return function(i,n,o){var a=Zs([t().getScope(),"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]),r=Zs([a,"optionalAccess",function(e){return e.startChild},"call",function(e){return e({description:"string"==typeof i?i:i.text,op:"db"})}]);if("function"==typeof o)return e.call(this,i,n,(function(e,t){Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),o(e,t)}));if("function"==typeof n)return e.call(this,i,(function(e,t){Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),n(e,t)}));var s=void 0!==n?e.call(this,i,n):e.call(this,i);return zr(s)?s.then((function(e){return Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),e})):(Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),s)}}));else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Postgres Integration was unable to access 'pg-native' bindings.");else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Postgres Integration was unable to require `pg` package.")}}}],[{key:"__initStatic",value:function(){this.id="Postgres"}}]),e}();il.__initStatic();var nl=function(){function e(){v(this,e),e.prototype.__init.call(this)}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){if(Ks(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Mysql Integration is skipped because of instrumenter configuration.");else{var i=vs("mysql/lib/Connection.js");i?Fr(i,"createQuery",(function(e){return function(i,n,o){var a=Zs([t().getScope(),"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]),r=Zs([a,"optionalAccess",function(e){return e.startChild},"call",function(e){return e({description:"string"==typeof i?i:i.sql,op:"db"})}]);return"function"==typeof o?e.call(this,i,n,(function(e,t,i){Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),o(e,t,i)})):"function"==typeof n?e.call(this,i,(function(e,t,i){Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),n(e,t,i)})):e.call(this,i,n,o)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Mysql Integration was unable to require `mysql` package.")}}}],[{key:"__initStatic",value:function(){this.id="Mysql"}}]),e}();nl.__initStatic();var ol=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],al={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function rl(e){return e&&"object"===h(e)&&e.once&&"function"==typeof e.once}var sl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),e.prototype.__init.call(this),this._operations=Array.isArray(t.operations)?t.operations:ol,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){if(Ks(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Mongo Integration is skipped because of instrumenter configuration.");else{var i=this._useMongoose?"mongoose":"mongodb",n=vs(i);n?this._instrumentOperations(n.Collection,this._operations,t):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Mongo Integration was unable to require `".concat(i,"` package."))}}},{key:"_instrumentOperations",value:function(e,t,i){var n=this;t.forEach((function(t){return n._patchOperation(e,t,i)}))}},{key:"_patchOperation",value:function(e,t,n){if(t in e.prototype){var o=this._getSpanContextFromOperationArguments.bind(this);Fr(e.prototype,t,(function(e){return function(){for(var a=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var c=s[s.length-1],d=n().getScope(),h=Zs([d,"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]);if("function"!=typeof c||"mapReduce"===t&&2===s.length){var u=Zs([h,"optionalAccess",function(e){return e.startChild},"call",function(e){return e(o(a,t,s))}]),p=e.call.apply(e,[this].concat(s));if(zr(p))return p.then((function(e){return Zs([u,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),e}));if(rl(p)){var f=p;try{f.once("close",(function(){Zs([u,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}])}))}catch(Ra){Zs([u,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}])}return f}return Zs([u,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),p}var g=Zs([h,"optionalAccess",function(e){return e.startChild},"call",function(e){return e(o(a,t,s.slice(0,-1)))}]);return e.call.apply(e,[this].concat(i(s.slice(0,-1)),[function(e,t){Zs([g,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),c(e,t)}]))}}))}}},{key:"_getSpanContextFromOperationArguments",value:function(e,t,i){var n={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},o={op:"db",description:t,data:n},a=al[t],r=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!a||!r)return o;try{if("mapReduce"===t){var s=u(i,2),l=s[0],c=s[1];n[a[0]]="string"==typeof l?l:l.name||"<anonymous>",n[a[1]]="string"==typeof c?c:c.name||"<anonymous>"}else for(var d=0;d<a.length;d++)n[a[d]]=JSON.stringify(i[d])}catch(h){}return o}}],[{key:"__initStatic",value:function(){this.id="Mongo"}}]),e}();function ll(e){return e&&!!e.$use}sl.__initStatic();var cl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),e.prototype.__init.call(this),ll(t.client)?this._client=t.client:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client: ".concat(JSON.stringify(t.client)))}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){this._client?Ks(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use((function(e,i){var n=Zs([t().getScope(),"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]),o=e.action,a=e.model,r=Zs([n,"optionalAccess",function(e){return e.startChild},"call",function(e){return e({description:a?"".concat(a," ").concat(o):o,op:"db.sql.prisma"})}]),s=i(e);return zr(s)?s.then((function(e){return Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),e})):(Zs([r,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),s)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("PrismaIntegration is missing a Prisma Client Instance")}}],[{key:"__initStatic",value:function(){this.id="Prisma"}}]),e}();cl.__initStatic();var dl=function(){function e(){v(this,e),e.prototype.__init.call(this)}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){if(Ks(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("GraphQL Integration is skipped because of instrumenter configuration.");else{var i=vs("graphql/execution/execute.js");i?Fr(i,"execute",(function(e){return function(){var i=t().getScope(),n=Zs([i,"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]),o=Zs([n,"optionalAccess",function(e){return e.startChild},"call",function(e){return e({description:"execute",op:"graphql.execute"})}]);Zs([i,"optionalAccess",function(e){return e.setSpan},"call",function(e){return e(o)}]);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];var l=e.call.apply(e,[this].concat(r));return zr(l)?l.then((function(e){return Zs([o,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),Zs([i,"optionalAccess",function(e){return e.setSpan},"call",function(e){return e(n)}]),e})):(Zs([o,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),Zs([i,"optionalAccess",function(e){return e.setSpan},"call",function(e){return e(n)}]),l)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("GraphQL Integration was unable to require graphql/execution package.")}}}],[{key:"__initStatic",value:function(){this.id="GraphQL"}}]),e}();dl.__initStatic();var hl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useNestjs:!1};v(this,e),e.prototype.__init.call(this),this._useNest=!!t.useNestjs}return k(e,[{key:"__init",value:function(){this.name=e.id}},{key:"setupOnce",value:function(e,t){if(Ks(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){var i=vs("@nestjs/graphql");if(!i)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));Fr(i.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(){Fr(this.resolversExplorerService,"explore",(function(e){return function(){return ul(fs(e.call(this)),t)}}));for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e.call.apply(e,[this].concat(n))}}))}else{var n=vs("apollo-server-core");if(!n)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.error("Apollo Integration was unable to require apollo-server-core package."));Fr(n.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(Rr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),Rr.warn()):this.config.modules&&Rr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),Rr.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);var i=fs(this.config.resolvers);return this.config.resolvers=ul(i,t),e.call(this)}}))}}}],[{key:"__initStatic",value:function(){this.id="Apollo"}}]),e}();function ul(e,t){return e.map((function(e){return Object.keys(e).forEach((function(i){Object.keys(e[i]).forEach((function(n){"function"==typeof e[i][n]&&function(e,t,i,n){Fr(e[t],i,(function(e){return function(){for(var o=Zs([n().getScope(),"optionalAccess",function(e){return e.getSpan},"call",function(e){return e()}]),a=Zs([o,"optionalAccess",function(e){return e.startChild},"call",function(e){return e({description:"".concat(t,".").concat(i),op:"graphql.resolve"})}]),r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var c=e.call.apply(e,[this].concat(s));return zr(c)?c.then((function(e){return Zs([a,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),e})):(Zs([a,"optionalAccess",function(e){return e.finish},"call",function(e){return e()}]),c)}}))}(e,i,n,t)}))})),e}))}hl.__initStatic();var pl=qr,fl=["localhost",/^\//],gl={traceFetch:!0,traceXHR:!0,tracingOrigins:fl,tracePropagationTargets:fl};t(t({},Hs),{},{markBackgroundTransactions:!0,routingInstrumentation:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(pl&&pl.location){var n,o=pl.location.href;t&&(n=e({name:pl.location.pathname,op:"pageload",metadata:{source:"url"}})),i&&ts("history",(function(t){var i=t.to,a=t.from;void 0===a&&o&&-1!==o.indexOf(i)?o=void 0:a!==i&&(o=void 0,n&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.log("[Tracing] Finishing current transaction with op: ".concat(n.op)),n.finish()),n=e({name:pl.location.pathname,op:"navigation",metadata:{source:"url"}}))}))}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Rr.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{}},gl),("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(Vs(),gs()&&function(){var e=qs();if(e.__SENTRY__){var t={mongodb:function(){return new(ms(o,"./node/integrations/mongo").Mongo)},mongoose:function(){return new(ms(o,"./node/integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(ms(o,"./node/integrations/mysql").Mysql)},pg:function(){return new(ms(o,"./node/integrations/postgres").Postgres)}},n=Object.keys(t).filter((function(e){return!!vs(e)})).map((function(e){try{return t[e]()}catch(Ra){return}})).filter((function(e){return e}));n.length>0&&(e.__SENTRY__.integrations=[].concat(i(e.__SENTRY__.integrations||[]),i(n)))}}());var ml=new je;new Er(ml);var vl=new Vt(ml),bl=new Kt(ml);"undefined"!=typeof window&&(window.leaderboards=vl,window.leaderboards2=bl)}}}))}();
//# sourceMappingURL=index-legacy-585d47fd.js.map
